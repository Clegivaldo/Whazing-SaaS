'use strict';const o=b,q=b;(function(c,d){const m=b,n=b,e=c();while(!![]){try{const f=parseInt(m(0x143))/0x1*(parseInt(n(0x137))/0x2)+-parseInt(n(0x12d))/0x3+-parseInt(m(0x135))/0x4+-parseInt(n(0x12b))/0x5+-parseInt(n(0x134))/0x6*(-parseInt(m(0x132))/0x7)+-parseInt(n(0x133))/0x8+-parseInt(n(0x141))/0x9*(-parseInt(n(0x13f))/0xa);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x7c31d));function b(c,d){const e=a();return b=function(f,g){f=f-0x12b;let h=e[f];return h;},b(c,d);}var __importDefault=this&&this[o(0x12e)]||function(c){const p=o;return c&&c[p(0x139)]?c:{'default':c};};Object['defineProperty'](exports,o(0x139),{'value':!![]});const Contact_1=__importDefault(require(o(0x131))),Setting_1=__importDefault(require('../models/Setting')),ChatFlow_1=__importDefault(require(q(0x147))),CreateLogTicketService_1=__importDefault(require(q(0x148))),IsContactTest_1=__importDefault(require(o(0x144))),ShowWhatsAppService_1=__importDefault(require('../services/WhatsappService/ShowWhatsAppService')),CheckChatBotFlowWelcome=async c=>{const r=q,s=o;if(c[r(0x145)]||c[s(0x13d)])return;const d=await Setting_1['default'][s(0x13e)]({'where':{'key':r(0x12c),'tenantId':c[s(0x140)]}}),e=await(0x0,ShowWhatsAppService_1['default'])({'id':c['whatsappId'],'tenantId':c[s(0x140)]}),f=e?.[s(0x136)]||d?.[r(0x142)];if(!f)return;const g=await ChatFlow_1[r(0x130)][r(0x13e)]({'where':{'id':+f,'tenantId':c['tenantId'],'isActive':!![],'isDeleted':![]}});if(!g)return;const h=await Contact_1[s(0x130)][s(0x12f)](c[s(0x13a)]),{celularTeste:i}=g,j=h?.['number'];if(await(0x0,IsContactTest_1['default'])(j,i,c['channel']))return;const k=g[s(0x138)]['lineList']['find'](l=>l[r(0x146)]==='start');await c[s(0x13c)]({'chatFlowId':g['id'],'stepChatFlow':k['to'],'lastInteractionBot':new Date()}),await(0x0,CreateLogTicketService_1[s(0x130)])({'ticketId':c['id'],'type':r(0x13b)});};function a(){const t=['userId','from','../models/ChatFlow','../services/TicketServices/CreateLogTicketService','3296700VQBuOZ','botTicketActive','2422515ZbITlo','__importDefault','findByPk','default','../models/Contact','3440759ZhhfZU','3881952LUaGQb','6JrKnAB','1767740iTVvtl','chatFlowId','1918102tTRJsw','flow','__esModule','contactId','chatBot','update','isGroup','findOne','37330YiaLMe','tenantId','3501EalYkD','value','1lBbUMX','../services/ChatFlowServices/IsContactTest'];a=function(){return t;};return a();}exports[q(0x130)]=CheckChatBotFlowWelcome;