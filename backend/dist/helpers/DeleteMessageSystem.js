'use strict';const q=b,s=b;function b(c,d){const e=a();return b=function(f,g){f=f-0xa1;let h=e[f];return h;},b(c,d);}(function(c,d){const o=b,p=b,e=c();while(!![]){try{const f=-parseInt(o(0xc8))/0x1+parseInt(o(0xa5))/0x2*(-parseInt(p(0xa2))/0x3)+parseInt(o(0xb0))/0x4+-parseInt(p(0xa3))/0x5*(-parseInt(p(0xb9))/0x6)+-parseInt(o(0xaa))/0x7+parseInt(p(0xce))/0x8*(-parseInt(o(0xab))/0x9)+parseInt(o(0xbd))/0xa*(parseInt(o(0xd0))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x293fc));var __importDefault=this&&this[q(0xb5)]||function(c){const r=q;return c&&c[r(0xbe)]?c:{'default':c};};Object[q(0xc7)](exports,q(0xbe),{'value':!![]});const date_fns_1=require(s(0xb8)),Message_1=__importDefault(require(s(0xcc))),Ticket_1=__importDefault(require(q(0xba))),tbot_1=require(s(0xcd)),AppError_1=__importDefault(require(s(0xc4))),socket_1=require('../libs/socket'),wbot_baileys_1=require(q(0xc3)),DeleteMessageSystem=async(c,d,e)=>{const t=s,u=q,f=await Message_1[t(0xc1)][t(0xbf)]({'where':{'id':c},'include':[{'model':Ticket_1[u(0xc1)],'as':t(0xbc),'include':[u(0xac)],'where':{'tenantId':e}}]});if(f){const i=(0x0,date_fns_1[t(0xb2)])(new Date(),(0x0,date_fns_1[t(0xaf)])(f?.[u(0xa9)]));if(i>0x2)throw new AppError_1[(t(0xc1))](t(0xb3));}if(!f)throw new AppError_1[(u(0xc1))](t(0xa4));const {ticket:g}=f;if(g[u(0xa6)]===u(0xc5)){if(t(0xb1)!==t(0xa7)){const j=await(0x0,wbot_baileys_1[u(0xc2)])(g[t(0xad)]),k=JSON['parse'](f[t(0xb7)]);await j[t(0xc0)](k[t(0xd1)][u(0xcb)],{'delete':k['key']});}else throw new d[(t(0xc1))](t(0xb3));}if(g[t(0xa6)]==='telegram'){if('CBoBG'!==t(0xb4))throw new d['default'](u(0xa4));else{const n=await(0x0,tbot_1[t(0xa1)])(g[u(0xad)]);await n[t(0xae)]['deleteMessage'](g[u(0xac)][t(0xc6)],+f[t(0xa8)]);}}if(g[t(0xa6)]===t(0xbb))return;if(g[t(0xa6)]===t(0xca))return;await f['update']({'isDeleted':!![]});const h=(0x0,socket_1['getIO'])();h['to'](u(0xcf)+e+':'+g['id'])['emit'](t(0xcf)+e+u(0xb6),{'action':u(0xc9),'message':f,'ticket':g,'contact':g[u(0xac)]});};function a(){const v=['key','getTbot','420Xjfevz','5630mYRLqq','No\x20message\x20found\x20with\x20this\x20ID.','3776TDeklt','channel','ngkyu','messageId','createdAt','862057Ehnyvy','153csJFms','contact','whatsappId','telegram','parseJSON','94328VKPrMw','VjDcV','differenceInHours','No\x20delete\x20message\x20afeter\x202h\x20sended','CBoBG','__importDefault',':appMessage','dataJson','date-fns','1386TiRuow','../models/Ticket','instagram','ticket','10WxDamn','__esModule','findOne','sendMessage','default','getWbot','../libs/wbot-baileys','../errors/AppError','whatsapp','telegramId','defineProperty','46166BZDDBy','update','messenger','remoteJid','../models/Message','../libs/tbot','128912jhQsDF','tenant:','6521273NTFEJp'];a=function(){return v;};return a();}exports[s(0xc1)]=DeleteMessageSystem;