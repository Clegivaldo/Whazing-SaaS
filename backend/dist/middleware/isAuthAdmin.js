'use strict';const t=b,u=b;function b(c,d){const e=a();return b=function(f,g){f=f-0x83;let h=e[f];return h;},b(c,d);}(function(c,d){const q=b,r=b,e=c();while(!![]){try{const f=parseInt(q(0x8f))/0x1*(-parseInt(r(0x86))/0x2)+parseInt(r(0x93))/0x3*(-parseInt(r(0x9b))/0x4)+-parseInt(q(0x8d))/0x5+parseInt(q(0x85))/0x6*(parseInt(r(0x9c))/0x7)+-parseInt(r(0x84))/0x8*(parseInt(r(0x95))/0x9)+-parseInt(r(0x97))/0xa*(-parseInt(q(0x8a))/0xb)+-parseInt(r(0x91))/0xc*(-parseInt(r(0x9e))/0xd);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xab6dc));function a(){const x=['174NUVbqB','107974HUaxSw','email','Not\x20admin\x20permission','env','319mkoPIW','headers','../models/User','2358045CGBHnm','findByPk','23uRZZYA','split','156cMYFpr','QIxQz','382038HiVUGY','jsonwebtoken','9rOnPxJ','defineProperty','42830joZXHa','user','JBXom','__esModule','4tanmBB','219233tgmBjP','Invalid\x20token\x20or\x20not\x20Admin','2330276vgulae','default','../config/auth','indexOf','6559248CtonkV'];a=function(){return x;};return a();}var __importDefault=this&&this['__importDefault']||function(c){const s=b;return c&&c[s(0x9a)]?c:{'default':c};};Object[t(0x96)](exports,u(0x9a),{'value':!![]});const jsonwebtoken_1=require(t(0x94)),AppError_1=__importDefault(require('../errors/AppError')),auth_1=__importDefault(require(u(0xa0))),User_1=__importDefault(require(t(0x8c))),isAuthAdmin=async(c,d,e)=>{const v=u,w=u,f=c[v(0x8b)]['authorization'],g=process[w(0x89)]['ADMIN_DOMAIN'];if(!f){if(v(0x99)===w(0x99))throw new AppError_1['default']('Token\x20was\x20not\x20provided.',0x193);else throw new d[(v(0x9f))]('Not\x20exists\x20admin\x20domains\x20defined.',0x193);}if(!g)throw new AppError_1['default']('Not\x20exists\x20admin\x20domains\x20defined.',0x193);const [,h]=f[v(0x90)]('\x20');try{const j=(0x0,jsonwebtoken_1['verify'])(h,auth_1['default']['secret']),{id:k,profile:l,tenantId:m}=j,n=await User_1[w(0x9f)][w(0x8e)](k);if(!n||n[v(0x87)][v(0x83)](g)===0x1)throw new AppError_1[(w(0x9f))](w(0x88),0x193);c[v(0x98)]={'id':k,'profile':l,'tenantId':m};}catch(o){if('QIxQz'===v(0x92))throw new AppError_1[(w(0x9f))](w(0x9d),0x193);else throw new d[(w(0x9f))](v(0x88),0x193);}return e();};exports[t(0x9f)]=isAuthAdmin;