'use strict';const m=b,n=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=parseInt(k(0x17d))/0x1*(parseInt(l(0x18c))/0x2)+-parseInt(l(0x18e))/0x3+parseInt(k(0x186))/0x4+-parseInt(k(0x17c))/0x5+parseInt(l(0x189))/0x6+parseInt(k(0x17b))/0x7+parseInt(k(0x181))/0x8*(-parseInt(k(0x18f))/0x9);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x5c58f));function b(c,d){const e=a();return b=function(f,g){f=f-0x17a;let h=e[f];return h;},b(c,d);}function a(){const q=['defineProperty','3829546dYdKCO','73505ZPSSnJ','1AeMSJY','campaginId_','removeJobs','IO_REDIS_SERVER','8lscazu','__importDefault','SendMessageWhatsappCampaign','IO_REDIS_DB_SESSION','IO_REDIS_PASSWORD','2613296mAQCuU','default','../../errors/AppError','1833144lbYShT','bull','../../models/CampaignContacts','979742EFSlib','env','1517241aBEHAP','9873846mLMgJk','__esModule'];a=function(){return q;};return a();}var __importDefault=this&&this[m(0x182)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object[n(0x17a)](exports,m(0x190),{'value':!![]});const bull_1=__importDefault(require(m(0x18a))),Campaign_1=__importDefault(require('../../models/Campaign')),AppError_1=__importDefault(require(n(0x188))),CampaignContacts_1=__importDefault(require(m(0x18b))),CancelCampaignService=async({campaignId:c,tenantId:d})=>{const o=m,p=n,e=await Campaign_1[o(0x187)]['findOne']({'where':{'id':c,'tenantId':d}});if(!e)throw new AppError_1[(o(0x187))]('ERROR_CAMPAIGN_NOT_EXISTS',0x194);try{await(0x0,bull_1[p(0x187)])(o(0x183),{'redis':{'port':Number(process[p(0x18d)]['IO_REDIS_PORT']),'host':process[o(0x18d)][p(0x180)],'db':Number(process[o(0x18d)][o(0x184)])||0x2,'password':process['env'][p(0x185)]||undefined}})[o(0x17f)](o(0x17e)+e['id']+'*'),await CampaignContacts_1['default']['update']({'body':null,'mediaName':null,'timestamp':null,'ack':0x0,'messageId':null},{'where':{'campaignId':e['id'],'messageId':null}}),await e['update']({'status':'canceled'});}catch(f){throw new AppError_1[(p(0x187))]('ERROR:\x20'+f,0x194);}};exports[m(0x187)]=CancelCampaignService;