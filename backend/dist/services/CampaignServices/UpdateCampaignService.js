'use strict';const G=b,H=b;(function(c,d){const D=b,E=b,e=c();while(!![]){try{const f=parseInt(D(0x86))/0x1*(-parseInt(E(0x8e))/0x2)+-parseInt(E(0x93))/0x3*(-parseInt(E(0x8f))/0x4)+parseInt(E(0x84))/0x5*(parseInt(E(0x80))/0x6)+-parseInt(D(0x8a))/0x7+parseInt(E(0x9d))/0x8*(parseInt(E(0x82))/0x9)+-parseInt(D(0xa8))/0xa*(parseInt(E(0x9a))/0xb)+parseInt(E(0x8b))/0xc*(-parseInt(D(0xa3))/0xd);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xa6d08));var __importDefault=this&&this['__importDefault']||function(c){const F=b;return c&&c[F(0x9e)]?c:{'default':c};};Object[G(0x8d)](exports,G(0x9e),{'value':!![]});function b(c,d){const e=a();return b=function(f,g){f=f-0x80;let h=e[f];return h;},b(c,d);}const AppError_1=__importDefault(require(H(0x92))),Campaign_1=__importDefault(require(G(0x9c))),logger_1=require(H(0xab)),cArquivoName=c=>{const I=H,J=H;if(!c)return'';const d=c[I(0xa0)]('/'),e=d[d[J(0x81)]-0x1];return e;},UpdateCampaignService=async({campaignData:c,medias:d,campaignId:e,tenantId:f})=>{const K=H,L=H;let g,h={...c,'mediaUrl':cArquivoName(c['mediaUrl']),'start':c[K(0x87)]};const i=await Campaign_1[K(0x83)]['findOne']({'where':{'id':e,'tenantId':f}});if(i?.[L(0x89)]!==K(0xaa)&&i?.[K(0x89)]!==L(0x94)){if(L(0x91)===L(0xa6))return g&&h[K(0x9e)]?i:{'default':j};else throw new AppError_1[(K(0x83))](L(0xa9),0x194);}if(d&&Array[L(0xa2)](d)&&d[L(0x81)])await Promise[L(0xa1)](d[L(0x9b)](async k=>{const M=L,N=L;if('IZgtC'!==M(0xa5)){if(!e)return'';const m=f[N(0xa0)]('/'),n=m[m[M(0x81)]-0x1];return n;}else try{if(N(0x95)===M(0x95)){if(!k['filename']){const m=k['mimetype']['split']('/')[0x1][N(0xa0)](';')[0x0];k['filename']=new Date()[M(0x97)]()+'.'+m;}g=k;}else e={...f,'mediaUrl':'','mediaType':''};}catch(o){if('vezwe'!=='vezwe')try{if(!q[M(0xa7)]){const q=w[M(0x85)][M(0xa0)]('/')[0x1][M(0xa0)](';')[0x0];x['filename']=new y()[N(0x97)]()+'.'+q;}u=v;}catch(r){A['logger'][N(0x88)](r);}else logger_1[N(0x8c)][N(0x88)](o);}})),h={...c,'mediaUrl':g?.['filename'],'mediaType':g?.['mimetype'][L(0x9f)](0x0,g['mimetype'][K(0x96)]('/'))};else c['mediaUrl']===K(0xa4)&&(h={...c,'mediaUrl':'','mediaType':''});if(!i)throw new AppError_1['default'](K(0x98),0x194);return await i[K(0x99)](h),await i[L(0x90)](),i;};function a(){const O=['490851gdMEhl','canceled','WydkE','indexOf','getTime','ERR_NO_CAMPAIGN_FOUND','update','850025JFiEYi','map','../../models/Campaign','742176gCCvoa','__esModule','substr','split','all','isArray','5545683SlBOdv','null','IZgtC','BfEex','filename','110TfLoDu','ERR_NO_UPDATE_CAMPAIGN_NOT_IN_CANCELED_PENDING','pending','../../utils/logger','5557014YFprUW','length','126wcVCtS','default','5lxsyCL','mimetype','3xgsYBW','start','error','status','166992MxxgWU','36EIllqi','logger','defineProperty','137424vbYuYA','20XypjKq','reload','YffnG','../../errors/AppError'];a=function(){return O;};return a();}exports[G(0x83)]=UpdateCampaignService;