'use strict';
const _0x551054 = _0x4d26;
function _0x4d26(_0x170aef, _0x40c686) {
    const _0x5dd63e = _0x25a2();
    return _0x4d26 = function (_0xd261d2, _0x11a3bb) {
        _0xd261d2 = _0xd261d2 - (0x6d8 + 0x2 * -0x71f + -0xa6 * -0xd);
        let _0x3107b3 = _0x5dd63e[_0xd261d2];
        return _0x3107b3;
    }, _0x4d26(_0x170aef, _0x40c686);
}
(function (_0x1eaf08, _0x1eb7a7) {
    const _0x3fd4b1 = _0x4d26, _0x38be94 = _0x1eaf08();
    while (!![]) {
        try {
            const _0x3b69fc = parseInt(_0x3fd4b1(0x137)) / (-0x11c * 0x1f + 0x1b1c + 0x5 * 0x175) + -parseInt(_0x3fd4b1(0x155)) / (-0x230b + 0x1 * -0x1c53 + 0x3f60) + -parseInt(_0x3fd4b1(0x174)) / (0x1634 + 0x1d5d + 0x2 * -0x19c7) + -parseInt(_0x3fd4b1(0x132)) / (0x20c7 + -0x1e2 * 0x14 + 0x4e5) + parseInt(_0x3fd4b1(0x11f)) / (-0x1c04 + -0x1472 + 0xc5 * 0x3f) * (parseInt(_0x3fd4b1(0x169)) / (-0x11 * -0x82 + -0x13 * -0x5e + -0xf96)) + -parseInt(_0x3fd4b1(0x11e)) / (0x21a7 + -0x29 * -0xb7 + -0x3eef) + parseInt(_0x3fd4b1(0x128)) / (-0x12fd * -0x2 + -0x484 + -0x10b7 * 0x2);
            if (_0x3b69fc === _0x1eb7a7)
                break;
            else
                _0x38be94['push'](_0x38be94['shift']());
        } catch (_0x2b021c) {
            _0x38be94['push'](_0x38be94['shift']());
        }
    }
}(_0x25a2, 0x6 * 0x21b36 + -0x1e6db + 0x49 * -0x1a6));
function _0x25a2() {
    const _0x54aa3d = [
        'mXVtw',
        'zVuyY',
        '20:00',
        'setHours',
        'LETkx',
        'mediaUrl',
        'addSeconds',
        'isBefore',
        'ampaign',
        '713823RSnuxN',
        'ERR_CAMPAI',
        'value',
        'peErS',
        'campaginId',
        'qdeBi',
        '__importDe',
        'terval',
        'setMinutes',
        'difference',
        'getTime',
        'findOne',
        'UORKD',
        'scheduled',
        'vdKZf',
        '_id_',
        'baaVr',
        'date-fns-t',
        'ATKjj',
        'wqaoJ',
        '_contact_',
        'defineProp',
        'S_NOT_EXIS',
        'tsfUv',
        'getHours',
        'XISTS',
        'parse',
        'message1',
        'erty',
        'tenantId',
        'findAll',
        'Uolfu',
        'length',
        '8837115SDlFQW',
        '24225jXfLxt',
        'start',
        'LASKK',
        'status',
        'PEmTl',
        'ZaDYT',
        'fault',
        'isAfter',
        'dWezu',
        '15218672wQmzvK',
        '__esModule',
        'oUtc',
        'eWhatsappC',
        'include',
        'InDays',
        'fxVRy',
        'DcWrc',
        'contact',
        'random',
        '5254924UjLgCj',
        '../../libs',
        '_time_',
        'EJxjF',
        'mrAdJ',
        '1182085kqDQgr',
        'split',
        'zonedTimeT',
        'sessionId',
        'HH:mm',
        'dJwmT',
        'AIGN_NOT_E',
        'YjCZT',
        'ls/Campaig',
        'WTiOT',
        'delay',
        '/Queue',
        'message3',
        'number',
        'bPNqn',
        'session',
        'InSeconds',
        'message',
        'getMinutes',
        'date-fns',
        'nCuRz',
        'addDays',
        'default',
        'message2',
        'o_Paulo',
        'nContacts',
        'lEDok',
        'end',
        'America/Sa',
        'oAVmy',
        '1821020vJCcpa',
        'add',
        'yZGfV',
        'campaignId',
        'ERROR_CAMP',
        'jXDlJ',
        '../../mode',
        'GN_CONTACT',
        'rs/AppErro',
        '../../erro',
        'osVqy',
        'ptMvr',
        'where',
        'Dkvzn',
        'map',
        'SendMessag',
        'contactId',
        '08:00',
        'update',
        'isWithinIn',
        '1626QbdNPT',
        'floor'
    ];
    _0x25a2 = function () {
        return _0x54aa3d;
    };
    return _0x25a2();
}
var __importDefault = this && this[_0x551054(0x17a) + _0x551054(0x125)] || function (_0x5d9d38) {
    const _0x4f520a = _0x551054;
    return _0x5d9d38 && _0x5d9d38[_0x4f520a(0x129)] ? _0x5d9d38 : { 'default': _0x5d9d38 };
};
const _0x24beb8 = {};
_0x24beb8[_0x551054(0x176)] = !![], Object[_0x551054(0x112) + _0x551054(0x119)](exports, _0x551054(0x129), _0x24beb8);
const date_fns_1 = require(_0x551054(0x14a)), date_fns_tz_1 = require(_0x551054(0x10e) + 'z'), Campaign_1 = __importDefault(require(_0x551054(0x15b) + _0x551054(0x13f) + 'n')), AppError_1 = __importDefault(require(_0x551054(0x15e) + _0x551054(0x15d) + 'r')), CampaignContacts_1 = __importDefault(require(_0x551054(0x15b) + _0x551054(0x13f) + _0x551054(0x150))), Queue_1 = __importDefault(require(_0x551054(0x133) + _0x551054(0x142))), cArquivoName = _0x2de0ae => {
        const _0x3f136f = _0x551054, _0x1700f6 = {};
        _0x1700f6[_0x3f136f(0x157)] = function (_0x1c8df1, _0x5c5c67) {
            return _0x1c8df1 - _0x5c5c67;
        };
        const _0x4284f3 = _0x1700f6;
        if (!_0x2de0ae)
            return '';
        const _0x432b04 = _0x2de0ae[_0x3f136f(0x138)]('/'), _0x15311d = _0x432b04[_0x4284f3[_0x3f136f(0x157)](_0x432b04[_0x3f136f(0x11d)], -0x3a * 0x5b + -0x1 * -0x511 + -0x1 * -0xf8e)];
        return _0x15311d;
    }, randomInteger = (_0x3ee6e3, _0x99c380) => {
        const _0x33d57b = _0x551054, _0x6bfbb2 = {};
        _0x6bfbb2[_0x33d57b(0x10d)] = function (_0x531c6b, _0x44e926) {
            return _0x531c6b + _0x44e926;
        }, _0x6bfbb2[_0x33d57b(0x10b)] = function (_0x1b9173, _0x17f5af) {
            return _0x1b9173 * _0x17f5af;
        }, _0x6bfbb2[_0x33d57b(0x16b)] = function (_0x133cee, _0x3dce8b) {
            return _0x133cee + _0x3dce8b;
        }, _0x6bfbb2[_0x33d57b(0x10f)] = function (_0x1ab3df, _0x44248e) {
            return _0x1ab3df - _0x44248e;
        };
        const _0x15ec85 = _0x6bfbb2;
        return _0x15ec85[_0x33d57b(0x10d)](Math[_0x33d57b(0x16a)](_0x15ec85[_0x33d57b(0x10b)](Math[_0x33d57b(0x131)](), _0x15ec85[_0x33d57b(0x16b)](_0x15ec85[_0x33d57b(0x10f)](_0x99c380, _0x3ee6e3), -0x753 * 0x1 + -0x1257 + 0x19ab))), _0x3ee6e3);
    }, mountMessageData = (_0x2a58cf, _0x409299, _0x3a7104) => {
        const _0x245abb = _0x551054, _0x44997c = {
                'dWezu': function (_0x4cee14, _0x293492, _0x50267a) {
                    return _0x4cee14(_0x293492, _0x50267a);
                },
                'Dkvzn': function (_0x4d7528, _0x58c955) {
                    return _0x4d7528 === _0x58c955;
                },
                'fxVRy': function (_0x18b8b4, _0xf07a93) {
                    return _0x18b8b4 === _0xf07a93;
                },
                'dJwmT': function (_0x24a0c9, _0x19a883) {
                    return _0x24a0c9 === _0x19a883;
                },
                'UORKD': function (_0x297f29, _0xb6eb48) {
                    return _0x297f29(_0xb6eb48);
                }
            }, _0x5b020d = _0x44997c[_0x245abb(0x127)](randomInteger, -0xb * -0x1d + -0x806 + 0x6c8, 0x7b * 0x26 + -0x1353 * -0x2 + -0xb61 * 0x5);
        let _0x1ba56e = '';
        if (_0x44997c[_0x245abb(0x162)](_0x5b020d, -0x13f7 * -0x1 + -0xacf + -0x927))
            _0x1ba56e = _0x2a58cf[_0x245abb(0x118)];
        if (_0x44997c[_0x245abb(0x12e)](_0x5b020d, -0x1e82 + 0x166b + 0x819))
            _0x1ba56e = _0x2a58cf[_0x245abb(0x14e)];
        if (_0x44997c[_0x245abb(0x13c)](_0x5b020d, 0x23e8 + -0x1b5b + 0x445 * -0x2))
            _0x1ba56e = _0x2a58cf[_0x245abb(0x143)];
        return {
            'whatsappId': _0x2a58cf[_0x245abb(0x13a)],
            'message': _0x1ba56e,
            'number': _0x409299[_0x245abb(0x130)][_0x245abb(0x144)],
            'mediaUrl': _0x2a58cf[_0x245abb(0x170)],
            'mediaName': _0x44997c[_0x245abb(0x109)](cArquivoName, _0x2a58cf[_0x245abb(0x170)]),
            'messageRandom': _0x245abb(0x148) + _0x5b020d,
            'campaignContact': _0x409299,
            'options': _0x3a7104
        };
    }, nextDayHoursValid = _0x2eb964 => {
        const _0x1338e7 = _0x551054, _0x8c4fc1 = {};
        _0x8c4fc1[_0x1338e7(0x177)] = function (_0xb1c547, _0x3ae53d) {
            return _0xb1c547 < _0x3ae53d;
        }, _0x8c4fc1[_0x1338e7(0x14b)] = function (_0x372dd5, _0x586940) {
            return _0x372dd5 * _0x586940;
        }, _0x8c4fc1[_0x1338e7(0x154)] = _0x1338e7(0x166), _0x8c4fc1[_0x1338e7(0x15a)] = _0x1338e7(0x13b), _0x8c4fc1[_0x1338e7(0x179)] = _0x1338e7(0x16d), _0x8c4fc1[_0x1338e7(0x15f)] = function (_0x18cf3f, _0x463748) {
            return _0x18cf3f && _0x463748;
        }, _0x8c4fc1[_0x1338e7(0x151)] = function (_0x5c7d7b, _0x110b9d) {
            return _0x5c7d7b === _0x110b9d;
        }, _0x8c4fc1[_0x1338e7(0x145)] = function (_0xabe15f, _0xe88d9b) {
            return _0xabe15f && _0xe88d9b;
        }, _0x8c4fc1[_0x1338e7(0x123)] = function (_0x12a125, _0x44cbcd) {
            return _0x12a125 > _0x44cbcd;
        };
        const _0x3c8f1e = _0x8c4fc1;
        let _0xca454c = _0x2eb964;
        const _0xfd3d22 = new Date(), _0x1f40e1 = (-0xed5 + 0x622 + 0x8b3, date_fns_1[_0x1338e7(0x17d) + _0x1338e7(0x12d)])(_0xca454c, new Date());
        _0x3c8f1e[_0x1338e7(0x177)](_0x1f40e1, -0x1 * 0xfde + -0x4db + 0x14b9) && (_0xca454c = (-0xfad * -0x2 + 0x2 * -0x470 + -0x167a, date_fns_1[_0x1338e7(0x14c)])(_0xca454c, _0x3c8f1e[_0x1338e7(0x14b)](_0x1f40e1, -(-0x2ad + -0x2255 + 0x17b * 0x19))));
        _0x3c8f1e[_0x1338e7(0x177)](_0xca454c[_0x1338e7(0x17e)](), _0xfd3d22[_0x1338e7(0x17e)]()) && (_0xca454c = (0x2288 + -0x1 * 0x2433 + 0x1ab, date_fns_1[_0x1338e7(0x17c)])((-0x25 * 0x8 + 0x2434 + -0x230c, date_fns_1[_0x1338e7(0x16e)])(_0xca454c, _0xfd3d22[_0x1338e7(0x115)]()), _0xfd3d22[_0x1338e7(0x149)]()));
        const _0x44fa39 = (-0x28c + 0xdf * -0x25 + -0x22c7 * -0x1, date_fns_1[_0x1338e7(0x117)])(_0x3c8f1e[_0x1338e7(0x154)], _0x3c8f1e[_0x1338e7(0x15a)], _0xca454c), _0x3fdae1 = (0x5ea * 0x3 + 0x604 + 0xbe1 * -0x2, date_fns_1[_0x1338e7(0x117)])(_0x3c8f1e[_0x1338e7(0x179)], _0x3c8f1e[_0x1338e7(0x15a)], _0xca454c), _0x55ea96 = {};
        _0x55ea96[_0x1338e7(0x120)] = _0x44fa39, _0x55ea96[_0x1338e7(0x152)] = _0x3fdae1;
        const _0x5e51ac = (-0x11b0 + 0x615 + 0xb9b, date_fns_1[_0x1338e7(0x168) + _0x1338e7(0x17b)])(_0xca454c, _0x55ea96), _0x46bee2 = (0x1656 + -0xbb1 + 0x221 * -0x5, date_fns_1[_0x1338e7(0x172)])(_0x44fa39, _0xca454c), _0x3aac51 = (0xb3 * 0x2f + 0x571 * -0x7 + 0x53a, date_fns_1[_0x1338e7(0x126)])(_0x3fdae1, _0xca454c);
        return _0x3c8f1e[_0x1338e7(0x15f)](!_0x5e51ac, _0x46bee2) && (_0xca454c = (-0x617 * 0x5 + -0x2e9 * -0xd + -0x762, date_fns_1[_0x1338e7(0x17c)])((-0xe2 * -0x2c + 0x1201 + -0x38d9, date_fns_1[_0x1338e7(0x16e)])(_0xca454c, -0x1e9e + 0xaf5 + -0x13b1 * -0x1), -0x23e + 0x74f + -0x4f3)), _0x3c8f1e[_0x1338e7(0x15f)](!_0x5e51ac, _0x3aac51) && _0x3c8f1e[_0x1338e7(0x151)](_0x1f40e1, -0x909 + -0x15d * 0xb + 0x1808) && (_0xca454c = (0xce4 + 0x1b22 + -0x5e * 0x6d, date_fns_1[_0x1338e7(0x14c)])((0xe82 + -0x23b6 + -0xec * -0x17, date_fns_1[_0x1338e7(0x16e)])(_0xca454c, -0x16a2 * -0x1 + 0x2617 * 0x1 + 0x1 * -0x3cb1), -0x41c * 0x1 + -0x1c2 * 0xb + 0x1d * 0xcf)), _0x3c8f1e[_0x1338e7(0x145)](!_0x5e51ac, _0x3aac51) && _0x3c8f1e[_0x1338e7(0x123)](_0x1f40e1, -0x1bfe + 0xa4c * -0x2 + 0x2b3 * 0x12) && (_0xca454c = (-0x7ea + 0x1 * -0x1209 + 0x19f3, date_fns_1[_0x1338e7(0x16e)])(_0xca454c, 0x4 * 0x902 + -0x14 * -0x1c1 + -0x4 * 0x11c5)), _0xca454c;
    }, calcDelay = (_0x63ea93, _0x11c3b4) => {
        const _0x417954 = _0x551054, _0x3327a6 = {};
        _0x3327a6[_0x417954(0x160)] = function (_0x3fbb3a, _0x5b5836) {
            return _0x3fbb3a + _0x5b5836;
        }, _0x3327a6[_0x417954(0x135)] = function (_0x4ef4c8, _0x54507d) {
            return _0x4ef4c8 * _0x54507d;
        };
        const _0x82f7bc = _0x3327a6, _0x20b938 = (0xeb5 + 0x2456 + 0x330b * -0x1, date_fns_1[_0x417954(0x17d) + _0x417954(0x147)])(_0x63ea93, new Date());
        return _0x82f7bc[_0x417954(0x160)](_0x82f7bc[_0x417954(0x135)](_0x20b938, -0x480 + -0x2 * 0xae6 + 0x1e34), _0x11c3b4);
    }, StartCampaignService = async ({
        campaignId: _0x509e12,
        tenantId: _0xaf1f18,
        options: _0x4c9f35
    }) => {
        const _0x1b29f2 = _0x551054, _0x2adc71 = {
                'mrAdJ': function (_0x3eede8, _0x58a5c4) {
                    return _0x3eede8 / _0x58a5c4;
                },
                'Uolfu': function (_0x3d234b, _0x3f38b9, _0x52e33c, _0x1b1b18) {
                    return _0x3d234b(_0x3f38b9, _0x52e33c, _0x1b1b18);
                },
                'DcWrc': function (_0x505e20, _0x12cffa, _0x5ab91a) {
                    return _0x505e20(_0x12cffa, _0x5ab91a);
                },
                'YjCZT': _0x1b29f2(0x146),
                'WTiOT': _0x1b29f2(0x159) + _0x1b29f2(0x13d) + _0x1b29f2(0x116),
                'LASKK': _0x1b29f2(0x130),
                'zVuyY': _0x1b29f2(0x175) + _0x1b29f2(0x15c) + _0x1b29f2(0x113) + 'TS',
                'ZaDYT': function (_0x1562e2, _0x34faed) {
                    return _0x1562e2 * _0x34faed;
                },
                'LETkx': _0x1b29f2(0x153) + _0x1b29f2(0x14f),
                'tsfUv': _0x1b29f2(0x164) + _0x1b29f2(0x12b) + _0x1b29f2(0x173),
                'wqaoJ': _0x1b29f2(0x10a)
            }, _0x1592c7 = {};
        _0x1592c7['id'] = _0x509e12, _0x1592c7[_0x1b29f2(0x11a)] = _0xaf1f18;
        const _0x462db0 = {};
        _0x462db0[_0x1b29f2(0x161)] = _0x1592c7, _0x462db0[_0x1b29f2(0x12c)] = [_0x2adc71[_0x1b29f2(0x13e)]];
        const _0xad6a2c = await Campaign_1[_0x1b29f2(0x14d)][_0x1b29f2(0x108)](_0x462db0);
        if (!_0xad6a2c)
            throw new AppError_1[(_0x1b29f2(0x14d))](_0x2adc71[_0x1b29f2(0x140)], -0x17dc * -0x1 + 0x1 * -0xf2f + 0x1 * -0x719);
        const _0x36e98b = {};
        _0x36e98b[_0x1b29f2(0x158)] = _0x509e12;
        const _0x52ef0b = {};
        _0x52ef0b[_0x1b29f2(0x161)] = _0x36e98b, _0x52ef0b[_0x1b29f2(0x12c)] = [_0x2adc71[_0x1b29f2(0x121)]];
        const _0x47279a = await CampaignContacts_1[_0x1b29f2(0x14d)][_0x1b29f2(0x11b)](_0x52ef0b);
        if (!_0x47279a)
            throw new AppError_1[(_0x1b29f2(0x14d))](_0x2adc71[_0x1b29f2(0x16c)], 0xa75 * -0x2 + -0x23b + 0x18b9);
        const _0x1147f3 = _0xad6a2c[_0x1b29f2(0x141)] ? _0x2adc71[_0x1b29f2(0x124)](_0xad6a2c[_0x1b29f2(0x141)], 0x1340 + -0xa1 * -0x11 + -0x1a09) : -0x417c + -0x401 + 0x939d;
        let _0x17d42e = (0x1902 + 0xd * -0xf5 + -0xc91, date_fns_tz_1[_0x1b29f2(0x139) + _0x1b29f2(0x12a)])(_0xad6a2c[_0x1b29f2(0x120)], _0x2adc71[_0x1b29f2(0x16f)]);
        const _0x8222c8 = _0x47279a[_0x1b29f2(0x163)](_0x29356d => {
            const _0x2a67cc = _0x1b29f2;
            return _0x17d42e = (0x6b * 0x27 + 0x16df + -0x272c, date_fns_1[_0x2a67cc(0x171)])(_0x17d42e, _0x2adc71[_0x2a67cc(0x136)](_0x1147f3, -0x1 * 0x21f1 + -0x6 * -0xb1 + 0x1 * 0x21b3)), _0x2adc71[_0x2a67cc(0x11c)](mountMessageData, _0xad6a2c, _0x29356d, {
                ..._0x4c9f35,
                'jobId': _0x2a67cc(0x178) + '_' + _0xad6a2c['id'] + _0x2a67cc(0x111) + _0x29356d[_0x2a67cc(0x165)] + _0x2a67cc(0x10c) + _0x29356d['id'] + _0x2a67cc(0x134) + _0xad6a2c[_0x2a67cc(0x120)][_0x2a67cc(0x17e)](),
                'delay': _0x2adc71[_0x2a67cc(0x12f)](calcDelay, _0x17d42e, _0x1147f3)
            });
        });
        Queue_1[_0x1b29f2(0x14d)][_0x1b29f2(0x156)](_0x2adc71[_0x1b29f2(0x114)], _0x8222c8);
        const _0x59e5c0 = {};
        _0x59e5c0[_0x1b29f2(0x122)] = _0x2adc71[_0x1b29f2(0x110)], await _0xad6a2c[_0x1b29f2(0x167)](_0x59e5c0);
    };
exports[_0x551054(0x14d)] = StartCampaignService;