'use strict';
const J = b, K = b;
(function (c, d) {
    const H = b, I = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(H(0x1b4)) / (0x13e * 0x15 + 0x1 * 0x1d87 + 0xde7 * -0x4) + -parseInt(I(0x1b8)) / (-0x1423 + 0x617 * -0x5 + -0x194c * -0x2) * (parseInt(H(0x1fa)) / (0x24 * 0xaa + -0x9c8 + 0xe1d * -0x1)) + parseInt(I(0x200)) / (-0x15ff + 0x128d + -0x376 * -0x1) + parseInt(I(0x1bf)) / (0x2310 + 0x2155 * 0x1 + -0x4460) * (parseInt(H(0x1a2)) / (0xc9 * -0x10 + -0x2 * 0xa01 + -0x826 * -0x4)) + -parseInt(I(0x22f)) / (0x1 * -0x365 + -0xc66 + 0x2 * 0x7e9) + parseInt(I(0x233)) / (0x382 * -0x4 + 0x2 * -0x515 + 0x183a) * (-parseInt(H(0x23a)) / (0x2 * -0x16f + -0xb3 * 0x29 + 0x1f92)) + parseInt(I(0x1ea)) / (0xdd * -0xb + -0x24c6 + 0x2e4f) * (parseInt(I(0x1d5)) / (-0x20 * 0x2c + -0x20e3 * -0x1 + -0x7d * 0x38));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0xfa3 + 0x409 * -0x48 + 0x41d09));
var __importDefault = this && this[J(0x1ba) + K(0x1ca)] || function (c) {
    const L = K;
    return c && c[L(0x1f9)] ? c : { 'default': c };
};
function a() {
    const a0 = [
        'ccttA',
        'qUnhN',
        'ovoWc',
        'isWithinIn',
        '../../mode',
        '_contact_',
        'fqKTA',
        'ZAzRm',
        '232699cUdNVE',
        'grLqz',
        '_id_',
        'session',
        '64KeEoOh',
        'OlONI',
        '__importDe',
        'XISTS',
        'tLJDj',
        'kegqJ',
        'hLkxb',
        '5ZPSWXt',
        'iEDEm',
        'add',
        'GPFKT',
        '20:00',
        'VSygP',
        'end',
        'America/Sa',
        'ocjCx',
        '../../erro',
        'isBefore',
        'fault',
        'qKvlp',
        'status',
        '_time_',
        'zjyvp',
        'mediaUrl',
        '08:00',
        'VZqdg',
        'scheduled',
        '../../libs',
        'SlSpF',
        '835637DgwJqM',
        'update',
        'S_NOT_EXIS',
        'EjyaQ',
        'xywAK',
        'findOne',
        'tRKFH',
        'campaginId',
        'AdZKS',
        'default',
        'number',
        'date-fns',
        'WmLLa',
        'value',
        'tSnvu',
        'contactId',
        'start',
        'WFFvv',
        'kzwHm',
        'addDays',
        'TlgIL',
        '110DUJMkA',
        'zonedTimeT',
        'o_Paulo',
        'sessionId',
        'FIycy',
        'fRDLN',
        'AIGN_NOT_E',
        'wMTPv',
        'ls/Campaig',
        'length',
        'message3',
        'aFHPM',
        'addSeconds',
        'InDays',
        'erty',
        '__esModule',
        '28971EOPBEC',
        'GNGPw',
        'random',
        'parse',
        'bWsPl',
        'snGYg',
        '174368MAZyLt',
        'defineProp',
        'tenantId',
        'GFUzP',
        'uYGuj',
        'ZjQqr',
        'GN_CONTACT',
        'urHWB',
        'xFQEl',
        'TNxRn',
        'fLtVN',
        'date-fns-t',
        'rs/AppErro',
        'floor',
        'Dooop',
        'getMinutes',
        'map',
        'CKjqq',
        'ZtyzN',
        'getHours',
        'Wlhyx',
        'wMSyf',
        'fSCBa',
        'pKypS',
        'oUtc',
        'include',
        'SendMessag',
        'WHVXd',
        'HH:mm',
        'Klvlr',
        'vWMqV',
        'findAll',
        'where',
        'LoBSD',
        'ERR_CAMPAI',
        'campaignId',
        'oTIzD',
        'eWhatsappC',
        'khkOz',
        'INUEi',
        'nContacts',
        'setHours',
        'message2',
        'jMCID',
        'AnlGC',
        'message1',
        'ZUeCI',
        '1389577lYNKtg',
        'InSeconds',
        'ZkRuL',
        'hmgbO',
        '216ojIFQc',
        'ylYsQ',
        'LsiLK',
        'terval',
        '/Queue',
        'nnWRs',
        'SecVN',
        '73512bYLlHp',
        'hTDQP',
        'ampaign',
        'split',
        'isAfter',
        'contact',
        'delay',
        'difference',
        '1684470uyAhSr',
        'message',
        'aWQOx',
        'setMinutes',
        'NQQhj',
        'EQzfU',
        'ERROR_CAMP',
        'getTime',
        'umLvx',
        'niHOx'
    ];
    a = function () {
        return a0;
    };
    return a();
}
const G = {};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x7 * -0x4b3 + -0x1 * -0x3d7 + 0x4 * 0x7ac);
        let h = e[f];
        return h;
    }, b(c, d);
}
G[K(0x1e2)] = !![], Object[J(0x201) + K(0x1f8)](exports, K(0x1f9), G);
const date_fns_1 = require(K(0x1e0)), date_fns_tz_1 = require(J(0x20b) + 'z'), Campaign_1 = __importDefault(require(J(0x1b0) + K(0x1f2) + 'n')), AppError_1 = __importDefault(require(J(0x1c8) + K(0x20c) + 'r')), CampaignContacts_1 = __importDefault(require(K(0x1b0) + J(0x1f2) + K(0x228))), Queue_1 = __importDefault(require(K(0x1d3) + K(0x237))), cArquivoName = d => {
        const M = K, N = J, e = {};
        e[M(0x207)] = function (i, j) {
            return i - j;
        };
        const f = e;
        if (!d)
            return '';
        const g = d[N(0x23d)]('/'), h = g[f[M(0x207)](g[M(0x1f3)], 0x18 * -0xcc + 0x37 * -0x35 + 0x1e84)];
        return h;
    }, randomInteger = (d, e) => {
        const O = K, P = J, f = {};
        f[O(0x22c)] = function (h, i) {
            return h + i;
        }, f[O(0x1a4)] = function (h, i) {
            return h * i;
        }, f[P(0x205)] = function (h, i) {
            return h - i;
        };
        const g = f;
        return g[P(0x22c)](Math[P(0x20d)](g[P(0x1a4)](Math[O(0x1fc)](), g[P(0x22c)](g[O(0x205)](e, d), -0x151e + -0x5a3 + 0x1ac2))), d);
    }, mountMessageData = (c, d, e) => {
        const Q = K, R = K, f = {
                'SlSpF': function (i, j, k) {
                    return i(j, k);
                },
                'OlONI': function (i, j) {
                    return i === j;
                },
                'ZAzRm': function (i, j) {
                    return i === j;
                },
                'xFQEl': function (i, j) {
                    return i(j);
                }
            }, g = f[Q(0x1d4)](randomInteger, 0x1087 * 0x2 + 0x2162 + 0x426f * -0x1, 0x20df * -0x1 + -0x4ac * 0x2 + 0x2a3a);
        let h = '';
        if (f[Q(0x1b9)](g, -0xbfe + -0x17 * -0x15b + 0x2 * -0x997))
            h = c[R(0x22d)];
        if (f[Q(0x1b9)](g, 0xc61 * 0x3 + -0x1d60 + -0x7c1))
            h = c[R(0x22a)];
        if (f[Q(0x1b3)](g, 0x167f + 0x241 * 0x7 + -0x2643))
            h = c[Q(0x1f4)];
        return {
            'whatsappId': c[R(0x1ed)],
            'message': h,
            'number': d[Q(0x23f)][R(0x1df)],
            'mediaUrl': c[R(0x1cf)],
            'mediaName': f[R(0x208)](cArquivoName, c[R(0x1cf)]),
            'messageRandom': R(0x1a3) + g,
            'campaignContact': d,
            'options': e
        };
    }, nextDayHoursValid = d => {
        const S = J, T = K, e = {
                'WmLLa': function (o, p) {
                    return o + p;
                },
                'aFHPM': function (o, p) {
                    return o * p;
                },
                'Dooop': function (o, p) {
                    return o - p;
                },
                'hLkxb': function (o, p, q) {
                    return o(p, q);
                },
                'jMCID': function (o, p) {
                    return o === p;
                },
                'tLJDj': function (o, p) {
                    return o(p);
                },
                'kzwHm': function (o, p) {
                    return o < p;
                },
                'SecVN': S(0x1d9),
                'ZtyzN': function (o, p) {
                    return o < p;
                },
                'wMSyf': function (o, p) {
                    return o !== p;
                },
                'TNxRn': T(0x203),
                'EQzfU': T(0x211),
                'Wlhyx': T(0x1d0),
                'ovoWc': S(0x21c),
                'WFFvv': T(0x1c3),
                'iEDEm': function (o, p) {
                    return o && p;
                },
                'qKvlp': function (o, p) {
                    return o === p;
                },
                'hmgbO': S(0x1fe),
                'INUEi': T(0x226),
                'hTDQP': function (o, p) {
                    return o && p;
                },
                'grLqz': function (o, p) {
                    return o === p;
                },
                'LoBSD': T(0x224),
                'WHVXd': S(0x1ab),
                'NQQhj': function (o, p) {
                    return o && p;
                },
                'fRDLN': function (o, p) {
                    return o > p;
                },
                'fqKTA': function (o, p) {
                    return o === p;
                },
                'TlgIL': T(0x1ff)
            };
        let f = d;
        const g = new Date(), h = (0x4e6 + -0xa40 + -0xa * -0x89, date_fns_1[T(0x241) + S(0x1f7)])(f, new Date());
        if (e[T(0x1e7)](h, 0x3d1 * -0x1 + 0x11fb * 0x2 + -0x2025)) {
            if (e[S(0x22b)](e[S(0x239)], e[S(0x239)]))
                f = (-0x219d + -0x24ed + -0x2345 * -0x2, date_fns_1[S(0x1e8)])(f, e[T(0x1f5)](h, -(-0x1c8d + -0x250e + 0x419c)));
            else
                return e[S(0x1e1)](h[T(0x20d)](e[T(0x1f5)](i[S(0x1fc)](), e[T(0x1e1)](e[S(0x20e)](j, k), 0xdeb + -0x4f * 0x4b + -0x93b * -0x1))), l);
        }
        if (e[T(0x212)](f[S(0x1a9)](), g[S(0x1a9)]())) {
            if (e[S(0x215)](e[S(0x209)], e[S(0x1a7)]))
                f = (-0x10cc + 0x738 + 0x994, date_fns_1[T(0x1a5)])((-0xaec + -0x42b * 0x7 + 0x2819, date_fns_1[S(0x229)])(f, g[S(0x213)]()), g[T(0x20f)]());
            else {
                const q = e[T(0x1be)](n, 0x19c9 + 0x9 * 0x3 + -0x8a1 * 0x3, 0xc48 + -0x20 * -0x115 + -0x2ee5);
                let r = '';
                if (e[T(0x22b)](q, -0x110c + -0x907 + -0x685 * -0x4))
                    r = o[S(0x22d)];
                if (e[T(0x22b)](q, -0xce3 * -0x2 + 0x568 * 0x4 + -0x2f64))
                    r = p[S(0x22a)];
                if (e[T(0x22b)](q, 0x2 * 0x663 + 0x20eb + 0x79d * -0x6))
                    r = q[S(0x1f4)];
                return {
                    'whatsappId': r[S(0x1ed)],
                    'message': r,
                    'number': s[T(0x23f)][T(0x1df)],
                    'mediaUrl': t[T(0x1cf)],
                    'mediaName': e[S(0x1bc)](u, v[T(0x1cf)]),
                    'messageRandom': S(0x1a3) + q,
                    'campaignContact': w,
                    'options': x
                };
            }
        }
        const i = (0x871 + -0x1 * 0x2249 + 0x19d8, date_fns_1[T(0x1fd)])(e[T(0x214)], e[T(0x1ae)], f), j = (-0x9d6 * 0x3 + 0x343 + 0x1a3f, date_fns_1[T(0x1fd)])(e[S(0x1e6)], e[T(0x1ae)], f), k = {};
        k[S(0x1e5)] = i, k[S(0x1c5)] = j;
        const l = (-0x153 + 0x145f + 0x17 * -0xd4, date_fns_1[T(0x1af) + T(0x236)])(f, k), m = (-0x1c04 + -0x1 * -0x1425 + 0x7df, date_fns_1[S(0x1c9)])(i, f), n = (0x41 * 0x83 + 0x23 * -0x32 + -0xf * 0x1c3, date_fns_1[S(0x23e)])(j, f);
        return e[T(0x1c0)](!l, m) && (e[T(0x1cb)](e[T(0x232)], e[S(0x227)]) ? g = (0xe9 * 0x5 + -0x49f * 0x7 + -0x4a2 * -0x6, h[T(0x1a5)])((-0xb * 0x277 + -0x1932 + 0x344f, i[S(0x229)])(j, 0x15d8 + 0x179 + 0x1749 * -0x1), 0x875 * -0x1 + -0x2500 + -0x1 * -0x2d93) : f = (0x1728 + 0x1a27 + -0x314f, date_fns_1[T(0x1a5)])((0x1d74 * -0x1 + 0x1 * -0x1061 + 0x2dd5, date_fns_1[S(0x229)])(f, 0xdf9 + -0x7 * -0xbe + -0xd5 * 0x17), -0x5 * 0x25d + -0x1 * -0x1cb5 + -0x10c6)), e[S(0x23b)](!l, n) && e[S(0x1cb)](h, -0x3 * 0xa4b + -0x1bf0 + 0x3ad1) && (e[T(0x1b5)](e[T(0x221)], e[T(0x21b)]) ? i = (-0x1 * 0xd5d + -0x23f2 + -0xd * -0x3cb, j[S(0x1a5)])((-0x1caa + -0xf9 * 0x1f + -0x7 * -0x867, k[S(0x229)])(l, m[S(0x213)]()), n[T(0x20f)]()) : f = (-0x475 * -0x5 + -0x3a1 + 0x8 * -0x255, date_fns_1[S(0x1e8)])((-0x1 * -0x75a + 0xb56 * 0x3 + -0x295c, date_fns_1[S(0x229)])(f, 0x1 * -0x1509 + -0xd * 0x53 + 0x1948), -0x4 * 0x633 + -0x18b7 + 0x3184)), e[S(0x1a6)](!l, n) && e[S(0x1ef)](h, -0x1 * -0x13ae + 0x48e * 0x7 + -0x3390) && (e[T(0x1b2)](e[T(0x1e9)], e[S(0x1e9)]) ? f = (0x10f3 * -0x2 + -0xc13 + 0x2df9, date_fns_1[T(0x229)])(f, -0xafa + 0x1 * -0x17cc + 0x22ce) : g = (0x2427 + 0x5 * 0x68f + 0xa * -0x6e5, h[T(0x1e8)])((0x1d3f + -0xf64 * 0x1 + -0xddb, i[S(0x229)])(j, -0x1715 + 0x11da + 0x543), 0x12 * 0x136 + 0x10d8 + 0x1 * -0x26a3)), f;
    }, calcDelay = (d, e) => {
        const U = K, V = K, f = {};
        f[U(0x1c7)] = function (i, j) {
            return i + j;
        }, f[U(0x21e)] = function (i, j) {
            return i * j;
        };
        const g = f, h = (0x3fb * 0x1 + 0xd0d * -0x1 + 0x81 * 0x12, date_fns_1[V(0x241) + V(0x230)])(d, new Date());
        return g[V(0x1c7)](g[V(0x21e)](h, -0x180e + -0x143 * 0x1 + -0x1 * -0x1d39), e);
    }, StartCampaignService = async ({
        campaignId: h,
        tenantId: i,
        options: j
    }) => {
        const W = K, X = K, k = {
                'Klvlr': function (v, w) {
                    return v / w;
                },
                'ylYsQ': function (v, w, x, y) {
                    return v(w, x, y);
                },
                'uYGuj': function (v, w, x) {
                    return v(w, x);
                },
                'ccttA': function (v, w) {
                    return v + w;
                },
                'fLtVN': function (v, w) {
                    return v * w;
                },
                'kegqJ': function (v, w) {
                    return v !== w;
                },
                'umLvx': W(0x1ee),
                'ZkRuL': function (v, w) {
                    return v / w;
                },
                'GNGPw': function (v, w, x, y) {
                    return v(w, x, y);
                },
                'ZUeCI': X(0x1b7),
                'pKypS': function (v, w) {
                    return v !== w;
                },
                'zjyvp': X(0x1c4),
                'wMTPv': X(0x1a8) + W(0x1f0) + W(0x1bb),
                'EjyaQ': W(0x23f),
                'nnWRs': W(0x1db),
                'AdZKS': W(0x1d1),
                'tSnvu': W(0x222) + X(0x206) + X(0x1d7) + 'TS',
                'fSCBa': function (v, w) {
                    return v * w;
                },
                'LsiLK': X(0x1c6) + X(0x1ec),
                'qUnhN': X(0x21a) + X(0x225) + W(0x23c),
                'GPFKT': W(0x1d2)
            }, l = {};
        l['id'] = h, l[X(0x202)] = i;
        const m = {};
        m[W(0x220)] = l, m[W(0x219)] = [k[X(0x22e)]];
        const n = await Campaign_1[W(0x1de)][X(0x1da)](m);
        if (!n) {
            if (k[X(0x217)](k[W(0x1ce)], k[W(0x1ce)]))
                return r = (0x1b8f + 0x1d * -0x137 + 0x7ac, s[X(0x1f6)])(t, k[W(0x21d)](u, 0x1f66 + -0x2 * 0x12a3 + 0x9c8)), k[X(0x234)](v, w, x, {
                    ...y,
                    'jobId': W(0x1dc) + '_' + z['id'] + X(0x1b1) + A[W(0x1e4)] + W(0x1b6) + B['id'] + W(0x1cd) + C[W(0x1e5)][X(0x1a9)](),
                    'delay': k[X(0x204)](D, E, F)
                });
            else
                throw new AppError_1[(X(0x1de))](k[X(0x1f1)], -0x9dc * 0x1 + 0x216b + -0x15fb);
        }
        const o = {};
        o[X(0x223)] = h;
        const p = {};
        p[W(0x220)] = o, p[W(0x219)] = [k[W(0x1d8)]];
        const q = await CampaignContacts_1[W(0x1de)][X(0x21f)](p);
        if (!q) {
            if (k[W(0x1bd)](k[X(0x238)], k[W(0x1dd)]))
                throw new AppError_1[(X(0x1de))](k[W(0x1e3)], -0x7d7 * -0x1 + 0x1323 * -0x2 + 0xb * 0x2e9);
            else {
                const x = (0xd28 + -0x3fc + -0x92c, u[W(0x241) + X(0x230)])(h, new i());
                return k[W(0x1ac)](k[W(0x20a)](x, 0x51d + 0x483 + -0x5b8), j);
            }
        }
        const r = n[W(0x240)] ? k[W(0x216)](n[W(0x240)], 0x107b + -0x174b + -0x2 * -0x55c) : 0x4778 + 0x33f4 + 0xb53 * -0x4;
        let s = (0xcf9 + -0x2 * -0x8e + -0xe15, date_fns_tz_1[X(0x1eb) + X(0x218)])(n[X(0x1e5)], k[X(0x235)]);
        const t = q[X(0x210)](x => {
            const Y = W, Z = X;
            if (k[Y(0x1bd)](k[Z(0x1aa)], k[Z(0x1aa)])) {
                const z = {};
                return z[Y(0x1de)] = j, z && h[Y(0x1f9)] ? i : z;
            } else
                return s = (0xcd0 + 0x33 * -0x26 + 0x2 * -0x29f, date_fns_1[Z(0x1f6)])(s, k[Z(0x231)](r, -0x216c + 0x21ea + -0x26 * -0x17)), k[Z(0x1fb)](mountMessageData, n, x, {
                    ...j,
                    'jobId': Z(0x1dc) + '_' + n['id'] + Y(0x1b1) + x[Z(0x1e4)] + Y(0x1b6) + x['id'] + Z(0x1cd) + n[Y(0x1e5)][Z(0x1a9)](),
                    'delay': k[Z(0x204)](calcDelay, s, r)
                });
        });
        Queue_1[X(0x1de)][X(0x1c1)](k[X(0x1ad)], t);
        const u = {};
        u[X(0x1cc)] = k[W(0x1c2)], await n[W(0x1d6)](u);
    };
exports[K(0x1de)] = StartCampaignService;