'use strict';
const J = b, K = b;
(function (c, d) {
    const H = b, I = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(H(0x1ee)) / (0x1c4f + 0x1567 * -0x1 + -0x6e7) + parseInt(H(0x23f)) / (-0x45 * -0x5e + 0x18c3 + -0x3217) * (-parseInt(H(0x21b)) / (-0x13f0 + -0x5 * 0x19c + -0x1 * -0x1bff)) + parseInt(H(0x226)) / (-0x1348 + -0x8 * -0x3d6 + -0x1 * 0xb64) + -parseInt(I(0x1ec)) / (-0x2 * 0xdae + 0x19e + 0x19c3) * (-parseInt(I(0x211)) / (0x176c + 0xfbf * 0x1 + 0x2725 * -0x1)) + parseInt(I(0x247)) / (0x1 * -0x252a + 0x18e2 + 0x17 * 0x89) + -parseInt(I(0x261)) / (0x64d + 0x2554 + -0x2b99) * (parseInt(H(0x26d)) / (-0x2276 + 0x1b4 + -0x20cb * -0x1)) + parseInt(I(0x1f4)) / (-0xc82 * -0x3 + -0x1a2c + -0xb50);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x259d * 0x3d + 0x1 * 0x450e5 + 0xda29d));
var __importDefault = this && this[J(0x21a) + K(0x1f3)] || function (c) {
    const L = K;
    return c && c[L(0x1f1)] ? c : { 'default': c };
};
const G = {};
function a() {
    const a0 = [
        '24PXgqmD',
        'ngwWe',
        'GRrAl',
        'mGMmy',
        'end',
        'zonedTimeT',
        'JCvhW',
        'o_Paulo',
        '5083267BJkBtk',
        '../../mode',
        'isAfter',
        'InSeconds',
        'message2',
        'contactId',
        'defineProp',
        'HLFyX',
        'parse',
        'rIlQE',
        'jipuN',
        'ls/Campaig',
        'date-fns-t',
        'WYjsF',
        '../../erro',
        'getMinutes',
        '_id_',
        'ampaign',
        'SendMessag',
        'value',
        'message3',
        'oUtc',
        'HbKzj',
        'getTime',
        'message1',
        'JMNnH',
        '3746504dMLJYh',
        'session',
        'update',
        'difference',
        'terval',
        '08:00',
        'RiwAh',
        'where',
        'EaTmr',
        'hHKax',
        'skOxZ',
        'date-fns',
        '9rmHihB',
        'floor',
        '_time_',
        'isBefore',
        'ONHzd',
        'ZHiAs',
        '45NuGPdd',
        'ZWOtN',
        '694703eNyqpi',
        'wSKop',
        'getHours',
        '__esModule',
        'eWhatsappC',
        'fault',
        '7031490mDwrUT',
        'contact',
        'AIGN_NOT_E',
        'length',
        'addSeconds',
        'SkEFB',
        '_contact_',
        'kNLhg',
        'start',
        'XchmI',
        'XwrDC',
        'ERR_CAMPAI',
        'message',
        'GN_CONTACT',
        'cfAjK',
        '/Queue',
        '../../libs',
        'findOne',
        'campaignId',
        'ezNqk',
        'XRQUB',
        'sessionId',
        'setMinutes',
        'ERROR_CAMP',
        'split',
        'number',
        'default',
        '20:00',
        'QbUnW',
        '47202aBJDYz',
        'jgGJx',
        'bufTj',
        'OuCxz',
        'setHours',
        'zHZob',
        'uBbYP',
        'erty',
        'status',
        '__importDe',
        '70614MhPJOy',
        'HH:mm',
        'zpxxr',
        'isWithinIn',
        'InDays',
        'tenantId',
        'map',
        'America/Sa',
        'campaginId',
        'oDqDT',
        'EZmvL',
        '2137680Zvhjdy',
        'findAll',
        'delay',
        'mediaUrl',
        'OuNaF',
        'UPdMB',
        'xolrf',
        'XkzFY',
        'XISTS',
        'add',
        'zGwvV',
        'PZnfx',
        'xepBH',
        'include',
        'zzbKX',
        'rs/AppErro',
        'scheduled',
        'COKSY',
        'YCYOz',
        'random',
        'addDays',
        'CeSPv',
        'nContacts',
        'S_NOT_EXIS',
        'lASsD'
    ];
    a = function () {
        return a0;
    };
    return a();
}
G[J(0x25a)] = !![], Object[J(0x24d) + K(0x218)](exports, J(0x1f1), G);
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x824 + -0x64e + 0x16);
        let h = e[f];
        return h;
    }, b(c, d);
}
const date_fns_1 = require(K(0x26c)), date_fns_tz_1 = require(K(0x253) + 'z'), Campaign_1 = __importDefault(require(K(0x248) + J(0x252) + 'n')), AppError_1 = __importDefault(require(K(0x255) + K(0x235) + 'r')), CampaignContacts_1 = __importDefault(require(K(0x248) + J(0x252) + J(0x23c))), Queue_1 = __importDefault(require(J(0x204) + K(0x203))), cArquivoName = d => {
        const M = J, N = K, e = {};
        e[M(0x213)] = function (i, j) {
            return i - j;
        };
        const f = e;
        if (!d)
            return '';
        const g = d[N(0x20c)]('/'), h = g[f[N(0x213)](g[N(0x1f7)], 0x1 * -0x2d3 + 0x3e8 + -0x114)];
        return h;
    }, randomInteger = (d, e) => {
        const O = K, P = J, f = {};
        f[O(0x232)] = function (h, i) {
            return h + i;
        }, f[O(0x212)] = function (h, i) {
            return h * i;
        }, f[P(0x267)] = function (h, i) {
            return h - i;
        };
        const g = f;
        return g[O(0x232)](Math[O(0x26e)](g[P(0x212)](Math[O(0x239)](), g[P(0x232)](g[P(0x267)](e, d), -0x2 * 0x3fb + -0x14a7 + 0x6 * 0x4c5))), d);
    }, mountMessageData = (c, d, e) => {
        const Q = J, R = K, f = {
                'hHKax': function (i, j, k) {
                    return i(j, k);
                },
                'kNLhg': function (i, j) {
                    return i === j;
                },
                'EaTmr': function (i, j) {
                    return i(j);
                }
            }, g = f[Q(0x26a)](randomInteger, 0x2667 + 0x20c8 + -0x472e, -0x81e + 0xd * -0xf9 + 0xa63 * 0x2);
        let h = '';
        if (f[R(0x1fb)](g, 0x1012 + 0xe * -0x3c + 0x1 * -0xcc9))
            h = c[Q(0x25f)];
        if (f[R(0x1fb)](g, 0x1 * 0x2629 + 0x6 * -0x4b7 + 0x19 * -0x65))
            h = c[Q(0x24b)];
        if (f[Q(0x1fb)](g, 0x225 * 0xa + 0x26fe + 0x1f3 * -0x1f))
            h = c[R(0x25b)];
        return {
            'whatsappId': c[R(0x209)],
            'message': h,
            'number': d[R(0x1f5)][Q(0x20d)],
            'mediaUrl': c[Q(0x229)],
            'mediaName': f[R(0x269)](cArquivoName, c[R(0x229)]),
            'messageRandom': R(0x200) + g,
            'campaignContact': d,
            'options': e
        };
    }, nextDayHoursValid = e => {
        const S = J, T = J, f = {};
        f[S(0x251)] = function (q, r) {
            return q + r;
        }, f[S(0x23b)] = function (q, r) {
            return q * r;
        }, f[S(0x240)] = function (q, r) {
            return q < r;
        }, f[S(0x24e)] = T(0x266), f[T(0x272)] = T(0x21c), f[S(0x210)] = S(0x20f), f[T(0x230)] = function (q, r) {
            return q && r;
        }, f[S(0x224)] = function (q, r) {
            return q === r;
        }, f[S(0x1fe)] = S(0x241), f[T(0x1ef)] = T(0x23e), f[T(0x26b)] = function (q, r) {
            return q && r;
        }, f[T(0x234)] = function (q, r) {
            return q === r;
        }, f[S(0x242)] = function (q, r) {
            return q === r;
        }, f[S(0x217)] = S(0x231), f[S(0x22b)] = function (q, r) {
            return q && r;
        }, f[S(0x238)] = function (q, r) {
            return q > r;
        }, f[S(0x207)] = S(0x245), f[S(0x1fd)] = S(0x1f9);
        const g = f;
        let h = e;
        const i = new Date(), j = (-0x4b * -0x55 + -0xbda * 0x3 + 0xaa7, date_fns_1[T(0x264) + S(0x21f)])(h, new Date());
        g[S(0x240)](j, -0x2480 + -0x1a9f + 0xb * 0x5bd) && (h = (0x847 + -0x4d + -0x3fd * 0x2, date_fns_1[S(0x23a)])(h, g[S(0x23b)](j, -(-0x94 * -0x38 + 0x9e8 * -0x3 + 0x7 * -0x61))));
        g[S(0x240)](h[T(0x25e)](), i[T(0x25e)]()) && (h = (-0x7ea + -0x15b * 0xa + -0x2af * -0x8, date_fns_1[S(0x20a)])((0x2bc + 0x3 * 0x692 + -0x1672, date_fns_1[S(0x215)])(h, i[T(0x1f0)]()), i[T(0x256)]()));
        const k = (-0x43 * -0x82 + -0xdc + -0x212a, date_fns_1[S(0x24f)])(g[S(0x24e)], g[S(0x272)], h), l = (-0x20d * 0xc + 0x8d * -0x9 + -0x57 * -0x57, date_fns_1[S(0x24f)])(g[T(0x210)], g[S(0x272)], h), m = {};
        m[T(0x1fc)] = k, m[T(0x243)] = l;
        const n = (-0x1abe + -0x2324 + 0x2 * 0x1ef1, date_fns_1[S(0x21e) + S(0x265)])(h, m), o = (0x1 * 0x1f8c + 0x1 * -0x227 + -0x1d65, date_fns_1[S(0x270)])(k, h), p = (-0x207 * -0x1 + -0x23a2 + -0x1 * -0x219b, date_fns_1[S(0x249)])(l, h);
        g[S(0x230)](!n, o) && (g[T(0x224)](g[T(0x1fe)], g[S(0x1ef)]) ? f = (0x227f + 0x1884 * 0x1 + -0x3b03, g[S(0x215)])(h, -0x44c + 0x2530 * 0x1 + -0x20dc) : h = (0x19e6 + -0x25e5 + 0xbff, date_fns_1[S(0x20a)])((-0x1 * 0x1b2f + -0x2562 + 0x4091, date_fns_1[T(0x215)])(h, 0x1b63 + -0x15a3 + -0x5b8), -0x6f6 + -0x154f + -0x1c63 * -0x1));
        if (g[S(0x26b)](!n, p) && g[T(0x234)](j, 0x1c1a * 0x1 + -0x2bf + -0x195b)) {
            if (g[T(0x242)](g[S(0x217)], g[T(0x217)]))
                h = (-0x956 + -0xfd5 * -0x2 + -0x595 * 0x4, date_fns_1[S(0x23a)])((0x122 * -0x22 + 0x232c + 0x358, date_fns_1[T(0x215)])(h, -0x117c + -0x45 * 0x6b + 0x2e5b), 0x176b * -0x1 + -0xea8 + 0x2614);
            else {
                const s = (-0xa3 * -0x20 + -0x19f * 0xd + -0x1 * -0xb3, g[T(0x264) + S(0x24a)])(h, new i());
                return g[T(0x251)](g[S(0x23b)](s, -0x202e + 0x7a * -0x3a + 0x3fba), j);
            }
        }
        return g[T(0x22b)](!n, p) && g[T(0x238)](j, 0x1 * -0xc1c + -0x1 * -0xcf4 + -0xd8) && (g[S(0x234)](g[S(0x207)], g[S(0x1fd)]) ? g = (0x1d27 + -0x1880 + -0x1 * 0x4a7, h[T(0x23a)])(i, g[S(0x23b)](j, -(0x1ad9 + 0xda6 + 0x287e * -0x1))) : h = (-0x191d + -0x9bb + 0x22d8, date_fns_1[S(0x215)])(h, -0x3b9 * 0x4 + -0x1cfd + 0x2be9)), h;
    }, calcDelay = (d, e) => {
        const U = J, V = J, f = {};
        f[U(0x22d)] = function (i, j) {
            return i + j;
        }, f[V(0x214)] = function (i, j) {
            return i * j;
        };
        const g = f, h = (0xf6e + -0x26 * -0x68 + -0x1ede, date_fns_1[U(0x264) + U(0x24a)])(d, new Date());
        return g[U(0x22d)](g[U(0x214)](h, 0x23e1 + -0x566 * -0x1 + -0x255f), e);
    }, StartCampaignService = async ({
        campaignId: h,
        tenantId: i,
        options: j
    }) => {
        const W = K, X = K, k = {
                'EZmvL': W(0x20b) + X(0x1f6) + X(0x22e),
                'zpxxr': function (v, w) {
                    return v / w;
                },
                'XRQUB': function (v, w, x, y) {
                    return v(w, x, y);
                },
                'COKSY': function (v, w, x) {
                    return v(w, x);
                },
                'xolrf': W(0x262),
                'OuNaF': X(0x1f5),
                'WYjsF': function (v, w) {
                    return v !== w;
                },
                'zHZob': X(0x250),
                'ONHzd': W(0x1ff) + X(0x201) + W(0x23d) + 'TS',
                'ZWOtN': function (v, w) {
                    return v * w;
                },
                'JMNnH': W(0x222) + X(0x246),
                'HbKzj': W(0x259) + X(0x1f2) + W(0x258),
                'cfAjK': W(0x236)
            }, l = {};
        l['id'] = h, l[X(0x220)] = i;
        const m = {};
        m[W(0x268)] = l, m[X(0x233)] = [k[W(0x22c)]];
        const n = await Campaign_1[W(0x20e)][X(0x205)](m);
        if (!n)
            throw new AppError_1[(W(0x20e))](k[W(0x225)], 0x1cca + -0x142d * 0x1 + -0x709);
        const o = {};
        o[W(0x206)] = h;
        const p = {};
        p[X(0x268)] = o, p[W(0x233)] = [k[W(0x22a)]];
        const q = await CampaignContacts_1[X(0x20e)][X(0x227)](p);
        if (!q) {
            if (k[W(0x254)](k[X(0x216)], k[X(0x216)]))
                throw new m[(X(0x20e))](k[X(0x225)], 0x131 * -0xc + 0x39 * 0xa7 + -0x154f);
            else
                throw new AppError_1[(W(0x20e))](k[W(0x271)], -0x15b6 + -0x5c7 * -0x1 + -0x1 * -0x1183);
        }
        const r = n[W(0x228)] ? k[X(0x1ed)](n[X(0x228)], 0x7c * 0x15 + -0x1 * 0x25df + 0x1f9b) : 0x227c * -0x1 + -0x28c4 + 0x9960;
        let s = (-0x37 * -0x73 + 0x688 + -0x1 * 0x1f3d, date_fns_tz_1[W(0x244) + X(0x25c)])(n[W(0x1fc)], k[X(0x260)]);
        const t = q[W(0x221)](w => {
            const Y = W, Z = W;
            return s = (0x26a + 0x182c + 0x2 * -0xd4b, date_fns_1[Y(0x1f8)])(s, k[Z(0x21d)](r, 0x97 * -0x4 + -0x2233 + 0x47f * 0x9)), k[Y(0x208)](mountMessageData, n, w, {
                ...j,
                'jobId': Y(0x223) + '_' + n['id'] + Z(0x1fa) + w[Z(0x24c)] + Y(0x257) + w['id'] + Y(0x26f) + n[Z(0x1fc)][Y(0x25e)](),
                'delay': k[Y(0x237)](calcDelay, s, r)
            });
        });
        Queue_1[X(0x20e)][W(0x22f)](k[W(0x25d)], t);
        const u = {};
        u[W(0x219)] = k[X(0x202)], await n[W(0x263)](u);
    };
exports[K(0x20e)] = StartCampaignService;