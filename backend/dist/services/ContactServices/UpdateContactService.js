'use strict';const q=b,s=b;(function(c,d){const o=b,p=b,e=c();while(!![]){try{const f=parseInt(o(0x147))/0x1+-parseInt(o(0x14e))/0x2+parseInt(o(0x152))/0x3+parseInt(o(0x146))/0x4*(-parseInt(p(0x141))/0x5)+parseInt(o(0x156))/0x6+parseInt(o(0x157))/0x7+-parseInt(o(0x14b))/0x8;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xf39aa));function b(c,d){const e=a();return b=function(f,g){f=f-0x13f;let h=e[f];return h;},b(c,d);}var __importDefault=this&&this[q(0x150)]||function(c){const r=q;return c&&c[r(0x14d)]?c:{'default':c};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(s(0x153))),socketEmit_1=__importDefault(require(s(0x14a))),Contact_1=__importDefault(require(s(0x15c))),ContactCustomField_1=__importDefault(require(s(0x14c))),ContactWallet_1=__importDefault(require('../../models/ContactWallet')),UpdateContactService=async({contactData:c,contactId:d,tenantId:e})=>{const t=q,u=s,{email:f,name:g,number:h,extraInfo:i,wallets:j}=c,k=await Contact_1[t(0x15d)][u(0x140)]({'where':{'id':d,'tenantId':e},'attributes':['id',t(0x144),t(0x15b),'email',t(0x159)],'include':[u(0x13f),u(0x154),{'association':t(0x149),'attributes':['id','name']}]});if(!k)throw new AppError_1['default']('ERR_NO_CONTACT_FOUND',0x194);i&&(await Promise[t(0x142)](i[t(0x14f)](async l=>{const v=u,w=t;await ContactCustomField_1[v(0x15d)][w(0x15a)]({...l,'contactId':k['id']});})),await Promise[t(0x142)](k[t(0x13f)][u(0x14f)](async l=>{const x=t,y=u,m=i[x(0x148)](n=>n['id']===l['id']);m===-0x1&&await ContactCustomField_1[x(0x15d)][x(0x145)]({'where':{'id':l['id']}});})));if(j){await ContactWallet_1[u(0x15d)]['destroy']({'where':{'tenantId':e,'contactId':d}});const l=[];j['forEach'](m=>{l['push']({'walletId':!m['id']?m:m['id'],'contactId':d,'tenantId':e});}),await ContactWallet_1[t(0x15d)][u(0x155)](l);}return await k[t(0x143)]({'name':g,'number':h,'email':f}),await k['reload']({'attributes':['id','name','number',t(0x158),t(0x159)],'include':[t(0x13f),u(0x154),{'association':t(0x149),'attributes':['id',u(0x144)]}]}),(0x0,socketEmit_1[u(0x15d)])({'tenantId':e,'type':u(0x151),'payload':k}),k;};function a(){const z=['2346369GiqUrP','../../errors/AppError','tags','bulkCreate','7787010drYmXd','965601VnaNSW','email','profilePicUrl','upsert','number','../../models/Contact','default','extraInfo','findOne','10EshlRu','all','update','name','destroy','668124ZHbIke','1808160aujCQo','findIndex','wallets','../../helpers/socketEmit','13577408IpjrTK','../../models/ContactCustomField','__esModule','1994042voVsPH','map','__importDefault','contact:update'];a=function(){return z;};return a();}exports[q(0x15d)]=UpdateContactService;