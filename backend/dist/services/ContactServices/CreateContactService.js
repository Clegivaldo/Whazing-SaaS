'use strict';function b(c,d){const e=a();return b=function(f,g){f=f-0x107;let h=e[f];return h;},b(c,d);}const q=b,s=b;(function(c,d){const o=b,p=b,e=c();while(!![]){try{const f=-parseInt(o(0x111))/0x1*(-parseInt(p(0x114))/0x2)+parseInt(p(0x121))/0x3+parseInt(o(0x11b))/0x4+-parseInt(o(0x116))/0x5+parseInt(p(0x10a))/0x6+-parseInt(o(0x10e))/0x7+-parseInt(o(0x108))/0x8;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xc0f22));function a(){const w=['create','5WsmsYM','destroy','ERR_DUPLICATED_CONTACT','477362YeJOwo','../../errors/AppError','2560940TaVfWk','__esModule','../../helpers/socketEmit','tags','number','5413684eaWBHm','name','default','extraInfo','findOne','__importDefault','3781308oheYei','../../models/ContactWallet','16532696lCqFQB','profilePicUrl','6783846YiGRVB','push','bulkCreate','defineProperty','10981754BIVeNx','wallets'];a=function(){return w;};return a();}var __importDefault=this&&this[q(0x120)]||function(c){const r=q;return c&&c[r(0x117)]?c:{'default':c};};Object[q(0x10d)](exports,s(0x117),{'value':!![]});const AppError_1=__importDefault(require(q(0x115))),socketEmit_1=__importDefault(require(s(0x118))),Contact_1=__importDefault(require('../../models/Contact')),ContactWallet_1=__importDefault(require(s(0x107))),CreateContactService=async({name:c,number:d,email:email='',extraInfo:extraInfo=[],profilePicUrl:e,tenantId:f,wallets:g})=>{const t=q,u=s,h=await Contact_1[t(0x11d)][t(0x11f)]({'where':{'number':d,'tenantId':f}});if(h)throw new AppError_1[(u(0x11d))](u(0x113));const i=await Contact_1[t(0x11d)][t(0x110)]({'name':c,'number':d,'email':email,'extraInfo':extraInfo,'profilePicUrl':e,'tenantId':f},{'include':[u(0x11e),t(0x119),{'association':'wallets','attributes':['id',u(0x11c)]}]});if(g){await ContactWallet_1[u(0x11d)][u(0x112)]({'where':{'tenantId':f,'contactId':i['id']}});const j=[];g['forEach'](k=>{const v=u;j[v(0x10b)]({'walletId':!k['id']?k:k['id'],'contactId':i['id'],'tenantId':f});}),await ContactWallet_1['default'][t(0x10c)](j);}return await i['reload']({'attributes':['id','name',t(0x11a),'email',u(0x109)],'include':[u(0x11e),t(0x119),{'association':u(0x10f),'attributes':['id',t(0x11c)]}]}),(0x0,socketEmit_1[u(0x11d)])({'tenantId':f,'type':'contact:update','payload':i}),i;};exports[s(0x11d)]=CreateContactService;