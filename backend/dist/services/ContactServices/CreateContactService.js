'use strict';const r=b,s=b;function b(c,d){const e=a();return b=function(f,g){f=f-0x72;let h=e[f];return h;},b(c,d);}(function(c,d){const o=b,p=b,e=c();while(!![]){try{const f=parseInt(o(0x72))/0x1+-parseInt(p(0x84))/0x2*(parseInt(p(0x75))/0x3)+parseInt(p(0x76))/0x4*(-parseInt(p(0x78))/0x5)+parseInt(p(0x89))/0x6+parseInt(o(0x8a))/0x7*(parseInt(p(0x83))/0x8)+parseInt(p(0x73))/0x9+-parseInt(o(0x7c))/0xa;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xbcc60));var __importDefault=this&&this['__importDefault']||function(c){const q=b;return c&&c[q(0x7d)]?c:{'default':c};};Object[r(0x8c)](exports,r(0x7d),{'value':!![]});const AppError_1=__importDefault(require(s(0x7b))),socketEmit_1=__importDefault(require(r(0x86))),Contact_1=__importDefault(require('../../models/Contact')),ContactWallet_1=__importDefault(require(r(0x8b))),CreateContactService=async({name:c,number:d,email:email='',extraInfo:extraInfo=[],profilePicUrl:e,tenantId:f,wallets:g})=>{const t=r,u=s,h=await Contact_1[t(0x8d)][t(0x80)]({'where':{'number':d,'tenantId':f}});if(h)throw new AppError_1[(u(0x8d))]('ERR_DUPLICATED_CONTACT');const i=await Contact_1[t(0x8d)][u(0x82)]({'name':c,'number':d,'email':email,'extraInfo':extraInfo,'profilePicUrl':e,'tenantId':f},{'include':[t(0x88),'tags',{'association':'wallets','attributes':['id',u(0x85)]}]});if(g){await ContactWallet_1[u(0x8d)][t(0x7f)]({'where':{'tenantId':f,'contactId':i['id']}});const j=[];g[u(0x87)](k=>{const v=t;j[v(0x79)]({'walletId':!k['id']?k:k['id'],'contactId':i['id'],'tenantId':f});}),await ContactWallet_1[u(0x8d)]['bulkCreate'](j);}return await i[t(0x7a)]({'attributes':['id','name','number',u(0x77),u(0x74)],'include':[t(0x88),'tags',{'association':u(0x7e),'attributes':['id','name']}]}),(0x0,socketEmit_1[t(0x8d)])({'tenantId':f,'type':u(0x81),'payload':i}),i;};function a(){const w=['default','1195144Cajnha','6651000NgdymE','profilePicUrl','3DSoNLS','344vrjKfk','email','7855zLreCj','push','reload','../../errors/AppError','20157140edcBlr','__esModule','wallets','destroy','findOne','contact:update','create','652504cIxZyY','1562862pxVHeg','name','../../helpers/socketEmit','forEach','extraInfo','6712914EHCfRk','56zvwwpb','../../models/ContactWallet','defineProperty'];a=function(){return w;};return a();}exports[r(0x8d)]=CreateContactService;