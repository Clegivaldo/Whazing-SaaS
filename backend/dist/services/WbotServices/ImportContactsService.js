'use strict';const I=b,L=b;(function(c,d){const G=b,H=b,e=c();while(!![]){try{const f=parseInt(G(0x91))/0x1*(-parseInt(H(0x76))/0x2)+-parseInt(G(0x9a))/0x3*(parseInt(H(0x77))/0x4)+-parseInt(H(0xa2))/0x5+parseInt(H(0x80))/0x6*(-parseInt(G(0x73))/0x7)+parseInt(H(0x9e))/0x8+-parseInt(H(0xa1))/0x9*(-parseInt(G(0x75))/0xa)+parseInt(G(0x86))/0xb*(parseInt(H(0x8d))/0xc);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x79a49));function b(c,d){const e=a();return b=function(f,g){f=f-0x73;let h=e[f];return h;},b(c,d);}var __createBinding=this&&this['__createBinding']||(Object[I(0x7e)]?function(c,d,e,f){const J=I,K=I;if(f===undefined)f=e;var g=Object[J(0x78)](d,e);(!g||('get'in g?!d[K(0x83)]:g[J(0x84)]||g[K(0x87)]))&&(g={'enumerable':!![],'get':function(){return d[e];}}),Object[K(0x99)](c,f,g);}:function(c,d,e,f){if(f===undefined)f=e;c[f]=d[e];}),__setModuleDefault=this&&this[L(0x7a)]||(Object[I(0x7e)]?function(c,d){const M=I,N=L;Object[M(0x99)](c,M(0x7c),{'enumerable':!![],'value':d});}:function(c,d){const O=I;c[O(0x7c)]=d;}),__importStar=this&&this['__importStar']||function(c){const P=I,Q=L;if(c&&c[P(0x83)])return c;var d={};if(c!=null){for(var e in c)if(e!==Q(0x7c)&&Object['prototype']['hasOwnProperty'][P(0x96)](c,e))__createBinding(d,c,e);}return __setModuleDefault(d,c),d;},__importDefault=this&&this[I(0x8b)]||function(c){const R=L;return c&&c[R(0x83)]?c:{'default':c};};Object[I(0x99)](exports,I(0x83),{'value':!![]});const Sentry=__importStar(require(L(0x7f))),wbot_baileys_1=require('../../libs/wbot-baileys'),Contact_1=__importDefault(require(L(0x7d))),logger_1=require(L(0x85)),ShowBaileysService_1=__importDefault(require(L(0x7b))),CreateContactService_1=__importDefault(require(L(0x9d))),lodash_1=require('lodash'),Whatsapp_1=__importDefault(require(L(0x94))),AppError_1=__importDefault(require(I(0x9c))),ImportContactsService=async(c,d)=>{const S=I,T=I,e=(0x0,wbot_baileys_1[S(0x89)])(d),f=await Whatsapp_1[S(0x7c)]['findByPk'](d);if(f[T(0x88)]!='CONNECTED'){if(T(0x82)===T(0x8f))return g&&h[T(0x83)]?i:{'default':j};else throw new AppError_1[(T(0x7c))](T(0x9f));}let g;try{const j=await(0x0,ShowBaileysService_1[T(0x7c)])(e['id']);g=JSON[T(0x8c)](JSON['stringify'](j[S(0x8e)]));}catch(k){console[T(0x79)](k),Sentry[T(0x97)](k),logger_1[T(0xa0)][S(0xa6)]('Não\x20foi\x20possível\x20obter\x20os\x20contatos\x20do\x20WhatsApp\x20do\x20telefone.\x20Err:\x20'+k);}const h=(0x0,lodash_1[S(0xa5)])(g)?JSON['parse'](g):g;(0x0,lodash_1[S(0x98)])(h)&&h[T(0x95)](async({id:l,name:m,notify:n})=>{const U=T,V=S;if(U(0x9b)!==V(0x9b))i['captureException'](j),k[U(0x79)](l),m[U(0xa0)][V(0xa7)](V(0x81)+n);else{if(l===U(0xa3)||l[V(0x74)](U(0x8a))===U(0x8a))return;const p=l[V(0x90)](/\D/g,''),q=await Contact_1['default']['findOne']({'where':{'number':p,'tenantId':c}});if(!q)try{if('XbYix'===U(0x92))await(0x0,CreateContactService_1[U(0x7c)])({'number':p,'name':m||n,'tenantId':c});else{if(n&&o[V(0x83)])return p;var s={};if(q!=null){for(var t in r)if(t!==V(0x7c)&&s[V(0xa4)][V(0x93)][V(0x96)](t,t))u(s,v,t);}return w(s,x),s;}}catch(s){Sentry[U(0x97)](s),console[V(0x79)](s),logger_1[U(0xa0)][V(0xa7)](V(0x81)+s);}}});};exports[L(0x7c)]=ImportContactsService;function a(){const W=['status@broadcast','prototype','isString','error','warn','81487dLUIkn','includes','215010VyGMis','130138WvnITX','4pWKtcB','getOwnPropertyDescriptor','log','__setModuleDefault','../BaileysServices/ShowBaileysService','default','../../models/Contact','create','@sentry/node','318czurQE','Não\x20foi\x20possível\x20obter\x20os\x20contatos\x20do\x20WhatsApp\x20do\x20telefone.\x20Erro:\x20','jUWeh','__esModule','writable','../../utils/logger','11DmcPkl','configurable','status','getWbot','g.us','__importDefault','parse','13894068BUUKmG','contacts','MzOAN','replace','4zzgsAg','XbYix','hasOwnProperty','../../models/Whatsapp','forEach','call','captureException','isArray','defineProperty','207642ySYPpz','lLNIr','../../errors/AppError','../ContactServices/CreateContactService','3557416RlqaHU','Whatsapp\x20selecionado\x20não\x20esta\x20conectado','logger','36WPiKSi','1219040ZWjONE'];a=function(){return W;};return a();}