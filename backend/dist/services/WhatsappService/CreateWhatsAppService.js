'use strict';const w=b,y=b;(function(c,d){const u=b,v=b,e=c();while(!![]){try{const f=parseInt(u(0x135))/0x1+parseInt(v(0x13b))/0x2+parseInt(v(0x12e))/0x3+-parseInt(u(0x139))/0x4+parseInt(v(0x143))/0x5*(-parseInt(v(0x147))/0x6)+-parseInt(u(0x13f))/0x7+parseInt(u(0x140))/0x8;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x6de10));var __importDefault=this&&this[w(0x136)]||function(c){const x=w;return c&&c[x(0x130)]?c:{'default':c};};function a(){const B=['7832008CCJyCm','logger','DISCONNECTED','5AYwWLp','iiTpF','WABA:\x20favor\x20informar\x20o\x20Token\x20e\x20a\x20BSP','telegram','4094358FojTlO','update','2078910TIyPxM','findOne','__esModule','defineProperty','error','rWJcR','Instagram:\x20favor\x20informar\x20o\x20UsuÃ¡rio\x20e\x20senha\x20corretamente.','1603aWspjx','__importDefault','../../libs/socket','instagram','3246848oZotck','default','1045624fAbnOr','waba','Telegram:\x20favor\x20informar\x20o\x20Token.','create','1765519ZBVlFz'];a=function(){return B;};return a();}function b(c,d){const e=a();return b=function(f,g){f=f-0x12e;let h=e[f];return h;},b(c,d);}Object[w(0x131)](exports,w(0x130),{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),socket_1=require(y(0x137)),Whatsapp_1=__importDefault(require('../../models/Whatsapp')),logger_1=require('../../utils/logger'),CreateWhatsAppService=async({name:c,status:status=w(0x142),tenantId:d,tokenTelegram:e,instagramUser:f,instagramKey:g,type:h,wabaBSP:i,tokenAPI:j,fbPageId:k,farewellMessage:l,isDefault:isDefault=![]})=>{const z=y,A=y;if(h===z(0x13c)&&(!j||!i))throw new AppError_1['default']('WABA:\x20favor\x20informar\x20o\x20Token\x20e\x20a\x20BSP');if(h===z(0x138)&&!f)throw new AppError_1['default'](z(0x134));if(h===z(0x146)&&!e)throw new AppError_1[(A(0x13a))](A(0x13d));const m=await Whatsapp_1['default'][z(0x12f)]({'where':{'tenantId':d,'isDefault':!![]}});if(!m){if(A(0x144)!==z(0x144))return g&&h[z(0x130)]?i:{'default':j};else isDefault=!m;}isDefault&&('EaACe'!=='eeQgX'?m&&await m[A(0x148)]({'isDefault':![]}):e=!f);try{if(A(0x133)!=='rWJcR')throw new d[(A(0x13a))]('Telegram:\x20favor\x20informar\x20o\x20Token.');else{const q=await Whatsapp_1[z(0x13a)][A(0x13e)]({'name':c,'status':status,'isDefault':isDefault,'tenantId':d,'tokenTelegram':e,'instagramUser':f,'instagramKey':g,'type':h,'wabaBSP':i,'tokenAPI':j,'fbPageId':k,'farewellMessage':l}),r=(0x0,socket_1['getIO'])();return r['emit'](d+':whatsapp',{'action':A(0x148),'whatsapp':q}),{'whatsapp':q,'oldDefaultWhatsapp':m};}}catch(s){if('jHOaO'!=='jHOaO')throw new d[(A(0x13a))](A(0x145));else{logger_1[z(0x141)][A(0x132)](s);throw new AppError_1[(z(0x13a))]('ERR_CREATE_WAPP',0x194);}}};exports['default']=CreateWhatsAppService;