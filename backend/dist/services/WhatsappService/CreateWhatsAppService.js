'use strict';function b(c,d){const e=a();return b=function(f,g){f=f-0x75;let h=e[f];return h;},b(c,d);}const u=b,v=b;function a(){const y=['__esModule','2iTgJnF','../../models/Whatsapp','WABA:\x20favor\x20informar\x20o\x20Token\x20e\x20a\x20BSP','findOne','Apdpx','waba','defineProperty','5530122AGGJoy','Telegram:\x20favor\x20informar\x20o\x20Token.','RsSdU','1085514aPppnc','13631630EYypvr','getIO','ERR_CREATE_WAPP','error','10SUZzLt','default','1023281rZhAqT','3637962bKziFq','instagram','401164TjtRHw','727134YHjZfh','24odIWSv','__importDefault','DISCONNECTED',':whatsapp','update'];a=function(){return y;};return a();}(function(c,d){const s=b,t=b,e=c();while(!![]){try{const f=parseInt(s(0x78))/0x1*(parseInt(t(0x7f))/0x2)+parseInt(s(0x89))/0x3+-parseInt(t(0x77))/0x4*(-parseInt(t(0x8e))/0x5)+-parseInt(s(0x75))/0x6+-parseInt(s(0x90))/0x7*(-parseInt(t(0x79))/0x8)+parseInt(s(0x86))/0x9+-parseInt(s(0x8a))/0xa;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x5b14f));var __importDefault=this&&this[u(0x7a)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object[u(0x85)](exports,u(0x7e),{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),socket_1=require('../../libs/socket'),Whatsapp_1=__importDefault(require(v(0x80))),logger_1=require('../../utils/logger'),CreateWhatsAppService=async({name:c,status:status=v(0x7b),tenantId:d,tokenTelegram:e,instagramUser:f,instagramKey:g,type:h,wabaBSP:i,tokenAPI:j,fbPageId:k,farewellMessage:l,isDefault:isDefault=![]})=>{const w=v,x=u;if(h===w(0x84)&&(!j||!i))throw new AppError_1[(x(0x8f))](w(0x81));if(h===x(0x76)&&!f){if(w(0x88)==='LpvVh')e=!f;else throw new AppError_1[(x(0x8f))]('Instagram:\x20favor\x20informar\x20o\x20Usu√°rio\x20e\x20senha\x20corretamente.');}if(h==='telegram'&&!e)throw new AppError_1[(w(0x8f))]('Telegram:\x20favor\x20informar\x20o\x20Token.');const m=await Whatsapp_1[x(0x8f)][x(0x82)]({'where':{'tenantId':d,'isDefault':!![]}});!m&&(isDefault=!m);isDefault&&(m&&await m[w(0x7d)]({'isDefault':![]}));try{const o=await Whatsapp_1[x(0x8f)]['create']({'name':c,'status':status,'isDefault':isDefault,'tenantId':d,'tokenTelegram':e,'instagramUser':f,'instagramKey':g,'type':h,'wabaBSP':i,'tokenAPI':j,'fbPageId':k,'farewellMessage':l}),p=(0x0,socket_1[w(0x8b)])();return p['emit'](d+x(0x7c),{'action':w(0x7d),'whatsapp':o}),{'whatsapp':o,'oldDefaultWhatsapp':m};}catch(q){if(x(0x83)===w(0x83)){logger_1['logger'][x(0x8d)](q);throw new AppError_1[(w(0x8f))](w(0x8c),0x194);}else throw new d[(x(0x8f))](w(0x87));}};exports['default']=CreateWhatsAppService;