'use strict';const I=b,J=b;function b(c,d){const e=a();return b=function(f,g){f=f-0x1ac;let h=e[f];return h;},b(c,d);}(function(c,d){const G=b,H=b,e=c();while(!![]){try{const f=parseInt(G(0x1ac))/0x1+-parseInt(H(0x1ba))/0x2*(parseInt(H(0x1c0))/0x3)+-parseInt(G(0x1cc))/0x4+-parseInt(H(0x1c1))/0x5+parseInt(G(0x1b9))/0x6+parseInt(G(0x1b1))/0x7+-parseInt(G(0x1bb))/0x8*(-parseInt(G(0x1be))/0x9);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x94077));var __createBinding=this&&this[I(0x1b8)]||(Object[J(0x1bc)]?function(c,d,e,f){const K=I,L=J;if(f===undefined)f=e;var g=Object[K(0x1ae)](d,e);(!g||('get'in g?!d[L(0x1c7)]:g[L(0x1b6)]||g[L(0x1c8)]))&&(g={'enumerable':!![],'get':function(){return d[e];}}),Object[K(0x1b5)](c,f,g);}:function(c,d,e,f){if(f===undefined)f=e;c[f]=d[e];}),__setModuleDefault=this&&this[J(0x1bd)]||(Object[I(0x1bc)]?function(c,d){const M=I;Object['defineProperty'](c,M(0x1ca),{'enumerable':!![],'value':d});}:function(c,d){const N=J;c[N(0x1ca)]=d;}),__importStar=this&&this['__importStar']||function(c){const O=J,P=I;if(c&&c[O(0x1c7)])return c;var d={};if(c!=null){for(var e in c)if(e!=='default'&&Object[P(0x1b7)][P(0x1cb)][O(0x1c3)](c,e))__createBinding(d,c,e);}return __setModuleDefault(d,c),d;},__importDefault=this&&this[I(0x1c5)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object[J(0x1b5)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(J(0x1c6))),sequelize_1=require('sequelize'),AppError_1=__importDefault(require('../../errors/AppError')),Whatsapp_1=__importDefault(require('../../models/Whatsapp')),UpdateWhatsAppService=async({whatsappData:c,whatsappId:d,tenantId:e})=>{const Q=J,R=I,f=Yup[Q(0x1b3)]()[Q(0x1c4)]({'name':Yup['string']()[R(0x1bf)](0x2),'isDefault':Yup['boolean']()}),{name:g,status:h,isDefault:i,session:j,tokenTelegram:k,instagramUser:l,instagramKey:m,isActive:n,type:o,wabaBSP:p,tokenAPI:q,fbPageId:r,farewellMessage:s,chatFlowId:t,is_open_ia:u,queue_transf:v}=c;try{await f[Q(0x1c9)]({'name':g,'status':h,'isDefault':i});let w=null;i&&(w=await Whatsapp_1[R(0x1ca)][R(0x1c2)]({'where':{'isDefault':!![],'tenantId':e,'id':{[sequelize_1['Op'][R(0x1b2)]]:d}}}),w&&await w['update']({'isDefault':![]}));const x=await Whatsapp_1[R(0x1ca)]['findOne']({'where':{'id':d,'tenantId':e}});if(!x)throw new AppError_1['default']('ERR_NO_WAPP_FOUND',0x194);const y={'name':g,'status':h,'session':j,'isDefault':i,'tokenTelegram':k,'instagramUser':l,'isActive':n,'type':o,'wabaBSP':p,'tokenAPI':q,'fbPageId':r,'farewellMessage':s,'chatFlowId':t,'is_open_ia':u,'queue_transf':v};return m&&(Q(0x1b0)!=='nLiED'?y['instagramKey']=m:f['defineProperty'](g,Q(0x1ca),{'enumerable':!![],'value':h})),await x[R(0x1b4)](y),{'whatsapp':x,'oldDefaultWhatsapp':w};}catch(A){if(Q(0x1af)===Q(0x1ad)){if(k===l)m=n;o[p]=q[r];}else throw new AppError_1[(R(0x1ca))](A['message']);}};function a(){const S=['findOne','call','shape','__importDefault','yup','__esModule','configurable','validate','default','hasOwnProperty','2757216fRzhFi','108145MwgQYS','KfcoC','getOwnPropertyDescriptor','UpWYG','vbEYD','3639251JelfTE','not','object','update','defineProperty','writable','prototype','__createBinding','1332054NyXbeC','366190KrMjIf','1592vRblsd','create','__setModuleDefault','90081GJVNpJ','min','15mJhvbf','3153660Qdhsjo'];a=function(){return S;};return a();}exports['default']=UpdateWhatsAppService;