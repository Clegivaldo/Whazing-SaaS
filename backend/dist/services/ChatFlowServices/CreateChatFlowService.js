'use strict';const n=b,o=b;(function(c,d){const l=b,m=b,e=c();while(!![]){try{const f=parseInt(l(0x1df))/0x1*(parseInt(l(0x1db))/0x2)+-parseInt(l(0x1d5))/0x3+parseInt(l(0x1ec))/0x4+-parseInt(l(0x1d1))/0x5*(-parseInt(l(0x1d4))/0x6)+-parseInt(l(0x1d7))/0x7*(parseInt(l(0x1e6))/0x8)+parseInt(l(0x1de))/0x9*(-parseInt(l(0x1e4))/0xa)+-parseInt(m(0x1e5))/0xb;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x32549));var __importDefault=this&&this[n(0x1ea)]||function(c){return c&&c['__esModule']?c:{'default':c};};function a(){const r=['base64','258255erzwRp','32427XHQHNC','getTime','nodeList','join','path','20mCPoaV','3350853QqcbID','5728wfVTxd','util','MediaField','interactions','__importDefault','mediaUrl','1107760ZcTWyQ','name','__esModule','15oSTZTp','../../models/ChatFlow','data','777660mQuxIB','1057266WhXMDo','default','679DooyZk','media','type','writeFile','20KcTwFP','split'];a=function(){return r;};return a();}Object['defineProperty'](exports,o(0x1d0),{'value':!![]});const util_1=require(n(0x1e7)),path_1=require(n(0x1e3)),fs_1=require('fs'),ChatFlow_1=__importDefault(require(n(0x1d2))),writeFileAsync=(0x0,util_1['promisify'])(fs_1[o(0x1da)]),CreateChatFlowService=async({flow:c,userId:d,tenantId:e,name:f,isActive:g})=>{const p=o,q=n;for await(const i of c[p(0x1e1)]){if(i[q(0x1d9)]==='node')for await(const j of i[p(0x1e9)]){if(j[q(0x1d9)]===p(0x1e8)&&j[q(0x1d3)][q(0x1d8)]){const k=new Date()[q(0x1e0)]()+'-'+j[p(0x1d3)][q(0x1ed)];await writeFileAsync((0x0,path_1[q(0x1e2)])(__dirname,'..','..','..','public',k),j[p(0x1d3)][q(0x1d8)][p(0x1dc)](q(0x1dd))[0x1],p(0x1dd)),delete j[p(0x1d3)][p(0x1d8)],j[q(0x1d3)]['fileName']=j[p(0x1d3)][q(0x1ed)],j[p(0x1d3)][q(0x1eb)]=k;}}}const h=await ChatFlow_1[q(0x1d6)]['create']({'flow':c,'userId':d,'tenantId':e,'name':f,'isActive':g});return h;};function b(c,d){const e=a();return b=function(f,g){f=f-0x1d0;let h=e[f];return h;},b(c,d);}exports[o(0x1d6)]=CreateChatFlowService;