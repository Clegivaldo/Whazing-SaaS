'use strict';const n=b,p=b;function b(c,d){const e=a();return b=function(f,g){f=f-0x1c3;let h=e[f];return h;},b(c,d);}function a(){const s=['findByPk','1424000peAfOr','answer','pending','../TicketServices/UpdateQueueIATicket','8027780XdPqpY','parse','tenantId','308BHrGRj','../../restClients/openIARestClient','2586384vRwvaQ','isGroup','answered','../MessageServices/CreateMessageSystemService','bot','log','../../models/Contact','number','message','73623VHiSvJ','27582swUJgE','../../models/Whatsapp','default','__esModule','body','Transfer','276prGNHJ','__importDefault','2767218OPRUCZ','queue_transf','7255377oOpxcp'];a=function(){return s;};return a();}(function(c,d){const l=b,m=b,e=c();while(!![]){try{const f=parseInt(l(0x1c9))/0x1+-parseInt(l(0x1c5))/0x2+parseInt(l(0x1db))/0x3*(-parseInt(l(0x1c3))/0x4)+parseInt(m(0x1cd))/0x5+-parseInt(m(0x1dc))/0x6*(parseInt(m(0x1d0))/0x7)+parseInt(m(0x1d2))/0x8+parseInt(l(0x1c7))/0x9;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xd6cb9));var __importDefault=this&&this[n(0x1c4)]||function(c){const o=n;return c&&c[o(0x1df)]?c:{'default':c};};Object['defineProperty'](exports,n(0x1df),{'value':!![]});const Contact_1=__importDefault(require(p(0x1d8))),openIARestClient_1=require(n(0x1d1)),CreateMessageSystemService_1=__importDefault(require(n(0x1d5))),Whatsapp_1=__importDefault(require(p(0x1dd))),UpdateQueueIATicket_1=__importDefault(require(n(0x1cc))),VerifyMensageOpenIA=async(c,d,e,f)=>{const q=p,r=n;if(e['status']===q(0x1cb)&&!d['fromMe']&&!e[q(0x1d3)]&&!e[r(0x1d4)]&&e['is_chat_ia'])try{const g=await Contact_1[q(0x1de)][q(0x1c8)](e['contactId']),h=await Whatsapp_1[r(0x1de)][r(0x1c8)](e['whatsappId']);let i=await(0x0,openIARestClient_1['sendMessageToIA'])({'message':{'id':c['id'],'contact_name':g['name'],'ticket_id':e['id'],'body':d[q(0x1e0)],'sender_number':h[r(0x1d9)],'receiver_number':g['number']}});i=JSON[q(0x1ce)](i);const j={'body':i[q(0x1da)][r(0x1ca)],'fromMe':!![],'read':!![],'sendType':r(0x1d6)};await(0x0,CreateMessageSystemService_1[r(0x1de)])({'msg':j,'tenantId':e[q(0x1cf)],'ticket':e,'sendType':j['sendType'],'status':q(0x1cb)}),i[r(0x1da)]['typeMessage']==r(0x1e1)&&await(0x0,UpdateQueueIATicket_1[q(0x1de)])(h[r(0x1c6)],e);}catch(k){console[q(0x1d7)](k);}};exports[p(0x1de)]=VerifyMensageOpenIA;