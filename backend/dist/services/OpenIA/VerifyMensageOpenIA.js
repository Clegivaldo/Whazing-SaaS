'use strict';function b(c,d){const e=a();return b=function(f,g){f=f-0xf2;let h=e[f];return h;},b(c,d);}const n=b,o=b;function a(){const r=['body','answer','message','2177340eWLCUq','14YwhjNt','answered','sendType','queue_transf','25LLXrga','13527890kkwrtT','defineProperty','940716yWwaju','name','isGroup','21302988jZFOcG','status','fromMe','number','254574VehtLy','../../restClients/openIARestClient','11uLFCEh','findByPk','../../models/Whatsapp','pending','whatsappId','default','parse','../../models/Contact','4000XxgeAo','1EDkXeg','__importDefault','../TicketServices/UpdateQueueIATicket','__esModule','24192EvjAwi','log','contactId','265880DVUVNb','tenantId'];a=function(){return r;};return a();}(function(c,d){const l=b,m=b,e=c();while(!![]){try{const f=-parseInt(l(0x107))/0x1*(parseInt(l(0xfc))/0x2)+-parseInt(m(0x113))/0x3+parseInt(m(0x10e))/0x4*(parseInt(l(0xf2))/0x5)+parseInt(m(0xf5))/0x6*(parseInt(m(0x114))/0x7)+-parseInt(l(0x106))/0x8*(-parseInt(l(0x10b))/0x9)+-parseInt(l(0xf3))/0xa*(-parseInt(l(0xfe))/0xb)+-parseInt(m(0xf8))/0xc;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xae69b));var __importDefault=this&&this[n(0x108)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object[o(0xf4)](exports,n(0x10a),{'value':!![]});const Contact_1=__importDefault(require(n(0x105))),openIARestClient_1=require(o(0xfd)),CreateMessageSystemService_1=__importDefault(require('../MessageServices/CreateMessageSystemService')),Whatsapp_1=__importDefault(require(n(0x100))),UpdateQueueIATicket_1=__importDefault(require(n(0x109))),VerifyMensageOpenIA=async(c,d,e,f)=>{const p=n,q=n;if(e[p(0xf9)]===q(0x101)&&!d[p(0xfa)]&&!e[q(0xf7)]&&!e[q(0x115)]&&e['is_chat_ia'])try{const g=await Contact_1['default'][q(0xff)](e[q(0x10d)]),h=await Whatsapp_1[p(0x103)][q(0xff)](e[q(0x102)]);let i=await(0x0,openIARestClient_1['sendMessageToIA'])({'message':{'id':c['id'],'contact_name':g[p(0xf6)],'ticket_id':e['id'],'body':d[p(0x110)],'sender_number':h[p(0xfb)],'receiver_number':g[q(0xfb)]}});i=JSON[q(0x104)](i);const j={'body':i['message'][p(0x111)],'fromMe':!![],'read':!![],'sendType':'bot'};await(0x0,CreateMessageSystemService_1[q(0x103)])({'msg':j,'tenantId':e[p(0x10f)],'ticket':e,'sendType':j[p(0x116)],'status':'pending'}),i[p(0x112)]['typeMessage']=='Transfer'&&await(0x0,UpdateQueueIATicket_1[q(0x103)])(h[q(0x117)],e);}catch(k){console[p(0x10c)](k);}};exports[n(0x103)]=VerifyMensageOpenIA;