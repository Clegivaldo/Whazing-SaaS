'use strict';const s=b,u=b;(function(c,d){const q=b,r=b,e=c();while(!![]){try{const f=parseInt(q(0x164))/0x1*(-parseInt(q(0x16e))/0x2)+parseInt(q(0x168))/0x3+parseInt(q(0x159))/0x4*(-parseInt(r(0x15f))/0x5)+parseInt(r(0x176))/0x6+-parseInt(r(0x166))/0x7*(-parseInt(q(0x173))/0x8)+-parseInt(q(0x162))/0x9*(-parseInt(r(0x14d))/0xa)+-parseInt(q(0x15e))/0xb*(-parseInt(r(0x174))/0xc);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xd761e));function b(c,d){const e=a();return b=function(f,g){f=f-0x14c;let h=e[f];return h;},b(c,d);}var __importDefault=this&&this[s(0x154)]||function(c){const t=s;return c&&c[t(0x171)]?c:{'default':c};};Object[s(0x160)](exports,u(0x171),{'value':!![]});const Contact_1=__importDefault(require(s(0x167))),openIARestClient_1=require(u(0x165)),CreateMessageSystemService_1=__importDefault(require('../MessageServices/CreateMessageSystemService')),Whatsapp_1=__importDefault(require(u(0x16f))),UpdateQueueIATicket_1=__importDefault(require('../TicketServices/UpdateQueueIATicket')),ContactWallet_1=__importDefault(require(u(0x158))),VerifyContactBaileys_1=require(u(0x16d)),VerifyMensageOpenIAQueue=async(c,d,e=![],f=![],g,h)=>{const v=s,w=s;if(c['status']==='pending'&&!c[v(0x151)]&&!c['answered']&&c[v(0x175)]&&d['from_ia']){if(h&&h[w(0x15c)])return;const i=await ContactWallet_1[v(0x14c)][w(0x16b)]({'where':{'contactId':c[v(0x153)]}});if(!!i){await(0x0,UpdateQueueIATicket_1[v(0x14c)])(null,c,i[v(0x152)]);return;}try{const j=await Contact_1[v(0x14c)][w(0x16c)](c[w(0x153)]),k=await Whatsapp_1['default']['findByPk'](c[w(0x177)]);let l;if(e)l=await(0x0,openIARestClient_1[v(0x14e)])({'message':{'id':'primeira\x20mensagem','contact_name':j[v(0x170)],'ticket_id':c['id'],'body':v(0x15a),'sender_number':k[w(0x161)],'receiver_number':j[v(0x161)]}});else{const n=await(0x0,VerifyContactBaileys_1[w(0x169)])(h);l=await(0x0,openIARestClient_1[v(0x14e)])({'message':{'id':g['id'],'contact_name':j[w(0x170)],'ticket_id':c['id'],'body':n,'sender_number':k[v(0x161)],'receiver_number':j[w(0x161)]}});}l=JSON[v(0x157)](l);const m={'body':l[w(0x14f)]['answer'],'fromMe':!![],'read':!![],'sendType':w(0x155)};await(0x0,CreateMessageSystemService_1[w(0x14c)])({'msg':m,'tenantId':c['tenantId'],'ticket':c,'sendType':m[v(0x156)],'status':w(0x15b)});if(l[v(0x14f)][v(0x15d)]==v(0x163)){const o=f?c[v(0x172)]:k[v(0x150)];await(0x0,UpdateQueueIATicket_1['default'])(o,c);}}catch(p){console[v(0x16a)](p);}}};function a(){const x=['findByPk','../WbotServices/helpers/VerifyContactBaileys','6zlzGbO','../../models/Whatsapp','name','__esModule','queueId','40040kuAUVc','397356qidwVv','is_chat_ia','870144JZNMnG','whatsappId','default','40rbpjbF','sendMessageToIA','message','queue_transf','isGroup','walletId','contactId','__importDefault','bot','sendType','parse','../../models/ContactWallet','156AWyTQT','Ol√°','pending','fromMe','typeMessage','275KSsToS','30810IaHwiT','defineProperty','number','271818ssBIdq','Transfer','492887ocnwjL','../../restClients/openIARestClient','1302YfcyhR','../../models/Contact','1729794QqRuxE','getBodyMessage','log','findOne'];a=function(){return x;};return a();}exports[s(0x14c)]=VerifyMensageOpenIAQueue;