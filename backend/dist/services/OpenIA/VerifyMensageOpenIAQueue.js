'use strict';const s=b,u=b;(function(c,d){const q=b,r=b,e=c();while(!![]){try{const f=-parseInt(q(0x18a))/0x1+parseInt(r(0x1a2))/0x2*(-parseInt(q(0x1a7))/0x3)+parseInt(q(0x1a8))/0x4+parseInt(q(0x1ae))/0x5*(-parseInt(r(0x19e))/0x6)+parseInt(r(0x188))/0x7+-parseInt(q(0x18f))/0x8+parseInt(r(0x18e))/0x9;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xd430e));function a(){const x=['queue_transf','../TicketServices/UpdateQueueIATicket','pending','../../models/Contact','answer','number','is_chat_ia','from_ia','findByPk','bot','message','getBodyMessage','isGroup','72cnxITH','fromMe','default','../../restClients/openIARestClient','6xAYXqk','contactId','../MessageServices/CreateMessageSystemService','typeMessage','OlÃ¡','324081fczFmt','5761480yawIIN','primeira\x20mensagem','answered','log','../../models/ContactWallet','__esModule','708485mPgDIF','132419EHonnH','tenantId','581946GGTOct','sendMessageToIA','name','../../models/Whatsapp','31229640eipBmW','11629776NLcZCb','__importDefault'];a=function(){return x;};return a();}var __importDefault=this&&this[s(0x190)]||function(c){const t=s;return c&&c[t(0x1ad)]?c:{'default':c};};Object['defineProperty'](exports,s(0x1ad),{'value':!![]});function b(c,d){const e=a();return b=function(f,g){f=f-0x188;let h=e[f];return h;},b(c,d);}const Contact_1=__importDefault(require(u(0x194))),openIARestClient_1=require(s(0x1a1)),CreateMessageSystemService_1=__importDefault(require(u(0x1a4))),Whatsapp_1=__importDefault(require(u(0x18d))),UpdateQueueIATicket_1=__importDefault(require(s(0x192))),ContactWallet_1=__importDefault(require(s(0x1ac))),VerifyContactBaileys_1=require('../WbotServices/helpers/VerifyContactBaileys'),VerifyMensageOpenIAQueue=async(c,d,e=![],f=![],g,h)=>{const v=u,w=s;if(c['status']===v(0x193)&&!c[v(0x19d)]&&!c[w(0x1aa)]&&c[w(0x197)]&&d[w(0x198)]){if(h&&h[w(0x19f)])return;const i=await ContactWallet_1[v(0x1a0)]['findOne']({'where':{'contactId':c[w(0x1a3)]}});if(!!i){await(0x0,UpdateQueueIATicket_1[w(0x1a0)])(null,c,i['walletId']);return;}try{const j=await Contact_1['default'][w(0x199)](c['contactId']),k=await Whatsapp_1['default']['findByPk'](c['whatsappId']);let l;if(e)l=await(0x0,openIARestClient_1[v(0x18b)])({'message':{'id':v(0x1a9),'contact_name':j[v(0x18c)],'ticket_id':c['id'],'body':w(0x1a6),'sender_number':k[w(0x196)],'receiver_number':j[v(0x196)]}});else{const n=await(0x0,VerifyContactBaileys_1[v(0x19c)])(h);l=await(0x0,openIARestClient_1[w(0x18b)])({'message':{'id':g['id'],'contact_name':j['name'],'ticket_id':c['id'],'body':n,'sender_number':k[w(0x196)],'receiver_number':j['number']}});}l=JSON['parse'](l);const m={'body':l['message'][w(0x195)],'fromMe':!![],'read':!![],'sendType':w(0x19a)};await(0x0,CreateMessageSystemService_1['default'])({'msg':m,'tenantId':c[v(0x189)],'ticket':c,'sendType':m['sendType'],'status':'pending'});if(l[w(0x19b)][w(0x1a5)]=='Transfer'){const o=f?c['queueId']:k[w(0x191)];await(0x0,UpdateQueueIATicket_1[w(0x1a0)])(o,c);}}catch(p){console[v(0x1ab)](p);}}};exports[u(0x1a0)]=VerifyMensageOpenIAQueue;