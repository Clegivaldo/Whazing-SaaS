'use strict';const I=b,N=b;(function(c,d){const G=b,H=b,e=c();while(!![]){try{const f=parseInt(G(0x68))/0x1+-parseInt(H(0x98))/0x2*(parseInt(G(0x67))/0x3)+-parseInt(H(0x8d))/0x4*(-parseInt(H(0x71))/0x5)+parseInt(H(0x6a))/0x6+-parseInt(H(0x78))/0x7*(-parseInt(H(0x99))/0x8)+-parseInt(G(0x7a))/0x9*(-parseInt(G(0x76))/0xa)+-parseInt(H(0x7b))/0xb*(parseInt(G(0x88))/0xc);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xed417));function a(){const X=['2481471jGDpgx','31079609LrqJRm','../../models/Queue','destroy','ZIYvc','hasOwnProperty','profile','queues','getOwnPropertyDescriptor','TcIvh','yup','get','upsert','call','12xZsFPm','create','ERR_NO_USER_FOUND','__importStar','object','93832NiLVSG','all','cepVC','../../models/User','map','validate','kKlYd','__importDefault','EiNMe','__setModuleDefault','defineProperty','81198dafHah','2648eZmVJe','string','45omovQw','826251tymcRF','OtUKi','2391720mPqjrB','prototype','configurable','__createBinding','name','min','findOne','295rydQQp','update','avjYT','email','__esModule','50cYSuIZ','queue','8855HEpXma','default'];a=function(){return X;};return a();}var __createBinding=this&&this[I(0x6d)]||(Object['create']?function(c,d,e,f){const J=I,K=I;if(f===undefined)f=e;var g=Object[J(0x82)](d,e);if(!g||(K(0x85)in g?!d[K(0x75)]:g['writable']||g[J(0x6c)])){if(K(0x95)===K(0x95))g={'enumerable':!![],'get':function(){const L=K,M=J;if(L(0x93)==='kKlYd')return d[e];else throw new d[(M(0x79))](M(0x8a),0x194);}};else{if(n&&c['__esModule'])return p;var i={};if(q!=null){for(var j in r)if(j!==K(0x79)&&s[K(0x6b)][K(0x7f)][K(0x87)](t,j))u(i,v,j);}return w(i,x),i;}}Object['defineProperty'](c,f,g);}:function(c,d,e,f){if(f===undefined)f=e;c[f]=d[e];}),__setModuleDefault=this&&this[N(0x96)]||(Object[I(0x89)]?function(c,d){const O=N,P=I;Object[O(0x97)](c,O(0x79),{'enumerable':!![],'value':d});}:function(c,d){c['default']=d;}),__importStar=this&&this[N(0x8b)]||function(c){const Q=N,R=I;if(c&&c[Q(0x75)])return c;var d={};if(c!=null){for(var e in c)if(e!==Q(0x79)&&Object['prototype']['hasOwnProperty'][R(0x87)](c,e))__createBinding(d,c,e);}return __setModuleDefault(d,c),d;},__importDefault=this&&this[N(0x94)]||function(c){const S=I;return c&&c[S(0x75)]?c:{'default':c};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(I(0x84))),AppError_1=__importDefault(require('../../errors/AppError')),Queue_1=__importDefault(require(N(0x7c))),User_1=__importDefault(require(I(0x90))),UsersQueues_1=__importDefault(require('../../models/UsersQueues')),UpdateUserService=async({userData:c,userId:d,tenantId:e})=>{const T=I,U=I,f=await User_1[T(0x79)][U(0x70)]({'where':{'id':d,'tenantId':e},'attributes':['name','id','email',T(0x80)]});if(!f){if(T(0x83)===T(0x83))throw new AppError_1[(T(0x79))](U(0x8a),0x194);else f[U(0x97)](g,T(0x79),{'enumerable':!![],'value':h});}const g=Yup[T(0x8c)]()['shape']({'name':Yup[T(0x9a)]()[T(0x6f)](0x2),'email':Yup['string']()[U(0x74)](),'profile':Yup['string'](),'password':Yup[U(0x9a)]()}),{email:h,password:i,profile:j,name:k,queues:l}=c;try{T(0x7e)!=='ZIYvc'?f={'enumerable':!![],'get':function(){return i[j];}}:await g[T(0x92)]({'email':h,'password':i,'profile':j,'name':k});}catch(p){if(U(0x8f)!==T(0x8f))e[T(0x79)]=f;else throw new AppError_1[(T(0x79))](p?.['message']);}if(l){if(T(0x73)!==T(0x69))await UsersQueues_1[T(0x79)][U(0x7d)]({'where':{'userId':d}}),await Promise[T(0x8e)](l[U(0x91)](async r=>{const V=T,W=U,s=r?.['id']||r;await UsersQueues_1[V(0x79)][V(0x86)]({'queueId':s,'userId':d});}));else{if(p===q)r=s;var s=t['getOwnPropertyDescriptor'](u,v);(!s||('get'in s?!w[T(0x75)]:s['writable']||s[U(0x6c)]))&&(s={'enumerable':!![],'get':function(){return s[F];}}),z[T(0x97)](A,B,s);}}await f[T(0x72)]({'email':h,'password':i,'profile':j,'name':k}),await f['reload']({'attributes':['id',T(0x6e),U(0x74),U(0x80)],'include':[{'model':Queue_1[T(0x79)],'attributes':['id',T(0x77)]}]});const m={'id':f['id'],'name':f['name'],'email':f[U(0x74)],'profile':f[T(0x80)],'queues':f[T(0x81)]};return m;};function b(c,d){const e=a();return b=function(f,g){f=f-0x67;let h=e[f];return h;},b(c,d);}exports[I(0x79)]=UpdateUserService;