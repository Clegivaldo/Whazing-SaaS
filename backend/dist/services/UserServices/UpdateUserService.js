'use strict';function a(){const Y=['message','knXbd','shape','upsert','reload','__esModule','get','email','../../models/User','IeqPK','create','2025356oCVTYc','hasOwnProperty','1033556zdSGpW','vJPNb','__createBinding','update','queues','destroy','Dtalu','40MKyRnX','1149953DBxELZ','36BoNaVp','all','qqfuw','pfJrU','yup','__setModuleDefault','string','zMBJz','ERR_NO_USER_FOUND','__importDefault','../../models/Queue','MFGNk','__importStar','queue','2651148JvswmD','default','getOwnPropertyDescriptor','map','profile','defineProperty','name','prototype','writable','../../errors/AppError','628045UiSpAQ','2933928fJsOux','3033100dsEmnh'];a=function(){return Y;};return a();}function b(c,d){const e=a();return b=function(f,g){f=f-0x64;let h=e[f];return h;},b(c,d);}const I=b,J=b;(function(c,d){const G=b,H=b,e=c();while(!![]){try{const f=parseInt(G(0x6a))/0x1+parseInt(H(0x7a))/0x2+parseInt(H(0x6b))/0x3+-parseInt(G(0x78))/0x4+-parseInt(G(0x6c))/0x5+parseInt(H(0x83))/0x6*(parseInt(H(0x82))/0x7)+-parseInt(H(0x81))/0x8*(parseInt(G(0x91))/0x9);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x7f99e));var __createBinding=this&&this[I(0x7c)]||(Object[I(0x77)]?function(c,d,e,f){const K=I,L=J;if(f===undefined)f=e;var g=Object[K(0x93)](d,e);(!g||(L(0x73)in g?!d[L(0x72)]:g[L(0x68)]||g['configurable']))&&(L(0x76)===L(0x6e)?f[L(0x65)](g,K(0x92),{'enumerable':!![],'value':h}):g={'enumerable':!![],'get':function(){const M=K,N=K;if(M(0x80)===M(0x86)){if(n&&c[N(0x72)])return p;var j={};if(q!=null){for(var l in r)if(l!==M(0x92)&&s[M(0x67)][N(0x79)]['call'](t,l))u(j,v,l);}return w(j,x),j;}else return d[e];}}),Object[K(0x65)](c,f,g);}:function(c,d,e,f){if(f===undefined)f=e;c[f]=d[e];}),__setModuleDefault=this&&this[J(0x88)]||(Object[I(0x77)]?function(c,d){const O=I,P=J;Object[O(0x65)](c,O(0x92),{'enumerable':!![],'value':d});}:function(c,d){const Q=I;c[Q(0x92)]=d;}),__importStar=this&&this[I(0x8f)]||function(c){const R=J,S=J;if(c&&c[R(0x72)])return c;var d={};if(c!=null){for(var e in c)if(e!==S(0x92)&&Object[S(0x67)][S(0x79)]['call'](c,e))__createBinding(d,c,e);}return __setModuleDefault(d,c),d;},__importDefault=this&&this[I(0x8c)]||function(c){const T=I;return c&&c[T(0x72)]?c:{'default':c};};Object[J(0x65)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(I(0x87))),AppError_1=__importDefault(require(I(0x69))),Queue_1=__importDefault(require(J(0x8d))),User_1=__importDefault(require(I(0x75))),UsersQueues_1=__importDefault(require('../../models/UsersQueues')),UpdateUserService=async({userData:c,userId:d,tenantId:e})=>{const U=I,V=J,f=await User_1[U(0x92)]['findOne']({'where':{'id':d,'tenantId':e},'attributes':[V(0x66),'id',V(0x74),U(0x64)]});if(!f){if('QTyZt'===U(0x7b))throw new e[(U(0x92))](f?.[V(0x6d)]);else throw new AppError_1[(V(0x92))](V(0x8b),0x194);}const g=Yup['object']()[U(0x6f)]({'name':Yup['string']()['min'](0x2),'email':Yup[V(0x89)]()[V(0x74)](),'profile':Yup['string'](),'password':Yup[V(0x89)]()}),{email:h,password:i,profile:j,name:k,queues:l}=c;try{await g['validate']({'email':h,'password':i,'profile':j,'name':k});}catch(o){throw new AppError_1[(V(0x92))](o?.[V(0x6d)]);}if(l){if(V(0x85)===V(0x8e))throw new d[(V(0x92))]('ERR_NO_USER_FOUND',0x194);else await UsersQueues_1['default'][V(0x7f)]({'where':{'userId':d}}),await Promise[V(0x84)](l[U(0x94)](async q=>{const W=U,X=V;if(W(0x8a)!==X(0x8a))return g&&h[X(0x72)]?i:{'default':j};else{const s=q?.['id']||q;await UsersQueues_1[W(0x92)][X(0x70)]({'queueId':s,'userId':d});}}));}await f[U(0x7d)]({'email':h,'password':i,'profile':j,'name':k}),await f[U(0x71)]({'attributes':['id',U(0x66),V(0x74),V(0x64)],'include':[{'model':Queue_1[U(0x92)],'attributes':['id',V(0x90)]}]});const m={'id':f['id'],'name':f[U(0x66)],'email':f[U(0x74)],'profile':f[V(0x64)],'queues':f[V(0x7e)]};return m;};exports[I(0x92)]=UpdateUserService;