'use strict';const I=b,J=b;function a(){const V=['default','hasOwnProperty','80YSqIAE','min','239963XWbvSh','__esModule','defineProperty','get','YBUuA','test','An\x20user\x20with\x20this\x20email\x20already\x20exists.','prototype','required','writable','email','96636MNjfir','configurable','65LWGzok','3220SjqHaB','11263NMNeBu','738477vubGPw','__createBinding','__importStar','findOne','2qoxtYX','getOwnPropertyDescriptor','gyJQL','40LLbJYA','__setModuleDefault','57ijBbom','message','Check-email','name','6077280zQomCQ','8785436jFNwGA','shape','create','string','kwUWP','call','__importDefault','HzbBh','object','../../models/User'];a=function(){return V;};return a();}(function(c,d){const G=b,H=b,e=c();while(!![]){try{const f=-parseInt(G(0x174))/0x1*(-parseInt(H(0x188))/0x2)+-parseInt(G(0x18d))/0x3*(-parseInt(H(0x182))/0x4)+-parseInt(G(0x181))/0x5*(parseInt(H(0x17f))/0x6)+-parseInt(H(0x183))/0x7*(-parseInt(H(0x18b))/0x8)+parseInt(G(0x184))/0x9*(parseInt(G(0x172))/0xa)+-parseInt(H(0x192))/0xb+parseInt(G(0x191))/0xc;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x66141));var __createBinding=this&&this[I(0x185)]||(Object[J(0x194)]?function(c,d,e,f){const K=I,L=I;if(f===undefined)f=e;var g=Object[K(0x189)](d,e);if(!g||(K(0x177)in g?!d[L(0x175)]:g[K(0x17d)]||g[L(0x180)])){if(K(0x18a)===K(0x16d)){if(p===q)r=s;var i=t['getOwnPropertyDescriptor'](u,v);(!i||(L(0x177)in i?!w[K(0x175)]:i[L(0x17d)]||i[K(0x180)]))&&(i={'enumerable':!![],'get':function(){return i[F];}}),z[K(0x176)](A,B,i);}else g={'enumerable':!![],'get':function(){return d[e];}};}Object[K(0x176)](c,f,g);}:function(c,d,e,f){if(f===undefined)f=e;c[f]=d[e];}),__setModuleDefault=this&&this[J(0x18c)]||(Object[J(0x194)]?function(c,d){const M=J;Object['defineProperty'](c,M(0x170),{'enumerable':!![],'value':d});}:function(c,d){const N=J;c[N(0x170)]=d;}),__importStar=this&&this[I(0x186)]||function(c){const O=I,P=J;if(c&&c[O(0x175)])return c;var d={};if(c!=null){for(var e in c)if(e!==P(0x170)&&Object[O(0x17b)][O(0x171)][P(0x16b)](c,e))__createBinding(d,c,e);}return __setModuleDefault(d,c),d;},__importDefault=this&&this[I(0x16c)]||function(c){const Q=I;return c&&c[Q(0x175)]?c:{'default':c};};Object[I(0x176)](exports,J(0x175),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../../errors/AppError')),User_1=__importDefault(require(J(0x16f))),CreateUserService=async({email:c,password:d,name:e,tenantId:f,profile:profile='admin',configs:g})=>{const R=J,S=J,h=Yup[R(0x16e)]()[S(0x193)]({'name':Yup['string']()[R(0x17c)]()[R(0x173)](0x2),'tenantId':Yup['number']()[S(0x17c)](),'email':Yup[S(0x195)]()[R(0x17e)]()[S(0x17c)]()[S(0x179)](R(0x18f),R(0x17a),async k=>{const T=S,U=R;if(T(0x196)==='ezFxk')return e[f];else{const m=await User_1[T(0x170)][U(0x187)]({'where':{'email':k}});return!m;}}),'password':Yup[R(0x195)]()[R(0x17c)]()['min'](0x5)});try{S(0x178)===S(0x178)?await h['validate']({'email':c,'password':d,'name':e,'tenantId':f}):f={'enumerable':!![],'get':function(){return i[j];}};}catch(l){throw new AppError_1[(R(0x170))](l[S(0x18e)]);}const i=await User_1['default']['create']({'email':c,'password':d,'name':e,'profile':profile,'tenantId':f,'configs':g}),j={'id':i['id'],'name':i[S(0x190)],'email':i['email'],'profile':i['profile']};return j;};function b(c,d){const e=a();return b=function(f,g){f=f-0x16b;let h=e[f];return h;},b(c,d);}exports[J(0x170)]=CreateUserService;