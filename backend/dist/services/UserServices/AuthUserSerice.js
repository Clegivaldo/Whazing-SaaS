'use strict';const m=b,n=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=-parseInt(k(0xc6))/0x1*(-parseInt(k(0xcc))/0x2)+parseInt(k(0xcf))/0x3*(-parseInt(l(0xbc))/0x4)+parseInt(k(0xc9))/0x5*(parseInt(k(0xb9))/0x6)+-parseInt(k(0xce))/0x7+-parseInt(k(0xb5))/0x8+-parseInt(l(0xbe))/0x9+-parseInt(l(0xbf))/0xa*(-parseInt(k(0xcb))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x40c54));var __importDefault=this&&this[m(0xd0)]||function(c){return c&&c['__esModule']?c:{'default':c};};function b(c,d){const e=a();return b=function(f,g){f=f-0xb5;let h=e[f];return h;},b(c,d);}Object[n(0xb7)](exports,m(0xbd),{'value':!![]});function a(){const q=['checkPassword','tenant','../../models/User','findAll','online','29779rOSCPo','findOne','default','490meFgPp','name','699589TvYaEf','10edYbyt','../../models/Tenant','2128000TmFsUn','1299VWbbHj','__importDefault','tenantId','lastLogin','499192lusuqL','ERR_INVALID_CREDENTIALS','defineProperty','queues','2208uRJWMI','createRefreshToken','update','196OrXXGg','__esModule','2657079TFwzio','120FnfJQi','../../helpers/CreateTokens'];a=function(){return q;};return a();}const User_1=__importDefault(require(n(0xc3))),AppError_1=__importDefault(require('../../errors/AppError')),CreateTokens_1=require(n(0xc0)),Queue_1=__importDefault(require('../../models/Queue')),Tenant_1=__importDefault(require(n(0xcd))),AuthUserService=async({email:c,password:d})=>{const o=m,p=n,e=await User_1[o(0xc8)][p(0xc7)]({'where':{'email':c},'include':[{'model':Queue_1[p(0xc8)],'as':o(0xb8)},{'model':Tenant_1['default'],'as':p(0xc2),'where':{'status':'active'}}]});if(!e)throw new AppError_1[(o(0xc8))](p(0xb6),0x191);if(!await e[p(0xc1)](d))throw new AppError_1[(p(0xc8))](o(0xb6),0x191);const f=(0x0,CreateTokens_1['createAccessToken'])(e),g=(0x0,CreateTokens_1[o(0xba)])(e);await e[o(0xbb)]({'isOnline':!![],'status':o(0xc5),'lastLogin':new Date()});const h=await User_1[p(0xc8)][p(0xc4)]({'where':{'tenantId':e[o(0xd1)],'isOnline':!![]},'attributes':['id','email','status','lastOnline',p(0xca),p(0xd2)]});return{'user':e,'token':f,'refreshToken':g,'usuariosOnline':h};};exports['default']=AuthUserService;