'use strict';const o=b,q=b;(function(c,d){const m=b,n=b,e=c();while(!![]){try{const f=-parseInt(m(0x72))/0x1*(-parseInt(n(0x79))/0x2)+parseInt(m(0x6f))/0x3+-parseInt(n(0x6e))/0x4+parseInt(m(0x68))/0x5+-parseInt(m(0x75))/0x6+parseInt(n(0x76))/0x7+parseInt(n(0x7e))/0x8*(parseInt(n(0x70))/0x9);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x8bd7b));var __importDefault=this&&this[o(0x69)]||function(c){const p=o;return c&&c[p(0x64)]?c:{'default':c};};function b(c,d){const e=a();return b=function(f,g){f=f-0x64;let h=e[f];return h;},b(c,d);}function a(){const t=['fromMe','458pEZder','./GetMediaWaba360','template','getTime','chat','40aIECpU','__esModule','tenantId','update','includes','772280kqldgQ','__importDefault','../MessageServices/CreateMessageService','sended','default','defineProperty','2982460kzKtHD','2492790vdbdal','332892XPygOQ','text','2091jLMCQu','body','received','2427558Hbibph','516866yJEfJX','type'];a=function(){return t;};return a();}Object[q(0x6d)](exports,'__esModule',{'value':!![]});const CreateMessageService_1=__importDefault(require(o(0x6a))),GetMediaWaba360_1=__importDefault(require(o(0x7a))),VerifyMediaMessage=async(c,d,e,f)=>{const r=o,s=q;let g;try{g=await(0x0,GetMediaWaba360_1[r(0x6c)])({'channel':c,'msg':d,'ticket':e});}catch(k){}let h;if(![s(0x71),r(0x7d),s(0x7b)][s(0x67)](d[r(0x77)])){const l=d;h=l[d[s(0x77)]]['id'];}const i={'messageId':d['id']||'','ticketId':e['id'],'contactId':d['fromMe']?undefined:f['id'],'body':d?.[s(0x71)]?.[s(0x73)]||g||'','fromMe':d[s(0x78)],'read':d[r(0x78)],'mediaUrl':g,'mediaType':d[r(0x77)],'timestamp':+d['timestamp'],'wabaMediaId':h,'status':d['fromMe']?s(0x6b):r(0x74)};await e[s(0x66)]({'lastMessage':d?.['text']?.[r(0x73)]||g,'lastMessageAt':new Date()[r(0x7c)](),'answered':d['fromMe']||![]});const j=await(0x0,CreateMessageService_1[s(0x6c)])({'messageData':i,'tenantId':e[s(0x65)]});return j;};exports['default']=VerifyMediaMessage;