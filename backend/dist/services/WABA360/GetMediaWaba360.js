'use strict';
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0xbe * 0x1f + -0x1ca5 + 0x357f);
        let h = e[f];
        return h;
    }, b(c, d);
}
const y = b, z = b;
function a() {
    const M = [
        'defineProp',
        'VWtIl',
        'value',
        'length',
        'video',
        'logger',
        'DzxPY',
        'headers',
        '1900456hcBELM',
        'API_URL_36',
        '__esModule',
        'path',
        '4rQTklC',
        's/logger',
        'wMPkK',
        '607593oeYUqc',
        'lIKOG',
        'sNqok',
        'voice',
        'document',
        'xFCIl',
        '99Inpvdd',
        'data',
        'axios',
        '__importDe',
        'IA:\x20',
        'PbQJs',
        'mime_type',
        'sWQZW',
        'join',
        'default',
        'method',
        'MRpyH',
        'CQFmc',
        'OGeGE',
        'tokenAPI',
        'hyPmv',
        'url',
        'GET',
        'YgiON',
        'vPyhG',
        'createWrit',
        'env',
        'KfIKj',
        'hbein',
        '360_NOT_DO',
        'pipe',
        'LmBfD',
        'VQazd',
        'yeCmK',
        'BoKCL',
        '6046056WuixLE',
        'kVWfG',
        '../../util',
        'image',
        'erty',
        'nmgpB',
        'D360-API-K',
        'BsssC',
        'oCgnA',
        'LiIGG',
        '960945QxmDrF',
        'audio',
        'responseTy',
        'HATnU',
        '2979453qERPsy',
        'rAGuF',
        'eStream',
        'GUOjm',
        '902830xyMXgz',
        'UytVd',
        'EywNG',
        'MhaqS',
        'public',
        'ERROR\x20DONW',
        'vLSyR',
        '6093940XNOpFZ',
        'rs/AppErro',
        'fault',
        'finish',
        'error',
        'stream',
        'LOAD',
        'filename',
        'AouRN',
        '/v1/media/',
        'WNLOAD_MED',
        '../../erro',
        'getTime',
        'JOKab',
        'split'
    ];
    a = function () {
        return M;
    };
    return a();
}
(function (c, d) {
    const w = b, x = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(w(0x1ff)) / (-0x1854 + -0x7 * -0x38b + -0x1 * 0x78) + parseInt(w(0x207)) / (-0x1 * -0x973 + -0x1 * 0x222d + -0x1 * -0x18bc) + parseInt(x(0x203)) / (0x89 * -0x1a + 0x49a + 0xd9 * 0xb) * (-parseInt(w(0x229)) / (0x1 * 0x2327 + 0x1616 + -0x1313 * 0x3)) + -parseInt(x(0x20e)) / (0x1185 + -0xe3c + -0x344) + -parseInt(w(0x1f5)) / (-0x1e4f + -0x1636 + 0x348b) + -parseInt(w(0x22c)) / (-0x269f + -0x20b6 + 0x2 * 0x23ae) + -parseInt(x(0x225)) / (-0xc3d + 0xfec + -0x3a7) * (-parseInt(w(0x232)) / (-0x1713 + -0x2 * -0x1209 + -0xcf6));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x8c636 + 0x152b78 + -0x652ef * 0x3));
var __importDefault = this && this[y(0x1da) + z(0x210)] || function (c) {
    const A = z;
    return c && c[A(0x227)] ? c : { 'default': c };
};
const u = {};
u[y(0x21f)] = !![], Object[z(0x21d) + z(0x1f9)](exports, y(0x227), u);
const axios_1 = __importDefault(require(y(0x1d9))), fs_1 = require('fs'), path_1 = require(z(0x228)), AppError_1 = __importDefault(require(z(0x219) + y(0x20f) + 'r')), logger_1 = require(z(0x1f7) + z(0x22a)), downloadFile = async (e, f, g) => {
        const B = z, C = z, h = {
                'UytVd': B(0x20c) + B(0x214),
                'hbein': function (n, o) {
                    return n(o);
                },
                'LiIGG': B(0x211),
                'yeCmK': B(0x212),
                'xFCIl': B(0x20b),
                'hyPmv': C(0x1e8),
                'MhaqS': C(0x213)
            }, i = process[C(0x1ec)][C(0x226) + '0'] + B(0x217) + f, j = (0x1c9 * 0xc + 0x1 * 0x2525 + 0x205 * -0x1d, path_1[B(0x1df)])(__dirname, '..', '..', h[B(0x231)], g), k = {};
        k[B(0x1fb) + 'EY'] = e;
        const l = {};
        l[C(0x1e7)] = i, l[B(0x1e1)] = h[B(0x1e6)], l[C(0x201) + 'pe'] = h[C(0x20a)], l[B(0x224)] = k;
        const m = await (0x7e1 + -0xfbe + -0x21 * -0x3d, axios_1[C(0x1e0)])(l);
        await new Promise((n, o) => {
            const D = C, F = C, p = {
                    'DzxPY': h[D(0x208)],
                    'OGeGE': function (q, r) {
                        const E = D;
                        return h[E(0x1ee)](q, r);
                    }
                };
            m[D(0x1d8)][D(0x1f0)]((0x13a8 + 0xf1a + 0x3 * -0xb96, fs_1[D(0x1eb) + F(0x205)])(j))['on'](h[F(0x1fe)], async () => n(!![]))['on'](h[F(0x1f3)], q => {
                const G = D, H = F;
                console[G(0x212)](p[G(0x223)], q), p[G(0x1e4)](o, new Error(q));
            });
        });
    }, GetMediaWaba360 = async ({
        channel: c,
        msg: d,
        ticket: e
    }) => {
        const I = z, J = z, f = {
                'AouRN': I(0x20c) + J(0x214),
                'GUOjm': function (g, h) {
                    return g(h);
                },
                'wMPkK': I(0x211),
                'MRpyH': J(0x212),
                'sWQZW': function (g, h) {
                    return g !== h;
                },
                'JOKab': J(0x202),
                'PbQJs': I(0x1ea),
                'oCgnA': function (g, h) {
                    return g !== h;
                },
                'VWtIl': I(0x209),
                'rAGuF': function (g, h) {
                    return g !== h;
                },
                'lIKOG': J(0x1f1),
                'kVWfG': J(0x1ed),
                'BsssC': J(0x1f4),
                'sNqok': function (g, h) {
                    return g > h;
                },
                'YgiON': function (g, h, i, j) {
                    return g(h, i, j);
                },
                'nmgpB': I(0x1e3),
                'VQazd': J(0x20d)
            };
        try {
            if (f[J(0x1de)](f[I(0x21b)], f[J(0x1dc)])) {
                let g = '', h, i;
                d?.[J(0x230)] && (f[J(0x1fd)](f[J(0x21e)], f[I(0x21e)]) ? (g = h[J(0x200)]['id'] || '', i = j[J(0x200)][I(0x1dd)]) : (g = d[I(0x230)]['id'] || '', h = d[J(0x230)][I(0x215)], i = d[I(0x230)][I(0x1dd)]));
                if (d?.[I(0x1f8)]) {
                    if (f[I(0x204)](f[J(0x22d)], f[I(0x1f6)]))
                        g = d[I(0x1f8)]['id'] || '', i = d[J(0x1f8)][I(0x1dd)];
                    else {
                        const o = {};
                        return o[J(0x1e0)] = j, g && h[J(0x227)] ? i : o;
                    }
                }
                d?.[J(0x221)] && (g = d[I(0x221)]['id'] || '', i = d[I(0x221)][I(0x1dd)]);
                if (d?.[J(0x22f)]) {
                    if (f[J(0x1fd)](f[J(0x1fc)], f[J(0x1fc)]))
                        g = h[J(0x1f8)]['id'] || '', i = j[I(0x1f8)][J(0x1dd)];
                    else {
                        g = d[J(0x22f)]['id'] || '';
                        const p = d[I(0x22f)][J(0x1dd)] || '', q = p[I(0x21c)](';');
                        i = f[J(0x22e)](q[J(0x220)], 0x363 * 0x5 + -0x3e1 + 0xd * -0x101) ? q[0x2ad * -0x8 + -0x21fa * -0x1 + -0x1 * 0xc92] : d[I(0x22f)][I(0x1dd)];
                    }
                }
                d?.[I(0x200)] && (g = d[I(0x200)]['id'] || '', i = d[I(0x200)][I(0x1dd)]);
                const j = i?.[I(0x21c)]('/')[-0x13ee + 0xd17 + 0x6d8][I(0x21c)](';')[0x671 * 0x6 + 0x1 * -0x6c7 + -0x1fdf], k = new Date()[I(0x21a)](), l = h ? h + '_' + e['id'] + '_' + g + '_' + k + '.' + j : e['id'] + '_' + g + '_' + k + '.' + j;
                return await f[J(0x1e9)](downloadFile, c[J(0x1e5)], g, l), l;
            } else
                j[J(0x1d8)][I(0x1f0)]((-0x238e + 0x22d2 + -0x2 * -0x5e, k[J(0x1eb) + J(0x205)])(l))['on'](f[I(0x22b)], async () => q(!![]))['on'](f[J(0x1e2)], v => {
                    const K = J, L = I;
                    q[K(0x212)](f[K(0x216)], v), f[L(0x206)](r, new s(v));
                });
        } catch (s) {
            if (f[J(0x1fd)](f[J(0x1fa)], f[I(0x1f2)])) {
                logger_1[I(0x222)][I(0x212)](s);
                throw new AppError_1[(I(0x1e0))](J(0x1ef) + I(0x218) + I(0x1db) + s);
            } else
                g = h[J(0x221)]['id'] || '', i = j[I(0x221)][I(0x1dd)];
        }
    };
exports[y(0x1e0)] = GetMediaWaba360;