'use strict';
function _0x2473(_0x2bca3d, _0x3d4270) {
    const _0xb058c = _0x37e8();
    return _0x2473 = function (_0x34405a, _0x32d6ce) {
        _0x34405a = _0x34405a - (-0x1 * 0x6fb + 0x2 * -0xd22 + 0x226b);
        let _0x58f4b8 = _0xb058c[_0x34405a];
        return _0x58f4b8;
    }, _0x2473(_0x2bca3d, _0x3d4270);
}
const _0x5a2a50 = _0x2473;
(function (_0xec19c5, _0x56e9ef) {
    const _0x5e8deb = _0x2473, _0x202708 = _0xec19c5();
    while (!![]) {
        try {
            const _0x143d30 = -parseInt(_0x5e8deb(0x12e)) / (-0x2b * -0xda + -0x105 * -0x26 + 0x65 * -0xbf) * (parseInt(_0x5e8deb(0x143)) / (0x553 * 0x6 + 0x225b + -0x1619 * 0x3)) + -parseInt(_0x5e8deb(0x144)) / (0xb6a + 0x1b8a + -0x1 * 0x26f1) * (-parseInt(_0x5e8deb(0x16f)) / (0x2ce + -0x18bb + 0x15f1)) + parseInt(_0x5e8deb(0x134)) / (-0x25 * -0xc9 + -0xfc * -0x14 + -0x4 * 0xc2e) * (-parseInt(_0x5e8deb(0x152)) / (0x43 * 0x80 + -0x5 * 0x188 + -0x19d2)) + -parseInt(_0x5e8deb(0x151)) / (-0x12e * 0xd + -0x13d * -0x1f + 0x7 * -0x34a) * (-parseInt(_0x5e8deb(0x13e)) / (0xd7d * 0x1 + 0x7b6 + 0x1 * -0x152b)) + -parseInt(_0x5e8deb(0x13b)) / (-0x1cf5 + -0x4d3 + 0x21d1) + parseInt(_0x5e8deb(0x14c)) / (0xef * 0x1f + -0x17e * 0x17 + 0x1 * 0x56b) * (-parseInt(_0x5e8deb(0x166)) / (0x2379 * -0x1 + 0x1 * 0x20d9 + 0x2ab)) + -parseInt(_0x5e8deb(0x146)) / (-0x22b6 + 0x254f * 0x1 + 0x1 * -0x28d) * (-parseInt(_0x5e8deb(0x163)) / (-0x4ad + -0xc39 + 0x10f3));
            if (_0x143d30 === _0x56e9ef)
                break;
            else
                _0x202708['push'](_0x202708['shift']());
        } catch (_0x1a94ab) {
            _0x202708['push'](_0x202708['shift']());
        }
    }
}(_0x37e8, -0x19f18 + 0xa8749 + -0xa * 0x382a));
function _0x37e8() {
    const _0x5a49ab = [
        'finish',
        '7ltPgci',
        '24jRpQLt',
        'ATLLR',
        'oucPL',
        '../../erro',
        'env',
        'D360-API-K',
        'audio',
        'filename',
        'length',
        'KSHTM',
        'data',
        'LOAD',
        'rs/AppErro',
        'path',
        'responseTy',
        'BMJfb',
        'value',
        '351UGnOPo',
        'voice',
        'url',
        '8024830EVUHlL',
        'image',
        'logger',
        'ERROR\x20DONW',
        'headers',
        'createWrit',
        '__esModule',
        'document',
        'erty',
        '256alJrSY',
        'getTime',
        '__importDe',
        'axios',
        '360_NOT_DO',
        '113370QzeqIO',
        'tokenAPI',
        'eStream',
        's/logger',
        'WNLOAD_MED',
        'fault',
        '924505WjuTGn',
        'API_URL_36',
        'method',
        'mime_type',
        '../../util',
        'NuJZs',
        'IA:\x20',
        '2895759jezqvR',
        'public',
        'join',
        '3275416LCGuor',
        'split',
        'default',
        'DDFtj',
        'pipe',
        '6RRgReZ',
        '9762WOGDYi',
        'IDMmz',
        '868116KyOAwY',
        'stream',
        'defineProp',
        '/v1/media/',
        'GET',
        'error',
        '10uOnryL',
        'video',
        'LNSWl',
        'Izeri'
    ];
    _0x37e8 = function () {
        return _0x5a49ab;
    };
    return _0x37e8();
}
var __importDefault = this && this[_0x5a2a50(0x171) + _0x5a2a50(0x133)] || function (_0x3538df) {
    const _0x47b5ce = _0x5a2a50;
    return _0x3538df && _0x3538df[_0x47b5ce(0x16c)] ? _0x3538df : { 'default': _0x3538df };
};
const _0x5e38db = {};
_0x5e38db[_0x5a2a50(0x162)] = !![], Object[_0x5a2a50(0x148) + _0x5a2a50(0x16e)](exports, _0x5a2a50(0x16c), _0x5e38db);
const axios_1 = __importDefault(require(_0x5a2a50(0x12c))), fs_1 = require('fs'), path_1 = require(_0x5a2a50(0x15f)), AppError_1 = __importDefault(require(_0x5a2a50(0x155) + _0x5a2a50(0x15e) + 'r')), logger_1 = require(_0x5a2a50(0x138) + _0x5a2a50(0x131)), downloadFile = async (_0x3e43a6, _0x1261ca, _0x4767dd) => {
        const _0x5403e7 = _0x5a2a50, _0x720a64 = {
                'oucPL': _0x5403e7(0x169) + _0x5403e7(0x15d),
                'IDMmz': function (_0x536cf6, _0x5bca9c) {
                    return _0x536cf6(_0x5bca9c);
                },
                'ATLLR': _0x5403e7(0x150),
                'KSHTM': _0x5403e7(0x14b),
                'BMJfb': _0x5403e7(0x13c),
                'LNSWl': _0x5403e7(0x14a),
                'Izeri': _0x5403e7(0x147)
            }, _0x431b96 = process[_0x5403e7(0x156)][_0x5403e7(0x135) + '0'] + _0x5403e7(0x149) + _0x1261ca, _0xaf219e = (-0x2079 + -0x1f * -0x13d + -0x5ea, path_1[_0x5403e7(0x13d)])(__dirname, '..', '..', _0x720a64[_0x5403e7(0x161)], _0x4767dd), _0x4d1548 = {};
        _0x4d1548[_0x5403e7(0x157) + 'EY'] = _0x3e43a6;
        const _0x2e68f3 = {};
        _0x2e68f3[_0x5403e7(0x165)] = _0x431b96, _0x2e68f3[_0x5403e7(0x136)] = _0x720a64[_0x5403e7(0x14e)], _0x2e68f3[_0x5403e7(0x160) + 'pe'] = _0x720a64[_0x5403e7(0x14f)], _0x2e68f3[_0x5403e7(0x16a)] = _0x4d1548;
        const _0x179917 = await (0x7c2 * -0x1 + -0x207d + -0x1 * -0x283f, axios_1[_0x5403e7(0x140)])(_0x2e68f3);
        await new Promise((_0x1ce8a8, _0x5ef205) => {
            const _0x24020b = _0x5403e7;
            _0x179917[_0x24020b(0x15c)][_0x24020b(0x142)]((-0x1cef + -0x1c * -0x83 + 0xe9b, fs_1[_0x24020b(0x16b) + _0x24020b(0x130)])(_0xaf219e))['on'](_0x720a64[_0x24020b(0x153)], async () => _0x1ce8a8(!![]))['on'](_0x720a64[_0x24020b(0x15b)], _0x37d5ad => {
                const _0x1615eb = _0x24020b;
                console[_0x1615eb(0x14b)](_0x720a64[_0x1615eb(0x154)], _0x37d5ad), _0x720a64[_0x1615eb(0x145)](_0x5ef205, new Error(_0x37d5ad));
            });
        });
    }, GetMediaWaba360 = async ({
        channel: _0x2ee851,
        msg: _0x171b82,
        ticket: _0x29405d
    }) => {
        const _0xaf0eac = _0x5a2a50, _0x3d0a9f = {
                'NuJZs': function (_0xfa6d9e, _0x15bc01) {
                    return _0xfa6d9e > _0x15bc01;
                },
                'DDFtj': function (_0x18609f, _0x357dea, _0x501e39, _0x236845) {
                    return _0x18609f(_0x357dea, _0x501e39, _0x236845);
                }
            };
        try {
            let _0x4139b6 = '', _0x4cf392, _0x526dfe;
            _0x171b82?.[_0xaf0eac(0x16d)] && (_0x4139b6 = _0x171b82[_0xaf0eac(0x16d)]['id'] || '', _0x4cf392 = _0x171b82[_0xaf0eac(0x16d)][_0xaf0eac(0x159)], _0x526dfe = _0x171b82[_0xaf0eac(0x16d)][_0xaf0eac(0x137)]);
            _0x171b82?.[_0xaf0eac(0x167)] && (_0x4139b6 = _0x171b82[_0xaf0eac(0x167)]['id'] || '', _0x526dfe = _0x171b82[_0xaf0eac(0x167)][_0xaf0eac(0x137)]);
            _0x171b82?.[_0xaf0eac(0x14d)] && (_0x4139b6 = _0x171b82[_0xaf0eac(0x14d)]['id'] || '', _0x526dfe = _0x171b82[_0xaf0eac(0x14d)][_0xaf0eac(0x137)]);
            if (_0x171b82?.[_0xaf0eac(0x164)]) {
                _0x4139b6 = _0x171b82[_0xaf0eac(0x164)]['id'] || '';
                const _0xe9d15d = _0x171b82[_0xaf0eac(0x164)][_0xaf0eac(0x137)] || '', _0x469e74 = _0xe9d15d[_0xaf0eac(0x13f)](';');
                _0x526dfe = _0x3d0a9f[_0xaf0eac(0x139)](_0x469e74[_0xaf0eac(0x15a)], 0x2513 + -0x530 + -0x1fe2) ? _0x469e74[-0x1064 + -0x1eff + -0x1 * -0x2f63] : _0x171b82[_0xaf0eac(0x164)][_0xaf0eac(0x137)];
            }
            _0x171b82?.[_0xaf0eac(0x158)] && (_0x4139b6 = _0x171b82[_0xaf0eac(0x158)]['id'] || '', _0x526dfe = _0x171b82[_0xaf0eac(0x158)][_0xaf0eac(0x137)]);
            const _0x22d602 = _0x526dfe?.[_0xaf0eac(0x13f)]('/')[-0x1884 * -0x1 + 0x1b * -0x133 + 0x7de][_0xaf0eac(0x13f)](';')[-0x159 * -0xd + -0x3e * -0x7d + -0x2fcb], _0x584a79 = new Date()[_0xaf0eac(0x170)](), _0x4e4856 = _0x4cf392 ? _0x4cf392 + '_' + _0x29405d['id'] + '_' + _0x4139b6 + '_' + _0x584a79 + '.' + _0x22d602 : _0x29405d['id'] + '_' + _0x4139b6 + '_' + _0x584a79 + '.' + _0x22d602;
            return await _0x3d0a9f[_0xaf0eac(0x141)](downloadFile, _0x2ee851[_0xaf0eac(0x12f)], _0x4139b6, _0x4e4856), _0x4e4856;
        } catch (_0x3694d4) {
            logger_1[_0xaf0eac(0x168)][_0xaf0eac(0x14b)](_0x3694d4);
            throw new AppError_1[(_0xaf0eac(0x140))](_0xaf0eac(0x12d) + _0xaf0eac(0x132) + _0xaf0eac(0x13a) + _0x3694d4);
        }
    };
exports[_0x5a2a50(0x140)] = GetMediaWaba360;