'use strict';
const B = b, C = b;
(function (c, d) {
    const z = b, A = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(z(0x1c1)) / (0xd01 * -0x1 + -0x5 * -0x6af + -0x1469) + parseInt(A(0x18d)) / (0x112 * 0x11 + -0x4b7 * 0x4 + 0x1 * 0xac) + -parseInt(z(0x183)) / (0x2b9 + -0x251 + -0x65) * (parseInt(A(0x1e1)) / (-0x2 * -0x491 + 0x230c + 0x1 * -0x2c2a)) + -parseInt(z(0x1ca)) / (0x1 * -0x1826 + 0x28b * -0x2 + 0x1d41) * (-parseInt(A(0x1bd)) / (-0x7 * -0x583 + -0x26ae + 0x1f * 0x1)) + -parseInt(z(0x1e4)) / (-0x1f8b + -0x1d * 0x10c + -0x1ef7 * -0x2) + parseInt(A(0x1dd)) / (-0x147d + -0x2f5 * -0xb + -0xc02) + -parseInt(z(0x1cd)) / (0xda3 * 0x2 + -0x209 * 0x1 + -0x1934) * (-parseInt(z(0x1c6)) / (0x8ee + 0x259a + -0x2e7e));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x11 * 0x9903 + -0xb4e5f + -0x1 * -0x95088));
var __importDefault = this && this[B(0x199) + C(0x1bc)] || function (c) {
    const D = B;
    return c && c[D(0x1c0)] ? c : { 'default': c };
};
const m = {};
function a() {
    const I = [
        'status',
        'createdAt',
        'aEVHu',
        'payload',
        'Bhzhs',
        'ggUlb',
        'ticket',
        'zUKzN',
        'document',
        '1197636prCVUX',
        '../../mode',
        'date\x20ok',
        'video',
        'ApYkR',
        'number',
        's/logger',
        'RBmcP',
        'where',
        'ZHrGp',
        'TKrbg',
        'sended',
        '__importDe',
        'quotedMsg',
        'DZokP',
        'chat:ack',
        'text',
        'aqhHu',
        '../../help',
        'waba',
        'includes',
        'timestamp',
        'WIgVC',
        'age',
        '360',
        'fDRMg',
        'tenantId',
        'contact',
        'ASC',
        'OvHHF',
        'ketMessage',
        'oMSWV',
        'LilzT',
        'OFzDc',
        'applicatio',
        'findAll',
        'erty',
        'audio',
        'voice',
        'mediaName',
        'whatsapp',
        'message',
        'KOuin',
        'ETIPC',
        'ls/Ticket',
        'DUQQS',
        'Emit',
        'fault',
        '6BcRBwv',
        'bvZLg',
        'Akxqf',
        '__esModule',
        '157808LvCUpA',
        'awhwq',
        '../../util',
        'MohGN',
        'dataValues',
        '1855090mmeDZo',
        'sAsRead',
        'HePoG',
        'sequelize',
        '5047570pAnnxR',
        'GKftL',
        'ers/SetTic',
        '9giTHQC',
        './SentMess',
        'apiKey',
        'pending',
        'IfSeL',
        'KxjrT',
        'individual',
        'EAIDk',
        'RshOP',
        'update',
        'mediaUrl',
        'body',
        'defineProp',
        'wabaMediaI',
        'mediaType',
        'default',
        '5289080YAmbGJ',
        'type',
        'info',
        'bRvrA',
        '176708MKPKaH',
        'tokenAPI',
        'ack',
        '7384636ybJxCa',
        'Message\x20Up',
        'ls/Whatsap',
        'image',
        'FnxiB',
        'gYmjA',
        'sLzqu',
        'value',
        'ers/socket',
        'ls/Message',
        'lte',
        'EsUOf',
        'messages',
        'jASSQ',
        'KmpDc',
        'chat',
        'logger',
        'estZc',
        'caption',
        'messageId',
        '48cCwIzt'
    ];
    a = function () {
        return I;
    };
    return a();
}
m[B(0x1eb)] = !![], Object[B(0x1d9) + B(0x1b1)](exports, C(0x1c0), m);
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x17e6 + -0x1e47 + 0x7db * 0x1);
        let h = e[f];
        return h;
    }, b(c, d);
}
const sequelize_1 = require(B(0x1c9)), SetTicketMessagesAsRead_1 = __importDefault(require(B(0x19f) + B(0x1cc) + B(0x1ab) + B(0x1c7))), socketEmit_1 = __importDefault(require(C(0x19f) + C(0x1ec) + B(0x1bb))), Message_1 = __importDefault(require(B(0x18e) + C(0x1ed))), Ticket_1 = __importDefault(require(B(0x18e) + B(0x1b9))), Whatsapp_1 = __importDefault(require(B(0x18e) + B(0x1e6) + 'p')), logger_1 = require(C(0x1c3) + C(0x193)), SentMessage_1 = __importDefault(require(C(0x1ce) + B(0x1a4))), buildWabaMessage360 = async (h, i) => {
        const E = C, F = B, j = {
                'sLzqu': E(0x190),
                'oMSWV': F(0x1b2),
                'Bhzhs': function (l, o) {
                    return l(o);
                },
                'fDRMg': F(0x1d3),
                'OFzDc': F(0x19d),
                'WIgVC': function (l, o) {
                    return l === o;
                },
                'RBmcP': F(0x1af) + 'n',
                'ApYkR': F(0x18c),
                'HePoG': function (l, o) {
                    return l === o;
                },
                'GKftL': E(0x1e7),
                'EAIDk': function (l, o) {
                    return l === o;
                },
                'bRvrA': function (l, o) {
                    return l !== o;
                },
                'OvHHF': E(0x1ad),
                'aEVHu': function (l, o) {
                    return l === o;
                },
                'zUKzN': F(0x1b3),
                'Akxqf': function (l, o) {
                    return l === o;
                },
                'gYmjA': E(0x180),
                'DUQQS': E(0x17c),
                'ggUlb': F(0x17e)
            };
        let k = {
            'timestamp': j[F(0x188)](String, h[E(0x1a2)]),
            'recipient_type': j[F(0x1a6)],
            'to': i,
            'type': j[F(0x1ae)]
        };
        if (j[E(0x1a3)](h[F(0x1db)], j[E(0x194)]) || j[F(0x1a3)](h[F(0x1db)], j[F(0x191)])) {
            const l = {};
            l['id'] = h[E(0x1da) + 'd'], l[E(0x181)] = h[F(0x1d8)] || h[F(0x1b4)] || '' || '', k = {
                ...k,
                'type': j[E(0x191)],
                'document': l
            };
        }
        if (j[F(0x1c8)](h[F(0x1db)], j[E(0x1cb)])) {
            const o = {};
            o['id'] = h[F(0x1da) + 'd'], o[F(0x181)] = h[E(0x1d8)] || h[E(0x1b4)] || '', k = {
                ...k,
                'type': j[F(0x1cb)],
                'image': o
            };
        }
        if (j[F(0x1d4)](h[E(0x1db)], j[F(0x1ea)])) {
            if (j[F(0x1e0)](j[E(0x1aa)], j[E(0x1aa)])) {
                const q = {};
                q['id'] = j[F(0x1da) + 'd'], q[F(0x181)] = k[E(0x1d8)] || l[F(0x1b4)] || '';
                const r = { ...i };
                r[F(0x1de)] = j[E(0x1ea)], r[F(0x190)] = q, h = r;
            } else {
                const q = {};
                q['id'] = h[F(0x1da) + 'd'], q[E(0x181)] = h[E(0x1d8)] || h[F(0x1b4)] || '', k = {
                    ...k,
                    'type': j[F(0x1ea)],
                    'video': q
                };
            }
        }
        if (j[E(0x186)](h[F(0x1db)], j[E(0x1ac)]) || j[E(0x1c8)](h[F(0x1db)], j[E(0x18b)])) {
            if (j[E(0x1bf)](j[F(0x1e9)], j[E(0x1ba)])) {
                const s = {};
                s['id'] = j[E(0x1da) + 'd'], s[E(0x181)] = k[E(0x1d8)] || l[E(0x1b4)] || '';
                const t = { ...i };
                t[F(0x1de)] = j[E(0x1ac)], t[F(0x1b2)] = s, h = t;
            } else {
                const s = {};
                s['id'] = h[F(0x1da) + 'd'], s[F(0x181)] = h[F(0x1d8)] || h[F(0x1b4)] || '', k = {
                    ...k,
                    'type': j[F(0x1ac)],
                    'audio': s
                };
            }
        }
        if (j[F(0x1c8)](h[F(0x1db)], j[F(0x189)]) || j[E(0x186)](h[E(0x1db)], j[F(0x1ae)])) {
            const t = {};
            t[F(0x1d8)] = h[F(0x1d8)], k = {
                ...k,
                'text': t
            };
        }
        return k;
    }, n = { [sequelize_1['Op']['is']]: null }, where = {
        'fromMe': !![],
        'messageId': n,
        'status': C(0x1d0),
        [sequelize_1['Op']['or']]: [
            { 'scheduleDate': { [sequelize_1['Op'][B(0x1ee)]]: new Date() } },
            { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
        ]
    }, Waba360SendMessagesSystem = async i => {
        const G = C, H = C, j = {
                'ETIPC': G(0x1a8),
                'aqhHu': G(0x18a),
                'KxjrT': G(0x1a0),
                'KOuin': H(0x1b5),
                'EsUOf': H(0x1a5),
                'awhwq': G(0x19a),
                'KmpDc': G(0x185),
                'MohGN': H(0x1a9),
                'TKrbg': function (l, o) {
                    return l(o);
                },
                'IfSeL': G(0x19d),
                'bvZLg': G(0x17e),
                'FnxiB': function (l, o, p) {
                    return l(o, p);
                },
                'RshOP': H(0x198),
                'ZHrGp': H(0x19c),
                'DZokP': H(0x1e5) + G(0x18f)
            }, k = await Message_1[G(0x1dc)][H(0x1b0)]({
                'where': where,
                'include': [
                    j[H(0x1b8)],
                    {
                        'model': Ticket_1[H(0x1dc)],
                        'as': j[H(0x19e)],
                        'where': {
                            'tenantId': i[G(0x1a7)],
                            'channel': j[G(0x1d2)]
                        },
                        'include': [
                            j[H(0x1b8)],
                            {
                                'model': Whatsapp_1[H(0x1dc)],
                                'as': j[G(0x1b7)],
                                'where': {
                                    'id': i['id'],
                                    'type': j[G(0x1d2)],
                                    'wabaBSP': j[H(0x17a)]
                                }
                            }
                        ]
                    },
                    {
                        'model': Message_1[H(0x1dc)],
                        'as': j[H(0x1c2)],
                        'include': [j[G(0x1b8)]]
                    }
                ],
                'order': [[
                        j[G(0x17d)],
                        j[H(0x1c4)]
                    ]]
            });
        for (const l of k) {
            const {ticket: o} = l, p = j[H(0x197)](String, o[G(0x1a8)][H(0x192)]);
            if (![
                    j[H(0x1d1)],
                    j[G(0x1be)]
                ][H(0x1a1)](l[H(0x1db)]) && l[G(0x1d7)] && !l[H(0x1da) + 'd']) {
            }
            const q = await j[G(0x1e8)](buildWabaMessage360, l, p), r = {};
            r[H(0x1b6)] = q, r[G(0x1cf)] = i[G(0x1e2)];
            const s = await (0x745 * -0x3 + -0xfd8 + 0x25a7, SentMessage_1[H(0x1dc)])(r), t = { ...l };
            t[G(0x182)] = s[H(0x17b)][0x3 * -0x207 + 0x25 * -0xe3 + -0x1372 * -0x2]['id'], t[G(0x184)] = j[H(0x1d5)], t[G(0x1e3)] = 0x2;
            const u = t, v = { ...u }, w = {};
            w['id'] = l['id'];
            const x = {};
            x[H(0x195)] = w, await Message_1[G(0x1dc)][G(0x1d6)](v, x);
            const y = {};
            y[H(0x1a7)] = o[G(0x1a7)], y[G(0x1de)] = j[H(0x196)], y[G(0x187)] = { ...u[H(0x1c5)] }, y[G(0x187)][H(0x1d7)] = l[H(0x1d7)], y[G(0x187)][G(0x182)] = u[G(0x182)], y[G(0x187)][G(0x184)] = j[G(0x1d5)], y[G(0x187)][H(0x1e3)] = 0x2, (-0x17e2 + -0x1869 + -0x27 * -0x13d, socketEmit_1[G(0x1dc)])(y), logger_1[H(0x17f)][H(0x1df)](j[G(0x19b)]), await (0x12dc + 0x1d57 + -0x3033, SetTicketMessagesAsRead_1[G(0x1dc)])(o);
        }
    };
exports[B(0x1dc)] = Waba360SendMessagesSystem;