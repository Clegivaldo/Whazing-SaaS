'use strict';
function _0x24b6(_0x265d11, _0x1cae27) {
    const _0x16e289 = _0x543b();
    return _0x24b6 = function (_0x467b01, _0x2f6058) {
        _0x467b01 = _0x467b01 - (-0x3 * -0x54d + 0x1 * 0x24df + -0x345f);
        let _0x364f2e = _0x16e289[_0x467b01];
        return _0x364f2e;
    }, _0x24b6(_0x265d11, _0x1cae27);
}
const _0x434565 = _0x24b6;
(function (_0x4ae94b, _0x5e4ba1) {
    const _0x326349 = _0x24b6, _0x3749fd = _0x4ae94b();
    while (!![]) {
        try {
            const _0x36081b = parseInt(_0x326349(0xb3)) / (0x14f3 + -0x2c * 0x46 + -0x8ea) * (parseInt(_0x326349(0xcf)) / (0x1 * 0x8e0 + -0x2410 + -0x2 * -0xd99)) + -parseInt(_0x326349(0x8b)) / (-0x2d6 * 0x4 + -0x60b + -0x8b3 * -0x2) * (-parseInt(_0x326349(0x85)) / (-0x173f + 0x227e + -0xb3b)) + parseInt(_0x326349(0xa6)) / (-0x2ef * -0x4 + 0x1 * -0x373 + -0x2e * 0x2e) + parseInt(_0x326349(0xcc)) / (-0x8cc * -0x2 + 0xc8e + -0x1e20) * (-parseInt(_0x326349(0x83)) / (0xb01 * 0x1 + 0xdb * -0x2 + 0x2 * -0x4a2)) + -parseInt(_0x326349(0x7b)) / (-0x9a * -0x1d + 0x2 * -0xa + 0x2 * -0x8ab) + parseInt(_0x326349(0x69)) / (-0x453 * 0x2 + -0x1000 + 0x18af) * (-parseInt(_0x326349(0x75)) / (0x1fad + -0xaac * -0x1 + -0x2a4f)) + parseInt(_0x326349(0x6d)) / (-0x1f53 + 0xe7d + 0x10e1);
            if (_0x36081b === _0x5e4ba1)
                break;
            else
                _0x3749fd['push'](_0x3749fd['shift']());
        } catch (_0x46e7da) {
            _0x3749fd['push'](_0x3749fd['shift']());
        }
    }
}(_0x543b, 0x6493 * 0x34 + -0x3 * -0x22d1f + -0xd91f3));
var __importDefault = this && this[_0x434565(0x86) + _0x434565(0x9a)] || function (_0x32e5c5) {
    const _0x167578 = _0x434565;
    return _0x32e5c5 && _0x32e5c5[_0x167578(0x7c)] ? _0x32e5c5 : { 'default': _0x32e5c5 };
};
function _0x543b() {
    const _0xfa4cc5 = [
        'tfhdk',
        'message',
        'yUVPY',
        'erty',
        'XbHmB',
        'uIyUk',
        'chat:ack',
        'waba',
        'caption',
        'zUNVD',
        'obDCx',
        'ers/SetTic',
        'date\x20ok',
        'mediaName',
        'ketMessage',
        'quotedMsg',
        '9048486pAprbC',
        'mWDhB',
        'Emit',
        '26vWVQnZ',
        'logger',
        's/logger',
        'lGZuz',
        'sDdpz',
        'number',
        'MkSUy',
        'payload',
        '13988880CJJMWj',
        './SentMess',
        'timestamp',
        'defineProp',
        '24590533jhlngn',
        '../../help',
        'mediaType',
        'info',
        'Message\x20Up',
        'tDFrP',
        'ls/Message',
        'wabaMediaI',
        '10omMuEk',
        'audio',
        'update',
        'JnrLl',
        'tenantId',
        'voice',
        '4776696jSsJTU',
        '__esModule',
        'ticket',
        'whatsapp',
        'pending',
        'ASC',
        'ls/Ticket',
        'qjDhE',
        '7DXhhcA',
        'HwDyT',
        '27428VvEvvp',
        '__importDe',
        'qfINV',
        'createdAt',
        'applicatio',
        'wDujr',
        '210djlBHP',
        '360',
        'contact',
        'ls/Whatsap',
        'OJKdl',
        '../../util',
        'QloaV',
        'apiKey',
        'CnpET',
        'KyZkL',
        'messageId',
        'vIZSR',
        'value',
        'where',
        'chat',
        'fault',
        'RNvYC',
        'OOxsY',
        'video',
        'lokHD',
        'type',
        'text',
        'XjkmQ',
        'dataValues',
        'sequelize',
        'age',
        'sended',
        '2363070eNMaJk',
        'ers/socket',
        'findAll',
        'WUAOK',
        'mediaUrl',
        '../../mode',
        'includes',
        'default',
        'tokenAPI',
        'individual',
        'ack',
        'body',
        'lte',
        '103751ZhCgbf',
        'messages',
        'document',
        'status',
        'image',
        'sAsRead',
        'ePyzI',
        'ugFeJ',
        'YbBWx'
    ];
    _0x543b = function () {
        return _0xfa4cc5;
    };
    return _0x543b();
}
const _0x46334c = {};
_0x46334c[_0x434565(0x97)] = !![], Object[_0x434565(0x6c) + _0x434565(0xbf)](exports, _0x434565(0x7c), _0x46334c);
const sequelize_1 = require(_0x434565(0xa3)), SetTicketMessagesAsRead_1 = __importDefault(require(_0x434565(0x6e) + _0x434565(0xc7) + _0x434565(0xca) + _0x434565(0xb8))), socketEmit_1 = __importDefault(require(_0x434565(0x6e) + _0x434565(0xa7) + _0x434565(0xce))), Message_1 = __importDefault(require(_0x434565(0xab) + _0x434565(0x73))), Ticket_1 = __importDefault(require(_0x434565(0xab) + _0x434565(0x81))), Whatsapp_1 = __importDefault(require(_0x434565(0xab) + _0x434565(0x8e) + 'p')), logger_1 = require(_0x434565(0x90) + _0x434565(0xd1)), SentMessage_1 = __importDefault(require(_0x434565(0x6a) + _0x434565(0xa4))), buildWabaMessage360 = async (_0x580f2b, _0x13f076) => {
        const _0x231883 = _0x434565, _0x51cd35 = {
                'obDCx': function (_0xb1eaab, _0x2030b3) {
                    return _0xb1eaab(_0x2030b3);
                },
                'mWDhB': _0x231883(0xaf),
                'uIyUk': _0x231883(0xa0),
                'KyZkL': function (_0x41fe6b, _0xd98d15) {
                    return _0x41fe6b === _0xd98d15;
                },
                'XbHmB': _0x231883(0x89) + 'n',
                'CnpET': function (_0x5b3ad4, _0x5c6db4) {
                    return _0x5b3ad4 === _0x5c6db4;
                },
                'XjkmQ': _0x231883(0xb5),
                'OJKdl': _0x231883(0xb7),
                'MkSUy': _0x231883(0x9d),
                'vIZSR': _0x231883(0x76),
                'lGZuz': function (_0x59bc19, _0x22648b) {
                    return _0x59bc19 === _0x22648b;
                },
                'RNvYC': _0x231883(0x7a),
                'WUAOK': function (_0x26ab5d, _0x5e9a3f) {
                    return _0x26ab5d === _0x5e9a3f;
                },
                'JnrLl': _0x231883(0x99)
            };
        let _0x28af17 = {
            'timestamp': _0x51cd35[_0x231883(0xc6)](String, _0x580f2b[_0x231883(0x6b)]),
            'recipient_type': _0x51cd35[_0x231883(0xcd)],
            'to': _0x13f076,
            'type': _0x51cd35[_0x231883(0xc1)]
        };
        if (_0x51cd35[_0x231883(0x94)](_0x580f2b[_0x231883(0x6f)], _0x51cd35[_0x231883(0xc0)]) || _0x51cd35[_0x231883(0x93)](_0x580f2b[_0x231883(0x6f)], _0x51cd35[_0x231883(0xa1)])) {
            const _0x196941 = {};
            _0x196941['id'] = _0x580f2b[_0x231883(0x74) + 'd'], _0x196941[_0x231883(0xc4)] = _0x580f2b[_0x231883(0xb1)] || _0x580f2b[_0x231883(0xc9)] || '' || '', _0x28af17 = {
                ..._0x28af17,
                'type': _0x51cd35[_0x231883(0xa1)],
                'document': _0x196941
            };
        }
        if (_0x51cd35[_0x231883(0x94)](_0x580f2b[_0x231883(0x6f)], _0x51cd35[_0x231883(0x8f)])) {
            const _0x131d0c = {};
            _0x131d0c['id'] = _0x580f2b[_0x231883(0x74) + 'd'], _0x131d0c[_0x231883(0xc4)] = _0x580f2b[_0x231883(0xb1)] || _0x580f2b[_0x231883(0xc9)] || '', _0x28af17 = {
                ..._0x28af17,
                'type': _0x51cd35[_0x231883(0x8f)],
                'image': _0x131d0c
            };
        }
        if (_0x51cd35[_0x231883(0x94)](_0x580f2b[_0x231883(0x6f)], _0x51cd35[_0x231883(0x67)])) {
            const _0x443437 = {};
            _0x443437['id'] = _0x580f2b[_0x231883(0x74) + 'd'], _0x443437[_0x231883(0xc4)] = _0x580f2b[_0x231883(0xb1)] || _0x580f2b[_0x231883(0xc9)] || '', _0x28af17 = {
                ..._0x28af17,
                'type': _0x51cd35[_0x231883(0x67)],
                'video': _0x443437
            };
        }
        if (_0x51cd35[_0x231883(0x94)](_0x580f2b[_0x231883(0x6f)], _0x51cd35[_0x231883(0x96)]) || _0x51cd35[_0x231883(0xd2)](_0x580f2b[_0x231883(0x6f)], _0x51cd35[_0x231883(0x9b)])) {
            const _0x1174f3 = {};
            _0x1174f3['id'] = _0x580f2b[_0x231883(0x74) + 'd'], _0x1174f3[_0x231883(0xc4)] = _0x580f2b[_0x231883(0xb1)] || _0x580f2b[_0x231883(0xc9)] || '', _0x28af17 = {
                ..._0x28af17,
                'type': _0x51cd35[_0x231883(0x96)],
                'audio': _0x1174f3
            };
        }
        if (_0x51cd35[_0x231883(0xa9)](_0x580f2b[_0x231883(0x6f)], _0x51cd35[_0x231883(0x78)]) || _0x51cd35[_0x231883(0xa9)](_0x580f2b[_0x231883(0x6f)], _0x51cd35[_0x231883(0xc1)])) {
            const _0x2a2237 = {};
            _0x2a2237[_0x231883(0xb1)] = _0x580f2b[_0x231883(0xb1)], _0x28af17 = {
                ..._0x28af17,
                'text': _0x2a2237
            };
        }
        return _0x28af17;
    }, _0x438273 = { [sequelize_1['Op']['is']]: null }, where = {
        'fromMe': !![],
        'messageId': _0x438273,
        'status': _0x434565(0x7f),
        [sequelize_1['Op']['or']]: [
            { 'scheduleDate': { [sequelize_1['Op'][_0x434565(0xb2)]]: new Date() } },
            { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
        ]
    }, Waba360SendMessagesSystem = async _0x1d743b => {
        const _0x1d6378 = _0x434565, _0x26b7f2 = {
                'YbBWx': _0x1d6378(0x8d),
                'tDFrP': _0x1d6378(0x7d),
                'zUNVD': _0x1d6378(0xc3),
                'ePyzI': _0x1d6378(0x7e),
                'yUVPY': _0x1d6378(0x8c),
                'ugFeJ': _0x1d6378(0xcb),
                'lokHD': _0x1d6378(0x88),
                'qfINV': _0x1d6378(0x80),
                'HwDyT': function (_0x2c803e, _0x4a6223) {
                    return _0x2c803e(_0x4a6223);
                },
                'OOxsY': _0x1d6378(0xa0),
                'tfhdk': _0x1d6378(0x99),
                'QloaV': function (_0x4a8a5c, _0x11e9b1, _0x57fb3d) {
                    return _0x4a8a5c(_0x11e9b1, _0x57fb3d);
                },
                'qjDhE': _0x1d6378(0xa5),
                'sDdpz': _0x1d6378(0xc2),
                'wDujr': _0x1d6378(0x71) + _0x1d6378(0xc8)
            }, _0x2d1078 = await Message_1[_0x1d6378(0xad)][_0x1d6378(0xa8)]({
                'where': where,
                'include': [
                    _0x26b7f2[_0x1d6378(0xbb)],
                    {
                        'model': Ticket_1[_0x1d6378(0xad)],
                        'as': _0x26b7f2[_0x1d6378(0x72)],
                        'where': {
                            'tenantId': _0x1d743b[_0x1d6378(0x79)],
                            'channel': _0x26b7f2[_0x1d6378(0xc5)]
                        },
                        'include': [
                            _0x26b7f2[_0x1d6378(0xbb)],
                            {
                                'model': Whatsapp_1[_0x1d6378(0xad)],
                                'as': _0x26b7f2[_0x1d6378(0xb9)],
                                'where': {
                                    'id': _0x1d743b['id'],
                                    'type': _0x26b7f2[_0x1d6378(0xc5)],
                                    'wabaBSP': _0x26b7f2[_0x1d6378(0xbe)]
                                }
                            }
                        ]
                    },
                    {
                        'model': Message_1[_0x1d6378(0xad)],
                        'as': _0x26b7f2[_0x1d6378(0xba)],
                        'include': [_0x26b7f2[_0x1d6378(0xbb)]]
                    }
                ],
                'order': [[
                        _0x26b7f2[_0x1d6378(0x9e)],
                        _0x26b7f2[_0x1d6378(0x87)]
                    ]]
            });
        for (const _0x559268 of _0x2d1078) {
            const {ticket: _0x45aac8} = _0x559268, _0x29c2c2 = _0x26b7f2[_0x1d6378(0x84)](String, _0x45aac8[_0x1d6378(0x8d)][_0x1d6378(0xd4)]);
            if (![
                    _0x26b7f2[_0x1d6378(0x9c)],
                    _0x26b7f2[_0x1d6378(0xbc)]
                ][_0x1d6378(0xac)](_0x559268[_0x1d6378(0x6f)]) && _0x559268[_0x1d6378(0xaa)] && !_0x559268[_0x1d6378(0x74) + 'd']) {
            }
            const _0x3265c2 = await _0x26b7f2[_0x1d6378(0x91)](buildWabaMessage360, _0x559268, _0x29c2c2), _0x355696 = {};
            _0x355696[_0x1d6378(0xbd)] = _0x3265c2, _0x355696[_0x1d6378(0x92)] = _0x1d743b[_0x1d6378(0xae)];
            const _0x53bdd2 = await (0x1171 + -0x146 * 0x8 + 0x3 * -0x26b, SentMessage_1[_0x1d6378(0xad)])(_0x355696), _0x5d9c97 = { ..._0x559268 };
            _0x5d9c97[_0x1d6378(0x95)] = _0x53bdd2[_0x1d6378(0xb4)][0x136b * 0x1 + 0x3 * 0x6b1 + -0x277e]['id'], _0x5d9c97[_0x1d6378(0xb6)] = _0x26b7f2[_0x1d6378(0x82)], _0x5d9c97[_0x1d6378(0xb0)] = 0x2;
            const _0x51cab9 = _0x5d9c97, _0x5e34de = { ..._0x51cab9 }, _0x190f54 = {};
            _0x190f54['id'] = _0x559268['id'];
            const _0x11a090 = {};
            _0x11a090[_0x1d6378(0x98)] = _0x190f54, await Message_1[_0x1d6378(0xad)][_0x1d6378(0x77)](_0x5e34de, _0x11a090);
            const _0x156dd2 = {};
            _0x156dd2[_0x1d6378(0x79)] = _0x45aac8[_0x1d6378(0x79)], _0x156dd2[_0x1d6378(0x9f)] = _0x26b7f2[_0x1d6378(0xd3)], _0x156dd2[_0x1d6378(0x68)] = { ..._0x51cab9[_0x1d6378(0xa2)] }, _0x156dd2[_0x1d6378(0x68)][_0x1d6378(0xaa)] = _0x559268[_0x1d6378(0xaa)], _0x156dd2[_0x1d6378(0x68)][_0x1d6378(0x95)] = _0x51cab9[_0x1d6378(0x95)], _0x156dd2[_0x1d6378(0x68)][_0x1d6378(0xb6)] = _0x26b7f2[_0x1d6378(0x82)], _0x156dd2[_0x1d6378(0x68)][_0x1d6378(0xb0)] = 0x2, (-0xb7b * 0x1 + -0x20e4 + 0x2c5f, socketEmit_1[_0x1d6378(0xad)])(_0x156dd2), logger_1[_0x1d6378(0xd0)][_0x1d6378(0x70)](_0x26b7f2[_0x1d6378(0x8a)]), await (-0x1a * -0x16 + -0x14d3 * -0x1 + -0x1 * 0x170f, SetTicketMessagesAsRead_1[_0x1d6378(0xad)])(_0x45aac8);
        }
    };
exports[_0x434565(0xad)] = Waba360SendMessagesSystem;