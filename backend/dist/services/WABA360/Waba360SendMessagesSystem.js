'use strict';
const C = b, D = b;
function a() {
    const J = [
        'ls/Message',
        'ls/Ticket',
        'erty',
        'OKUUS',
        'findAll',
        'Kugdf',
        '524806Utlssv',
        'Message\x20Up',
        'sTMfx',
        'ers/SetTic',
        'logger',
        'sequelize',
        'individual',
        'messageId',
        '46260387WNARht',
        'whatsapp',
        'ls/Whatsap',
        'video',
        'defineProp',
        'LNtoo',
        'ctdzF',
        'QoiEX',
        's/logger',
        '10HoMMDO',
        'default',
        'Emit',
        'tokenAPI',
        'ack',
        'age',
        '75VOoBUf',
        'image',
        'caption',
        'status',
        'AIZCq',
        'mnNIG',
        'dataValues',
        'vGRQW',
        'value',
        '../../util',
        'quotedMsg',
        'mediaUrl',
        'JKZIG',
        'mediaType',
        'OqLTS',
        'document',
        'uIMAN',
        'kpudE',
        'vDEoE',
        'qJtkS',
        'wcbHF',
        'sOpDm',
        'ticket',
        '1389920KIbkss',
        'timestamp',
        'date\x20ok',
        'DZqrd',
        '223148bjzBBA',
        'message',
        './SentMess',
        '__importDe',
        'EFTBc',
        'where',
        'payload',
        '2358036xxhyKO',
        'euuHo',
        'ers/socket',
        'text',
        '../../help',
        'GrNFW',
        'OGQPw',
        'mDRgJ',
        'contact',
        'apiKey',
        'MHEkd',
        'yhvUK',
        '7235128WrUQnT',
        '360',
        'chat:ack',
        'body',
        'heEfo',
        'number',
        '486078FiTCUp',
        'includes',
        'update',
        'RIOhG',
        'cAZqu',
        'YpNWL',
        'sPOxx',
        'fault',
        '48dgHUwk',
        'AkOwE',
        'tenantId',
        'ZrQrA',
        'phvBg',
        'audio',
        '__esModule',
        'xvULa',
        'applicatio',
        'lte',
        'sAsRead',
        'IMPWU',
        'wabaMediaI',
        'sended',
        'mediaName',
        'YZjrl',
        'info',
        'ketMessage',
        'createdAt',
        'messages',
        'KSumN',
        'ASC',
        'waba',
        '../../mode',
        'yexRh',
        'voice',
        'chat',
        'type',
        'DhKZM',
        'dRiPW',
        'pending'
    ];
    a = function () {
        return J;
    };
    return a();
}
(function (c, d) {
    const A = b, B = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(A(0x111)) / (-0x134a + -0x1466 + -0x27b1 * -0x1) + parseInt(A(0x143)) / (-0x5 * 0x757 + -0x1 * -0x1ccd + 0x7e8) * (-parseInt(B(0xec)) / (-0xde2 + 0x1 * -0x2526 + -0x49 * -0xb3)) + -parseInt(A(0xd2)) / (-0x20 + -0x1e6 * 0x12 + 0x2250) + -parseInt(A(0x128)) / (-0x29b + 0x141e + -0x117e) * (parseInt(A(0xe4)) / (0x2f1 * -0x7 + -0x1329 + 0x27c6)) + -parseInt(B(0x13f)) / (0x1174 + 0x1eb * -0x1 + -0x2 * 0x7c1) + -parseInt(A(0xde)) / (0x246 + -0x4 * 0x893 + 0x200e) + -parseInt(B(0x119)) / (-0x149f * 0x1 + -0x1 * 0x10bb + 0x11 * 0x233) * (-parseInt(A(0x122)) / (-0x3 * 0xc4c + -0xd * -0xa1 + -0x1cc1 * -0x1));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x199d78 + -0x1d3a07 + 0x45ac69));
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x1bd0 + 0x13ed + -0x2eed);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[C(0x146) + D(0xeb)] || function (c) {
    const E = C;
    return c && c[E(0xf2)] ? c : { 'default': c };
};
const m = {};
m[D(0x130)] = !![], Object[C(0x11d) + D(0x10d)](exports, C(0xf2), m);
const sequelize_1 = require(D(0x116)), SetTicketMessagesAsRead_1 = __importDefault(require(C(0xd6) + C(0x114) + C(0xfd) + C(0xf6))), socketEmit_1 = __importDefault(require(C(0xd6) + D(0xd4) + D(0x124))), Message_1 = __importDefault(require(C(0x103) + C(0x10b))), Ticket_1 = __importDefault(require(C(0x103) + C(0x10c))), Whatsapp_1 = __importDefault(require(C(0x103) + C(0x11b) + 'p')), logger_1 = require(D(0x131) + D(0x121)), SentMessage_1 = __importDefault(require(C(0x145) + D(0x127))), buildWabaMessage360 = async (h, i) => {
        const F = D, G = D, j = {
                'euuHo': function (l, o) {
                    return l(o);
                },
                'yhvUK': F(0x117),
                'EFTBc': G(0xd5),
                'Kugdf': function (l, o) {
                    return l === o;
                },
                'OGQPw': G(0xf4) + 'n',
                'vGRQW': function (l, o) {
                    return l === o;
                },
                'YpNWL': G(0x137),
                'mDRgJ': F(0x129),
                'ctdzF': function (l, o) {
                    return l === o;
                },
                'mnNIG': F(0x11c),
                'sPOxx': G(0xf1),
                'yexRh': function (l, o) {
                    return l === o;
                },
                'cAZqu': F(0x105),
                'uIMAN': function (l, o) {
                    return l !== o;
                },
                'AkOwE': F(0x12c),
                'xvULa': G(0xf0),
                'RIOhG': G(0x106)
            };
        let k = {
            'timestamp': j[G(0xd3)](String, h[G(0x140)]),
            'recipient_type': j[F(0xdd)],
            'to': i,
            'type': j[G(0x147)]
        };
        if (j[F(0x110)](h[G(0x135)], j[G(0xd8)]) || j[G(0x12f)](h[G(0x135)], j[F(0xe9)])) {
            const l = {};
            l['id'] = h[F(0xf8) + 'd'], l[F(0x12a)] = h[G(0xe1)] || h[F(0xfa)] || '' || '', k = {
                ...k,
                'type': j[G(0xe9)],
                'document': l
            };
        }
        if (j[F(0x110)](h[G(0x135)], j[G(0xd9)])) {
            const o = {};
            o['id'] = h[F(0xf8) + 'd'], o[G(0x12a)] = h[G(0xe1)] || h[F(0xfa)] || '', k = {
                ...k,
                'type': j[F(0xd9)],
                'image': o
            };
        }
        if (j[G(0x11f)](h[G(0x135)], j[G(0x12d)])) {
            const p = {};
            p['id'] = h[F(0xf8) + 'd'], p[G(0x12a)] = h[F(0xe1)] || h[F(0xfa)] || '', k = {
                ...k,
                'type': j[F(0x12d)],
                'video': p
            };
        }
        if (j[G(0x11f)](h[F(0x135)], j[G(0xea)]) || j[G(0x104)](h[G(0x135)], j[G(0xe8)])) {
            if (j[G(0x138)](j[G(0xed)], j[G(0xf3)])) {
                const q = {};
                q['id'] = h[F(0xf8) + 'd'], q[G(0x12a)] = h[G(0xe1)] || h[G(0xfa)] || '', k = {
                    ...k,
                    'type': j[G(0xea)],
                    'audio': q
                };
            } else {
                const s = {};
                s[G(0xe1)] = t[G(0xe1)];
                const t = { ...s };
                t[F(0xd5)] = s, f = t;
            }
        }
        if (j[G(0x11f)](h[F(0x135)], j[G(0xe7)]) || j[G(0x11f)](h[G(0x135)], j[G(0x147)])) {
            const s = {};
            s[F(0xe1)] = h[G(0xe1)], k = {
                ...k,
                'text': s
            };
        }
        return k;
    }, n = { [sequelize_1['Op']['is']]: null }, where = {
        'fromMe': !![],
        'messageId': n,
        'status': C(0x10a),
        [sequelize_1['Op']['or']]: [
            { 'scheduleDate': { [sequelize_1['Op'][D(0xf5)]]: new Date() } },
            { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
        ]
    }, Waba360SendMessagesSystem = async i => {
        const H = D, I = D, j = {
                'DhKZM': H(0x11c),
                'ZrQrA': H(0xda),
                'MHEkd': H(0x13e),
                'vDEoE': H(0x102),
                'LNtoo': I(0x11a),
                'OqLTS': H(0xdf),
                'kpudE': H(0x132),
                'KSumN': H(0xfe),
                'heEfo': H(0x101),
                'JKZIG': function (l, o) {
                    return l === o;
                },
                'sTMfx': H(0x109),
                'wcbHF': I(0xfb),
                'GrNFW': function (l, o) {
                    return l(o);
                },
                'sOpDm': H(0xd5),
                'IMPWU': H(0x106),
                'QoiEX': function (l, o, p) {
                    return l(o, p);
                },
                'qJtkS': I(0xf9),
                'DZqrd': H(0xe0),
                'OKUUS': H(0x112) + H(0x141)
            }, k = await Message_1[H(0x123)][H(0x10f)]({
                'where': where,
                'include': [
                    j[H(0xef)],
                    {
                        'model': Ticket_1[I(0x123)],
                        'as': j[I(0xdc)],
                        'where': {
                            'tenantId': i[I(0xee)],
                            'channel': j[H(0x13a)]
                        },
                        'include': [
                            j[I(0xef)],
                            {
                                'model': Whatsapp_1[H(0x123)],
                                'as': j[I(0x11e)],
                                'where': {
                                    'id': i['id'],
                                    'type': j[H(0x13a)],
                                    'wabaBSP': j[H(0x136)]
                                }
                            }
                        ]
                    },
                    {
                        'model': Message_1[I(0x123)],
                        'as': j[I(0x139)],
                        'include': [j[H(0xef)]]
                    }
                ],
                'order': [[
                        j[H(0x100)],
                        j[H(0xe2)]
                    ]]
            });
        for (const l of k) {
            if (j[I(0x134)](j[I(0x113)], j[H(0x13c)])) {
                const p = {};
                p['id'] = j[I(0xf8) + 'd'], p[I(0x12a)] = k[I(0xe1)] || l[H(0xfa)] || '';
                const q = { ...i };
                q[H(0x107)] = j[I(0x108)], q[H(0x11c)] = p, h = q;
            } else {
                const {ticket: p} = l, q = j[H(0xd7)](String, p[H(0xda)][H(0xe3)]);
                if (![
                        j[H(0x13d)],
                        j[H(0xf7)]
                    ][H(0xe5)](l[H(0x135)]) && l[I(0x133)] && !l[H(0xf8) + 'd']) {
                }
                const r = await j[I(0x120)](buildWabaMessage360, l, q), s = {};
                s[H(0x144)] = r, s[H(0xdb)] = i[I(0x125)];
                const t = await (0x8cf + 0x4d * 0x1f + -0x1222, SentMessage_1[H(0x123)])(s), u = { ...l };
                u[H(0x118)] = t[I(0xff)][0x1ea + -0x1eb + 0x1 * 0x1]['id'], u[I(0x12b)] = j[H(0x13b)], u[I(0x126)] = 0x2;
                const v = u, w = { ...v }, x = {};
                x['id'] = l['id'];
                const y = {};
                y[I(0xd0)] = x, await Message_1[H(0x123)][I(0xe6)](w, y);
                const z = {};
                z[I(0xee)] = p[H(0xee)], z[H(0x107)] = j[I(0x142)], z[I(0xd1)] = { ...v[H(0x12e)] }, z[I(0xd1)][H(0x133)] = l[I(0x133)], z[I(0xd1)][I(0x118)] = v[H(0x118)], z[I(0xd1)][H(0x12b)] = j[I(0x13b)], z[I(0xd1)][I(0x126)] = 0x2, (0x2b5 * 0x3 + 0x2d2 + -0xaf1, socketEmit_1[I(0x123)])(z), logger_1[H(0x115)][H(0xfc)](j[H(0x10e)]), await (-0x2598 + 0x1eb2 + 0x6e6, SetTicketMessagesAsRead_1[I(0x123)])(p);
            }
        }
    };
exports[D(0x123)] = Waba360SendMessagesSystem;