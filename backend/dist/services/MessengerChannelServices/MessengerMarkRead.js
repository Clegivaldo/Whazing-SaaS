'use strict';
const _0x3ac755 = _0x15a9;
function _0x15a9(_0x82c891, _0x1f724e) {
    const _0xce6e65 = _0x432f();
    return _0x15a9 = function (_0x5056fc, _0x3720a9) {
        _0x5056fc = _0x5056fc - (-0x17f * -0x2 + -0x6b7 + -0x5 * -0xd9);
        let _0x3e30cc = _0xce6e65[_0x5056fc];
        return _0x3e30cc;
    }, _0x15a9(_0x82c891, _0x1f724e);
}
function _0x432f() {
    const _0x4a594e = [
        'dataValues',
        '../../help',
        'uhJAO',
        'all',
        'tenantId',
        '1341645zGlxzW',
        'sended',
        'status',
        'watermark',
        '118UqjejB',
        'sequelize',
        'ls/Ticket',
        'update',
        'default',
        '864006zkcgUD',
        '19047ZiXcqU',
        'defineProp',
        '201162CIgvUW',
        'messageId',
        'ack',
        'ls/Message',
        'mediaUrl',
        'tvHKp',
        'sender',
        '3706784rVzjPV',
        'payload',
        'value',
        'lte',
        'Emit',
        '8AbTBWH',
        'ls/Contact',
        'fault',
        'findAll',
        '../../mode',
        'chat:ack',
        '3213399ktHakX',
        '__esModule',
        '__importDe',
        'timestamp',
        'map',
        'ers/socket',
        '7983099LpjWXe',
        'erty',
        'read',
        'type'
    ];
    _0x432f = function () {
        return _0x4a594e;
    };
    return _0x432f();
}
(function (_0x2f2a01, _0x2619c3) {
    const _0x2a9f3b = _0x15a9, _0x426fa3 = _0x2f2a01();
    while (!![]) {
        try {
            const _0x1fc302 = parseInt(_0x2a9f3b(0x90)) / (-0x132e + 0x1436 + -0x107 * 0x1) + parseInt(_0x2a9f3b(0x88)) / (-0x5b0 + 0xc72 + -0x6c0) * (-parseInt(_0x2a9f3b(0x8e)) / (0x1516 + 0xa78 * -0x1 + 0x3 * -0x389)) + -parseInt(_0x2a9f3b(0x9c)) / (0x1d77 + -0xe41 + -0xf32) * (parseInt(_0x2a9f3b(0x84)) / (-0xaa7 + 0x61c + -0x8 * -0x92)) + parseInt(_0x2a9f3b(0x8d)) / (-0x1dc3 + -0x21fc + -0x5 * -0xcc1) + -parseInt(_0x2a9f3b(0xa2)) / (0x757 * -0x1 + -0x564 + -0x1 * -0xcc2) + parseInt(_0x2a9f3b(0x97)) / (-0x158b + 0x1305 * -0x1 + -0xd88 * -0x3) + parseInt(_0x2a9f3b(0xa8)) / (0x751 * 0x5 + -0x1a7f + 0x53 * -0x1f);
            if (_0x1fc302 === _0x2619c3)
                break;
            else
                _0x426fa3['push'](_0x426fa3['shift']());
        } catch (_0x2b1b2f) {
            _0x426fa3['push'](_0x426fa3['shift']());
        }
    }
}(_0x432f, -0x683 * -0x5 + -0x4c3d2 + 0x91 * 0x10f3));
var __importDefault = this && this[_0x3ac755(0xa4) + _0x3ac755(0x9e)] || function (_0x66f4c7) {
    const _0x342e4d = _0x3ac755;
    return _0x66f4c7 && _0x66f4c7[_0x342e4d(0xa3)] ? _0x66f4c7 : { 'default': _0x66f4c7 };
};
const _0x56e50a = {};
_0x56e50a[_0x3ac755(0x99)] = !![], Object[_0x3ac755(0x8f) + _0x3ac755(0xa9)](exports, _0x3ac755(0xa3), _0x56e50a);
const sequelize_1 = require(_0x3ac755(0x89)), socketEmit_1 = __importDefault(require(_0x3ac755(0xad) + _0x3ac755(0xa7) + _0x3ac755(0x9b))), Contact_1 = __importDefault(require(_0x3ac755(0xa0) + _0x3ac755(0x9d))), Message_1 = __importDefault(require(_0x3ac755(0xa0) + _0x3ac755(0x93))), Ticket_1 = __importDefault(require(_0x3ac755(0xa0) + _0x3ac755(0x8a))), MessengerMarkRead = async (_0xaca3b3, _0x40eca6) => {
        const _0x4f6a38 = _0x3ac755, _0xfa70c9 = {};
        _0xfa70c9[_0x4f6a38(0x95)] = _0x4f6a38(0xa1), _0xfa70c9[_0x4f6a38(0xae)] = _0x4f6a38(0x85);
        const _0x176db9 = _0xfa70c9, _0x4555cb = await Message_1[_0x4f6a38(0x8c)][_0x4f6a38(0x9f)]({
                'where': {
                    'tenantId': _0x40eca6,
                    'createdAt': { [sequelize_1['Op'][_0x4f6a38(0x9a)]]: new Date(_0xaca3b3[_0x4f6a38(0xaa)][_0x4f6a38(0x87)]) },
                    'fromMe': !![],
                    'ack': {
                        [sequelize_1['Op']['in']]: [
                            -0xad5 + -0x1 * 0x24a + 0xd20,
                            0x3ef * 0x9 + -0x5e8 + -0x1d7d
                        ]
                    }
                },
                'include': [{
                        'model': Ticket_1[_0x4f6a38(0x8c)],
                        'where': { 'tenantId': _0x40eca6 },
                        'include': [{
                                'model': Contact_1[_0x4f6a38(0x8c)],
                                'where': {
                                    'tenantId': _0x40eca6,
                                    'messengerId': _0xaca3b3[_0x4f6a38(0x96)]['id']
                                }
                            }]
                    }]
            });
        await Promise[_0x4f6a38(0xaf)](_0x4555cb[_0x4f6a38(0xa6)](async _0x3d05d3 => {
            const _0x2f7a69 = _0x4f6a38, _0x433126 = {};
            _0x433126[_0x2f7a69(0x92)] = 0x3, await _0x3d05d3[_0x2f7a69(0x8b)](_0x433126);
            const _0x275428 = {};
            _0x275428[_0x2f7a69(0xb0)] = _0x40eca6, _0x275428[_0x2f7a69(0xab)] = _0x176db9[_0x2f7a69(0x95)], _0x275428[_0x2f7a69(0x98)] = { ..._0x3d05d3[_0x2f7a69(0xac)] }, _0x275428[_0x2f7a69(0x98)][_0x2f7a69(0x94)] = _0x3d05d3[_0x2f7a69(0x94)], _0x275428[_0x2f7a69(0x98)]['id'] = _0x3d05d3['id'], _0x275428[_0x2f7a69(0x98)][_0x2f7a69(0xa5)] = _0x3d05d3[_0x2f7a69(0xa5)], _0x275428[_0x2f7a69(0x98)][_0x2f7a69(0x91)] = _0x3d05d3[_0x2f7a69(0x91)], _0x275428[_0x2f7a69(0x98)][_0x2f7a69(0x86)] = _0x176db9[_0x2f7a69(0xae)], _0x275428[_0x2f7a69(0x98)][_0x2f7a69(0x92)] = 0x3, (0x53c * -0x5 + -0x3 * -0x818 + 0x1e4, socketEmit_1[_0x2f7a69(0x8c)])(_0x275428);
        }));
    };
exports[_0x3ac755(0x8c)] = MessengerMarkRead;