'use strict';
const S = b, T = b;
(function (c, d) {
    const Q = b, R = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(Q(0x248)) / (0x3 * -0x851 + 0x137e + -0x1 * -0x576) + parseInt(R(0x205)) / (0xd53 + -0x22e1 + -0xb8 * -0x1e) * (-parseInt(Q(0x21a)) / (0x23dc + -0x66a + -0x1d6f * 0x1)) + parseInt(Q(0x1fd)) / (-0x137a + 0x1e6d + 0x3a5 * -0x3) + parseInt(Q(0x23c)) / (-0xf99 + 0x305 * 0x1 + -0x19 * -0x81) + -parseInt(Q(0x235)) / (0xcf4 + -0x42d * 0x7 + 0x3 * 0x56f) + -parseInt(Q(0x213)) / (-0x197a + -0x559 + 0x1eda) * (parseInt(R(0x1f2)) / (-0x20b4 + -0x14a2 + 0x19e * 0x21)) + -parseInt(Q(0x224)) / (0x607 + 0x482 * 0x1 + -0xa8 * 0x10) * (-parseInt(Q(0x228)) / (0x5 * -0x16f + 0x24e7 + 0x43e * -0x7));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x55d * -0x101 + 0x121 * 0x5b6 + 0x26528));
var __importDefault = this && this[S(0x1e8) + S(0x25f)] || function (c) {
    const U = T;
    return c && c[U(0x253)] ? c : { 'default': c };
};
function a() {
    const Z = [
        'closed',
        's/sleepRan',
        'end',
        'nant:\x20',
        'file',
        'messengerI',
        'age\x20is\x20(te',
        'payload',
        '110038xNplFI',
        'Ercnn',
        'MUzlj',
        'mTime',
        'error',
        'ls/Message',
        'path',
        'quotedMsg',
        'Emit',
        'readFile',
        'jpeg',
        '__esModule',
        'timestamp',
        'IBLsu',
        'mediaType',
        'date\x20ok',
        'update',
        'info',
        'ASC',
        'Yffhk',
        'elHvA',
        'loXmF',
        '.mp4',
        'fault',
        'contact',
        'status',
        '\x20message\x20(',
        'miLnE',
        'body',
        'image',
        's/logger',
        'hQXjk',
        'aAwke',
        'chat',
        'FIHnC',
        'type',
        '__importDe',
        'sequelize',
        '../../util',
        'ptt',
        'join',
        'ers/socket',
        ')::\x20',
        'erty',
        'fluent-ffm',
        'where',
        '287336TNJWqT',
        'ticket',
        'lte',
        'value',
        'TKIge',
        'ack',
        'SDOiS',
        'document',
        'sendText',
        'Sdsrg',
        'createdAt',
        '221880NGjwAQ',
        'Message\x20Up',
        'lNjhD',
        'IzLgF',
        'default',
        'sendAudio',
        'sended',
        'text',
        '22PAJTaN',
        'id:\x20',
        '\x20|\x20Ticket:',
        'TXJix',
        'mediaUrl',
        'VmaNJ',
        'MhNdG',
        'sendFile',
        'findAll',
        'sharp',
        'public',
        'toBuffer',
        'ls/Ticket',
        'sendImage',
        '21JunFuS',
        'logger',
        'peg',
        'Error\x20send',
        'mediaName',
        'oBOFm',
        'ohOLs',
        '49449qpVLsN',
        'domTime',
        'mp4',
        'messageId',
        'video',
        'includes',
        'sleepRando',
        'log',
        'defineProp',
        'fs/promise',
        '90Ikgdhi',
        'toFormat',
        'applicatio',
        'dataValues',
        '306070IyVbjE',
        'split',
        'GZnew',
        'saveToFile',
        'chat:ack',
        'filename',
        'messenger',
        'lXUiL',
        'RDwfG',
        'Dwjvz',
        'tenantId',
        'Error\x20mess',
        'EFyhz',
        '2045046hQbyEw',
        '../../mode',
        '../../help',
        'laYCK',
        'asxbg',
        'audio',
        'yveco',
        '1924760dPjNFL',
        'pending',
        'sendVideo',
        'sZmJf'
    ];
    a = function () {
        return Z;
    };
    return a();
}
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x1 * 0x3d6 + -0x1a3f + 0x1846);
        let h = e[f];
        return h;
    }, b(c, d);
}
const q = {};
q[S(0x1f5)] = !![], Object[T(0x222) + S(0x1ef)](exports, S(0x253), q);
const promises_1 = require(S(0x223) + 's'), fluent_ffmpeg_1 = __importDefault(require(T(0x1f0) + S(0x215))), path_1 = require(T(0x24e)), sequelize_1 = require(T(0x1e9)), sharp_1 = __importDefault(require(T(0x20e))), socketEmit_1 = __importDefault(require(T(0x237) + S(0x1ed) + T(0x250))), Message_1 = __importDefault(require(T(0x236) + T(0x24d))), Ticket_1 = __importDefault(require(T(0x236) + S(0x211))), logger_1 = require(T(0x1ea) + S(0x1e2)), sleepRandomTime_1 = require(T(0x1ea) + T(0x241) + T(0x21b)), MessengerSendMessagesSystem = async (l, m) => {
        const V = S, W = T, n = {
                'TXJix': V(0x21c),
                'Yffhk': V(0x24c),
                'EFyhz': V(0x242),
                'IBLsu': V(0x23d),
                'MhNdG': W(0x260),
                'loXmF': W(0x1f3),
                'SDOiS': W(0x240),
                'GZnew': V(0x22e),
                'oBOFm': V(0x24f),
                'TKIge': W(0x1fc),
                'Dwjvz': V(0x25a),
                'asxbg': W(0x1e5),
                'aAwke': V(0x204),
                'MUzlj': W(0x20f),
                'VmaNJ': function (t, u) {
                    return t === u;
                },
                'IzLgF': V(0x23a),
                'elHvA': function (t, u) {
                    return t === u;
                },
                'sZmJf': V(0x1eb),
                'hQXjk': W(0x1e1),
                'lXUiL': function (t, u) {
                    return t === u;
                },
                'lNjhD': V(0x21e),
                'laYCK': V(0x226) + 'n',
                'RDwfG': V(0x244),
                'miLnE': W(0x1f9),
                'FIHnC': V(0x203),
                'Ercnn': V(0x22c),
                'yveco': V(0x1fe) + V(0x257),
                'Sdsrg': function (t, u) {
                    return t(u);
                },
                'ohOLs': function (t, u) {
                    return t(u);
                }
            }, o = { [sequelize_1['Op']['is']]: null }, p = {
                'fromMe': !![],
                'messageId': o,
                'status': n[V(0x255)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][V(0x1f4)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, r = await Message_1[W(0x201)][V(0x20d)]({
                'where': p,
                'include': [
                    n[V(0x20b)],
                    {
                        'model': Ticket_1[V(0x201)],
                        'as': n[W(0x25d)],
                        'where': {
                            'tenantId': m,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: n[V(0x1f8)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': n[V(0x22a)],
                            'whatsappId': l['id']
                        },
                        'include': [n[V(0x20b)]]
                    },
                    {
                        'model': Message_1[W(0x201)],
                        'as': n[V(0x218)],
                        'include': [n[V(0x20b)]]
                    }
                ],
                'order': [[
                        n[V(0x1f6)],
                        n[W(0x231)]
                    ]]
            });
        let s;
        for (const t of r) {
            const u = t, {ticket: v} = u, w = v[V(0x260)][V(0x245) + 'd'];
            try {
                if (![
                        n[W(0x239)],
                        n[V(0x1e4)]
                    ][V(0x21f)](u[V(0x256)]) && u[V(0x217)]) {
                    const D = (0x236a + 0x3 * -0xbff + 0x93, path_1[W(0x1ec)])(__dirname, '..', '..', '..', n[V(0x24a)]), E = (-0x251a + -0x85d * 0x2 + 0x35d4, path_1[V(0x1ec)])(D, u[V(0x217)]), F = await (0x241f * 0x1 + -0x135 * 0x5 + -0x1e16, promises_1[V(0x251)])(E);
                    console[V(0x221)](E);
                    if (n[V(0x20a)](u[V(0x256)], n[W(0x200)]) || n[W(0x25c)](u[W(0x256)], n[W(0x23f)])) {
                        const G = u[V(0x217)][V(0x229)]('.'), H = (-0x2 * 0xd79 + 0x1dbd + -0x2cb * 0x1, path_1[V(0x1ec)])(D, G[0x333 * -0x3 + 0x143e + 0x221 * -0x5] + V(0x25e));
                        await new Promise((J, K) => {
                            const X = W, Y = W;
                            (0x1 * 0x216 + -0xf6d + 0xd57 * 0x1, fluent_ffmpeg_1[X(0x201)])(E)[X(0x225)](n[Y(0x208)])['on'](n[Y(0x25b)], L => K(L))['on'](n[X(0x234)], () => J(!![]))[X(0x22b)](H);
                        });
                        const I = await (-0x1171 * -0x1 + 0xad + -0x121e, promises_1[W(0x251)])(H);
                        s = await l[W(0x202)](w, I);
                    }
                    if (n[W(0x20a)](u[W(0x256)], n[V(0x1e3)])) {
                        const J = await (-0xe * 0x95 + -0x22c0 + 0x2ae6, sharp_1[W(0x201)])(F)[V(0x252)]()[W(0x210)](), K = {};
                        K[V(0x22d)] = u[V(0x217)], s = await l[W(0x212)](w, J, K);
                    }
                    if (n[W(0x22f)](u[W(0x256)], n[W(0x1ff)])) {
                        const L = {};
                        L[V(0x22d)] = u[W(0x217)], s = await l[V(0x23e)](w, F, L);
                    }
                    if ([
                            n[W(0x238)],
                            n[V(0x230)],
                            n[V(0x1df)]
                        ][W(0x21f)](u[V(0x256)])) {
                        const M = {};
                        M[V(0x22d)] = u[V(0x217)], s = await l[V(0x20c)](w, F, M);
                    }
                }
                [
                    n[V(0x239)],
                    n[W(0x1e4)]
                ][W(0x21f)](u[V(0x256)]) && !u[V(0x217)] && (s = await l[V(0x1fa)](w, u[W(0x1e0)]));
                const x = {
                    ...u,
                    ...s
                };
                x['id'] = u['id'], x[V(0x254)] = u[V(0x254)], x[V(0x21d)] = s[W(0x21d)], x[V(0x1dd)] = n[W(0x1e6)], x[W(0x1f7)] = 0x2;
                const y = x, z = { ...y }, A = {};
                A['id'] = u['id'];
                const B = {};
                B[W(0x1f1)] = A, await Message_1[V(0x201)][W(0x258)](z, B);
                const C = {};
                C[V(0x232)] = v[W(0x232)], C[W(0x1e7)] = n[W(0x249)], C[V(0x247)] = { ...u[W(0x227)] }, C[V(0x247)][W(0x209)] = u[V(0x209)], C[V(0x247)]['id'] = u['id'], C[V(0x247)][V(0x254)] = u[V(0x254)], C[V(0x247)][W(0x21d)] = s[V(0x21d)], C[V(0x247)][V(0x1dd)] = n[V(0x1e6)], C[V(0x247)][V(0x1f7)] = 0x2, (0x11f0 + 0x21c6 * 0x1 + -0x33b6, socketEmit_1[W(0x201)])(C), logger_1[V(0x214)][V(0x259)](n[W(0x23b)]), await (-0x11b1 + -0x12a * -0xe + 0x33 * 0x7, sleepRandomTime_1[W(0x220) + V(0x24b)])({
                    'minMilliseconds': n[V(0x1fb)](Number, -0x1be0 * 0x1 + 0x560 + 0x1874),
                    'maxMilliseconds': n[V(0x219)](Number, 0x5 * 0x316 + 0xbe6 + -0x3 * 0x728)
                });
            } catch (N) {
                const O = u['id'], P = u[W(0x1f3)]['id'];
                logger_1[V(0x214)][V(0x24c)](W(0x233) + W(0x246) + V(0x243) + m + (W(0x207) + '\x20') + P + ')'), logger_1[V(0x214)][W(0x24c)](W(0x216) + V(0x1de) + W(0x206) + O + W(0x1ee) + N);
            }
        }
    };
exports[S(0x201)] = MessengerSendMessagesSystem;