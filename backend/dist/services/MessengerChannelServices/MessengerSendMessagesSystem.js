'use strict';
const S = b, T = b;
function a() {
    const Z = [
        'timestamp',
        'mXMef',
        '.mp4',
        'PQShu',
        'sendText',
        'EbsEj',
        '../../help',
        'wyVoS',
        'mediaType',
        'contact',
        'fYpKM',
        'type',
        'sharp',
        'YZZqx',
        'chat',
        'age\x20is\x20(te',
        '14RSDCUg',
        'qDoVR',
        'path',
        '\x20message\x20(',
        'lte',
        'ticket',
        'filename',
        'chat:ack',
        'sleepRando',
        '5397128LlUgoo',
        'document',
        'applicatio',
        'YZQgq',
        '10325304JUOyEe',
        'bdzpr',
        'JxXnY',
        'iawKU',
        'Error\x20send',
        'sequelize',
        'mlExx',
        'sendVideo',
        'Error\x20mess',
        'jpeg',
        's/sleepRan',
        'ptt',
        'status',
        'date\x20ok',
        'ers/socket',
        'bLrXI',
        'lGyCR',
        'where',
        'fluent-ffm',
        'mediaUrl',
        'ack',
        'fault',
        'fs/promise',
        'nzreL',
        'sendFile',
        'log',
        'sendAudio',
        'quotedMsg',
        'messenger',
        'join',
        'sended',
        'saveToFile',
        'error',
        'CVSnz',
        'file',
        'body',
        '1359978Mzeksc',
        'defineProp',
        'text',
        'xMZYf',
        'Message\x20Up',
        'hiMSe',
        'value',
        'update',
        's/logger',
        ')::\x20',
        'video',
        'ruTel',
        'zjTWg',
        'sendImage',
        'findAll',
        'Emit',
        '__importDe',
        'jmOBZ',
        'toBuffer',
        'erty',
        '341154huajuK',
        'ASC',
        'toFormat',
        '\x20|\x20Ticket:',
        'mDrqq',
        '854380PTPrPb',
        'audio',
        'public',
        'UPklc',
        '930165mTcceL',
        'domTime',
        'tenantId',
        '../../util',
        'xdieC',
        'readFile',
        'info',
        'peg',
        'image',
        'pending',
        'includes',
        'ls/Message',
        '../../mode',
        'closed',
        '6LTHtFs',
        'ls/Ticket',
        '441648LXFuHd',
        'dataValues',
        'mp4',
        'messageId',
        'createdAt',
        'nant:\x20',
        'Qpnry',
        'OhrZz',
        'mediaName',
        'logger',
        'id:\x20',
        'payload',
        'split',
        'default',
        '__esModule',
        'aSXJV',
        'mTime',
        'messengerI',
        'yPmRU',
        'end'
    ];
    a = function () {
        return Z;
    };
    return a();
}
(function (c, d) {
    const Q = b, R = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(Q(0x1c8)) / (0x4 * -0x617 + -0xd97 + 0x25f4) + parseInt(R(0x1e1)) / (-0x2 * -0x99 + 0x1bd9 + -0x1d09 * 0x1) * (parseInt(R(0x1df)) / (-0xbbd + 0x79a * -0x1 + 0x1 * 0x135a)) + -parseInt(Q(0x1cd)) / (-0x1c21 + -0x1 * -0x359 + 0x18cc) + -parseInt(Q(0x1d1)) / (0x185d + -0x1 * -0x9f5 + -0x224d) + parseInt(R(0x1b4)) / (-0x1 * -0x65 + 0xb89 * -0x3 + 0x223c) * (parseInt(R(0x205)) / (-0x3c + 0xe * -0x6a + 0x60f)) + parseInt(R(0x20e)) / (-0x1180 + -0x2519 * 0x1 + 0x5 * 0xaed) + -parseInt(Q(0x212)) / (-0x1329 + 0x15 * 0x6d + 0x7d * 0x15);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x23 * -0x1f0d + -0xa5a1d + 0xa61 * 0x1f1));
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0xa7b + -0x7 * 0x386 + -0x1 * -0x24bf);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[S(0x1c4) + T(0x1a5)] || function (c) {
    const U = T;
    return c && c[U(0x1ef)] ? c : { 'default': c };
};
const q = {};
q[T(0x1ba)] = !![], Object[S(0x1b5) + S(0x1c7)](exports, T(0x1ef), q);
const promises_1 = require(S(0x1a6) + 's'), fluent_ffmpeg_1 = __importDefault(require(S(0x1a2) + S(0x1d8))), path_1 = require(S(0x207)), sequelize_1 = require(S(0x217)), sharp_1 = __importDefault(require(S(0x201))), socketEmit_1 = __importDefault(require(S(0x1fb) + S(0x19e) + T(0x1c3))), Message_1 = __importDefault(require(S(0x1dd) + T(0x1dc))), Ticket_1 = __importDefault(require(T(0x1dd) + T(0x1e0))), logger_1 = require(T(0x1d4) + S(0x1bc)), sleepRandomTime_1 = require(T(0x1d4) + S(0x19a) + S(0x1d2)), MessengerSendMessagesSystem = async (l, m) => {
        const V = S, W = T, n = {
                'YZQgq': V(0x1e3),
                'bdzpr': W(0x1b0),
                'mXMef': V(0x1f4),
                'EbsEj': W(0x1da),
                'hiMSe': V(0x1fe),
                'ruTel': W(0x20a),
                'nzreL': W(0x1de),
                'OhrZz': W(0x1ac),
                'JxXnY': W(0x1ab),
                'wyVoS': W(0x1e5),
                'iawKU': V(0x1c9),
                'aSXJV': W(0x203),
                'YZZqx': V(0x1b6),
                'Qpnry': V(0x1cf),
                'yPmRU': function (t, u) {
                    return t === u;
                },
                'fYpKM': W(0x1ce),
                'zjTWg': function (t, u) {
                    return t === u;
                },
                'UPklc': W(0x19b),
                'mlExx': W(0x1d9),
                'qDoVR': W(0x1be),
                'xdieC': W(0x210) + 'n',
                'PQShu': V(0x1b2),
                'bLrXI': W(0x20f),
                'CVSnz': W(0x1ae),
                'jmOBZ': V(0x20c),
                'mDrqq': V(0x1b8) + W(0x19d),
                'xMZYf': function (t, u) {
                    return t(u);
                },
                'lGyCR': function (t, u) {
                    return t(u);
                }
            }, o = { [sequelize_1['Op']['is']]: null }, p = {
                'fromMe': !![],
                'messageId': o,
                'status': n[W(0x1fa)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][W(0x209)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, r = await Message_1[W(0x1ee)][V(0x1c2)]({
                'where': p,
                'include': [
                    n[W(0x1b9)],
                    {
                        'model': Ticket_1[W(0x1ee)],
                        'as': n[V(0x1bf)],
                        'where': {
                            'tenantId': m,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: n[V(0x1a7)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': n[W(0x1e8)],
                            'whatsappId': l['id']
                        },
                        'include': [n[V(0x1b9)]]
                    },
                    {
                        'model': Message_1[V(0x1ee)],
                        'as': n[W(0x214)],
                        'include': [n[V(0x1b9)]]
                    }
                ],
                'order': [[
                        n[W(0x1fc)],
                        n[W(0x215)]
                    ]]
            });
        let s;
        for (const t of r) {
            const u = t, {ticket: v} = u, w = v[W(0x1fe)][V(0x1f2) + 'd'];
            try {
                if (![
                        n[W(0x1f0)],
                        n[V(0x202)]
                    ][V(0x1db)](u[W(0x1fd)]) && u[W(0x1e9)]) {
                    const D = (-0x1777 + -0x15af + 0x2 * 0x1693, path_1[V(0x1ad)])(__dirname, '..', '..', '..', n[W(0x1e7)]), E = (0x3 * -0x4f1 + -0x29c + 0x116f, path_1[W(0x1ad)])(D, u[V(0x1e9)]), F = await (-0x48 * 0x4 + -0x7c * 0x7 + 0x484, promises_1[W(0x1d6)])(E);
                    console[W(0x1a9)](E);
                    if (n[V(0x1f3)](u[W(0x1fd)], n[V(0x1ff)]) || n[W(0x1c0)](u[V(0x1fd)], n[W(0x1d0)])) {
                        const G = u[V(0x1e9)][W(0x1ed)]('.'), H = (0x24f6 + -0x7f8 + -0x2 * 0xe7f, path_1[W(0x1ad)])(D, G[-0x1370 + -0xa44 + 0xeda * 0x2] + V(0x1f7));
                        await new Promise((J, K) => {
                            const X = V, Y = V;
                            (-0x1964 + 0x229 * -0x10 + 0x3bf4, fluent_ffmpeg_1[X(0x1ee)])(E)[Y(0x1ca)](n[X(0x211)])['on'](n[X(0x213)], L => K(L))['on'](n[X(0x1f6)], () => J(!![]))[Y(0x1af)](H);
                        });
                        const I = await (-0xfd6 + 0x19c0 + -0x4f5 * 0x2, promises_1[W(0x1d6)])(H);
                        s = await l[V(0x1aa)](w, I);
                    }
                    if (n[W(0x1f3)](u[V(0x1fd)], n[V(0x218)])) {
                        const J = await (-0x44c + 0x1f1c + -0x1ad0, sharp_1[W(0x1ee)])(F)[W(0x21b)]()[V(0x1c6)](), K = {};
                        K[V(0x20b)] = u[V(0x1e9)], s = await l[W(0x1c1)](w, J, K);
                    }
                    if (n[W(0x1c0)](u[V(0x1fd)], n[W(0x206)])) {
                        const L = {};
                        L[W(0x20b)] = u[V(0x1e9)], s = await l[V(0x219)](w, F, L);
                    }
                    if ([
                            n[V(0x1d5)],
                            n[W(0x1f8)],
                            n[V(0x19f)]
                        ][W(0x1db)](u[V(0x1fd)])) {
                        const M = {};
                        M[W(0x20b)] = u[V(0x1e9)], s = await l[W(0x1a8)](w, F, M);
                    }
                }
                [
                    n[W(0x1f0)],
                    n[W(0x202)]
                ][W(0x1db)](u[W(0x1fd)]) && !u[W(0x1e9)] && (s = await l[V(0x1f9)](w, u[V(0x1b3)]));
                const x = {
                    ...u,
                    ...s
                };
                x['id'] = u['id'], x[W(0x1f5)] = u[W(0x1f5)], x[V(0x1e4)] = s[V(0x1e4)], x[V(0x19c)] = n[W(0x1b1)], x[V(0x1a4)] = 0x2;
                const y = x, z = { ...y }, A = {};
                A['id'] = u['id'];
                const B = {};
                B[V(0x1a1)] = A, await Message_1[W(0x1ee)][V(0x1bb)](z, B);
                const C = {};
                C[V(0x1d3)] = v[W(0x1d3)], C[W(0x200)] = n[W(0x1c5)], C[W(0x1ec)] = { ...u[V(0x1e2)] }, C[W(0x1ec)][W(0x1a3)] = u[W(0x1a3)], C[W(0x1ec)]['id'] = u['id'], C[W(0x1ec)][W(0x1f5)] = u[V(0x1f5)], C[W(0x1ec)][V(0x1e4)] = s[V(0x1e4)], C[W(0x1ec)][V(0x19c)] = n[V(0x1b1)], C[W(0x1ec)][W(0x1a4)] = 0x2, (-0x1cc7 + 0x2d5 + -0x12 * -0x171, socketEmit_1[V(0x1ee)])(C), logger_1[V(0x1ea)][V(0x1d7)](n[V(0x1cc)]), await (-0xa51 + 0x289 + 0x7c8, sleepRandomTime_1[V(0x20d) + W(0x1f1)])({
                    'minMilliseconds': n[W(0x1b7)](Number, -0xc9c * -0x1 + 0x2 * -0x860 + 0x618),
                    'maxMilliseconds': n[W(0x1a0)](Number, -0x37e + -0x2393 + 0x2ced)
                });
            } catch (N) {
                const O = u['id'], P = u[W(0x20a)]['id'];
                logger_1[W(0x1ea)][V(0x1b0)](V(0x21a) + W(0x204) + W(0x1e6) + m + (V(0x1cb) + '\x20') + P + ')'), logger_1[V(0x1ea)][W(0x1b0)](W(0x216) + W(0x208) + W(0x1eb) + O + W(0x1bd) + N);
            }
        }
    };
exports[T(0x1ee)] = MessengerSendMessagesSystem;