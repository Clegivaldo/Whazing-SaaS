'use strict';
function a() {
    const Z = [
        'BGbnk',
        'KgehE',
        'update',
        'sharp',
        'erty',
        'value',
        'quotedMsg',
        'LucId',
        'dNhMH',
        'tenantId',
        '../../mode',
        'video',
        'id:\x20',
        'path',
        '__importDe',
        'timestamp',
        'default',
        'umVqI',
        'BDMhb',
        '24iRnZac',
        'mediaName',
        'domTime',
        'contact',
        'filename',
        'nant:\x20',
        '222WNXpdq',
        '../../help',
        '\x20message\x20(',
        '357650bYmHiZ',
        'YaXpk',
        'sendText',
        'Error\x20mess',
        'lte',
        'Message\x20Up',
        'peg',
        'pWSad',
        'messengerI',
        'logger',
        '\x20|\x20Ticket:',
        'public',
        'ack',
        '35420LpomOA',
        'jpeg',
        'log',
        'mediaType',
        'WXXzP',
        '3660MffwQZ',
        'uULSf',
        'join',
        's/logger',
        'info',
        '25469JAquMe',
        'oZiOX',
        'eslgj',
        'geILl',
        'audio',
        'fluent-ffm',
        'error',
        'sleepRando',
        'document',
        'status',
        '../../util',
        'toBuffer',
        'mediaUrl',
        'saveToFile',
        'toFormat',
        'createdAt',
        '12ahyDio',
        'pending',
        'tzSLh',
        'sequelize',
        '609480XxuRcC',
        'OLMkI',
        'payload',
        '20JAtRRh',
        'SJMrf',
        'mp4',
        'sendAudio',
        'age\x20is\x20(te',
        'applicatio',
        'ThRSM',
        'fBgvj',
        'type',
        'Error\x20send',
        's/sleepRan',
        'AwsER',
        'fs/promise',
        'defineProp',
        '631494DtmwWN',
        'ls/Ticket',
        'ptt',
        'text',
        'chat:ack',
        'dataValues',
        'body',
        'closed',
        'findAll',
        'fault',
        'ticket',
        'mTime',
        'ASC',
        ')::\x20',
        'DLAPX',
        'Emit',
        'QlbGK',
        '.mp4',
        'muUMQ',
        'end',
        'BaSPP',
        'file',
        '6952712RpgQSq',
        'sendFile',
        'readFile',
        'tSCKy',
        'chat',
        'ers/socket',
        'sendImage',
        'where',
        'msamA',
        'sended',
        'includes',
        'split',
        'date\x20ok',
        'vwSoA',
        '__esModule',
        'image',
        '150647MreHGV',
        '34gfaQzV',
        'messenger',
        'RGEBs',
        'ls/Message',
        'messageId',
        'sendVideo'
    ];
    a = function () {
        return Z;
    };
    return a();
}
const S = b, T = b;
(function (c, d) {
    const Q = b, R = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(Q(0x1dc)) / (-0x1604 + 0x15d * 0x13 + 0x47 * -0xe) * (-parseInt(Q(0x1a3)) / (-0x259b + -0x159f + -0x1d9e * -0x2)) + parseInt(R(0x16b)) / (0x1f * 0x6f + -0x1c16 + 0xe * 0x10c) + -parseInt(R(0x16e)) / (-0x194 + -0x1 * -0x25f5 + -0x245d) * (parseInt(R(0x1c5)) / (0xc2f * 0x3 + -0xd9 + -0x5 * 0x723)) + -parseInt(Q(0x1c2)) / (-0x37f * 0x1 + -0xa70 + 0x3 * 0x4a7) * (-parseInt(R(0x1a2)) / (0xca3 + -0x23c0 + 0x1724)) + -parseInt(Q(0x1bc)) / (0x11f1 * -0x2 + -0x1524 + 0x390e) * (parseInt(Q(0x17c)) / (-0x41 * -0x91 + -0x8b * -0x26 + 0x1cb5 * -0x2)) + parseInt(R(0x1d7)) / (0x2394 + 0x1 * -0xb0f + 0x187b * -0x1) * (parseInt(Q(0x1d2)) / (0x5 * -0x729 + 0xb20 * -0x1 + 0x2ef8)) + -parseInt(R(0x167)) / (-0x11a * 0x10 + -0x576 + 0x9 * 0x292) * (parseInt(R(0x192)) / (-0x19ea + -0x14b1 + -0x4 * -0xbaa));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x64aeb + -0x466 * 0x449 + -0x1 * -0x22efdd));
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x1 * -0x96d + -0x48b * 0x3 + -0xc36 * -0x2);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[S(0x1b7) + T(0x185)] || function (c) {
    const U = S;
    return c && c[U(0x1a0)] ? c : { 'default': c };
};
const q = {};
q[T(0x1ae)] = !![], Object[T(0x17b) + T(0x1ad)](exports, T(0x1a0), q);
const promises_1 = require(T(0x17a) + 's'), fluent_ffmpeg_1 = __importDefault(require(S(0x1e1) + T(0x1cb))), path_1 = require(T(0x1b6)), sequelize_1 = require(T(0x16a)), sharp_1 = __importDefault(require(T(0x1ac))), socketEmit_1 = __importDefault(require(S(0x1c3) + T(0x197) + S(0x18b))), Message_1 = __importDefault(require(T(0x1b3) + T(0x1a6))), Ticket_1 = __importDefault(require(T(0x1b3) + S(0x17d))), logger_1 = require(T(0x161) + T(0x1da)), sleepRandomTime_1 = require(T(0x161) + T(0x178) + T(0x1be)), MessengerSendMessagesSystem = async (l, m) => {
        const V = S, W = S, n = {
                'DLAPX': V(0x170),
                'RGEBs': V(0x1e2),
                'LucId': W(0x18f),
                'oZiOX': V(0x168),
                'eslgj': V(0x1bf),
                'BGbnk': V(0x186),
                'uULSf': W(0x183),
                'pWSad': V(0x1a4),
                'SJMrf': W(0x1af),
                'OLMkI': V(0x166),
                'AwsER': W(0x188),
                'geILl': W(0x196),
                'YaXpk': W(0x17f),
                'ThRSM': W(0x1d0),
                'dNhMH': function (t, u) {
                    return t === u;
                },
                'QlbGK': W(0x1e0),
                'BaSPP': function (t, u) {
                    return t === u;
                },
                'fBgvj': W(0x17e),
                'tzSLh': W(0x1a1),
                'umVqI': V(0x1b4),
                'WXXzP': V(0x173) + 'n',
                'msamA': V(0x191),
                'vwSoA': V(0x15f),
                'muUMQ': W(0x19b),
                'KgehE': W(0x180),
                'tSCKy': V(0x1ca) + V(0x19e),
                'BDMhb': function (t, u) {
                    return t(u);
                }
            }, o = { [sequelize_1['Op']['is']]: null }, p = {
                'fromMe': !![],
                'messageId': o,
                'status': n[V(0x1dd)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][V(0x1c9)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, r = await Message_1[W(0x1b9)][V(0x184)]({
                'where': p,
                'include': [
                    n[W(0x1de)],
                    {
                        'model': Ticket_1[V(0x1b9)],
                        'as': n[V(0x1a9)],
                        'where': {
                            'tenantId': m,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: n[V(0x1d8)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': n[V(0x1cc)],
                            'whatsappId': l['id']
                        },
                        'include': [n[V(0x1de)]]
                    },
                    {
                        'model': Message_1[V(0x1b9)],
                        'as': n[W(0x16f)],
                        'include': [n[V(0x1de)]]
                    }
                ],
                'order': [[
                        n[W(0x16c)],
                        n[V(0x179)]
                    ]]
            });
        let s;
        for (const t of r) {
            const u = t, {ticket: v} = u, w = v[V(0x1bf)][W(0x1cd) + 'd'];
            try {
                if (![
                        n[V(0x1df)],
                        n[W(0x1c6)]
                    ][V(0x19c)](u[V(0x1d5)]) && u[W(0x1bd)]) {
                    const D = (-0xb02 * -0x3 + 0x2456 * -0x1 + 0x350, path_1[V(0x1d9)])(__dirname, '..', '..', '..', n[V(0x174)]), E = (0x6fb * -0x5 + 0x5e + 0x4ef * 0x7, path_1[W(0x1d9)])(D, u[V(0x1bd)]), F = await (0x1 * -0x1c3 + 0x1 * -0xe43 + 0x2 * 0x803, promises_1[W(0x194)])(E);
                    console[W(0x1d4)](E);
                    if (n[V(0x1b1)](u[W(0x1d5)], n[V(0x18c)]) || n[V(0x190)](u[V(0x1d5)], n[V(0x175)])) {
                        const G = u[W(0x1bd)][V(0x19d)]('.'), H = (-0x3 * -0x607 + 0x1a77 + 0x2c8c * -0x1, path_1[W(0x1d9)])(D, G[0xc67 * 0x1 + 0x38d + -0xff4] + W(0x18d));
                        await new Promise((J, K) => {
                            const X = V, Y = W;
                            (0x1f4e + -0x1571 + 0x1f9 * -0x5, fluent_ffmpeg_1[X(0x1b9)])(E)[X(0x165)](n[X(0x18a)])['on'](n[Y(0x1a5)], L => K(L))['on'](n[Y(0x1b0)], () => J(!![]))[X(0x164)](H);
                        });
                        const I = await (0x1d5a * 0x1 + 0x11e7 + -0x2f41, promises_1[V(0x194)])(H);
                        s = await l[V(0x171)](w, I);
                    }
                    if (n[W(0x190)](u[W(0x1d5)], n[W(0x169)])) {
                        const J = await (-0x64f + -0xbd * 0x22 + 0x1f69, sharp_1[W(0x1b9)])(F)[V(0x1d3)]()[W(0x162)](), K = {};
                        K[W(0x1c0)] = u[V(0x1bd)], s = await l[W(0x198)](w, J, K);
                    }
                    if (n[W(0x190)](u[V(0x1d5)], n[W(0x1ba)])) {
                        const L = {};
                        L[V(0x1c0)] = u[W(0x1bd)], s = await l[V(0x1a8)](w, F, L);
                    }
                    if ([
                            n[W(0x1d6)],
                            n[V(0x19a)],
                            n[V(0x19f)]
                        ][W(0x19c)](u[W(0x1d5)])) {
                        const M = {};
                        M[W(0x1c0)] = u[V(0x1bd)], s = await l[V(0x193)](w, F, M);
                    }
                }
                [
                    n[V(0x1df)],
                    n[V(0x1c6)]
                ][W(0x19c)](u[W(0x1d5)]) && !u[V(0x1bd)] && (s = await l[W(0x1c7)](w, u[W(0x182)]));
                const x = {
                    ...u,
                    ...s
                };
                x['id'] = u['id'], x[V(0x1b8)] = u[W(0x1b8)], x[W(0x1a7)] = s[V(0x1a7)], x[V(0x160)] = n[W(0x18e)], x[W(0x1d1)] = 0x2;
                const y = x, z = { ...y }, A = {};
                A['id'] = u['id'];
                const B = {};
                B[W(0x199)] = A, await Message_1[V(0x1b9)][W(0x1ab)](z, B);
                const C = {};
                C[W(0x1b2)] = v[V(0x1b2)], C[V(0x176)] = n[V(0x1aa)], C[V(0x16d)] = { ...u[W(0x181)] }, C[V(0x16d)][W(0x163)] = u[W(0x163)], C[V(0x16d)]['id'] = u['id'], C[V(0x16d)][V(0x1b8)] = u[W(0x1b8)], C[V(0x16d)][V(0x1a7)] = s[V(0x1a7)], C[V(0x16d)][V(0x160)] = n[V(0x18e)], C[V(0x16d)][W(0x1d1)] = 0x2, (0x17ce + -0x240c * -0x1 + -0x3bda, socketEmit_1[W(0x1b9)])(C), logger_1[V(0x1ce)][V(0x1db)](n[W(0x195)]), await (-0xe74 + -0x1f * 0x18 + 0x115c, sleepRandomTime_1[W(0x15e) + W(0x187)])({
                    'minMilliseconds': n[V(0x1bb)](Number, 0x6 * -0x32a + 0x11 * 0x5b + 0xee5),
                    'maxMilliseconds': n[W(0x1bb)](Number, -0x1a10 + 0xe71 + 0xb3 * 0x19)
                });
            } catch (N) {
                const O = u['id'], P = u[V(0x186)]['id'];
                logger_1[V(0x1ce)][W(0x1e2)](V(0x1c8) + W(0x172) + W(0x1c1) + m + (V(0x1cf) + '\x20') + P + ')'), logger_1[V(0x1ce)][V(0x1e2)](W(0x177) + V(0x1c4) + W(0x1b5) + O + W(0x189) + N);
            }
        }
    };
exports[S(0x1b9)] = MessengerSendMessagesSystem;