'use strict';
const _0x5c815c = _0x49cb;
function _0x49cb(_0x29f859, _0x416897) {
    const _0xee1d28 = _0x9b3d();
    return _0x49cb = function (_0x5709ea, _0x1b89e5) {
        _0x5709ea = _0x5709ea - (0x1e06 + 0x3 * -0xaed + 0x485);
        let _0x1a8ceb = _0xee1d28[_0x5709ea];
        return _0x1a8ceb;
    }, _0x49cb(_0x29f859, _0x416897);
}
(function (_0x2295c4, _0x157c7b) {
    const _0xb03452 = _0x49cb, _0x598ba3 = _0x2295c4();
    while (!![]) {
        try {
            const _0x1c036a = -parseInt(_0xb03452(0x202)) / (-0x1 * -0x895 + 0x3b * -0x4d + 0x92b) * (-parseInt(_0xb03452(0x222)) / (-0x1 * -0xe71 + -0x1e08 + 0x16b * 0xb)) + -parseInt(_0xb03452(0x1fc)) / (-0x2002 + -0x2 * -0xe2c + 0x3ad) + -parseInt(_0xb03452(0x226)) / (-0x200f + -0x671 + 0x2684) * (parseInt(_0xb03452(0x1f5)) / (0x1825 * -0x1 + -0x4e1 + 0x1d0b)) + -parseInt(_0xb03452(0x1d1)) / (0x1d0d * 0x1 + -0x1b4f * 0x1 + 0x5 * -0x58) * (parseInt(_0xb03452(0x1cd)) / (-0x1fcb + 0x1 * -0x51a + -0x22 * -0x116)) + -parseInt(_0xb03452(0x218)) / (-0x8 * 0x196 + 0x23a4 * 0x1 + -0x16ec) + parseInt(_0xb03452(0x21c)) / (-0x2610 + 0x3 * -0x946 + 0x41eb) + parseInt(_0xb03452(0x204)) / (0x5 * 0x14e + 0x1d * -0xcf + 0x10f7);
            if (_0x1c036a === _0x157c7b)
                break;
            else
                _0x598ba3['push'](_0x598ba3['shift']());
        } catch (_0x42366f) {
            _0x598ba3['push'](_0x598ba3['shift']());
        }
    }
}(_0x9b3d, 0xd * 0x20f3 + 0x489a4 + -0x1 * -0x35257));
var __importDefault = this && this[_0x5c815c(0x1c6) + _0x5c815c(0x210)] || function (_0x4fbac8) {
    const _0x3e01cf = _0x5c815c;
    return _0x4fbac8 && _0x4fbac8[_0x3e01cf(0x20b)] ? _0x4fbac8 : { 'default': _0x4fbac8 };
};
const _0x15f419 = {};
function _0x9b3d() {
    const _0x1c83e3 = [
        '__esModule',
        'jyNca',
        'TlLxv',
        'sChatFlowT',
        'tact',
        'fault',
        'timestamp',
        'QJQdX',
        'page',
        'dymaJ',
        'rShowChann',
        'rVerifyCon',
        'sage',
        '1135032UEtCpU',
        'fallback',
        '../../libs',
        'defineProp',
        '1924632JJXwnr',
        'file',
        '../WbotSer',
        'iaMessage',
        'BPwCw',
        'value',
        '4JuFEgB',
        'WULOs',
        'NpNyG',
        'urs',
        '4DXIXyq',
        'messaging',
        'logger',
        'ice',
        'Bot',
        'shKIt',
        '__importDe',
        'wServices/',
        'eZwSs',
        'type',
        'AQZie',
        'length',
        'default',
        '8064245MwZeUN',
        'sender',
        'GiZAg',
        'shift',
        '6oDNmAu',
        'WfPQa',
        'KgArQ',
        'entry',
        '/messenger',
        'read',
        'text',
        'fbPageId',
        'KcZQK',
        's/logger',
        'AiYJt',
        'VerifyStep',
        'video',
        'ndOrCreate',
        'isCampaign',
        'image',
        'vrPWF',
        'vices/help',
        'HVDLf',
        'rVerifyMed',
        'object',
        'audio',
        'erty',
        'unreadMess',
        'channel',
        'msg',
        'tenantId',
        'BusinessHo',
        'TicketServ',
        'whatsappId',
        'ages',
        '../TicketS',
        'erBot',
        'rVerifyMes',
        'message',
        'icket',
        '3524505DrWOau',
        'hSMMw',
        'Message',
        '../../util',
        'getMesseng',
        'contact',
        'ACsZB',
        '1824744AWHpRE',
        './Messenge',
        '../ChatFlo',
        'ogzPO',
        'ervices/Fi',
        'location',
        '17749CDblNg',
        'mid',
        '29824390yoepKL',
        'rMarkRead',
        'messenger',
        'ers/Verify',
        'rZIPX',
        'isFarewell',
        'error'
    ];
    _0x9b3d = function () {
        return _0x1c83e3;
    };
    return _0x9b3d();
}
_0x15f419[_0x5c815c(0x221)] = !![], Object[_0x5c815c(0x21b) + _0x5c815c(0x1e7)](exports, _0x5c815c(0x20b), _0x15f419);
const logger_1 = require(_0x5c815c(0x1f8) + _0x5c815c(0x1da)), FindOrCreateTicketService_1 = __importDefault(require(_0x5c815c(0x1f0) + _0x5c815c(0x200) + _0x5c815c(0x1de) + _0x5c815c(0x1ed) + _0x5c815c(0x229))), messengerBot_1 = require(_0x5c815c(0x21a) + _0x5c815c(0x1d5) + _0x5c815c(0x1c4)), MessengerVerifyContact_1 = __importDefault(require(_0x5c815c(0x1fd) + _0x5c815c(0x216) + _0x5c815c(0x20f))), MessengerVerifyMessage_1 = __importDefault(require(_0x5c815c(0x1fd) + _0x5c815c(0x1f2) + _0x5c815c(0x217))), MessengerVerifyMediaMessage_1 = __importDefault(require(_0x5c815c(0x1fd) + _0x5c815c(0x1e4) + _0x5c815c(0x21f))), VerifyStepsChatFlowTicket_1 = __importDefault(require(_0x5c815c(0x1fe) + _0x5c815c(0x1c7) + _0x5c815c(0x1dc) + _0x5c815c(0x20e) + _0x5c815c(0x1f4))), MessengerMarkRead_1 = __importDefault(require(_0x5c815c(0x1fd) + _0x5c815c(0x205))), MessengerShowChannel_1 = __importDefault(require(_0x5c815c(0x1fd) + _0x5c815c(0x215) + 'el')), VerifyBusinessHours_1 = __importDefault(require(_0x5c815c(0x21e) + _0x5c815c(0x1e2) + _0x5c815c(0x207) + _0x5c815c(0x1ec) + _0x5c815c(0x225))), getMessageType = _0x2b9ab9 => {
        const _0x4db932 = _0x5c815c, _0x7bd076 = {};
        _0x7bd076[_0x4db932(0x1f6)] = function (_0x1d1583, _0x29edbc) {
            return _0x1d1583 > _0x29edbc;
        }, _0x7bd076[_0x4db932(0x1cf)] = _0x4db932(0x1d7), _0x7bd076[_0x4db932(0x1db)] = function (_0xb42ac5, _0x12b128) {
            return _0xb42ac5 === _0x12b128;
        }, _0x7bd076[_0x4db932(0x223)] = _0x4db932(0x1e0), _0x7bd076[_0x4db932(0x220)] = function (_0x2f6d60, _0x25a094) {
            return _0x2f6d60 === _0x25a094;
        }, _0x7bd076[_0x4db932(0x1ff)] = _0x4db932(0x1e6), _0x7bd076[_0x4db932(0x208)] = function (_0x8b07b9, _0xcccd1f) {
            return _0x8b07b9 === _0xcccd1f;
        }, _0x7bd076[_0x4db932(0x20d)] = _0x4db932(0x1dd), _0x7bd076[_0x4db932(0x212)] = function (_0x5c34a8, _0x4b0784) {
            return _0x5c34a8 === _0x4b0784;
        }, _0x7bd076[_0x4db932(0x1c5)] = _0x4db932(0x201), _0x7bd076[_0x4db932(0x1c8)] = _0x4db932(0x21d), _0x7bd076[_0x4db932(0x1fb)] = _0x4db932(0x219);
        const _0x2a54ef = _0x7bd076, {attachments: _0x2bc9c4} = _0x2b9ab9, _0x2c25b6 = _0x2bc9c4 && _0x2a54ef[_0x4db932(0x1f6)](_0x2bc9c4[_0x4db932(0x1cb)], -0xa * 0x32e + 0xb2b + 0x14a1);
        if (_0x2b9ab9[_0x4db932(0x1d7)] && !_0x2c25b6)
            return _0x2a54ef[_0x4db932(0x1cf)];
        if (_0x2c25b6 && _0x2a54ef[_0x4db932(0x1db)](_0x2bc9c4[0x1abe + -0xa0b + -0x10b3][_0x4db932(0x1c9)], _0x2a54ef[_0x4db932(0x223)]))
            return _0x2a54ef[_0x4db932(0x223)];
        if (_0x2c25b6 && _0x2a54ef[_0x4db932(0x220)](_0x2bc9c4[-0x902 * -0x1 + 0x1268 + -0x1b6a][_0x4db932(0x1c9)], _0x2a54ef[_0x4db932(0x1ff)]))
            return _0x2a54ef[_0x4db932(0x1ff)];
        if (_0x2c25b6 && _0x2a54ef[_0x4db932(0x208)](_0x2bc9c4[-0x6d5 + 0x1 * 0x2328 + -0x971 * 0x3][_0x4db932(0x1c9)], _0x2a54ef[_0x4db932(0x20d)]))
            return _0x2a54ef[_0x4db932(0x20d)];
        if (_0x2c25b6 && _0x2a54ef[_0x4db932(0x212)](_0x2bc9c4[0x192d + 0xa * -0x33e + -0x73f * -0x1][_0x4db932(0x1c9)], _0x2a54ef[_0x4db932(0x1c5)]))
            return _0x2a54ef[_0x4db932(0x1c5)];
        if (_0x2c25b6 && _0x2a54ef[_0x4db932(0x220)](_0x2bc9c4[-0xf07 * -0x1 + -0x208 * 0xb + 0x751 * 0x1][_0x4db932(0x1c9)], _0x2a54ef[_0x4db932(0x1c8)]))
            return _0x2a54ef[_0x4db932(0x1c8)];
        if (_0x2c25b6 && _0x2a54ef[_0x4db932(0x212)](_0x2bc9c4[-0x1cc1 + -0xacc + 0x278d][_0x4db932(0x1c9)], _0x2a54ef[_0x4db932(0x1fb)]))
            return _0x2a54ef[_0x4db932(0x1fb)];
    }, MessengerHandleMessage = async _0x4dbf3c => {
        const _0x55abce = _0x5c815c, _0x262aa8 = {
                'AQZie': function (_0x517df5, _0x26b4ad) {
                    return _0x517df5 !== _0x26b4ad;
                },
                'vrPWF': _0x55abce(0x213),
                'HVDLf': function (_0x493001, _0x41330d) {
                    return _0x493001(_0x41330d);
                },
                'KcZQK': _0x55abce(0x206),
                'WfPQa': function (_0x3e3454) {
                    return _0x3e3454();
                },
                'KgArQ': function (_0x2e7ff5) {
                    return _0x2e7ff5();
                },
                'NpNyG': _0x55abce(0x1d7),
                'dymaJ': function (_0xb38b30) {
                    return _0xb38b30();
                },
                'jyNca': function (_0x3f5cfc, _0x5233a5) {
                    return _0x3f5cfc(_0x5233a5);
                }
            };
        return new Promise((_0x29de8e, _0x239416) => {
            ((async () => {
                const _0x26a706 = _0x49cb;
                let _0xb6163e, _0xd13648;
                const _0x50c5a3 = 0x14e9 + -0x83 * -0x1 + -0x156b;
                try {
                    if (_0x262aa8[_0x26a706(0x1ca)](_0x4dbf3c[_0x26a706(0x1e5)], _0x262aa8[_0x26a706(0x1e1)]))
                        return;
                    const _0xccc16a = _0x4dbf3c[_0x26a706(0x1d4)][_0x26a706(0x1d0)](), _0x1513a5 = _0xccc16a?.[_0x26a706(0x227)][_0x26a706(0x1d0)](), _0x1ff140 = {};
                    _0x1ff140[_0x26a706(0x1d8)] = _0xccc16a['id'], _0xb6163e = await (0x4 * -0x7ac + 0x2 * -0x964 + 0x3178, MessengerShowChannel_1[_0x26a706(0x1cc)])(_0x1ff140);
                    if (!_0xb6163e)
                        return;
                    const _0x4582f0 = await (0xd6b + -0x23 * 0x4c + 0x1f * -0x19, messengerBot_1[_0x26a706(0x1f9) + _0x26a706(0x1f1)])(_0xb6163e['id']);
                    if (!_0x1513a5?.[_0x26a706(0x1f3)] && _0x1513a5[_0x26a706(0x1d6)]) {
                        (0x1d1e + 0x5 * 0x5cb + 0x3a15 * -0x1, MessengerMarkRead_1[_0x26a706(0x1cc)])(_0x1513a5, _0xb6163e[_0x26a706(0x1eb)]);
                        return;
                    }
                    _0xd13648 = await (-0x2f * 0x6d + 0xcd + 0x1336, MessengerVerifyContact_1[_0x26a706(0x1cc)])(_0x1513a5[_0x26a706(0x1ce)], _0x4582f0, _0xb6163e[_0x26a706(0x1eb)]);
                    const _0x3085de = {
                            ..._0x1513a5,
                            'type': _0x262aa8[_0x26a706(0x1e3)](getMessageType, _0x1513a5[_0x26a706(0x1f3)]),
                            'fromMe': ![],
                            'body': _0x1513a5?.[_0x26a706(0x1f3)]?.[_0x26a706(0x1d7)] || '',
                            'timestamp': _0x1513a5[_0x26a706(0x211)],
                            'message_id': _0x1513a5[_0x26a706(0x1f3)][_0x26a706(0x203)]
                        }, _0x57814a = {};
                    _0x57814a[_0x26a706(0x1fa)] = _0xd13648, _0x57814a[_0x26a706(0x1ee)] = _0xb6163e['id'], _0x57814a[_0x26a706(0x1e8) + _0x26a706(0x1ef)] = _0x50c5a3, _0x57814a[_0x26a706(0x1eb)] = _0xb6163e[_0x26a706(0x1eb)], _0x57814a[_0x26a706(0x1ea)] = _0x3085de, _0x57814a[_0x26a706(0x1e9)] = _0x262aa8[_0x26a706(0x1d9)];
                    const _0x166cc2 = await (-0x1029 + -0x1eda + -0x91 * -0x53, FindOrCreateTicketService_1[_0x26a706(0x1cc)])(_0x57814a);
                    if (_0x166cc2?.[_0x26a706(0x1df) + _0x26a706(0x1f7)]) {
                        _0x262aa8[_0x26a706(0x1d2)](_0x29de8e);
                        return;
                    }
                    if (_0x166cc2?.[_0x26a706(0x209) + _0x26a706(0x1f7)]) {
                        _0x262aa8[_0x26a706(0x1d3)](_0x29de8e);
                        return;
                    }
                    _0x262aa8[_0x26a706(0x1ca)](_0x3085de[_0x26a706(0x1c9)], _0x262aa8[_0x26a706(0x224)]) ? await (0x980 + -0x17 * -0x7b + 0x148d * -0x1, MessengerVerifyMediaMessage_1[_0x26a706(0x1cc)])(_0xb6163e, _0x3085de, _0x166cc2, _0xd13648) : await (-0x1c7b + 0x19d * -0x17 + 0x4196, MessengerVerifyMessage_1[_0x26a706(0x1cc)])(_0x3085de, _0x166cc2, _0xd13648), await (-0x2 * -0x11b + -0x9ec * 0x3 + -0xdc7 * -0x2, VerifyStepsChatFlowTicket_1[_0x26a706(0x1cc)])(_0x3085de, _0x166cc2), await (0x1502 + 0xcca + -0x21cc, VerifyBusinessHours_1[_0x26a706(0x1cc)])(_0x3085de, _0x166cc2), _0x262aa8[_0x26a706(0x214)](_0x29de8e);
                } catch (_0x116a01) {
                    logger_1[_0x26a706(0x228)][_0x26a706(0x20a)](_0x116a01), _0x262aa8[_0x26a706(0x20c)](_0x239416, _0x116a01);
                }
            })());
        });
    };
exports[_0x5c815c(0x1cc)] = MessengerHandleMessage;