'use strict';
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x109 * 0x1f + -0x3e * -0x29 + -0x284c);
        let h = e[f];
        return h;
    }, b(c, d);
}
const v = b, w = b;
(function (c, d) {
    const t = b, u = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(t(0x203)) / (0x1 * -0x1643 + -0x82 + 0xb63 * 0x2) + -parseInt(u(0x20a)) / (-0x22 * 0x3b + -0x1057 + 0x182f) * (parseInt(t(0x1c5)) / (-0x2a * 0x80 + 0x1efe + -0x9fb)) + -parseInt(u(0x21a)) / (-0xcfe * -0x1 + -0x1929 + 0xc2f) * (parseInt(t(0x1c2)) / (0x1c6e + -0x1278 + -0x9f1)) + parseInt(u(0x1eb)) / (-0xe43 + 0xf5a + 0x15 * -0xd) * (parseInt(u(0x216)) / (0x5 * -0x304 + -0x1d50 + 0x2c6b)) + parseInt(u(0x1f7)) / (-0x1a26 + 0x1a56 + -0x8 * 0x5) * (-parseInt(t(0x1f6)) / (-0x64e + -0x25e6 + 0x2c3d)) + -parseInt(t(0x1fa)) / (-0x1 * 0x703 + 0x1e8 * -0xa + -0x5 * -0x539) * (parseInt(t(0x1e6)) / (0x1194 + 0x43 * -0x6d + 0xafe)) + parseInt(t(0x1d9)) / (-0xe21 + 0x21cb + -0x22e * 0x9);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x4279 + 0x7de3d * 0x1 + 0x1 * -0x3031e));
var __importDefault = this && this[v(0x1f5) + v(0x1fd)] || function (c) {
    const x = v;
    return c && c[x(0x1e1)] ? c : { 'default': c };
};
function a() {
    const E = [
        'RVzTQ',
        'read',
        'UClyI',
        './Messenge',
        '698230tPIMdM',
        'icket',
        'timestamp',
        '105gNswEM',
        'defineProp',
        'logger',
        'erty',
        'video',
        'BusinessHo',
        'rMarkRead',
        'KEfLX',
        'tact',
        'eVbtY',
        'wServices/',
        'getMesseng',
        'DqdJr',
        'type',
        'channel',
        'qfsIw',
        'GuiTg',
        'rVerifyMed',
        'sage',
        '../TicketS',
        '16827660EDnzXj',
        'sChatFlowT',
        'sender',
        'vices/help',
        'text',
        'rShowChann',
        'TicketServ',
        'rVerifyCon',
        '__esModule',
        'ervices/Fi',
        'Message',
        'entry',
        'ers/Verify',
        '231RHySJg',
        'VerifyStep',
        'mid',
        'obNvq',
        'ndOrCreate',
        '366DJOZeo',
        'urs',
        'aGSxA',
        'fbPageId',
        's/logger',
        'messaging',
        'zuLPJ',
        'YREMT',
        '../../util',
        'fallback',
        '__importDe',
        '9coOMGk',
        '2601096xEbtSP',
        'iaMessage',
        'isFarewell',
        '128470UfPNJM',
        'length',
        'msg',
        'fault',
        'mjUrY',
        'message',
        'WSeiS',
        'unreadMess',
        'uFzdQ',
        '120637nveImq',
        'erBot',
        'default',
        'cDotj',
        'location',
        'rVerifyMes',
        'messenger',
        '5442tDLqJU',
        'rcsaf',
        '../WbotSer',
        'Bot',
        'isCampaign',
        'yslGf',
        'fAhHx',
        'file',
        'bYsbq',
        'ages',
        'shift',
        'EQQye',
        '3101fjktga',
        'error',
        'page',
        'whatsappId',
        '16JIzfBC',
        'audio',
        'object',
        'tenantId',
        '/messenger',
        '../../libs',
        'ice',
        'contact',
        'value',
        'image',
        'rBxHT',
        '../ChatFlo',
        'QJrBF',
        'uHbdI'
    ];
    a = function () {
        return E;
    };
    return a();
}
const k = {};
k[v(0x222)] = !![], Object[v(0x1c6) + v(0x1c8)](exports, v(0x1e1), k);
const logger_1 = require(w(0x1f3) + v(0x1ef)), FindOrCreateTicketService_1 = __importDefault(require(v(0x1d8) + w(0x1e2) + v(0x1ea) + v(0x1df) + w(0x220))), messengerBot_1 = require(v(0x21f) + w(0x21e) + w(0x20d)), MessengerVerifyContact_1 = __importDefault(require(w(0x1c1) + v(0x1e0) + v(0x1cd))), MessengerVerifyMessage_1 = __importDefault(require(w(0x1c1) + w(0x208) + w(0x1d7))), MessengerVerifyMediaMessage_1 = __importDefault(require(v(0x1c1) + v(0x1d6) + v(0x1f8))), VerifyStepsChatFlowTicket_1 = __importDefault(require(v(0x1bb) + w(0x1cf) + v(0x1e7) + v(0x1da) + v(0x1c3))), MessengerMarkRead_1 = __importDefault(require(w(0x1c1) + v(0x1cb))), MessengerShowChannel_1 = __importDefault(require(w(0x1c1) + v(0x1de) + 'el')), VerifyBusinessHours_1 = __importDefault(require(w(0x20c) + w(0x1dc) + w(0x1e5) + v(0x1ca) + v(0x1ec))), getMessageType = d => {
        const y = v, z = w, e = {};
        e[y(0x1fe)] = function (i, j) {
            return i > j;
        }, e[z(0x1bd)] = y(0x1dd), e[z(0x20b)] = function (i, j) {
            return i === j;
        }, e[y(0x1d1)] = z(0x1b9), e[y(0x1ce)] = function (i, j) {
            return i === j;
        }, e[z(0x1cc)] = z(0x21b), e[y(0x1e9)] = function (i, j) {
            return i === j;
        }, e[y(0x20f)] = z(0x1c9), e[z(0x1d4)] = z(0x207), e[y(0x1c0)] = function (i, j) {
            return i === j;
        }, e[y(0x206)] = z(0x211), e[y(0x1d5)] = function (i, j) {
            return i === j;
        }, e[z(0x212)] = z(0x1f4);
        const f = e, {attachments: g} = d, h = g && f[z(0x1fe)](g[y(0x1fb)], 0x7f4 * -0x2 + -0x1585 + 0x256d);
        if (d[y(0x1dd)] && !h)
            return f[y(0x1bd)];
        if (h && f[z(0x20b)](g[0x3 * -0x355 + 0x9da + 0x25][z(0x1d2)], f[z(0x1d1)]))
            return f[y(0x1d1)];
        if (h && f[z(0x1ce)](g[0x1b15 + -0x21ad + 0x698][z(0x1d2)], f[y(0x1cc)]))
            return f[y(0x1cc)];
        if (h && f[z(0x1e9)](g[-0x301 * -0xb + 0x5 * -0x31a + -0x1189 * 0x1][z(0x1d2)], f[z(0x20f)]))
            return f[y(0x20f)];
        if (h && f[z(0x1e9)](g[0xb5a + 0xcb5 + -0x180f][z(0x1d2)], f[y(0x1d4)]))
            return f[z(0x1d4)];
        if (h && f[z(0x1c0)](g[0x1de0 + 0x21d3 * -0x1 + 0x3f3][z(0x1d2)], f[z(0x206)]))
            return f[y(0x206)];
        if (h && f[z(0x1d5)](g[0x16b5 * 0x1 + 0x1098 + -0x1 * 0x274d][y(0x1d2)], f[y(0x212)]))
            return f[z(0x212)];
    }, MessengerHandleMessage = async c => {
        const A = w, B = w, d = {
                'QJrBF': function (e, f) {
                    return e !== f;
                },
                'WSeiS': A(0x218),
                'RVzTQ': function (e, f) {
                    return e(f);
                },
                'EQQye': A(0x209),
                'rBxHT': function (e) {
                    return e();
                },
                'uFzdQ': B(0x1dd),
                'aGSxA': function (e, f) {
                    return e === f;
                },
                'fAhHx': B(0x1f2),
                'zuLPJ': function (e) {
                    return e();
                }
            };
        return new Promise((e, f) => {
            ((async () => {
                const C = b, D = b;
                let g, h;
                const i = 0xc1e * 0x1 + 0x7 * 0x16e + -0x161f;
                try {
                    if (d[C(0x1bc)](c[C(0x21c)], d[C(0x200)]))
                        return;
                    const j = c[D(0x1e4)][D(0x214)](), l = j?.[D(0x1f0)][D(0x214)](), m = {};
                    m[D(0x1ee)] = j['id'], g = await (0xb89 * -0x1 + 0xe09 + -0x280, MessengerShowChannel_1[C(0x205)])(m);
                    if (!g)
                        return;
                    const n = await (0x19cf + 0x1 * 0x119 + -0x1ae8, messengerBot_1[C(0x1d0) + C(0x204)])(g['id']);
                    if (!l?.[C(0x1ff)] && l[C(0x1bf)]) {
                        (-0x11f3 + 0x12e1 * 0x1 + 0x77 * -0x2, MessengerMarkRead_1[D(0x205)])(l, g[C(0x21d)]);
                        return;
                    }
                    h = await (-0x16f * 0x1b + 0x1 * 0x170f + 0xfa6, MessengerVerifyContact_1[D(0x205)])(l[C(0x1db)], n, g[C(0x21d)]);
                    const o = {
                            ...l,
                            'type': d[C(0x1be)](getMessageType, l[C(0x1ff)]),
                            'fromMe': ![],
                            'body': l?.[C(0x1ff)]?.[C(0x1dd)] || '',
                            'timestamp': l[D(0x1c4)],
                            'message_id': l[C(0x1ff)][C(0x1e8)]
                        }, p = {};
                    p[D(0x221)] = h, p[D(0x219)] = g['id'], p[D(0x201) + C(0x213)] = i, p[D(0x21d)] = g[D(0x21d)], p[C(0x1fc)] = o, p[D(0x1d3)] = d[C(0x215)];
                    const q = await (0x14f4 + -0x27 * 0x13 + -0x120f, FindOrCreateTicketService_1[C(0x205)])(p);
                    if (q?.[C(0x20e) + C(0x1e3)]) {
                        d[C(0x1ba)](e);
                        return;
                    }
                    if (q?.[D(0x1f9) + C(0x1e3)]) {
                        d[C(0x1ba)](e);
                        return;
                    }
                    if (d[D(0x1bc)](o[C(0x1d2)], d[C(0x202)])) {
                        if (d[C(0x1ed)](d[C(0x210)], d[D(0x210)]))
                            await (-0x5 * -0x15b + -0x1121 * 0x1 + -0x6a * -0x19, MessengerVerifyMediaMessage_1[D(0x205)])(g, o, q, h);
                        else {
                            (0x1 * 0x511 + 0x1008 + 0x1 * -0x1519, f[D(0x205)])(g, h[C(0x21d)]);
                            return;
                        }
                    } else
                        await (0x553 * 0x4 + 0x143e + -0x298a, MessengerVerifyMessage_1[C(0x205)])(o, q, h);
                    await (-0x51 + -0x513 + 0x17 * 0x3c, VerifyStepsChatFlowTicket_1[C(0x205)])(o, q), await (-0x4 * 0x5b8 + -0xa39 * 0x1 + 0x2119, VerifyBusinessHours_1[C(0x205)])(o, q), d[C(0x1f1)](e);
                } catch (s) {
                    logger_1[C(0x1c7)][D(0x217)](s), d[C(0x1be)](f, s);
                }
            })());
        });
    };
exports[w(0x205)] = MessengerHandleMessage;