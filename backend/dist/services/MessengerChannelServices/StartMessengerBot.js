'use strict';const m=b,o=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=parseInt(k(0x1a9))/0x1*(parseInt(k(0x1b4))/0x2)+-parseInt(l(0x1ad))/0x3+-parseInt(k(0x1ba))/0x4+parseInt(l(0x1aa))/0x5+parseInt(k(0x1b5))/0x6*(parseInt(l(0x1c7))/0x7)+-parseInt(l(0x1a8))/0x8*(parseInt(l(0x1b9))/0x9)+parseInt(l(0x1c3))/0xa*(parseInt(k(0x1b1))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x58093));function a(){const t=['115501IOyxZK','3117635iVHYdx','ERROR\x20Messenger:\x20checkMessages\x20Tenant:\x20','StartMessengerBot','1637742foXjWh','env','OPENING','defineProperty','11SswDHK','../../libs/messengerBot','CONNECTED','2ggWvpp','192uMhPdO','error','initMessengerBot','tenantId','41391ZYxcGj','1193268zdCJyv','info','SetWebHookUrl\x20360\x20|\x20Error:\x20','CHECK_INTERVAL','./MessengerSendMessagesSystem','ERROR_CONNECT_WABA_360:\x20','logger','getIO','DISCONNECTED','4434310qZYgIq','update','__esModule',':whatsappSession','44128zCgxCr','default','../../libs/socket','__importDefault','312evRsRB'];a=function(){return t;};return a();}var __importDefault=this&&this[m(0x1ca)]||function(c){const n=m;return c&&c[n(0x1c5)]?c:{'default':c};};function b(c,d){const e=a();return b=function(f,g){f=f-0x1a8;let h=e[f];return h;},b(c,d);}Object[o(0x1b0)](exports,o(0x1c5),{'value':!![]}),exports[o(0x1ac)]=void 0x0;const AppError_1=__importDefault(require('../../errors/AppError')),messengerBot_1=require(m(0x1b2)),socket_1=require(m(0x1c9)),logger_1=require('../../utils/logger'),MessengerSendMessagesSystem_1=__importDefault(require(o(0x1be))),checkingMessenger={},messengerCheckMessages=async(c,d)=>{const p=o,q=m;if(checkingMessenger[d])return;checkingMessenger[d]=!![];try{await(0x0,MessengerSendMessagesSystem_1[p(0x1c8)])(c,d);}catch(e){logger_1[q(0x1c0)]['error'](q(0x1ab)+d+'::',e);}checkingMessenger[d]=![];},StartMessengerBot=async c=>{const r=o,s=o,d=(0x0,socket_1[r(0x1c1)])();await c['update']({'status':r(0x1af)}),d['emit'](c[r(0x1b8)]+r(0x1c6),{'action':r(0x1c4),'session':c});try{const e='';logger_1['logger'][s(0x1bb)]('Conex√£o\x20Messenger\x20iniciada\x20|\x20Empresa:\x20'+c[r(0x1b8)]);const f=await(0x0,messengerBot_1[s(0x1b7)])(c);await c['update']({'status':s(0x1b3),'number':e}),setInterval(messengerCheckMessages,+(process[s(0x1ae)][r(0x1bd)]||0x1388),f,c[s(0x1b8)]),d['emit'](c['tenantId']+s(0x1c6),{'action':r(0x1c4),'session':c});}catch(g){logger_1[s(0x1c0)][r(0x1b6)](s(0x1bc)+g),await c[r(0x1c4)]({'status':r(0x1c2)}),d['emit'](c[s(0x1b8)]+r(0x1c6),{'action':r(0x1c4),'session':c});throw new AppError_1[(s(0x1c8))](s(0x1bf)+g,0x194);}};exports[m(0x1ac)]=StartMessengerBot;