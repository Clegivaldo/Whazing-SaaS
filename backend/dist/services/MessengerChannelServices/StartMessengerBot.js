'use strict';function b(c,d){const e=a();return b=function(f,g){f=f-0x170;let h=e[f];return h;},b(c,d);}const n=b,o=b;function a(){const s=['default','ConexÃ£o\x20Messenger\x20iniciada\x20|\x20Empresa:\x20','CHECK_INTERVAL','20246809HnGpgN',':whatsappSession','306987eppQhA','8DvIyKP','info','235uBPQcZ','5121jSgROV','4741452iXXZlV','573629fbbQIE','12280kNKdxW','update','emit','DISCONNECTED','99510napxFQ','SetWebHookUrl\x20360\x20|\x20Error:\x20','tenantId','__esModule','OPENING','CONNECTED','logger','26EBgfjB','32kdvsNp','StartMessengerBot','788hYzeKK','error','4352PdxoQb','ERROR_CONNECT_WABA_360:\x20','../../libs/socket','../../libs/messengerBot','defineProperty','../../utils/logger'];a=function(){return s;};return a();}(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=parseInt(k(0x175))/0x1*(-parseInt(l(0x173))/0x2)+parseInt(l(0x180))/0x3*(-parseInt(k(0x181))/0x4)+-parseInt(l(0x183))/0x5*(parseInt(k(0x18b))/0x6)+-parseInt(k(0x186))/0x7*(-parseInt(l(0x171))/0x8)+-parseInt(k(0x184))/0x9*(-parseInt(l(0x187))/0xa)+parseInt(k(0x17e))/0xb+-parseInt(k(0x185))/0xc*(-parseInt(l(0x170))/0xd);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xea04c));var __importDefault=this&&this['__importDefault']||function(c){const m=b;return c&&c[m(0x18e)]?c:{'default':c};};Object[n(0x179)](exports,n(0x18e),{'value':!![]}),exports[o(0x172)]=void 0x0;const AppError_1=__importDefault(require('../../errors/AppError')),messengerBot_1=require(o(0x178)),socket_1=require(o(0x177)),logger_1=require(o(0x17a)),MessengerSendMessagesSystem_1=__importDefault(require('./MessengerSendMessagesSystem')),checkingMessenger={},messengerCheckMessages=async(c,d)=>{const p=o;if(checkingMessenger[d])return;checkingMessenger[d]=!![];try{await(0x0,MessengerSendMessagesSystem_1[p(0x17b)])(c,d);}catch(e){logger_1['logger']['error']('ERROR\x20Messenger:\x20checkMessages\x20Tenant:\x20'+d+'::',e);}checkingMessenger[d]=![];},StartMessengerBot=async c=>{const q=n,r=o,d=(0x0,socket_1['getIO'])();await c[q(0x188)]({'status':r(0x18f)}),d[q(0x189)](c[q(0x18d)]+':whatsappSession',{'action':r(0x188),'session':c});try{const e='';logger_1['logger'][q(0x182)](r(0x17c)+c[r(0x18d)]);const f=await(0x0,messengerBot_1['initMessengerBot'])(c);await c['update']({'status':r(0x190),'number':e}),setInterval(messengerCheckMessages,+(process['env'][q(0x17d)]||0x1388),f,c[q(0x18d)]),d['emit'](c[r(0x18d)]+':whatsappSession',{'action':r(0x188),'session':c});}catch(g){logger_1[q(0x191)][q(0x174)](q(0x18c)+g),await c[r(0x188)]({'status':q(0x18a)}),d[r(0x189)](c[q(0x18d)]+q(0x17f),{'action':'update','session':c});throw new AppError_1[(r(0x17b))](r(0x176)+g,0x194);}};exports[n(0x172)]=StartMessengerBot;