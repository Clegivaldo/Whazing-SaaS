'use strict';function a(){const D=['5CzsOBD','337330oUVhPu','queueId','606228trYoca','pending','BVtmK','9FEryaK','endOfDay','push','contact','forEach','1447112raBdGe','whatsapp','__importDefault','open','default','map','startOfDay','profile','updatedAt','__esModule','date-fns','444102YiobgB','olHxX','18NHsNKw','defineProperty','between','DESC','128372vWvrNE','parseISO','eFPNF','../../models/Contact','name','sequelize','ITEKC','findAll','171308MtkjxX','4771220EegADG','indexOf'];a=function(){return D;};return a();}const w=b,y=b;(function(c,d){const u=b,v=b,e=c();while(!![]){try{const f=-parseInt(u(0xc0))/0x1+parseInt(u(0xc4))/0x2+parseInt(v(0xd9))/0x3+parseInt(v(0xdf))/0x4*(parseInt(v(0xc3))/0x5)+parseInt(u(0xdb))/0x6*(parseInt(v(0xc6))/0x7)+-parseInt(v(0xce))/0x8*(-parseInt(v(0xc9))/0x9)+-parseInt(v(0xc1))/0xa;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x22707));var __importDefault=this&&this[w(0xd0)]||function(c){const x=w;return c&&c[x(0xd7)]?c:{'default':c};};Object[y(0xdc)](exports,'__esModule',{'value':!![]});const sequelize_1=require(w(0xbd)),date_fns_1=require(y(0xd8)),Ticket_1=__importDefault(require('../../models/Ticket')),UsersQueues_1=__importDefault(require('../../models/UsersQueues')),User_1=__importDefault(require('../../models/User')),Contact_1=__importDefault(require(w(0xbb))),Queue_1=__importDefault(require('../../models/Queue')),TicketsQueuesService=async({dateStart:c,dateEnd:d,status:e,userId:f,queuesIds:g,tenantId:h,showAll:i})=>{const z=w,A=y;let j={};const k=[{'model':Contact_1[z(0xd2)],'as':A(0xcc),'attributes':['id',A(0xbc),'number','profilePicUrl']},{'association':A(0xcf),'attributes':['id','name']},{'model':User_1[z(0xd2)],'as':'user','attributes':['id',A(0xbc),z(0xd5)]}],l=await Queue_1[z(0xd2)]['count']({'where':{'tenantId':h}});if(l){const n=await UsersQueues_1['default'][z(0xbf)]({'where':{'userId':f}});let o=n[A(0xd3)](p=>p[z(0xc5)]);if(g){const p=[];g[z(0xcd)](q=>{const B=A,C=z;if(B(0xba)===B(0xba)){const r=o[C(0xc2)](+q);r&&p[C(0xcb)](+q);}else return g&&h['__esModule']?q:{'default':j};}),o=p;}j={...j,'queueId':{[sequelize_1['Op']['in']]:o}};}i=='true'&&(j={});e?z(0xc8)===A(0xc8)?j={...j,'status':e}:e[A(0xcb)](+f):e=[A(0xd1),A(0xc7)];c&&d&&(A(0xda)===z(0xbe)?f={...g,'status':h}:j={...j,'createdAt':{[sequelize_1['Op'][A(0xdd)]]:[+(0x0,date_fns_1[A(0xd4)])((0x0,date_fns_1[A(0xe0)])(c)),+(0x0,date_fns_1[A(0xca)])((0x0,date_fns_1[A(0xe0)])(d))]}});const m=await Ticket_1[A(0xd2)]['findAll']({'where':{...j,'tenantId':h},'include':k,'order':[[A(0xd6),A(0xde)]]});return m;};function b(c,d){const e=a();return b=function(f,g){f=f-0xba;let h=e[f];return h;},b(c,d);}exports[w(0xd2)]=TicketsQueuesService;