'use strict';const x=b,y=b;(function(c,d){const u=b,v=b,e=c();while(!![]){try{const f=-parseInt(u(0x1e0))/0x1+parseInt(u(0x1db))/0x2*(-parseInt(v(0x1e7))/0x3)+-parseInt(u(0x1e5))/0x4*(-parseInt(v(0x1d7))/0x5)+parseInt(v(0x1e6))/0x6+parseInt(v(0x1e3))/0x7+parseInt(u(0x1da))/0x8+-parseInt(v(0x1d9))/0x9*(parseInt(u(0x1e8))/0xa);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x6bbb0));var __importDefault=this&&this['__importDefault']||function(c){const w=b;return c&&c[w(0x1ea)]?c:{'default':c};};Object[x(0x1d5)](exports,y(0x1ea),{'value':!![]});const sequelize_1=require('sequelize'),date_fns_1=require(y(0x1d4)),Ticket_1=__importDefault(require(y(0x1e1))),UsersQueues_1=__importDefault(require(x(0x1d6))),User_1=__importDefault(require('../../models/User')),Contact_1=__importDefault(require(x(0x1df))),Queue_1=__importDefault(require(x(0x1dd))),TicketsQueuesService=async({dateStart:c,dateEnd:d,status:e,userId:f,queuesIds:g,tenantId:h,showAll:i})=>{const z=x,A=y;let j={};const k=[{'model':Contact_1[z(0x1cf)],'as':'contact','attributes':['id',A(0x1ef),z(0x1cc),'profilePicUrl']},{'association':z(0x1de),'attributes':['id',A(0x1ef)]},{'model':User_1['default'],'as':A(0x1ed),'attributes':['id',z(0x1ef),'profile']}],l=await Queue_1[A(0x1cf)][A(0x1ec)]({'where':{'tenantId':h}});if(l){const n=await UsersQueues_1[z(0x1cf)][z(0x1d2)]({'where':{'userId':f}});let o=n[A(0x1d8)](p=>p['queueId']);if(g){if(A(0x1cb)===z(0x1cb)){const p=[];g[z(0x1e9)](q=>{const B=z,C=z;if(B(0x1e2)!==B(0x1e2))f={...g,'status':h};else{const s=o[C(0x1e4)](+q);s&&p[C(0x1ce)](+q);}}),o=p;}else{const r=g[A(0x1e4)](+h);r&&k[z(0x1ce)](+l);}}j={...j,'queueId':{[sequelize_1['Op']['in']]:o}};}i==z(0x1dc)&&(j={});e?j={...j,'status':e}:e=['open',A(0x1ee)];c&&d&&(j={...j,'createdAt':{[sequelize_1['Op']['between']]:[+(0x0,date_fns_1[A(0x1d0)])((0x0,date_fns_1[z(0x1cd)])(c)),+(0x0,date_fns_1[z(0x1eb)])((0x0,date_fns_1[A(0x1cd)])(d))]}});const m=await Ticket_1[z(0x1cf)]['findAll']({'where':{...j,'tenantId':h},'include':k,'order':[[A(0x1d3),z(0x1d1)]]});return m;};function a(){const D=['default','startOfDay','DESC','findAll','updatedAt','date-fns','defineProperty','../../models/UsersQueues','80GTPoGB','map','9pLWCGB','5572072VznGqq','134nOztvk','true','../../models/Queue','whatsapp','../../models/Contact','635354fyOTYH','../../models/Ticket','XGbco','502124tPLkJB','indexOf','60916vVdQVJ','4793622NQCOYF','15567ucnnZj','3865610eInrCZ','forEach','__esModule','endOfDay','count','user','pending','name','eLRxO','number','parseISO','push'];a=function(){return D;};return a();}function b(c,d){const e=a();return b=function(f,g){f=f-0x1cb;let h=e[f];return h;},b(c,d);}exports[x(0x1cf)]=TicketsQueuesService;