'use strict';const x=b,y=b;(function(c,d){const u=b,v=b,e=c();while(!![]){try{const f=-parseInt(u(0xae))/0x1+parseInt(v(0xaa))/0x2*(-parseInt(v(0xb9))/0x3)+parseInt(v(0xc7))/0x4+-parseInt(u(0x9d))/0x5*(parseInt(u(0xb7))/0x6)+parseInt(v(0xa5))/0x7*(parseInt(v(0xb5))/0x8)+-parseInt(v(0x9f))/0x9+parseInt(u(0xa9))/0xa;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x6cffe));function b(c,d){const e=a();return b=function(f,g){f=f-0x9d;let h=e[f];return h;},b(c,d);}function a(){const D=['findAll','LOWER','464IRyruu','ipTrd','4470vybFCu','endOfDay','1515JOVnuS','sequelize','defineProperty','forEach','date-fns','Sequelize','toLowerCase','admin','FqOxh','name','like','parseISO','push','../../models/Tag','15844SpkBxW','tags','estado','4390lRVQMZ','concat','466002FrUbga','where','ASC','default','col','qWQfg','56518pcTQwG','startOfDay','email','trim','13887580aLeNtA','494SHtpDr','iTycO','ddds','LIKE','583926JUYGcS','number','__esModule','Contact.name','between'];a=function(){return D;};return a();}var __importDefault=this&&this['__importDefault']||function(c){const w=b;return c&&c[w(0xb0)]?c:{'default':c};};Object[x(0xbb)](exports,y(0xb0),{'value':!![]});const date_fns_1=require(y(0xbd)),sequelize_1=require(x(0xba)),Contact_1=__importDefault(require('../../models/Contact')),Tag_1=__importDefault(require(x(0xc6))),ContactWallet_1=__importDefault(require('../../models/ContactWallet')),dddsPorEstado=[{'estado':'AC','ddds':['68']},{'estado':'AL','ddds':['82']},{'estado':'AM','ddds':['92','97']},{'estado':'AP','ddds':['96']},{'estado':'BA','ddds':['71','73','74','75','77']},{'estado':'CE','ddds':['85','88']},{'estado':'DF','ddds':['61']},{'estado':'ES','ddds':['27','28']},{'estado':'GO','ddds':['62','64']},{'estado':'MA','ddds':['98','99']},{'estado':'MG','ddds':['31','32','33','34','35','37','38']},{'estado':'MS','ddds':['67']},{'estado':'MT','ddds':['65','66']},{'estado':'PA','ddds':['91','93','94']},{'estado':'PB','ddds':['83']},{'estado':'PE','ddds':['81','87']},{'estado':'PI','ddds':['86','89']},{'estado':'PR','ddds':['41','42','43','44','45','46']},{'estado':'RJ','ddds':['21','22','24']},{'estado':'RN','ddds':['84']},{'estado':'RO','ddds':['69']},{'estado':'RR','ddds':['95']},{'estado':'RS','ddds':['51','53','54','55']},{'estado':'SC','ddds':['47','48','49']},{'estado':'SE','ddds':['79']},{'estado':'SP','ddds':['11','12','13','14','15','16','17','18','19']},{'estado':'TO','ddds':['63']}],ListContactsService=async({startDate:c,endDate:d,tenantId:e,tags:f,wallets:g,ddds:h,userId:i,profile:j,searchParam:k})=>{const z=x,A=x;let l=[],m={'tenantId':e,'isGroup':![]};k&&(z(0xa4)==='gyEDd'?f=g[z(0x9e)](h):m={...m,[sequelize_1['Op']['or']]:[{'name':sequelize_1['Sequelize'][A(0xa0)](sequelize_1[A(0xbe)]['fn'](A(0xb4),sequelize_1[z(0xbe)][z(0xa3)]('Contact.name')),'LIKE','%'+k[A(0xbf)]()['trim']()+'%')},{'number':{[sequelize_1['Op'][z(0xc3)]]:'%'+k['toLowerCase']()[A(0xa8)]()+'%'}}]});c&&d&&(m={...m,'createdAt':{[sequelize_1['Op'][z(0xb2)]]:[+(0x0,date_fns_1[A(0xa6)])((0x0,date_fns_1['parseISO'])(c)),+(0x0,date_fns_1[z(0xb8)])((0x0,date_fns_1[A(0xc4)])(d))]}});f&&(l=[{'model':Tag_1['default'],'as':z(0xc8),'where':{'id':{[sequelize_1['Op']['in']]:f}},'required':!![]}]);if(g)l[A(0xc5)]({'model':ContactWallet_1[z(0xa2)],'where':{'walletId':g},'required':!![]});else j!==A(0xc0)&&(z(0xb6)!==A(0xb6)?f['push']({'model':g['default'],'where':{'walletId':h},'required':!![]}):l[A(0xc5)]({'model':ContactWallet_1[A(0xa2)],'where':{'walletId':i},'required':!![]}));if(h){let q=[];h[z(0xbc)](r=>{const B=A,C=z;if(B(0xab)!==B(0xc1)){if(r){const s=dddsPorEstado['find'](t=>t[B(0xc9)]===r)?.[B(0xac)];s&&(q=q[C(0x9e)](s));}}else l={...m,[n['Op']['or']]:[{'name':o[C(0xbe)][C(0xa0)](p[B(0xbe)]['fn'](B(0xb4),q[C(0xbe)][C(0xa3)](B(0xb1))),C(0xad),'%'+r[B(0xbf)]()[C(0xa8)]()+'%')},{'number':{[s['Op'][C(0xc3)]]:'%'+t[C(0xbf)]()['trim']()+'%'}}]};}),m={...m,'number':{[sequelize_1['Op']['or']]:q['map'](r=>({[sequelize_1['Op'][z(0xc3)]]:'55'+r+'%'}))}};}const n=await Contact_1[A(0xa2)][z(0xb3)]({'where':m,'attributes':['id','name',A(0xaf),z(0xa7)],'include':l,'order':[[z(0xc2),z(0xa1)]]});return{'contacts':n};};exports[x(0xa2)]=ListContactsService;