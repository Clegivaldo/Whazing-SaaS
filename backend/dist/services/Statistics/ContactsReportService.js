'use strict';const x=b,y=b;function b(c,d){const e=a();return b=function(f,g){f=f-0x1a6;let h=e[f];return h;},b(c,d);}(function(c,d){const v=b,w=b,e=c();while(!![]){try{const f=parseInt(v(0x1c7))/0x1*(parseInt(v(0x1cc))/0x2)+parseInt(v(0x1b1))/0x3+parseInt(v(0x1bc))/0x4+parseInt(v(0x1b2))/0x5*(parseInt(w(0x1d0))/0x6)+parseInt(v(0x1bb))/0x7*(-parseInt(v(0x1aa))/0x8)+parseInt(v(0x1cd))/0x9+-parseInt(w(0x1a9))/0xa;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xb25ed));function a(){const D=['384XJOLnX','../../models/Tag','FJLRl','__importDefault','push','where','parseISO','2721144iJcSDv','785rYoLBw','ASC','between','default','map','toLowerCase','trim','endOfDay','startOfDay','120806dKmbuS','127136ClBeAB','mscty','like','findAll','../../models/Contact','LOWER','emkeY','LIKE','defineProperty','SfEEh','estado','30055ZmShiB','name','ddds','Sequelize','find','8aEKmHr','10480428lwoPvO','date-fns','tags','17562IMOIyO','__esModule','sequelize','col','fKmsh','Contact.name','../../models/ContactWallet','concat','admin','11240940uuNzJj'];a=function(){return D;};return a();}var __importDefault=this&&this[x(0x1ad)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object[y(0x1c4)](exports,x(0x1d1),{'value':!![]});const date_fns_1=require(x(0x1ce)),sequelize_1=require(y(0x1d2)),Contact_1=__importDefault(require(y(0x1c0))),Tag_1=__importDefault(require(y(0x1ab))),ContactWallet_1=__importDefault(require(x(0x1a6))),dddsPorEstado=[{'estado':'AC','ddds':['68']},{'estado':'AL','ddds':['82']},{'estado':'AM','ddds':['92','97']},{'estado':'AP','ddds':['96']},{'estado':'BA','ddds':['71','73','74','75','77']},{'estado':'CE','ddds':['85','88']},{'estado':'DF','ddds':['61']},{'estado':'ES','ddds':['27','28']},{'estado':'GO','ddds':['62','64']},{'estado':'MA','ddds':['98','99']},{'estado':'MG','ddds':['31','32','33','34','35','37','38']},{'estado':'MS','ddds':['67']},{'estado':'MT','ddds':['65','66']},{'estado':'PA','ddds':['91','93','94']},{'estado':'PB','ddds':['83']},{'estado':'PE','ddds':['81','87']},{'estado':'PI','ddds':['86','89']},{'estado':'PR','ddds':['41','42','43','44','45','46']},{'estado':'RJ','ddds':['21','22','24']},{'estado':'RN','ddds':['84']},{'estado':'RO','ddds':['69']},{'estado':'RR','ddds':['95']},{'estado':'RS','ddds':['51','53','54','55']},{'estado':'SC','ddds':['47','48','49']},{'estado':'SE','ddds':['79']},{'estado':'SP','ddds':['11','12','13','14','15','16','17','18','19']},{'estado':'TO','ddds':['63']}],ListContactsService=async({startDate:c,endDate:d,tenantId:e,tags:f,wallets:g,ddds:h,userId:i,profile:j,searchParam:k})=>{const z=y,A=x;let l=[],m={'tenantId':e,'isGroup':![]};k&&(m={...m,[sequelize_1['Op']['or']]:[{'name':sequelize_1[z(0x1ca)][z(0x1af)](sequelize_1['Sequelize']['fn'](A(0x1c1),sequelize_1[A(0x1ca)][A(0x1d3)](A(0x1d5))),z(0x1c3),'%'+k[A(0x1b7)]()[z(0x1b8)]()+'%')},{'number':{[sequelize_1['Op'][z(0x1be)]]:'%'+k[A(0x1b7)]()[A(0x1b8)]()+'%'}}]});if(c&&d){if(A(0x1bd)!==A(0x1bd)){const p=g[z(0x1cb)](q=>q[z(0x1c6)]===k)?.[z(0x1c9)];p&&(k=l['concat'](p));}else m={...m,'createdAt':{[sequelize_1['Op'][z(0x1b4)]]:[+(0x0,date_fns_1[A(0x1ba)])((0x0,date_fns_1[A(0x1b0)])(c)),+(0x0,date_fns_1[A(0x1b9)])((0x0,date_fns_1[A(0x1b0)])(d))]}};}f&&(z(0x1ac)!==A(0x1ac)?l={...m,'createdAt':{[n['Op'][A(0x1b4)]]:[+(0x0,o['startOfDay'])((0x0,p[A(0x1b0)])(q)),+(0x0,r['endOfDay'])((0x0,s[z(0x1b0)])(t))]}}:l=[{'model':Tag_1[A(0x1b5)],'as':A(0x1cf),'where':{'id':{[sequelize_1['Op']['in']]:f}},'required':!![]}]);if(g)A(0x1d4)==='fKmsh'?l[A(0x1ae)]({'model':ContactWallet_1[A(0x1b5)],'where':{'walletId':g},'required':!![]}):f=g[A(0x1a7)](h);else j!==A(0x1a8)&&l['push']({'model':ContactWallet_1['default'],'where':{'walletId':i},'required':!![]});if(h){if(A(0x1c2)===z(0x1c2)){let r=[];h['forEach'](s=>{const B=z,C=z;if(s){const t=dddsPorEstado[B(0x1cb)](u=>u[B(0x1c6)]===s)?.[C(0x1c9)];t&&(B(0x1c5)===C(0x1c5)?r=r['concat'](t):l={...m,[n['Op']['or']]:[{'name':o['Sequelize'][B(0x1af)](p['Sequelize']['fn']('LOWER',q[C(0x1ca)][C(0x1d3)](C(0x1d5))),'LIKE','%'+r[B(0x1b7)]()[B(0x1b8)]()+'%')},{'number':{[s['Op'][B(0x1be)]]:'%'+t[C(0x1b7)]()[B(0x1b8)]()+'%'}}]});}}),m={...m,'number':{[sequelize_1['Op']['or']]:r[z(0x1b6)](s=>({[sequelize_1['Op'][A(0x1be)]]:'55'+s+'%'}))}};}else f[z(0x1ae)]({'model':g[z(0x1b5)],'where':{'walletId':h},'required':!![]});}const n=await Contact_1[z(0x1b5)][z(0x1bf)]({'where':m,'attributes':['id',A(0x1c8),'number','email'],'include':l,'order':[['name',A(0x1b3)]]});return{'contacts':n};};exports[y(0x1b5)]=ListContactsService;