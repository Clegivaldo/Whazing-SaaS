'use strict';const n=b,p=b;(function(c,d){const l=b,m=b,e=c();while(!![]){try{const f=parseInt(l(0x10b))/0x1+parseInt(l(0x11f))/0x2+-parseInt(m(0x118))/0x3*(-parseInt(l(0x117))/0x4)+parseInt(l(0x11e))/0x5*(parseInt(m(0x115))/0x6)+parseInt(m(0x109))/0x7*(-parseInt(m(0x111))/0x8)+-parseInt(m(0x10c))/0x9+parseInt(m(0x10d))/0xa;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x9cf26));var __importDefault=this&&this[n(0x11a)]||function(c){const o=n;return c&&c[o(0x113)]?c:{'default':c};};Object[n(0x108)](exports,p(0x113),{'value':!![]});function a(){const s=['24564nrUJOA','whatsapp','1394452xrXfnq','6hsnflq','includes','__importDefault','./CreateLogTicketService','../../helpers/GetDefaultWhatsApp','instagram','535kxKyVY','234190lxGrZl','default','../../errors/AppError','ERR_CREATING_TICKET','defineProperty','760060wrwjgo','../ContactServices/ShowContactService','862995rqmMUX','8966151jtZxwj','5009390QKiiSo','create','../../helpers/socketEmit','../../helpers/CheckContactOpenTickets','72glFZrK','ticket','__esModule','./ShowTicketService'];a=function(){return s;};return a();}function b(c,d){const e=a();return b=function(f,g){f=f-0x106;let h=e[f];return h;},b(c,d);}const AppError_1=__importDefault(require(n(0x106))),CheckContactOpenTickets_1=__importDefault(require(p(0x110))),GetDefaultWhatsApp_1=__importDefault(require(n(0x11c))),socketEmit_1=__importDefault(require(n(0x10f))),ShowContactService_1=__importDefault(require(p(0x10a))),CreateLogTicketService_1=__importDefault(require(p(0x11b))),ShowTicketService_1=__importDefault(require(p(0x114))),CreateTicketService=async({contactId:c,status:d,userId:e,tenantId:f,channel:g,channelId:channelId=undefined})=>{const q=p,r=p,h=await(0x0,GetDefaultWhatsApp_1['default'])(f,channelId);if(!g||![q(0x11d),'telegram',q(0x116)][q(0x119)](g))throw new AppError_1[(r(0x120))](r(0x107));await(0x0,CheckContactOpenTickets_1['default'])(c);const {isGroup:i}=await(0x0,ShowContactService_1[q(0x120)])({'id':c,'tenantId':f}),{id:j}=await h['$create'](q(0x112),{'contactId':c,'status':d,'isGroup':i,'userId':e,'isActiveDemand':!![],'channel':g,'tenantId':f}),k=await(0x0,ShowTicketService_1[r(0x120)])({'id':j,'tenantId':f});if(!k)throw new AppError_1['default'](q(0x107));return await(0x0,CreateLogTicketService_1[r(0x120)])({'userId':e,'ticketId':k['id'],'type':r(0x10e)}),(0x0,socketEmit_1[q(0x120)])({'tenantId':f,'type':'ticket:update','payload':k}),k;};exports[p(0x120)]=CreateTicketService;