'use strict';
const a3 = b, a4 = b;
(function (c, d) {
    const a1 = b, a2 = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(a1(0xcd)) / (0xc12 + 0xf8b + 0x24d * -0xc) + parseInt(a2(0xdc)) / (-0x1f61 + -0x489 * -0x2 + -0x1 * -0x1651) * (-parseInt(a2(0xf6)) / (0x4 * 0x6f5 + 0x1acf * -0x1 + -0x3 * 0x56)) + -parseInt(a1(0x10e)) / (0x78e * 0x3 + -0x1ce2 + -0x39 * -0x1c) * (parseInt(a2(0xe5)) / (0xce * 0x1 + 0x1 * -0x247b + 0x6 * 0x5f3)) + parseInt(a2(0xea)) / (0x72e + 0x1b31 + 0x9 * -0x3d1) * (parseInt(a1(0xb4)) / (0x1 * 0xb02 + 0x1 * 0x925 + -0x142 * 0x10)) + -parseInt(a2(0xf4)) / (0x1bdd + -0xbc9 + -0x100c) * (parseInt(a1(0xba)) / (-0x2379 + 0x8 * 0x8 + 0x2342)) + parseInt(a2(0xe7)) / (-0x1 * 0x2141 + -0x2 * 0xe27 + 0x3d99) * (-parseInt(a1(0x11d)) / (-0x2258 + -0x2550 + 0x47b3)) + parseInt(a1(0xb0)) / (0xea * -0x8 + -0x23c4 + 0x2b20);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x6fff + 0xc11 * -0x91 + 0xac2b2));
function a() {
    const a8 = [
        'LIdfA',
        'KCPht',
        'getTime',
        'ers/socket',
        'ticket:upd',
        '__importDe',
        'ticket',
        'Tickets',
        'ate',
        'type',
        'BLled',
        'KPqvN',
        'receivedTr',
        'rMnXf',
        '5642460nLAhyx',
        'tqmgu',
        'contact',
        'ERR_NO_TIC',
        '7rzEQwq',
        'fEyOa',
        'FsvUY',
        'pending',
        'oldUserId',
        'transfered',
        '36MDSLij',
        'close',
        'uIdqf',
        'on:new',
        '../../help',
        'kfjMK',
        'oJGSw',
        'vice',
        'associatio',
        'ers/CheckC',
        'name',
        'sAsRead',
        'cCfpy',
        'KET_FOUND',
        'defineProp',
        'rs/AppErro',
        'queueId',
        'open',
        'ExtCh',
        '276675JJqUAR',
        'stepAutoRe',
        'value',
        'ls/Ticket',
        'vcXMs',
        'ketMessage',
        'erty',
        'payload',
        'eoPtD',
        'HcVdN',
        'nRaPR',
        'where',
        '../../erro',
        'ls/User',
        'MdeHO',
        '15454JntQJy',
        'closedAt',
        'GySLH',
        'attributes',
        'sQoSA',
        'ers/SetTic',
        'RDhoo',
        'autoReplyI',
        'tenantId',
        '6155RAuSqY',
        'BSgls',
        '162830ogaXWO',
        'ZGLTS',
        'isTransfer',
        '1126902YHPiMh',
        'status',
        'update',
        'zxAzL',
        'closed',
        './CreateLo',
        'fault',
        'gTicketSer',
        'hSkQX',
        'isDeleted',
        '853912ohFTqh',
        'jnXci',
        '6nnlPXY',
        'Emit',
        'user',
        'oldStatus',
        '__esModule',
        'include',
        'model',
        'setDataVal',
        'notificati',
        'XgXWE',
        'anctB',
        'XbimK',
        'reload',
        '../../mode',
        'ticketId',
        'cVBiw',
        'qxguG',
        'tags',
        'EMHkE',
        'plyId',
        'wallets',
        'IFJes',
        'UvRDI',
        'ence',
        '116zBAiBR',
        'iqUxa',
        'extraInfo',
        'ansfer',
        'ontactOpen',
        'GJKhK',
        'default',
        'whatsapp',
        'ZzktL',
        'bCvJd',
        'zeBbW',
        'findOne',
        'startedAtt',
        'aaebg',
        'QWDNJ',
        '154VlfTJO',
        'ls/Contact',
        'userId',
        'sLZsf',
        'endanceAt',
        'GTQna'
    ];
    a = function () {
        return a8;
    };
    return a();
}
var __importDefault = this && this[a3(0xa7) + a4(0xf0)] || function (c) {
    const a5 = a4;
    return c && c[a5(0xfa)] ? c : { 'default': c };
};
const k = {};
k[a3(0xcf)] = !![], Object[a4(0xc8) + a3(0xd3)](exports, a4(0xfa), k);
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x1a6e + 0x5 * 0x6e5 + -0x76c);
        let h = e[f];
        return h;
    }, b(c, d);
}
const AppError_1 = __importDefault(require(a4(0xd9) + a4(0xc9) + 'r')), CheckContactOpenTickets_1 = __importDefault(require(a3(0xbe) + a3(0xc3) + a3(0x112) + a4(0xa9))), SetTicketMessagesAsRead_1 = __importDefault(require(a4(0xbe) + a3(0xe1) + a3(0xd2) + a4(0xc5))), Contact_1 = __importDefault(require(a3(0x103) + a4(0x11e))), Ticket_1 = __importDefault(require(a4(0x103) + a4(0xd0))), User_1 = __importDefault(require(a3(0x103) + a4(0xda))), socketEmit_1 = __importDefault(require(a3(0xbe) + a4(0xa5) + a3(0xf7))), CreateLogTicketService_1 = __importDefault(require(a4(0xef) + a3(0xf1) + a4(0xc1))), UpdateTicketService = async ({
        ticketData: s,
        ticketId: t,
        isTransference: u,
        userIdRequest: v
    }) => {
        const a6 = a4, a7 = a3, w = {};
        w[a6(0x10b)] = a7(0xfe) + a7(0xbd), w[a7(0x11b)] = a6(0xb3) + a7(0xc7), w[a7(0xed)] = a7(0xb2), w[a6(0xf5)] = a6(0x110), w[a6(0xe8)] = a6(0x107), w[a6(0x105)] = a6(0x10a), w[a6(0xf2)] = a6(0xc4), w[a6(0x106)] = a6(0xf8), w[a6(0x101)] = a7(0x115), w[a7(0xa2)] = a7(0xf3), w[a6(0xb5)] = function (Q, R) {
            return Q !== R;
        }, w[a6(0x118)] = a6(0xb7), w[a6(0xde)] = function (Q, R) {
            return Q === R;
        }, w[a7(0xe0)] = function (Q, R) {
            return Q === R;
        }, w[a7(0x11c)] = a7(0xee), w[a7(0xa3)] = a6(0xe2), w[a6(0xdb)] = a7(0xbc), w[a7(0xbf)] = a6(0xbb), w[a7(0x10f)] = function (Q, R) {
            return Q === R;
        }, w[a7(0x113)] = function (Q, R) {
            return Q === R;
        }, w[a7(0xd5)] = a7(0xcb), w[a6(0xd6)] = function (Q, R) {
            return Q === R;
        }, w[a6(0xb6)] = a7(0xcc), w[a6(0xb1)] = a7(0x9f), w[a6(0xad)] = function (Q, R) {
            return Q === R;
        }, w[a6(0xe6)] = function (Q, R) {
            return Q === R;
        }, w[a6(0xc6)] = a7(0xb9), w[a6(0x10c)] = a6(0x108), w[a7(0x100)] = a7(0xae) + a7(0x111), w[a7(0xd7)] = a6(0xc0), w[a7(0xaf)] = a6(0xa1), w[a7(0x116)] = a7(0xe9) + a6(0x10d), w[a7(0xac)] = function (Q, R) {
            return Q !== R;
        }, w[a6(0xff)] = a6(0x117), w[a7(0xd1)] = a6(0xa6) + a6(0xaa);
        const x = w, {
                status: y,
                userId: z,
                tenantId: A,
                queueId: B
            } = s, C = {};
        C['id'] = t, C[a6(0xe4)] = A;
        const D = {};
        D[a6(0xfc)] = Contact_1[a6(0x114)], D['as'] = x[a6(0xed)], D[a7(0xfb)] = [
            x[a7(0xf5)],
            x[a6(0xe8)],
            {
                'association': x[a6(0x105)],
                'attributes': [
                    'id',
                    x[a7(0xf2)]
                ]
            }
        ];
        const E = {};
        E[a6(0xfc)] = User_1[a6(0x114)], E['as'] = x[a7(0x106)], E[a6(0xdf)] = [
            'id',
            x[a7(0xf2)]
        ];
        const F = {};
        F[a7(0xc2) + 'n'] = x[a6(0x101)], F[a7(0xdf)] = [
            'id',
            x[a6(0xf2)],
            x[a6(0xa2)]
        ];
        const G = {};
        G[a6(0xd8)] = C, G[a7(0xfb)] = [
            D,
            E,
            F
        ];
        const H = await Ticket_1[a6(0x114)][a7(0x119)](G);
        if (!H)
            throw new AppError_1[(a6(0x114))](x[a6(0x11b)], 0x9e8 * 0x1 + -0x345 * 0x9 + 0x1 * 0x1519);
        await (0xd46 + -0xfe3 + 0x29d, SetTicketMessagesAsRead_1[a6(0x114)])(H);
        const I = x[a6(0xb5)](H[a7(0xeb)], x[a7(0x118)]) && x[a7(0xde)](s[a6(0xeb)], x[a6(0x118)]), J = H[a7(0xeb)], K = H[a6(0xf8)]?.['id'];
        if (x[a7(0xe0)](J, x[a7(0x11c)])) {
            if (x[a6(0xb5)](x[a7(0xa3)], x[a6(0xdb)]))
                await (0xb33 + 0x5 * -0x542 + 0xf17, CheckContactOpenTickets_1[a7(0x114)])(H[a7(0xb2)]['id']);
            else {
                const R = {};
                return R[a6(0x114)] = j, F && G[a7(0xfa)] ? R : R;
            }
        }
        const L = x[a7(0xe0)](y, x[a6(0xbf)]) ? x[a6(0x11c)] : y, M = {};
        M[a7(0xeb)] = L, M[a6(0xca)] = B, M[a6(0x11f)] = z;
        const N = M;
        x[a6(0x10f)](L, x[a7(0x11c)]) && (N[a7(0xdd)] = new Date()[a7(0xa4)]());
        x[a6(0x10f)](J, x[a6(0x118)]) && x[a6(0x113)](L, x[a6(0xd5)]) && (N[a7(0xe3) + 'd'] = null, N[a6(0xce) + a7(0x109)] = null, N[a7(0x11a) + a7(0xa0)] = new Date()[a6(0xa4)]());
        await H[a7(0xec)](N);
        if (x[a6(0xde)](J, x[a6(0x118)]) && x[a7(0xd6)](L, x[a6(0xd5)])) {
            if (x[a7(0xd6)](x[a6(0xb6)], x[a7(0xb1)]))
                D[a7(0xdd)] = new E()[a7(0xa4)]();
            else {
                const S = {};
                S[a6(0x11f)] = v, S[a7(0x104)] = t, S[a6(0xab)] = x[a6(0xd5)], await (-0x1428 + 0x3 * 0x62f + 0x19b, CreateLogTicketService_1[a7(0x114)])(S);
            }
        }
        if (x[a7(0xad)](L, x[a6(0x11c)])) {
            const T = {};
            T[a6(0x11f)] = v, T[a7(0x104)] = t, T[a6(0xab)] = x[a6(0x11c)], await (0xb78 + -0x10a1 + 0x529, CreateLogTicketService_1[a7(0x114)])(T);
        }
        if (x[a6(0xe6)](J, x[a7(0xd5)]) && x[a6(0xd6)](L, x[a6(0x118)])) {
            const U = {};
            U[a6(0x11f)] = v, U[a7(0x104)] = t, U[a6(0xab)] = x[a7(0x118)], await (-0xb3e + -0x3 * 0x88d + 0x24e5, CreateLogTicketService_1[a6(0x114)])(U);
        }
        if (u) {
            const V = {};
            V[a6(0x11f)] = v, V[a6(0x104)] = t, V[a6(0xab)] = x[a7(0xc6)], await (-0x25cf + -0xf6 * 0x2 + -0x7 * -0x5ad, CreateLogTicketService_1[a6(0x114)])(V);
            if (z) {
                if (x[a6(0xd6)](x[a7(0x10c)], x[a6(0x10c)])) {
                    const W = {};
                    W[a6(0x11f)] = z, W[a7(0x104)] = t, W[a7(0xab)] = x[a6(0x100)], await (0x658 + 0xc5c * 0x2 + -0x1f10, CreateLogTicketService_1[a6(0x114)])(W);
                } else
                    F[a6(0xe3) + 'd'] = null, G[a6(0xce) + a6(0x109)] = null, M[a6(0x11a) + a7(0xa0)] = new j()[a6(0xa4)]();
            }
        }
        await H[a6(0x102)]();
        if (u) {
            if (x[a7(0xb5)](x[a6(0xd7)], x[a7(0xaf)]))
                await H[a6(0xfd) + 'ue'](x[a7(0x116)], !![]);
            else {
                const Z = {};
                Z[a7(0xe4)] = F, Z[a7(0xab)] = x[a7(0x10b)], Z[a6(0xd4)] = G, (0x2 * -0x18e + 0xe0b * 0x1 + -0xaef, E[a6(0x114)])(Z);
            }
        }
        if (I) {
            if (x[a6(0xac)](x[a6(0xff)], x[a7(0xff)]))
                throw new C[(a6(0x114))](x[a6(0x11b)], 0xd19 + 0x17dd + -0x2362);
            else {
                const a0 = {};
                a0[a7(0xe4)] = A, a0[a6(0xab)] = x[a7(0x10b)], a0[a6(0xd4)] = H, (-0x1715 + 0x9b9 * -0x1 + -0x1067 * -0x2, socketEmit_1[a7(0x114)])(a0);
            }
        }
        const O = {};
        O[a7(0xe4)] = A, O[a7(0xab)] = x[a6(0xd1)], O[a6(0xd4)] = H, (0x166e + 0x19b1 + -0x301f * 0x1, socketEmit_1[a6(0x114)])(O);
        const P = {};
        return P[a7(0xa8)] = H, P[a6(0xf9)] = J, P[a6(0xb8)] = K, P;
    };
exports[a3(0x114)] = UpdateTicketService;