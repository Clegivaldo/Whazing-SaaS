'use strict';
function _0x3cb7(_0x1500eb, _0x5a7cff) {
    const _0x8e8c18 = _0x5230();
    return _0x3cb7 = function (_0x184c66, _0xf008ea) {
        _0x184c66 = _0x184c66 - (0xd * -0xc6 + -0x1b8 + 0xd96);
        let _0x360aa7 = _0x8e8c18[_0x184c66];
        return _0x360aa7;
    }, _0x3cb7(_0x1500eb, _0x5a7cff);
}
const _0x4aadda = _0x3cb7;
(function (_0x3d426d, _0x35f720) {
    const _0x4b8f7c = _0x3cb7, _0x2f1f02 = _0x3d426d();
    while (!![]) {
        try {
            const _0x9164f3 = parseInt(_0x4b8f7c(0x1d6)) / (0x688 + -0x25 * -0x99 + -0x1ca4) + -parseInt(_0x4b8f7c(0x203)) / (-0xb9c + -0x825 + 0x13c3) + -parseInt(_0x4b8f7c(0x205)) / (0x1d40 + -0x2 * -0xcab + -0x3693) + -parseInt(_0x4b8f7c(0x1d3)) / (0x2 * -0xbc0 + 0x8d0 + -0x2 * -0x75a) * (parseInt(_0x4b8f7c(0x1f7)) / (-0x1bad + -0x1b19 + 0x36cb)) + parseInt(_0x4b8f7c(0x1ec)) / (0x1 * 0x905 + -0x1ae2 + -0xf1 * -0x13) * (parseInt(_0x4b8f7c(0x1f9)) / (0x24d2 + -0x1758 + -0xd73)) + -parseInt(_0x4b8f7c(0x1dd)) / (-0x1 * 0x25b1 + 0x29 * -0x83 + 0x374 * 0x11) * (-parseInt(_0x4b8f7c(0x1e1)) / (0x823 * -0x4 + -0xfa1 + 0x3036)) + parseInt(_0x4b8f7c(0x204)) / (-0x6d * 0x3b + 0x1 * 0xa8e + 0xe9b);
            if (_0x9164f3 === _0x35f720)
                break;
            else
                _0x2f1f02['push'](_0x2f1f02['shift']());
        } catch (_0x54e6f6) {
            _0x2f1f02['push'](_0x2f1f02['shift']());
        }
    }
}(_0x5230, 0x4 * 0x1b13e + -0x8d588 + 0x485 * 0x193));
function _0x5230() {
    const _0x483e26 = [
        'MzxKO',
        'default',
        'createdAt',
        'QYPvi',
        'LHYHg',
        '28dDpihB',
        'findAndCou',
        '__esModule',
        '556114ZshjPc',
        'contactId',
        'ERR_NO_TIC',
        '__importDe',
        'whatsappId',
        'value',
        'fault',
        '2856304jJBPyT',
        'quotedMsg',
        'zZMzw',
        'ticketId',
        '9yBXBZW',
        'ervices/Sh',
        'owTicketSe',
        'Geuyr',
        'rs/AppErro',
        'erty',
        'include',
        'DESC',
        'where',
        'KET_FOUND',
        '../../mode',
        '297978VRLjQz',
        'model',
        '../../erro',
        'contact',
        'queueId',
        'OffLine',
        '../TicketS',
        'ls/Ticket',
        'bIIEY',
        'reverse',
        'qlMjO',
        '118675gVRuNl',
        'tenantId',
        '14yrVLLQ',
        'JNQcu',
        'ls/Message',
        'rvice',
        'defineProp',
        'length',
        'kqEji',
        'required',
        'ntAll',
        'KhlKb',
        '614520zOwPQR',
        '1972750fUuXCG',
        '1216167kEZIWW',
        'order'
    ];
    _0x5230 = function () {
        return _0x483e26;
    };
    return _0x5230();
}
var __importDefault = this && this[_0x4aadda(0x1d9) + _0x4aadda(0x1dc)] || function (_0x12af26) {
    const _0x5571f8 = _0x4aadda;
    return _0x12af26 && _0x12af26[_0x5571f8(0x1d5)] ? _0x12af26 : { 'default': _0x12af26 };
};
const _0x38fde3 = {};
_0x38fde3[_0x4aadda(0x1db)] = !![], Object[_0x4aadda(0x1fd) + _0x4aadda(0x1e6)](exports, _0x4aadda(0x1d5), _0x38fde3);
const AppError_1 = __importDefault(require(_0x4aadda(0x1ee) + _0x4aadda(0x1e5) + 'r')), Message_1 = __importDefault(require(_0x4aadda(0x1eb) + _0x4aadda(0x1fb))), MessageOffLine_1 = __importDefault(require(_0x4aadda(0x1eb) + _0x4aadda(0x1fb) + _0x4aadda(0x1f1))), Ticket_1 = __importDefault(require(_0x4aadda(0x1eb) + _0x4aadda(0x1f3))), ShowTicketService_1 = __importDefault(require(_0x4aadda(0x1f2) + _0x4aadda(0x1e2) + _0x4aadda(0x1e3) + _0x4aadda(0x1fc))), ListMessagesService = async ({
        pageNumber: pageNumber = '1',
        ticketId: _0xda1e0e,
        tenantId: _0x52a99f
    }) => {
        const _0x1b7c1b = _0x4aadda, _0x43885e = {};
        _0x43885e[_0x1b7c1b(0x1d2)] = _0x1b7c1b(0x1d8) + _0x1b7c1b(0x1ea), _0x43885e[_0x1b7c1b(0x1f4)] = function (_0x1f74b8, _0x54f34c) {
            return _0x1f74b8 * _0x54f34c;
        }, _0x43885e[_0x1b7c1b(0x1fa)] = function (_0x21a721, _0xe82f0d) {
            return _0x21a721 - _0xe82f0d;
        }, _0x43885e[_0x1b7c1b(0x1e4)] = _0x1b7c1b(0x1ef), _0x43885e[_0x1b7c1b(0x1df)] = _0x1b7c1b(0x1de), _0x43885e[_0x1b7c1b(0x1f6)] = _0x1b7c1b(0x1d0), _0x43885e[_0x1b7c1b(0x202)] = _0x1b7c1b(0x1e8), _0x43885e[_0x1b7c1b(0x1ff)] = function (_0x5d741a, _0x26b236) {
            return _0x5d741a === _0x26b236;
        }, _0x43885e[_0x1b7c1b(0x207)] = function (_0x4cff12, _0x3b1188) {
            return _0x4cff12 > _0x3b1188;
        }, _0x43885e[_0x1b7c1b(0x1d1)] = function (_0x5ca678, _0x40f4f6) {
            return _0x5ca678 + _0x40f4f6;
        };
        const _0x46841b = _0x43885e, _0x2015e0 = {};
        _0x2015e0['id'] = _0xda1e0e, _0x2015e0[_0x1b7c1b(0x1f8)] = _0x52a99f;
        const _0x2f27ee = await (-0x2365 + 0xbce + 0x1797, ShowTicketService_1[_0x1b7c1b(0x208)])(_0x2015e0);
        if (!_0x2f27ee)
            throw new AppError_1[(_0x1b7c1b(0x208))](_0x46841b[_0x1b7c1b(0x1d2)], -0x1 * -0x1c51 + 0x46d * 0x4 + -0x2c71);
        const _0x21c0ae = -0xc5d * -0x1 + 0xb6 + 0x1f * -0x6b, _0x5d7d0c = _0x46841b[_0x1b7c1b(0x1f4)](_0x21c0ae, _0x46841b[_0x1b7c1b(0x1fa)](+pageNumber, -0x1 * 0xf0c + -0x7c7 * 0x3 + 0x2 * 0x1331)), _0x2acee4 = {};
        _0x2acee4[_0x1b7c1b(0x1f0)] = _0x2f27ee[_0x1b7c1b(0x1f0)], _0x2acee4[_0x1b7c1b(0x1d7)] = _0x2f27ee[_0x1b7c1b(0x1d7)], _0x2acee4[_0x1b7c1b(0x1da)] = _0x2f27ee[_0x1b7c1b(0x1da)], _0x2acee4['id'] = _0x2f27ee['id'];
        const _0xa3ada4 = {};
        _0xa3ada4[_0x1b7c1b(0x1ed)] = Ticket_1[_0x1b7c1b(0x208)], _0xa3ada4[_0x1b7c1b(0x1e9)] = _0x2acee4, _0xa3ada4[_0x1b7c1b(0x200)] = !![];
        const {
            count: _0x4a28e8,
            rows: _0x424ccd
        } = await Message_1[_0x1b7c1b(0x208)][_0x1b7c1b(0x1d4) + _0x1b7c1b(0x201)]({
            'limit': _0x21c0ae,
            'include': [
                _0x46841b[_0x1b7c1b(0x1e4)],
                {
                    'model': Message_1[_0x1b7c1b(0x208)],
                    'as': _0x46841b[_0x1b7c1b(0x1df)],
                    'include': [_0x46841b[_0x1b7c1b(0x1e4)]]
                },
                _0xa3ada4
            ],
            'offset': _0x5d7d0c,
            'order': [[
                    _0x46841b[_0x1b7c1b(0x1f6)],
                    _0x46841b[_0x1b7c1b(0x202)]
                ]]
        });
        let _0x43edaa = [];
        if (_0x46841b[_0x1b7c1b(0x1ff)](+pageNumber, 0x12d6 * 0x2 + -0x18ab + 0x34 * -0x40)) {
            const _0x57a745 = {};
            _0x57a745[_0x1b7c1b(0x1e0)] = _0xda1e0e;
            const _0x49fe3d = {};
            _0x49fe3d[_0x1b7c1b(0x1e9)] = _0x57a745, _0x49fe3d[_0x1b7c1b(0x1e7)] = [
                _0x46841b[_0x1b7c1b(0x1e4)],
                {
                    'model': Message_1[_0x1b7c1b(0x208)],
                    'as': _0x46841b[_0x1b7c1b(0x1df)],
                    'include': [_0x46841b[_0x1b7c1b(0x1e4)]]
                }
            ], _0x49fe3d[_0x1b7c1b(0x206)] = [[
                    _0x46841b[_0x1b7c1b(0x1f6)],
                    _0x46841b[_0x1b7c1b(0x202)]
                ]];
            const {rows: _0x467c00} = await MessageOffLine_1[_0x1b7c1b(0x208)][_0x1b7c1b(0x1d4) + _0x1b7c1b(0x201)](_0x49fe3d);
            _0x43edaa = _0x467c00;
        }
        const _0x397a03 = _0x46841b[_0x1b7c1b(0x207)](_0x4a28e8, _0x46841b[_0x1b7c1b(0x1d1)](_0x5d7d0c, _0x424ccd[_0x1b7c1b(0x1fe)]));
        return {
            'messages': _0x424ccd[_0x1b7c1b(0x1f5)](),
            'messagesOffLine': _0x43edaa,
            'ticket': _0x2f27ee,
            'count': _0x4a28e8,
            'hasMore': _0x397a03
        };
    };
exports[_0x4aadda(0x208)] = ListMessagesService;