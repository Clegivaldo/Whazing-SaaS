'use strict';
const a4 = b, a5 = b;
(function (c, d) {
    const a2 = b, a3 = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(a2(0xa7)) / (-0x141 + 0xc9 + 0xb * 0xb) * (parseInt(a2(0xf6)) / (0x1c19 + -0x2 * -0x8e9 + -0x2de9)) + -parseInt(a3(0xb1)) / (-0x1 * 0x17 + 0x1 * -0x1dfe + -0x786 * -0x4) * (-parseInt(a2(0xc2)) / (0x1704 + 0xc5 * 0xf + -0x228b)) + parseInt(a2(0xa9)) / (0x2182 * 0x1 + 0x8f9 + -0xa * 0x43f) * (parseInt(a3(0xf7)) / (-0x9a8 + 0x87 * 0x3 + 0x819)) + parseInt(a3(0xe6)) / (0xca7 * -0x1 + -0x5a * 0x9 + -0x152 * -0xc) + -parseInt(a3(0xaa)) / (0x2 * -0x1de + 0x1f47 + 0x1b83 * -0x1) * (-parseInt(a3(0xdc)) / (-0x20cf + -0x25e0 + -0x46b8 * -0x1)) + parseInt(a3(0xe1)) / (0x1337 * 0x1 + 0x12 * -0x71 + -0x73 * 0x19) + -parseInt(a3(0xb7)) / (-0xe72 + 0x19b1 * -0x1 + 0x282e * 0x1);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x73c0a + -0x2bf50 + 0x5b5 * 0x28d));
var __importDefault = this && this[a4(0xd9) + a4(0xde)] || function (c) {
    const a6 = a5;
    return c && c[a6(0xae)] ? c : { 'default': c };
};
const o = {};
o[a5(0xbe)] = !![], Object[a4(0xea) + a4(0xe8)](exports, a5(0xae), o);
const Message_1 = __importDefault(require(a5(0xad) + a5(0xf4))), Ticket_1 = __importDefault(require(a4(0xad) + a5(0xb5))), socketEmit_1 = __importDefault(require(a4(0xe9) + a5(0xbb) + a5(0xce))), Contact_1 = __importDefault(require(a4(0xad) + a5(0x100)));
function a() {
    const ab = [
        'ageId\x20do\x20d',
        'include',
        'FkAHh',
        'vtcDi',
        'protocolMe',
        'messageId',
        'tjpDi',
        'body',
        'chat:updat',
        '2SiJUWQ',
        'qxsik',
        '295HBqFHx',
        '3764984ZEZLPF',
        'ERR_CREATI',
        'contactId',
        '../../mode',
        '__esModule',
        'ssage',
        'ticket',
        '201pZFhOZ',
        'ataJson',
        'chat:creat',
        'vIyFv',
        'ls/Ticket',
        'WAQIR',
        '19938248QpxDfR',
        'cHJQj',
        'default',
        'payload',
        'ers/socket',
        'oVYiR',
        'vjlMD',
        'value',
        'message',
        'XaoYs',
        'mediaType',
        '3044xesAMn',
        'VcWsm',
        'findOne',
        'cHWeR',
        'fromMe',
        'Aptmn',
        'o\x20encontra',
        'ELxhP',
        'GIbIb',
        'type',
        'cNhxo',
        'riginal\x20nÃ£',
        'Emit',
        'iKlUg',
        'YtmxR',
        'Erro\x20ao\x20ex',
        'parse',
        'update',
        'contact',
        'Vanen',
        'NG_MESSAGE',
        'UCdty',
        'quotedMsg',
        '__importDe',
        'XIEdX',
        'editedMess',
        '9oLAHFt',
        'JKZbe',
        'fault',
        'eDZDA',
        'qhfha',
        '3781380WJRsEl',
        'dataJson',
        'uqlJc',
        'NIXjZ',
        'RiTXA',
        '3872890wHJUIS',
        'LKJFU',
        'erty',
        '../../help',
        'defineProp',
        'tenantId',
        'where',
        'EmyqJ',
        'JMbMy',
        'xqsWk',
        'create',
        'Mensagem\x20o',
        'key',
        'uuoRA',
        'ls/Message',
        'MYNZU',
        '485186AWsaET',
        '17718sPOhSX',
        'NjXhG',
        'age',
        'rrjRi',
        'model',
        'edited',
        'SGulZ',
        'HQUTi',
        'OMLFN',
        'ls/Contact',
        'trair\x20mess',
        'EcEiA',
        'tXwpc'
    ];
    a = function () {
        return ab;
    };
    return a();
}
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x1d3b + 0xdf * -0x7 + 0x23f6);
        let h = e[f];
        return h;
    }, b(c, d);
}
function extractMessageId(d) {
    const a7 = a5, a8 = a4, e = {};
    e[a7(0xca)] = a8(0xb0), e[a8(0xda)] = a8(0xd4), e[a7(0xff)] = a7(0xd8), e[a8(0xc3)] = a7(0xd1) + a7(0x101) + a8(0x104) + a8(0xb2), e[a8(0xb4)] = function (g, h) {
        return g !== h;
    }, e[a8(0xe4)] = a7(0xe0), e[a7(0xd0)] = a7(0xd5), e[a7(0xfe)] = a7(0xc7), e[a7(0x103)] = a8(0xc9);
    const f = e;
    try {
        if (f[a7(0xb4)](f[a7(0xe4)], f[a8(0xd0)])) {
            const g = JSON[a8(0xd2)](d);
            return g[a7(0xbf)][a8(0xdb) + a8(0xf9)][a7(0xbf)][a7(0xa2) + a7(0xaf)][a8(0xf2)]['id'];
        } else {
            const i = {};
            i[a8(0xeb)] = i;
            const j = {};
            j[a7(0xfb)] = h[a8(0xb9)], j['as'] = f[a7(0xca)], j[a7(0xec)] = i, j[a7(0x105)] = [f[a8(0xda)]];
            const k = {};
            k[a8(0xfb)] = j[a7(0xb9)], k['as'] = f[a8(0xff)], k[a7(0x105)] = [f[a8(0xda)]], g = [
                j,
                k
            ];
        }
    } catch (i) {
        if (f[a7(0xb4)](f[a8(0xfe)], f[a8(0x103)]))
            throw new Error(f[a7(0xc3)]);
        else
            try {
                const k = i[a8(0xd2)](j);
                return k[a7(0xbf)][a7(0xdb) + a8(0xf9)][a7(0xbf)][a7(0xa2) + a7(0xaf)][a8(0xf2)]['id'];
            } catch (l) {
                throw new l(f[a8(0xc3)]);
            }
    }
}
const CreateMessageService = async ({
    messageData: v,
    tenantId: w
}) => {
    const a9 = a5, aa = a5, x = {
            'vjlMD': a9(0xd1) + aa(0x101) + aa(0x104) + aa(0xb2),
            'eDZDA': a9(0xb0),
            'UCdty': a9(0xd4),
            'qxsik': a9(0xd8),
            'XaoYs': a9(0xab) + a9(0xd6),
            'NjXhG': a9(0xf1) + a9(0xcd) + aa(0xc8) + 'da',
            'uqlJc': function (G, H) {
                return G === H;
            },
            'uuoRA': a9(0xdb) + a9(0xf9),
            'rrjRi': function (G, H) {
                return G !== H;
            },
            'WAQIR': aa(0xc5),
            'iKlUg': function (G, H) {
                return G(H);
            },
            'SGulZ': aa(0xee),
            'xqsWk': aa(0xa6) + 'e',
            'EcEiA': function (G, H) {
                return G === H;
            },
            'cHJQj': aa(0x106),
            'EmyqJ': a9(0xe5),
            'cNhxo': aa(0xdd),
            'vtcDi': aa(0xa4),
            'LKJFU': aa(0xf5),
            'oVYiR': aa(0xb3) + 'e'
        };
    if (x[a9(0xe3)](v[aa(0xc1)], x[aa(0xf3)]) && v[aa(0xe2)]) {
        if (x[a9(0xfa)](x[aa(0xb6)], x[a9(0xb6)]))
            throw new d(x[aa(0xbd)]);
        else {
            const H = v[a9(0xe2)], I = x[a9(0xcf)](extractMessageId, H), J = {};
            J[aa(0xa3)] = I, J[aa(0xeb)] = w;
            const K = {};
            K[a9(0xec)] = J;
            const L = await Message_1[a9(0xb9)][a9(0xc4)](K);
            if (L) {
                if (x[a9(0xfa)](x[a9(0xfd)], x[aa(0xfd)])) {
                    const N = {};
                    N[a9(0xeb)] = k;
                    const O = {};
                    O[a9(0xfb)] = j[a9(0xb9)], O['as'] = x[aa(0xdf)], O[aa(0xec)] = N, O[aa(0x105)] = [x[aa(0xd7)]];
                    const P = {};
                    P[a9(0xfb)] = l[a9(0xb9)], P['as'] = x[a9(0xa8)], P[aa(0x105)] = [x[aa(0xd7)]];
                    const Q = {};
                    Q['id'] = n[aa(0xac)];
                    const R = {};
                    R[a9(0xfb)] = m[a9(0xb9)], R['as'] = x[a9(0xd7)], R[a9(0xec)] = Q, R = [
                        O,
                        P,
                        R
                    ];
                } else {
                    const N = {};
                    N[a9(0xfc)] = v[a9(0xa5)], await L[aa(0xd3)](N);
                    const O = {};
                    return O[aa(0xeb)] = w, O[a9(0xcb)] = x[a9(0xef)], O[aa(0xba)] = L, (-0x4 + -0x224a + -0x2 * -0x1127, socketEmit_1[aa(0xb9)])(O), L;
                }
            } else {
                if (x[a9(0x102)](x[aa(0xb8)], x[aa(0xb8)]))
                    throw new Error(x[aa(0xf8)]);
                else {
                    const Q = {};
                    return Q[aa(0xb9)] = j, Q && z[aa(0xae)] ? i : Q;
                }
            }
        }
    }
    const y = {};
    y[a9(0xa3)] = v[aa(0xa3)], y[a9(0xeb)] = w;
    const z = {};
    z[aa(0xec)] = y;
    let A = await Message_1[a9(0xb9)][aa(0xc4)](z);
    if (!A) {
        if (x[aa(0xfa)](x[a9(0xed)], x[aa(0xcc)])) {
            const Q = { ...v };
            Q[aa(0xeb)] = w, A = await Message_1[aa(0xb9)][a9(0xf0)](Q);
        } else
            throw new d(x[aa(0xc0)]);
    } else {
        if (x[aa(0x102)](x[a9(0x107)], x[aa(0x107)]))
            await A[a9(0xd3)](v);
        else
            throw new d(x[a9(0xf8)]);
    }
    let B;
    if (!v[aa(0xc6)]) {
        if (x[aa(0xfa)](x[aa(0xe7)], x[a9(0xe7)])) {
            const U = e[a9(0xd2)](f);
            return U[a9(0xbf)][aa(0xdb) + a9(0xf9)][a9(0xbf)][a9(0xa2) + a9(0xaf)][aa(0xf2)]['id'];
        } else {
            const U = {};
            U[aa(0xeb)] = w;
            const V = {};
            V[a9(0xfb)] = Ticket_1[aa(0xb9)], V['as'] = x[aa(0xdf)], V[a9(0xec)] = U, V[aa(0x105)] = [x[a9(0xd7)]];
            const W = {};
            W[aa(0xfb)] = Message_1[a9(0xb9)], W['as'] = x[a9(0xa8)], W[aa(0x105)] = [x[a9(0xd7)]];
            const X = {};
            X['id'] = v[a9(0xac)];
            const Y = {};
            Y[a9(0xfb)] = Contact_1[a9(0xb9)], Y['as'] = x[aa(0xd7)], Y[aa(0xec)] = X, B = [
                V,
                W,
                Y
            ];
        }
    } else {
        const Z = {};
        Z[aa(0xeb)] = w;
        const a0 = {};
        a0[aa(0xfb)] = Ticket_1[aa(0xb9)], a0['as'] = x[aa(0xdf)], a0[a9(0xec)] = Z, a0[a9(0x105)] = [x[aa(0xd7)]];
        const a1 = {};
        a1[aa(0xfb)] = Message_1[aa(0xb9)], a1['as'] = x[a9(0xa8)], a1[aa(0x105)] = [x[a9(0xd7)]], B = [
            a0,
            a1
        ];
    }
    const C = {};
    C[aa(0xa3)] = v[aa(0xa3)], C[aa(0xeb)] = w;
    const D = {};
    D[a9(0xec)] = C, D[a9(0x105)] = B;
    const E = await Message_1[a9(0xb9)][a9(0xc4)](D);
    if (!E)
        throw new Error(x[a9(0xc0)]);
    const F = {};
    return F[a9(0xeb)] = w, F[a9(0xcb)] = x[a9(0xbc)], F[a9(0xba)] = E, (-0x1 * -0xd2a + 0x6 * 0xa6 + 0x76 * -0x25, socketEmit_1[a9(0xb9)])(F), A;
};
exports[a5(0xb9)] = CreateMessageService;