'use strict';
const _0x2b8cf8 = _0x477b;
(function (_0x230682, _0x45c740) {
    const _0x28e15a = _0x477b, _0x433abd = _0x230682();
    while (!![]) {
        try {
            const _0x2d8842 = parseInt(_0x28e15a(0xa7)) / (-0x26a3 + -0x1 * -0x1e24 + -0x22 * -0x40) * (-parseInt(_0x28e15a(0x94)) / (0x38 * 0xa2 + -0x21 * -0xb0 + -0x3a1e)) + -parseInt(_0x28e15a(0x96)) / (-0xbe7 + -0x1294 + 0x1e7e) + parseInt(_0x28e15a(0x84)) / (0xc59 + -0x26 * 0x6d + 0x5 * 0xc5) + -parseInt(_0x28e15a(0x97)) / (-0x484 * 0x4 + 0x1 * 0x1077 + -0x9 * -0x2e) + parseInt(_0x28e15a(0xa8)) / (-0x565 + 0x1621 + -0x10b6) + parseInt(_0x28e15a(0xa0)) / (-0x897 + -0x3 * 0xbaf + 0x2bab * 0x1) + parseInt(_0x28e15a(0xd6)) / (0xc1b + -0x1cab + 0x1098);
            if (_0x2d8842 === _0x45c740)
                break;
            else
                _0x433abd['push'](_0x433abd['shift']());
        } catch (_0x76c64c) {
            _0x433abd['push'](_0x433abd['shift']());
        }
    }
}(_0x201e, 0xded32 + 0x377 * 0x25b + -0x1 * 0xca376));
function _0x477b(_0x190a92, _0x48a22b) {
    const _0x22ecd5 = _0x201e();
    return _0x477b = function (_0x42b5a7, _0x385d51) {
        _0x42b5a7 = _0x42b5a7 - (-0x1f0e + -0x1025 + 0x2f9c);
        let _0x35e17f = _0x22ecd5[_0x42b5a7];
        return _0x35e17f;
    }, _0x477b(_0x190a92, _0x48a22b);
}
function _0x201e() {
    const _0x4b181c = [
        'ZpUvN',
        'audio',
        'chat:ack',
        'Objii',
        'where',
        'image',
        ')::\x20',
        'mediaName',
        'default',
        'source',
        'error',
        'wmPmA',
        'sendDocume',
        'telegram',
        'WvYim',
        'FXvys',
        '12341968nGejTy',
        'dataValues',
        'video',
        'wxIHi',
        'vWmhx',
        'qxqhh',
        'WLLnn',
        '\x20message\x20(',
        'defineProp',
        'sendPhoto',
        'contact',
        'ack',
        'ASC',
        'date',
        'MTPlB',
        'fault',
        'e\x20text',
        'zdzIw',
        'zdXKU',
        'age\x20is\x20(te',
        'pending',
        'value',
        'tenantId',
        'sendVideo',
        'UPTMG',
        'Emit',
        'message_id',
        'update',
        'join',
        'oEciW',
        'nant:\x20',
        'ABvST',
        '1000768EAgnZC',
        'closed',
        'CegmY',
        'xAkHT',
        'Error\x20mess',
        'quotedMsg',
        'essage_id',
        'mediaType',
        'ticket',
        'messageId',
        'ls/Message',
        'lte',
        'public',
        'includes',
        'createdAt',
        'xBOQh',
        '2XmjHSD',
        'e\x20media',
        '1908234bzpTyi',
        '4724745uMGCLS',
        'info',
        'findAll',
        'sended',
        '../../mode',
        'status',
        'payload',
        '../../util',
        'oSrku',
        '2190986vMfLZM',
        'ketMessage',
        'path',
        'reply_to_m',
        '__esModule',
        'sAsRead',
        'RZHpt',
        '310269xrvCyP',
        '2427798VsVkNP',
        'Error\x20send',
        'chat',
        'date\x20ok',
        'telegramId',
        'ENPaI',
        '__importDe',
        'timestamp',
        'sendVoice',
        'dSiyI',
        'ers/SetTic',
        'mediaUrl',
        's/logger',
        'type',
        'text',
        '\x20|\x20Ticket:',
        'body',
        'Message\x20Up',
        'sendMessag',
        'ptt',
        'BhPbp',
        'id:\x20',
        'Mtsry',
        'logger',
        '../../help',
        'ls/Ticket',
        'VkQHc',
        'sequelize',
        'erty',
        'ers/socket'
    ];
    _0x201e = function () {
        return _0x4b181c;
    };
    return _0x201e();
}
var __importDefault = this && this[_0x2b8cf8(0xae) + _0x2b8cf8(0x73)] || function (_0x1f3f7a) {
    const _0x55baec = _0x2b8cf8;
    return _0x1f3f7a && _0x1f3f7a[_0x55baec(0xa4)] ? _0x1f3f7a : { 'default': _0x1f3f7a };
};
const _0x297b3c = {};
_0x297b3c[_0x2b8cf8(0x79)] = !![], Object[_0x2b8cf8(0x6c) + _0x2b8cf8(0xc4)](exports, _0x2b8cf8(0xa4), _0x297b3c);
const path_1 = require(_0x2b8cf8(0xa2)), sequelize_1 = require(_0x2b8cf8(0xc3)), SetTicketMessagesAsRead_1 = __importDefault(require(_0x2b8cf8(0xc0) + _0x2b8cf8(0xb2) + _0x2b8cf8(0xa1) + _0x2b8cf8(0xa5))), socketEmit_1 = __importDefault(require(_0x2b8cf8(0xc0) + _0x2b8cf8(0xc5) + _0x2b8cf8(0x7d))), Message_1 = __importDefault(require(_0x2b8cf8(0x9b) + _0x2b8cf8(0x8e))), Ticket_1 = __importDefault(require(_0x2b8cf8(0x9b) + _0x2b8cf8(0xc1))), logger_1 = require(_0x2b8cf8(0x9e) + _0x2b8cf8(0xb4)), SendMessagesSystemWbot = async (_0x2fb532, _0x3c0960) => {
        const _0x504c01 = _0x2b8cf8, _0x58eb42 = {};
        _0x58eb42[_0x504c01(0xb1)] = _0x504c01(0x78), _0x58eb42[_0x504c01(0x83)] = _0x504c01(0x6e), _0x58eb42[_0x504c01(0x69)] = _0x504c01(0x8c), _0x58eb42[_0x504c01(0x93)] = _0x504c01(0x85), _0x58eb42[_0x504c01(0xd4)] = _0x504c01(0xd3), _0x58eb42[_0x504c01(0xd5)] = _0x504c01(0x89), _0x58eb42[_0x504c01(0x76)] = _0x504c01(0x92), _0x58eb42[_0x504c01(0xda)] = _0x504c01(0x70), _0x58eb42[_0x504c01(0xc2)] = _0x504c01(0xaa), _0x58eb42[_0x504c01(0x87)] = _0x504c01(0xb6), _0x58eb42[_0x504c01(0x72)] = _0x504c01(0x90), _0x58eb42[_0x504c01(0x75)] = function (_0x224097, _0x34c127) {
            return _0x224097 === _0x34c127;
        }, _0x58eb42[_0x504c01(0xd1)] = _0x504c01(0xc7), _0x58eb42[_0x504c01(0xc9)] = function (_0x1009a2, _0x461349) {
            return _0x1009a2 === _0x461349;
        }, _0x58eb42[_0x504c01(0xbc)] = _0x504c01(0xbb), _0x58eb42[_0x504c01(0xd9)] = function (_0x52e339, _0x3eefb6) {
            return _0x52e339 === _0x3eefb6;
        }, _0x58eb42[_0x504c01(0x6a)] = _0x504c01(0xcb), _0x58eb42[_0x504c01(0x81)] = function (_0x4c8363, _0x592ae9) {
            return _0x4c8363 === _0x592ae9;
        }, _0x58eb42[_0x504c01(0xc6)] = _0x504c01(0xd8), _0x58eb42[_0x504c01(0xad)] = _0x504c01(0xba) + _0x504c01(0x95), _0x58eb42[_0x504c01(0x9f)] = _0x504c01(0xba) + _0x504c01(0x74), _0x58eb42[_0x504c01(0x7c)] = function (_0x2fe95d, _0x453700) {
            return _0x2fe95d * _0x453700;
        }, _0x58eb42[_0x504c01(0x86)] = _0x504c01(0x9a), _0x58eb42[_0x504c01(0xbe)] = _0x504c01(0xc8), _0x58eb42[_0x504c01(0xa6)] = _0x504c01(0xb9) + _0x504c01(0xab);
        const _0x1492ab = _0x58eb42, _0x20a6fb = { [sequelize_1['Op']['is']]: null }, _0x150a34 = {
                'fromMe': !![],
                'messageId': _0x20a6fb,
                'status': _0x1492ab[_0x504c01(0xb1)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][_0x504c01(0x8f)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, _0x21933e = await Message_1[_0x504c01(0xce)][_0x504c01(0x99)]({
                'where': _0x150a34,
                'include': [
                    _0x1492ab[_0x504c01(0x83)],
                    {
                        'model': Ticket_1[_0x504c01(0xce)],
                        'as': _0x1492ab[_0x504c01(0x69)],
                        'where': {
                            'tenantId': _0x3c0960,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: _0x1492ab[_0x504c01(0x93)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': _0x1492ab[_0x504c01(0xd4)],
                            'whatsappId': _0x2fb532['id']
                        },
                        'include': [_0x1492ab[_0x504c01(0x83)]]
                    },
                    {
                        'model': Message_1[_0x504c01(0xce)],
                        'as': _0x1492ab[_0x504c01(0xd5)],
                        'include': [_0x1492ab[_0x504c01(0x83)]]
                    }
                ],
                'order': [[
                        _0x1492ab[_0x504c01(0x76)],
                        _0x1492ab[_0x504c01(0xda)]
                    ]]
            });
        let _0x392a40;
        for (const _0x28e52e of _0x21933e) {
            const _0x6493b4 = _0x28e52e, {ticket: _0x351ffe} = _0x6493b4, _0x254cee = _0x351ffe[_0x504c01(0x6e)][_0x504c01(0xac)], _0x1b5f6d = {};
            _0x6493b4[_0x504c01(0x89)] && (_0x1b5f6d[_0x504c01(0xa3) + _0x504c01(0x8a)] = _0x6493b4[_0x504c01(0x89)][_0x504c01(0x8d)]);
            try {
                if (![
                        _0x1492ab[_0x504c01(0xc2)],
                        _0x1492ab[_0x504c01(0x87)]
                    ][_0x504c01(0x91)](_0x6493b4[_0x504c01(0x8b)]) && _0x6493b4[_0x504c01(0xcd)]) {
                    const _0xec5ac6 = (-0x3 * 0x46c + -0x88 * -0x40 + -0xa5e * 0x2, path_1[_0x504c01(0x80)])(__dirname, '..', '..', '..', _0x1492ab[_0x504c01(0x72)]), _0x155dae = (0x1b2d * -0x1 + -0x259e + 0x40cb, path_1[_0x504c01(0x80)])(_0xec5ac6, _0x6493b4[_0x504c01(0xcd)]);
                    if (_0x1492ab[_0x504c01(0x75)](_0x6493b4[_0x504c01(0x8b)], _0x1492ab[_0x504c01(0xd1)]) || _0x1492ab[_0x504c01(0xc9)](_0x6493b4[_0x504c01(0x8b)], _0x1492ab[_0x504c01(0xbc)])) {
                        const _0x4dc484 = {};
                        _0x4dc484[_0x504c01(0xcf)] = _0x155dae, _0x392a40 = await _0x2fb532[_0x504c01(0xd3)][_0x504c01(0xb0)](_0x254cee, _0x4dc484, _0x1b5f6d);
                    } else {
                        if (_0x1492ab[_0x504c01(0xd9)](_0x6493b4[_0x504c01(0x8b)], _0x1492ab[_0x504c01(0x6a)])) {
                            const _0x1f283d = {};
                            _0x1f283d[_0x504c01(0xcf)] = _0x155dae, _0x392a40 = await _0x2fb532[_0x504c01(0xd3)][_0x504c01(0x6d)](_0x254cee, _0x1f283d, _0x1b5f6d);
                        } else {
                            if (_0x1492ab[_0x504c01(0x81)](_0x6493b4[_0x504c01(0x8b)], _0x1492ab[_0x504c01(0xc6)])) {
                                const _0x334fd4 = {};
                                _0x334fd4[_0x504c01(0xcf)] = _0x155dae, _0x392a40 = await _0x2fb532[_0x504c01(0xd3)][_0x504c01(0x7b)](_0x254cee, _0x334fd4, _0x1b5f6d);
                            } else {
                                const _0x50aa2f = {};
                                _0x50aa2f[_0x504c01(0xcf)] = _0x155dae, _0x392a40 = await _0x2fb532[_0x504c01(0xd3)][_0x504c01(0xd2) + 'nt'](_0x254cee, _0x50aa2f, _0x1b5f6d);
                            }
                        }
                    }
                    logger_1[_0x504c01(0xbf)][_0x504c01(0x98)](_0x1492ab[_0x504c01(0xad)]);
                } else
                    _0x392a40 = await _0x2fb532[_0x504c01(0xd3)][_0x504c01(0xba) + 'e'](_0x254cee, _0x6493b4[_0x504c01(0xb8)], _0x1b5f6d), logger_1[_0x504c01(0xbf)][_0x504c01(0x98)](_0x1492ab[_0x504c01(0x9f)]);
                const _0x34484a = {
                        ..._0x6493b4,
                        ..._0x392a40,
                        'id': _0x6493b4['id'],
                        'timestamp': _0x1492ab[_0x504c01(0x7c)](_0x392a40[_0x504c01(0x71)], -0x1e52 * 0x1 + -0x1 * 0xf43 + 0x317d),
                        'messageId': _0x392a40[_0x504c01(0x7e)],
                        'status': _0x1492ab[_0x504c01(0x86)],
                        'ack': 0x2
                    }, _0x459e97 = { ..._0x34484a }, _0x5b4a42 = {};
                _0x5b4a42['id'] = _0x6493b4['id'];
                const _0x3081a8 = {};
                _0x3081a8[_0x504c01(0xca)] = _0x5b4a42, await Message_1[_0x504c01(0xce)][_0x504c01(0x7f)](_0x459e97, _0x3081a8);
                const _0x3f00dd = {};
                _0x3f00dd[_0x504c01(0x7a)] = _0x351ffe[_0x504c01(0x7a)], _0x3f00dd[_0x504c01(0xb5)] = _0x1492ab[_0x504c01(0xbe)], _0x3f00dd[_0x504c01(0x9d)] = { ..._0x6493b4[_0x504c01(0xd7)] }, _0x3f00dd[_0x504c01(0x9d)]['id'] = _0x6493b4['id'], _0x3f00dd[_0x504c01(0x9d)][_0x504c01(0xb3)] = _0x6493b4[_0x504c01(0xb3)], _0x3f00dd[_0x504c01(0x9d)][_0x504c01(0xaf)] = _0x34484a[_0x504c01(0xaf)], _0x3f00dd[_0x504c01(0x9d)][_0x504c01(0x8d)] = _0x392a40[_0x504c01(0x7e)], _0x3f00dd[_0x504c01(0x9d)][_0x504c01(0x9c)] = _0x1492ab[_0x504c01(0x86)], _0x3f00dd[_0x504c01(0x9d)][_0x504c01(0x6f)] = 0x2, (0x622 * 0x2 + 0x79 * -0x15 + -0x257, socketEmit_1[_0x504c01(0xce)])(_0x3f00dd), logger_1[_0x504c01(0xbf)][_0x504c01(0x98)](_0x1492ab[_0x504c01(0xa6)]), await (-0x4 * -0x673 + -0x631 + -0x139b, SetTicketMessagesAsRead_1[_0x504c01(0xce)])(_0x351ffe);
            } catch (_0x4ae6f1) {
                const _0x15480d = _0x6493b4['id'], _0x2e29f8 = _0x6493b4[_0x504c01(0x8c)]['id'];
                logger_1[_0x504c01(0xbf)][_0x504c01(0xd0)](_0x504c01(0x88) + _0x504c01(0x77) + _0x504c01(0x82) + _0x3c0960 + (_0x504c01(0xb7) + '\x20') + _0x2e29f8 + ')'), logger_1[_0x504c01(0xbf)][_0x504c01(0xd0)](_0x504c01(0xa9) + _0x504c01(0x6b) + _0x504c01(0xbd) + _0x15480d + _0x504c01(0xcc) + _0x4ae6f1);
            }
        }
    };
exports[_0x2b8cf8(0xce)] = SendMessagesSystemWbot;