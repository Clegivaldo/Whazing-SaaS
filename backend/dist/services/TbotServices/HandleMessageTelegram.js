'use strict';const p=b,q=b;function b(c,d){const e=a();return b=function(f,g){f=f-0x71;let h=e[f];return h;},b(c,d);}(function(c,d){const n=b,o=b,e=c();while(!![]){try{const f=-parseInt(n(0x8b))/0x1*(parseInt(o(0x71))/0x2)+parseInt(n(0x7d))/0x3+-parseInt(n(0x88))/0x4*(-parseInt(o(0x80))/0x5)+parseInt(o(0x8d))/0x6*(-parseInt(o(0x84))/0x7)+parseInt(o(0x79))/0x8+parseInt(n(0x7a))/0x9+-parseInt(n(0x86))/0xa;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x60e66));var __importDefault=this&&this[p(0x7c)]||function(c){return c&&c['__esModule']?c:{'default':c};};function a(){const t=['../ChatFlowServices/VerifyStepsChatFlowTicket','92603eifHVh','chat','4437510uuhQGV','update','8FiFpZC','defineProperty','edited_message','5SwzvUX','default','30gXJvTG','266458mgQimT','telegram','../WhatsappService/ShowWhatsAppService','from','timestamp','date','getMe','../WbotServices/helpers/VerifyBusinessHours','5092888LihQNo','2842992LnYnZQ','tenantId','__importDefault','1053120vjsFPj','isFarewellMessage','../TicketServices/FindOrCreateTicketService','673510VpCLCl','message','text'];a=function(){return t;};return a();}Object[p(0x89)](exports,'__esModule',{'value':!![]});const ShowWhatsAppService_1=__importDefault(require(p(0x73))),TelegramVerifyContact_1=__importDefault(require('./TelegramVerifyContact')),FindOrCreateTicketService_1=__importDefault(require(q(0x7f))),TelegramVerifyMediaMessage_1=__importDefault(require('./TelegramVerifyMediaMessage')),TelegramVerifyMessage_1=__importDefault(require('./TelegramVerifyMessage')),VerifyBusinessHours_1=__importDefault(require(p(0x78))),VerifyStepsChatFlowTicket_1=__importDefault(require(q(0x83))),HandleMessage=async(c,d)=>{const r=p,s=q,e=await(0x0,ShowWhatsAppService_1['default'])({'id':d['id']});let f,g={};f=c?.[r(0x81)],g=c?.[r(0x87)];!f&&g&&(f=g?.[s(0x8a)]);const h=f?.[r(0x85)],i=await c[s(0x72)][s(0x77)](),j=i['id']===c[s(0x81)]?.[s(0x74)]['id'],k={...f,'timestamp':+f[s(0x76)]*0x3e8},l=await(0x0,TelegramVerifyContact_1[s(0x8c)])(c,e[s(0x7b)]),m=await(0x0,FindOrCreateTicketService_1[r(0x8c)])({'contact':l,'whatsappId':d['id'],'unreadMessages':j?0x0:0x1,'tenantId':e[s(0x7b)],'msg':{...k,'fromMe':j},'channel':r(0x72)});if(m?.[s(0x7e)])return;!k?.[r(0x82)]&&h?.['id']?await(0x0,TelegramVerifyMediaMessage_1['default'])(c,j,m,l):await(0x0,TelegramVerifyMessage_1[r(0x8c)])(c,j,m,l),await(0x0,VerifyStepsChatFlowTicket_1[r(0x8c)])({'fromMe':j,'body':f[s(0x82)]||''},m),await(0x0,VerifyBusinessHours_1[r(0x8c)])({'fromMe':j,'timestamp':k[r(0x75)]},m);};exports[q(0x8c)]=HandleMessage;