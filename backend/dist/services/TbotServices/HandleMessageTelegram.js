'use strict';const p=b,r=b;(function(c,d){const n=b,o=b,e=c();while(!![]){try{const f=-parseInt(n(0x1d6))/0x1*(parseInt(o(0x1c3))/0x2)+parseInt(o(0x1bb))/0x3+-parseInt(n(0x1d3))/0x4*(parseInt(n(0x1cc))/0x5)+parseInt(o(0x1be))/0x6*(parseInt(o(0x1d0))/0x7)+-parseInt(n(0x1c7))/0x8*(-parseInt(n(0x1c9))/0x9)+parseInt(o(0x1cf))/0xa+-parseInt(n(0x1c2))/0xb*(parseInt(o(0x1d1))/0xc);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x58902));var __importDefault=this&&this[p(0x1c0)]||function(c){const q=p;return c&&c[q(0x1b9)]?c:{'default':c};};function b(c,d){const e=a();return b=function(f,g){f=f-0x1b8;let h=e[f];return h;},b(c,d);}Object[r(0x1d8)](exports,p(0x1b9),{'value':!![]});function a(){const u=['928cnIkMB','../WhatsappService/ShowWhatsAppService','date','401Yozeex','./TelegramVerifyMessage','defineProperty','from','__esModule','tenantId','98199GPHqlG','update','getMe','48DjCiFD','chat','__importDefault','telegram','600094ZSHVak','2282KhGpPO','isFarewellMessage','message','default','18008AGrNbK','./TelegramVerifyMediaMessage','1611HBkEfy','../ChatFlowServices/VerifyStepsChatFlowTicket','text','10235tIkNyl','edited_message','./TelegramVerifyContact','5474190ngFKdo','320838ILRLGN','12hQANEE','timestamp'];a=function(){return u;};return a();}const ShowWhatsAppService_1=__importDefault(require(r(0x1d4))),TelegramVerifyContact_1=__importDefault(require(p(0x1ce))),FindOrCreateTicketService_1=__importDefault(require('../TicketServices/FindOrCreateTicketService')),TelegramVerifyMediaMessage_1=__importDefault(require(p(0x1c8))),TelegramVerifyMessage_1=__importDefault(require(r(0x1d7))),VerifyBusinessHours_1=__importDefault(require('../WbotServices/helpers/VerifyBusinessHours')),VerifyStepsChatFlowTicket_1=__importDefault(require(r(0x1ca))),HandleMessage=async(c,d)=>{const s=p,t=p,e=await(0x0,ShowWhatsAppService_1[s(0x1c6)])({'id':d['id']});let f,g={};f=c?.[s(0x1c5)],g=c?.[s(0x1bc)];!f&&g&&(f=g?.[t(0x1cd)]);const h=f?.[t(0x1bf)],i=await c[s(0x1c1)][s(0x1bd)](),j=i['id']===c[s(0x1c5)]?.[t(0x1b8)]['id'],k={...f,'timestamp':+f[s(0x1d5)]*0x3e8},l=await(0x0,TelegramVerifyContact_1[s(0x1c6)])(c,e['tenantId']),m=await(0x0,FindOrCreateTicketService_1[s(0x1c6)])({'contact':l,'whatsappId':d['id'],'unreadMessages':j?0x0:0x1,'tenantId':e[t(0x1ba)],'msg':{...k,'fromMe':j},'channel':'telegram'});if(m?.[t(0x1c4)])return;!k?.['text']&&h?.['id']?await(0x0,TelegramVerifyMediaMessage_1[s(0x1c6)])(c,j,m,l):await(0x0,TelegramVerifyMessage_1['default'])(c,j,m,l),await(0x0,VerifyStepsChatFlowTicket_1[s(0x1c6)])({'fromMe':j,'body':f[s(0x1cb)]||''},m),await(0x0,VerifyBusinessHours_1[s(0x1c6)])({'fromMe':j,'timestamp':k[t(0x1d2)]},m);};exports['default']=HandleMessage;