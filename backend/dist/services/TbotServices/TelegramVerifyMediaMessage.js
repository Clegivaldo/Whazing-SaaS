'use strict';
const E = b, F = b;
(function (c, d) {
    const C = b, D = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(C(0x1c2)) / (-0xc77 * 0x2 + 0x1f * -0x2 + 0x509 * 0x5) + parseInt(C(0x19a)) / (0x2019 + -0xe41 + 0x8eb * -0x2) * (parseInt(C(0x1f3)) / (-0x3 * 0x8bf + 0xd * -0x241 + 0x1 * 0x378d)) + parseInt(D(0x201)) / (-0xe * 0x25a + 0x22e1 * 0x1 + 0x1f1 * -0x1) + parseInt(D(0x1dd)) / (-0xb0f + 0x1 * -0x1496 + 0xe * 0x243) + parseInt(D(0x1d7)) / (0x4dc * 0x2 + 0x1745 + -0x20f7) * (parseInt(C(0x1c4)) / (-0xc * -0x61 + -0x3b * -0x13 + -0x22 * 0x43)) + -parseInt(D(0x218)) / (-0xae5 * -0x2 + -0x435 * -0x3 + -0x2261) + parseInt(D(0x1b1)) / (-0x795 * 0x2 + -0x36 + 0xf69) * (-parseInt(C(0x199)) / (0x1 * -0x1b83 + 0x25a3 + -0xa16));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x2 * -0x13435 + 0xf6b8 * 0x2 + 0x7 * 0x5b67));
var __importDefault = this && this[E(0x1f6) + F(0x1b6)] || function (c) {
    const G = E;
    return c && c[G(0x210)] ? c : { 'default': c };
};
const u = {};
u[F(0x191)] = !![], Object[E(0x1be) + E(0x1a8)](exports, F(0x210), u);
function a() {
    const W = [
        '270380bTdLHh',
        'IExWU',
        'EYvhV',
        'message_id',
        'getFile',
        'meiyQ',
        'saTol',
        'update',
        'util',
        's/logger',
        'mAsJM',
        'date',
        'ERROR\x20DONW',
        'foCJU',
        'kNeeW',
        'LOAD',
        'fphUc',
        'geService',
        'tLHNE',
        'XylYs',
        'PzmBy',
        'Awrqs',
        '23367jLItKV',
        'reateMessa',
        'file_name',
        '__importDe',
        'ToFBt',
        'public',
        'finish',
        'length',
        'ers/getQuo',
        'HeVng',
        'wVLDe',
        'sticker',
        'zyogA',
        'AAYnv',
        '894096ofOSOo',
        'ggMzS',
        'eStream',
        'audio',
        'kURRe',
        'GzNKW',
        'edited_mes',
        'split',
        'Services/C',
        'bcSTr',
        'tedForMess',
        'getFileLin',
        'ezssG',
        'file_id',
        'type',
        '__esModule',
        'jtDfE',
        'YFJAH',
        'dKmak',
        'image/webp',
        'fileId',
        'Ghgtp',
        'tenantId',
        '1299128UIFNrW',
        'FKePH',
        'AD_MEDIA::',
        'join',
        'xsHys',
        'path',
        'mime_type',
        'photo',
        'value',
        'gOhpN',
        '../../util',
        '\x20ID:\x20',
        'iaaSy',
        'video',
        'sage',
        'NLRkc',
        '1480AoTTje',
        '66DDnGRn',
        'XXPAX',
        'default',
        'is_animate',
        'writeFile',
        'qOACU',
        'ToBTL',
        'WpOuQ',
        'message',
        '../Message',
        'stream',
        'essage',
        'telegram',
        'qPcfy',
        'erty',
        'logger',
        'fileName',
        '../../help',
        'SAS',
        'qdcTu',
        'ToCpL',
        'MTGtn',
        'toString',
        '32346uBGSut',
        'QKLLb',
        'ckSCF',
        'messageDat',
        'bbDep',
        'fault',
        'mnjaX',
        'XfWXR',
        'cowaR',
        'sended',
        'tyFFP',
        'ERR_DOWNLO',
        'kNXYJ',
        'defineProp',
        'text',
        'AyyYM',
        'document',
        '141527BCdwRX',
        'vDYjA',
        '35105AaWqmr',
        'image/png',
        'cOxYC',
        'GET',
        'BGOFR',
        'caption',
        'SAD',
        'voice',
        'ageId',
        'pipe',
        'createWrit',
        'axios',
        'SAV',
        'getTime',
        'fdvIU',
        'received',
        'error',
        'mimeType',
        'promisify',
        '180JHlTTy',
        'reply_to_m',
        'gdjCR',
        'data',
        'ggDrC',
        'dnCmC'
    ];
    a = function () {
        return W;
    };
    return a();
}
const path_1 = require(F(0x18e)), util_1 = require(F(0x1e5)), fs_1 = require('fs'), axios_1 = __importDefault(require(E(0x1cf))), CreateMessageService_1 = __importDefault(require(F(0x1a3) + E(0x209) + E(0x1f4) + F(0x1ee))), logger_1 = require(F(0x193) + E(0x1e6)), getQuotedForMessageId_1 = __importDefault(require(F(0x1ab) + E(0x1fb) + F(0x20b) + F(0x1cc))), writeFileAsync = (-0x2 * -0xf7c + -0x1 * -0x1e8a + -0x3d82, util_1[E(0x1d6)])(fs_1[E(0x19e)]), getMediaInfo = j => {
        const H = F, I = E, k = {};
        k[H(0x1bd)] = I(0x190), k[I(0x20a)] = H(0x196), k[I(0x1a0)] = H(0x204), k[I(0x216)] = I(0x1cb), k[H(0x1eb)] = H(0x1fe), k[H(0x18d)] = H(0x1c1), k[I(0x1ad)] = function (w, z) {
            return w - z;
        }, k[I(0x1ed)] = function (w, z) {
            return w == z;
        }, k[H(0x1ae)] = H(0x1c5), k[I(0x1d2)] = I(0x214);
        const l = k, m = j[I(0x190)] ? l[H(0x1bd)] : j[I(0x196)] ? l[H(0x20a)] : j[H(0x204)] ? l[H(0x1a0)] : j[I(0x1cb)] ? l[H(0x216)] : j[I(0x1fe)] && !j[H(0x1fe)][H(0x19d) + 'd'] ? l[I(0x1eb)] : l[H(0x18d)], n = j[m], [o, p, q, r, s, t, v] = [
                m,
                n[H(0x18f)] ? n[I(0x18f)] : '',
                ![],
                null,
                n[I(0x20e)] ? n[H(0x20e)] : n[l[H(0x1ad)](n[I(0x1fa)], -0x1e1f + 0x1 * 0x200b + 0x1eb * -0x1)][I(0x20e)],
                j[H(0x1c9)] ? j[I(0x1c9)] : '',
                l[I(0x1ed)](m, l[H(0x216)])
            ];
        switch (m) {
        case l[H(0x1bd)]:
            const w = {};
            w[H(0x20f)] = o, w[I(0x1d5)] = l[H(0x1ae)], w[I(0x1ca)] = q, w[I(0x1aa)] = r, w[I(0x215)] = s, w[I(0x1c9)] = t, w[H(0x1d0)] = v;
            return w;
            break;
        case l[H(0x20a)]:
            const x = {};
            x[I(0x20f)] = o, x[H(0x1d5)] = p, x[I(0x1ca)] = q, x[H(0x1aa)] = r, x[I(0x215)] = s, x[H(0x1c9)] = t, x[H(0x1d0)] = v;
            return x;
            break;
        case l[H(0x1a0)]:
            const y = {};
            y[H(0x20f)] = o, y[I(0x1d5)] = p, y[I(0x1ca)] = q, y[H(0x1aa)] = r, y[I(0x215)] = s, y[H(0x1c9)] = t, y[H(0x1d0)] = v;
            return y;
            break;
        case l[H(0x216)]:
            const z = {};
            z[I(0x20f)] = o, z[I(0x1d5)] = p, z[H(0x1ca)] = q, z[H(0x1aa)] = r, z[I(0x215)] = s, z[H(0x1c9)] = t, z[H(0x1d0)] = v;
            return z;
            break;
        case l[H(0x1eb)]:
            const A = {};
            A[I(0x20f)] = o, A[H(0x1d5)] = l[H(0x1d2)], A[H(0x1ca)] = q, A[I(0x1aa)] = r, A[H(0x215)] = s, A[I(0x1c9)] = t, A[I(0x1d0)] = v, A[I(0x1ac)] = !![];
            return A;
            break;
        default:
            const B = {};
            B[H(0x20f)] = o, B[H(0x1d5)] = p, B[I(0x1ca)] = !![], B[H(0x1aa)] = n[H(0x1f5)] ? n[I(0x1f5)] : null, B[I(0x215)] = s, B[H(0x1c9)] = t, B[H(0x1d0)] = v;
            return B;
            break;
        }
    }, downloadFile = async (c, d) => {
        const J = E, K = F, e = {
                'EYvhV': J(0x1e9) + J(0x1ec),
                'mnjaX': function (g, h) {
                    return g(h);
                },
                'BGOFR': K(0x1f9),
                'qOACU': K(0x1d4),
                'meiyQ': function (g, h) {
                    return g === h;
                },
                'cOxYC': J(0x1b9),
                'ckSCF': J(0x200),
                'mAsJM': function (g, h) {
                    return g(h);
                },
                'wVLDe': function (g, h) {
                    return g !== h;
                },
                'ggDrC': K(0x1af),
                'dKmak': K(0x1dc),
                'tLHNE': J(0x1c7),
                'QKLLb': K(0x1a4)
            }, f = await (-0x23de + -0x14 * 0x61 + -0x43 * -0xa6, axios_1[J(0x19c)])({
                'url': c[K(0x1b0)](),
                'method': e[J(0x1ef)],
                'responseType': e[K(0x1b2)]
            });
        await new Promise((g, h) => {
            const L = K, N = K, i = {
                    'kURRe': e[L(0x1df)],
                    'bbDep': function (j, k) {
                        const M = L;
                        return e[M(0x1e7)](j, k);
                    }
                };
            e[L(0x1fd)](e[L(0x1db)], e[N(0x213)]) ? f[L(0x1da)][L(0x1cd)]((-0xb6f + 0x2 * -0x107b + 0x2c65, fs_1[N(0x1ce) + L(0x203)])(d))['on'](e[N(0x1c8)], async () => g(!![]))['on'](e[N(0x19f)], j => {
                const O = L, Q = L, k = {
                        'qPcfy': e[O(0x1df)],
                        'ToFBt': function (l, m) {
                            const P = O;
                            return e[P(0x1b7)](l, m);
                        },
                        'YFJAH': e[O(0x1c8)],
                        'iaaSy': e[O(0x19f)]
                    };
                if (e[O(0x1e2)](e[Q(0x1c6)], e[Q(0x1b3)])) {
                    const m = {
                        'FKePH': k[Q(0x1a7)],
                        'GzNKW': function (n, o) {
                            const R = O;
                            return k[R(0x1f7)](n, o);
                        }
                    };
                    j[Q(0x1da)][Q(0x1cd)]((0x264f + -0x1 * -0x1fa5 + 0x32e * -0x16, k[O(0x1ce) + Q(0x203)])(l))['on'](k[O(0x212)], async () => q(!![]))['on'](k[Q(0x195)], v => {
                        const S = O, T = O;
                        q[S(0x1d4)](m[T(0x18a)], v), m[S(0x206)](r, new s(v));
                    });
                } else
                    console[O(0x1d4)](e[Q(0x1df)], j), e[O(0x1b7)](h, new Error(j));
            }) : (h[N(0x1d4)](i[L(0x205)], i), i[L(0x1b5)](j, new k(l)));
        });
    }, VerifyMediaMessage = async (d, e, f, g) => {
        const U = E, V = F, h = {
                'ggMzS': function (v, w) {
                    return v && w;
                },
                'XXPAX': function (v, w) {
                    return v === w;
                },
                'XylYs': U(0x1ea),
                'NLRkc': function (v, w) {
                    return v(w);
                },
                'tyFFP': function (v, w) {
                    return v !== w;
                },
                'vDYjA': U(0x1f1),
                'Awrqs': U(0x1ff),
                'gOhpN': V(0x1f8),
                'ezssG': function (v, w, x) {
                    return v(w, x);
                },
                'WpOuQ': V(0x1d9),
                'jtDfE': V(0x1b8),
                'IExWU': function (v, w) {
                    return v * w;
                },
                'HeVng': U(0x1ba),
                'saTol': V(0x1d3),
                'AyyYM': function (v, w) {
                    return v || w;
                }
            };
        let i, j = {};
        i = d?.[V(0x1a2)], j = d?.[U(0x1e4)];
        if (h[U(0x202)](!i, j)) {
            if (h[U(0x19b)](h[U(0x1f0)], h[U(0x1f0)]))
                i = j?.[V(0x207) + V(0x197)];
            else {
                const w = {};
                return w[U(0x19c)] = j, g && h[V(0x210)] ? i : w;
            }
        }
        const k = await h[U(0x198)](getMediaInfo, i), l = await d[V(0x1a6)][U(0x1e1)](k[V(0x215)]);
        if (!l) {
            if (h[U(0x1bb)](h[U(0x1c3)], h[U(0x1f2)])) {
                logger_1[U(0x1a9)][V(0x1d4)](V(0x1bc) + V(0x18b) + V(0x194) + i[U(0x1e0)]);
                return;
            } else
                e = f?.[U(0x207) + V(0x197)];
        }
        const m = k[V(0x1d5)][U(0x208)]('/')[-0x176d + 0x2 * -0x2a2 + 0x1cb2][V(0x208)](';')[-0x5 * 0x302 + -0x225d + 0x3167], n = l[U(0x20e)] + '_' + new Date()[U(0x1d1)]() + '.' + m, o = (-0x4a9 * -0x2 + -0xb * -0x49 + -0xc75, path_1[U(0x18c)])(__dirname, '..', '..', '..', h[V(0x192)], n), p = await d[V(0x1a6)][U(0x20c) + 'k'](k[U(0x215)]);
        await h[U(0x20d)](downloadFile, p, o);
        let q;
        if (i?.[V(0x1d8) + U(0x1a5)]?.[V(0x1e0)]) {
            if (h[V(0x1bb)](h[U(0x1a1)], h[V(0x211)])) {
                const x = await (-0xde + 0x1506 + -0x1428, getQuotedForMessageId_1[V(0x19c)])(i[U(0x1d8) + V(0x1a5)][V(0x1e0)], f[U(0x217)]);
                q = x?.['id'] || undefined;
            } else {
                e[U(0x1a9)][V(0x1d4)](V(0x1bc) + U(0x18b) + V(0x194) + f[U(0x1e0)]);
                return;
            }
        }
        const r = {
            'messageId': h[V(0x198)](String, i?.[V(0x1e0)]),
            'ticketId': f['id'],
            'contactId': e ? undefined : g['id'],
            'body': i[U(0x1bf)] || i[V(0x1c9)] || n,
            'fromMe': e,
            'read': e,
            'mediaUrl': n,
            'mediaType': k[V(0x1d5)][U(0x208)]('/')[0x1dd2 + 0x5 * -0x61f + -0x43 * -0x3],
            'quotedMsgId': q,
            'timestamp': h[V(0x1de)](+i[V(0x1e8)], 0x1 * 0xd31 + -0x1 * -0xf77 + -0x18c0),
            'status': e ? h[V(0x1fc)] : h[U(0x1e3)]
        };
        await f[V(0x1e4)]({
            'lastMessage': i[V(0x1bf)] || i[V(0x1c9)] || n,
            'lastMessageAt': new Date()[U(0x1d1)](),
            'answered': h[V(0x1c0)](e, ![])
        });
        const s = {};
        s[U(0x1b4) + 'a'] = r, s[U(0x217)] = f[U(0x217)];
        const t = await (-0xb40 + 0x61 * -0x17 + 0x13f7, CreateMessageService_1[U(0x19c)])(s);
        return t;
    };
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x8ca + 0x9a0 * 0x3 + 0x88 * -0x44);
        let h = e[f];
        return h;
    }, b(c, d);
}
exports[F(0x19c)] = VerifyMediaMessage;