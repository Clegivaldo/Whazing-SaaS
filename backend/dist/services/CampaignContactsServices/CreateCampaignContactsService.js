'use strict';const I=b,L=b;function b(c,d){const e=a();return b=function(f,g){f=f-0x9a;let h=e[f];return h;},b(c,d);}(function(c,d){const G=b,H=b,e=c();while(!![]){try{const f=parseInt(G(0xc0))/0x1+parseInt(G(0xaa))/0x2+-parseInt(H(0xbc))/0x3+-parseInt(H(0xb2))/0x4*(-parseInt(H(0xad))/0x5)+-parseInt(G(0xaf))/0x6+-parseInt(H(0xa2))/0x7+-parseInt(G(0xba))/0x8*(-parseInt(G(0xb8))/0x9);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x4239a));var __createBinding=this&&this[I(0x9e)]||(Object['create']?function(c,d,e,f){const J=I,K=I;if(f===undefined)f=e;var g=Object[J(0xac)](d,e);if(!g||(J(0xb5)in g?!d[J(0xa9)]:g[K(0xa6)]||g[J(0xa4)])){if(K(0x9f)!==J(0xa5))g={'enumerable':!![],'get':function(){return d[e];}};else return h['floor'](i['random']()*(j-e+0x1))+l;}Object[K(0xc3)](c,f,g);}:function(c,d,e,f){if(f===undefined)f=e;c[f]=d[e];}),__setModuleDefault=this&&this[L(0xc2)]||(Object[L(0xbb)]?function(c,d){Object['defineProperty'](c,'default',{'enumerable':!![],'value':d});}:function(c,d){c['default']=d;}),__importStar=this&&this['__importStar']||function(c){const M=L,N=I;if(c&&c[M(0xa9)])return c;var d={};if(c!=null){for(var e in c)if(e!=='default'&&Object['prototype'][M(0xb6)][N(0xa3)](c,e))__createBinding(d,c,e);}return __setModuleDefault(d,c),d;},__importDefault=this&&this['__importDefault']||function(c){const O=L;return c&&c[O(0xa9)]?c:{'default':c};};function a(){const V=['MxRFp','1093778uPlNmm','call','configurable','bHuoI','writable','random','contactId','__esModule','335112UuBlTX','array','getOwnPropertyDescriptor','255CBTiMH','MVDng','2848464EDVLwB','required','filter','32020JqoYxc','findIndex','../../errors/AppError','get','hasOwnProperty','findAll','9wtfmyw','floor','1268808UrCgxB','create','127011PDOezN','object','bCcBt','validate','210181TBsRvU','message','__setModuleDefault','defineProperty','campaignId','../../models/CampaignContacts','number','default','__createBinding','ADVJP','shape'];a=function(){return V;};return a();}Object[I(0xc3)](exports,I(0xa9),{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(I(0xb4))),CampaignContacts_1=__importDefault(require(I(0x9b))),CreateCampaignContactsService=async({campaignContacts:c,campaignId:d})=>{const R=I,S=I,e=(j,k)=>{const P=b,Q=b;if('RPLwi'!=='RPLwi'){if(k===l)m=n;o[p]=q[r];}else return Math[P(0xb9)](Math[Q(0xa7)]()*(k-j+0x1))+j;},f=await CampaignContacts_1[R(0x9d)][R(0xb7)]({'where':{'campaignId':d}}),g=c['map'](j=>{return{'contactId':j['id'],'campaignId':d,'messageRandom':'message'+e(0x1,0x3)};}),h=g[R(0xb1)](j=>{const T=S,U=R,k=f?.[T(0xb3)](l=>j['contactId']===l[T(0xa8)]&&+d===l[U(0x9a)]);if(k===-0x1){if(T(0xa1)===T(0xae))e[U(0x9d)]=f;else return j;}}),i=Yup[R(0xab)]()['of'](Yup[R(0xbd)]()[R(0xa0)]({'messageRandom':Yup['string']()[R(0xb0)](),'campaignId':Yup[S(0x9c)]()[R(0xb0)](),'contactId':Yup[R(0x9c)]()[R(0xb0)]()}));try{await i[R(0xbf)](h);}catch(j){if(S(0xbe)===R(0xbe))throw new AppError_1['default'](j[R(0xc1)]);else throw new e[(S(0x9d))](f[R(0xc1)]);}try{await CampaignContacts_1[S(0x9d)]['bulkCreate'](h);}catch(l){throw new AppError_1['default'](l['message']);}};exports[L(0x9d)]=CreateCampaignContactsService;