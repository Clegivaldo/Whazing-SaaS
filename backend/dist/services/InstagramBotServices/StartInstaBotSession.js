'use strict';const m=b,o=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=parseInt(k(0x1f3))/0x1+parseInt(k(0x1f9))/0x2*(parseInt(k(0x203))/0x3)+parseInt(l(0x204))/0x4*(-parseInt(k(0x210))/0x5)+parseInt(l(0x1f2))/0x6*(-parseInt(k(0x206))/0x7)+-parseInt(l(0x1f4))/0x8*(parseInt(k(0x1f8))/0x9)+-parseInt(l(0x205))/0xa*(parseInt(k(0x20d))/0xb)+-parseInt(k(0x202))/0xc*(-parseInt(l(0x1fb))/0xd);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x567a4));var __importDefault=this&&this[m(0x20f)]||function(c){const n=m;return c&&c[n(0x1ff)]?c:{'default':c};};function b(c,d){const e=a();return b=function(f,g){f=f-0x1f2;let h=e[f];return h;},b(c,d);}Object[m(0x20b)](exports,'__esModule',{'value':!![]}),exports['StartInstaBotSession']=void 0x0;function a(){const t=['DISCONNECTED','../../errors/AppError','8667fnyZaz','90WcsBYH','./InstagramSendMessagesSystem','26myqYPb','../../utils/logger','InstaBotMessageListener','CHECK_INTERVAL','__esModule','CONNECTED','logger','8842968LpcuMb','10206ChxVjB','46452GPNGVM','1257020QTjsbQ','512813wPDiqe','emit','./InstaBotMessageListener','env','tenantId','defineProperty','update','33qRUUkS',':whatsappSession','__importDefault','230wzglYJ','initInstaBot','ERROR_CONNECT_INSTAGRAM:\x20','default','ERROR:\x20checkMessages\x20Tenant:\x20','18CORbep','369728PqvdvP','4248WfOJRf','error'];a=function(){return t;};return a();}const AppError_1=__importDefault(require(o(0x1f7))),InstaBot_1=require('../../libs/InstaBot'),socket_1=require('../../libs/socket'),logger_1=require(o(0x1fc)),InstaBotMessageListener_1=require(o(0x208)),InstagramSendMessagesSystem_1=__importDefault(require(o(0x1fa))),checkingInstagram={},checkMessages=async(c,d)=>{const p=m,q=m;if(checkingInstagram[d])return;checkingInstagram[d]=!![];try{await(0x0,InstagramSendMessagesSystem_1[p(0x213)])(c,d);}catch(e){logger_1[p(0x201)][p(0x1f5)](q(0x214)+d+'::',e);}checkingInstagram[d]=![];},StartInstaBotSession=async c=>{const r=o,s=o,d=(0x0,socket_1['getIO'])();await c[r(0x20c)]({'status':'OPENING'}),d[r(0x207)](c[s(0x20a)]+s(0x20e),{'action':'update','session':c});try{const e=await(0x0,InstaBot_1[r(0x211)])(c);(0x0,InstaBotMessageListener_1[r(0x1fd)])(e),setInterval(checkMessages,+(process[r(0x209)][s(0x1fe)]||0x1388),e,c[s(0x20a)]),logger_1[r(0x201)]['info']('Conex√£o\x20Instagram\x20iniciada\x20|\x20Empresa:\x20'+c[r(0x20a)]),await c[s(0x20c)]({'status':s(0x200)}),d[s(0x207)](c['tenantId']+r(0x20e),{'action':s(0x20c),'session':c});}catch(f){logger_1[s(0x201)][r(0x1f5)]('StartInstaBotSession\x20|\x20Error:\x20'+f),await c['update']({'status':s(0x1f6)}),d['emit'](c[r(0x20a)]+s(0x20e),{'action':s(0x20c),'session':c});throw new AppError_1['default'](r(0x212)+f,0x194);}};exports['StartInstaBotSession']=StartInstaBotSession;