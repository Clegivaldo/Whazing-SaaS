'use strict';
const T = b, U = b;
(function (c, d) {
    const R = b, S = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(R(0x1fc)) / (0x264f * -0x1 + -0x1 * 0x19d5 + 0x4025) * (parseInt(S(0x24f)) / (-0x1b35 + 0x253a + -0xa03)) + -parseInt(S(0x243)) / (0xbb * -0x16 + -0x1d5 + 0x11ea) * (-parseInt(S(0x223)) / (-0xc5b + -0x42b + 0x108a)) + -parseInt(R(0x242)) / (0x4d * -0x11 + -0x1e63 * 0x1 + 0x2385) + -parseInt(R(0x26c)) / (-0x25de + -0x19f1 * -0x1 + 0x17 * 0x85) * (parseInt(R(0x248)) / (0xa0f * 0x1 + -0x981 + -0x87)) + parseInt(S(0x224)) / (0x2 * -0x50b + -0x1e * 0x12f + -0x28 * -0x124) + -parseInt(R(0x245)) / (-0x1f25 + 0x176e + 0x1f0 * 0x4) + parseInt(R(0x210)) / (-0x10c3 * -0x1 + -0x4 * 0x870 + -0x3 * -0x5ad);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x754b + -0x205ff + 0x75ada));
function a() {
    const a0 = [
        'pending',
        'chat',
        'Error\x20send',
        'HtAVj',
        'payload',
        'Emit',
        'sended',
        'update',
        '\x20message\x20(',
        'id:\x20',
        'logger',
        'lte',
        'mwJyb',
        'olVPm',
        'dNRCy',
        'ext',
        '.mp4',
        'Error\x20mess',
        'ptt',
        'ygKAj',
        ')::\x20',
        'Message\x20Up',
        '../../util',
        'LvJPh',
        'mTime',
        'mediaType',
        '14262ZOJyQO',
        'where',
        'YrKEd',
        'broadcastV',
        'age\x20is\x20(te',
        '\x20|\x20Ticket:',
        'log',
        'Czbog',
        'item_id',
        'ideo',
        'dataValues',
        'timestamp',
        'e\x20text',
        '../../mode',
        'join',
        'video',
        'e\x20media',
        's/sleepRan',
        'IioBw',
        'ls/Message',
        'dOYzg',
        'fluent-ffm',
        'saveToFile',
        'ibsJv',
        '1fKxJpM',
        'sequelize',
        'info',
        'findAll',
        'audio',
        'text',
        'closed',
        'oice',
        'toFormat',
        'end',
        'messageId',
        'type',
        'public',
        'AUHsl',
        'contact',
        'CucGv',
        'lJiGN',
        'UjiAl',
        'fs/promise',
        'jpeg',
        '4452560RjqrDZ',
        'hoto',
        '__esModule',
        'sharp',
        'peg',
        'status',
        'mp4',
        'includes',
        'path',
        'cVZjS',
        'tenantId',
        'directThre',
        'ticket',
        'oofqe',
        'EmnPx',
        'date\x20ok',
        'entity',
        'default',
        'quotedMsg',
        '697608MzFZYQ',
        '490384gThoQZ',
        'rYBoQ',
        'UZwaH',
        'lAXBx',
        'sendMessag',
        'file',
        'defineProp',
        'chat:ack',
        'image',
        'broadcastT',
        'ls/Ticket',
        'toBuffer',
        'body',
        'mediaName',
        'nant:\x20',
        'instagram',
        'qcktI',
        'ack',
        'value',
        'qCiDz',
        'mzEXH',
        'mediaUrl',
        'domTime',
        'sleepRando',
        'jQKSp',
        'IKncN',
        'instagramP',
        'split',
        'erty',
        'broadcastP',
        '603340iiMgaL',
        '6HiYDTS',
        'ASC',
        '4600917elWkom',
        's/logger',
        'yAWZG',
        '1141cmJHVS',
        'createdAt',
        'error',
        '../../help',
        '__importDe',
        'fault',
        'ers/socket',
        '1086808EiKDBN',
        'IqILr',
        'readFile'
    ];
    a = function () {
        return a0;
    };
    return a();
}
var __importDefault = this && this[T(0x24c) + T(0x24d)] || function (c) {
    const V = T;
    return c && c[V(0x212)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x116b + -0x1173 + 0x24ce);
        let h = e[f];
        return h;
    }, b(c, d);
}
const q = {};
q[U(0x236)] = !![], Object[T(0x22a) + T(0x240)](exports, T(0x212), q);
const promises_1 = require(T(0x20e) + 's'), fluent_ffmpeg_1 = __importDefault(require(U(0x1f9) + T(0x214))), path_1 = require(U(0x218)), sequelize_1 = require(U(0x1fd)), sharp_1 = __importDefault(require(T(0x213))), socketEmit_1 = __importDefault(require(T(0x24b) + T(0x24e) + U(0x257))), Message_1 = __importDefault(require(U(0x1f1) + T(0x1f7))), Ticket_1 = __importDefault(require(U(0x1f1) + T(0x22e))), logger_1 = require(U(0x268) + U(0x246)), sleepRandomTime_1 = require(T(0x268) + U(0x1f5) + U(0x23a)), SendMessagesSystemWbot = async (l, m) => {
        const W = U, X = U, n = {
                'rYBoQ': W(0x216),
                'IKncN': X(0x24a),
                'lAXBx': X(0x205),
                'CucGv': X(0x252),
                'UjiAl': X(0x20a),
                'jQKSp': X(0x21c),
                'Czbog': X(0x202),
                'olVPm': W(0x233),
                'AUHsl': X(0x222),
                'YrKEd': W(0x249),
                'EmnPx': X(0x244),
                'qcktI': W(0x253),
                'dNRCy': X(0x201),
                'oofqe': W(0x208),
                'dOYzg': function (t, u) {
                    return t === u;
                },
                'qCiDz': W(0x200),
                'ibsJv': W(0x264),
                'mwJyb': function (t, u) {
                    return t === u;
                },
                'ygKAj': W(0x22c),
                'IioBw': function (t, u) {
                    return t === u;
                },
                'HtAVj': W(0x1f3),
                'yAWZG': W(0x228) + X(0x1f4),
                'lJiGN': W(0x228) + X(0x1f0),
                'UZwaH': W(0x258),
                'IqILr': W(0x22b),
                'LvJPh': X(0x267) + X(0x21f),
                'cVZjS': function (t, u) {
                    return t(u);
                },
                'mzEXH': function (t, u) {
                    return t(u);
                }
            }, o = { [sequelize_1['Op']['is']]: null }, p = {
                'fromMe': !![],
                'messageId': o,
                'status': n[W(0x20b)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][W(0x25d)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, r = await Message_1[X(0x221)][W(0x1ff)]({
                'where': p,
                'include': [
                    n[W(0x20d)],
                    {
                        'model': Ticket_1[W(0x221)],
                        'as': n[X(0x23c)],
                        'where': {
                            'tenantId': m,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: n[X(0x273)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': n[X(0x25f)],
                            'whatsappId': l['id']
                        },
                        'include': [n[X(0x20d)]]
                    },
                    {
                        'model': Message_1[W(0x221)],
                        'as': n[X(0x209)],
                        'include': [n[X(0x20d)]]
                    }
                ],
                'order': [[
                        n[X(0x26e)],
                        n[W(0x21e)]
                    ]]
            });
        let s;
        for (const t of r) {
            const u = t, {ticket: v} = u, w = v[W(0x20a)][X(0x23e) + 'K'], x = await l[X(0x220)][W(0x21b) + 'ad']([w]);
            try {
                if (![
                        n[W(0x234)],
                        n[W(0x260)]
                    ][X(0x217)](u[X(0x26b)]) && u[W(0x231)]) {
                    const E = (0x8 * 0xce + 0x8 * -0x2c2 + 0x1 * 0xfa0, path_1[W(0x1f2)])(__dirname, '..', '..', '..', n[W(0x21d)]), F = (-0x1f56 + -0xb * -0x373 + -0x1 * 0x69b, path_1[W(0x1f2)])(E, u[X(0x231)]), G = await (0xeff + 0x42e + -0x132d * 0x1, promises_1[X(0x251)])(F);
                    console[X(0x272)](F);
                    if (n[W(0x1f8)](u[X(0x26b)], n[W(0x237)]) || n[X(0x1f8)](u[X(0x26b)], n[W(0x1fb)])) {
                        const H = u[X(0x231)][W(0x23f)]('.'), I = (-0x232c + -0xab4 + -0x5bc * -0x8, path_1[X(0x1f2)])(E, H[-0x1ca + 0x1d93 + -0x1bc9] + W(0x262));
                        await new Promise((L, M) => {
                            const Y = X, Z = X;
                            (0x49 * -0x17 + 0xbd0 + 0x1 * -0x541, fluent_ffmpeg_1[Y(0x221)])(F)[Y(0x204)](n[Z(0x225)])['on'](n[Z(0x23d)], N => M(N))['on'](n[Z(0x227)], () => L(!![]))[Z(0x1fa)](I);
                        });
                        const J = await (-0x515 + -0x6 * -0x55b + -0x569 * 0x5, promises_1[W(0x251)])(I), K = {};
                        K[W(0x229)] = J, s = await x[X(0x26f) + X(0x203)](K);
                    }
                    if (n[W(0x25e)](u[X(0x26b)], n[W(0x265)])) {
                        const L = await (-0x2 * -0x5eb + -0x11b9 * -0x1 + -0x1d8f, sharp_1[W(0x221)])(G)[X(0x20f)]()[W(0x22f)](), M = {};
                        M[W(0x229)] = L, s = await x[X(0x241) + X(0x211)](M);
                    }
                    if (n[W(0x1f6)](u[X(0x26b)], n[W(0x255)])) {
                        const N = {};
                        N[W(0x1f3)] = G, s = await x[W(0x26f) + X(0x275)](N);
                    }
                    logger_1[W(0x25c)][X(0x1fe)](n[W(0x247)]);
                }
                [
                    n[W(0x234)],
                    n[X(0x260)]
                ][W(0x217)](u[W(0x26b)]) && !u[X(0x231)] && (s = await x[X(0x22d) + X(0x261)](u[X(0x230)]), logger_1[W(0x25c)][X(0x1fe)](n[W(0x20c)]));
                const y = {
                    ...u,
                    ...s
                };
                y['id'] = u['id'], y[X(0x277)] = u[X(0x277)], y[X(0x206)] = s[X(0x274)], y[X(0x215)] = n[W(0x226)], y[X(0x235)] = 0x2;
                const z = y, A = { ...z }, B = {};
                B['id'] = u['id'];
                const C = {};
                C[X(0x26d)] = B, await Message_1[X(0x221)][W(0x259)](A, C);
                const D = {};
                D[X(0x21a)] = v[W(0x21a)], D[W(0x207)] = n[X(0x250)], D[W(0x256)] = { ...u[W(0x276)] }, D[W(0x256)][W(0x239)] = u[X(0x239)], D[W(0x256)]['id'] = u['id'], D[W(0x256)][X(0x277)] = u[W(0x277)], D[W(0x256)][W(0x206)] = s[W(0x274)], D[W(0x256)][X(0x215)] = n[X(0x226)], D[W(0x256)][W(0x235)] = 0x2, (-0xd25 + 0x8d8 + -0x16f * -0x3, socketEmit_1[W(0x221)])(D), logger_1[X(0x25c)][W(0x1fe)](n[X(0x269)]), await (0x2307 + -0x6 * 0x33b + -0xfa5, sleepRandomTime_1[X(0x23b) + X(0x26a)])({
                    'minMilliseconds': n[W(0x219)](Number, 0x3 * 0x694 + 0x1069 + -0x1c55 * 0x1),
                    'maxMilliseconds': n[X(0x238)](Number, -0x2 * -0x1127 + 0x1c3 + 0x17 * -0x10f)
                });
            } catch (O) {
                const P = u['id'], Q = u[X(0x21c)]['id'];
                logger_1[W(0x25c)][X(0x24a)](X(0x263) + X(0x270) + W(0x232) + m + (X(0x271) + '\x20') + Q + ')'), logger_1[W(0x25c)][X(0x24a)](X(0x254) + X(0x25a) + W(0x25b) + P + W(0x266) + O);
            }
        }
    };
exports[U(0x221)] = SendMessagesSystemWbot;