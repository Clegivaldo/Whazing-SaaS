'use strict';
const T = b, U = b;
function a() {
    const a0 = [
        'sharp',
        'wblVy',
        'CRspY',
        'mediaUrl',
        '859765hRLoNN',
        's/sleepRan',
        'contact',
        'XtlQl',
        'pending',
        'ideo',
        '.mp4',
        '__importDe',
        'gPKAX',
        '386244LUnPtM',
        'id:\x20',
        'nant:\x20',
        'body',
        '56DhrVCK',
        'mediaName',
        'chat:ack',
        'jpeg',
        'fluent-ffm',
        'image',
        'BNQLr',
        'toBuffer',
        'where',
        'ack',
        'broadcastT',
        'includes',
        'chat',
        'end',
        's/logger',
        'sleepRando',
        'sended',
        'paSle',
        'e\x20media',
        'ers/socket',
        '\x20|\x20Ticket:',
        'quotedMsg',
        'ls/Ticket',
        'file',
        'type',
        'peg',
        'log',
        'Zzwxu',
        'join',
        '../../mode',
        'rQVCA',
        'instagramP',
        'domTime',
        'cKDpU',
        'toFormat',
        'saveToFile',
        '46EAUAlp',
        'tHGtA',
        'entity',
        'mp4',
        'Error\x20mess',
        'ptt',
        '1366938uCkuww',
        'zPAyc',
        'ticket',
        'Message\x20Up',
        'messageId',
        'date\x20ok',
        'broadcastV',
        'path',
        'dRMKd',
        'EbdpQ',
        '3181144vxEVYH',
        'audio',
        'default',
        'ASC',
        'video',
        'UzcCk',
        'timestamp',
        'xZKGv',
        'sHwUh',
        'ikuLy',
        'update',
        'defineProp',
        'Qghys',
        'mediaType',
        'closed',
        'tenantId',
        'oice',
        'info',
        'ls/Message',
        'sendMessag',
        'payload',
        'logger',
        'age\x20is\x20(te',
        'mCQMq',
        '9qBkzjS',
        'error',
        'dataValues',
        'DtAwH',
        'Error\x20send',
        '13589LqkOPF',
        'split',
        'fs/promise',
        'ftLFJ',
        '../../util',
        'mTime',
        'erty',
        'findAll',
        'e\x20text',
        'Emit',
        'lte',
        'broadcastP',
        '14097530jDzkww',
        'instagram',
        'text',
        'RoQGN',
        'gwjBV',
        'pVYcz',
        'hoto',
        '\x20message\x20(',
        'ext',
        'sequelize',
        '__esModule',
        ')::\x20',
        '361508FMdADS',
        'item_id',
        'createdAt',
        'SngBM',
        'status',
        'value',
        'fault',
        'dOlXy',
        'public',
        '../../help',
        'directThre',
        'uiXSW',
        'spImK',
        'readFile'
    ];
    a = function () {
        return a0;
    };
    return a();
}
(function (c, d) {
    const R = b, S = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(R(0x21a)) / (-0x2674 + 0x2389 + 0x16 * 0x22) * (parseInt(S(0x1ed)) / (-0x21c3 + -0x83 * -0x41 + 0x82)) + -parseInt(S(0x1f3)) / (-0x5 * 0x47d + -0x255e + 0x3bd2) + parseInt(S(0x1aa)) / (0x21d2 + 0x4f * 0x36 + -0x3278) + -parseInt(S(0x1bc)) / (-0x1771 + -0xc93 + 0x2409) + parseInt(R(0x1c5)) / (-0xc0d * 0x1 + -0x70b + 0x131e) * (-parseInt(S(0x1c9)) / (0x233c + -0x1827 * -0x1 + 0x1dae * -0x2)) + -parseInt(S(0x1fd)) / (-0x21ad + -0x171c + -0x5 * -0xb5d) * (parseInt(S(0x215)) / (-0x243a * -0x1 + -0x368 * 0xa + 0x5 * -0x6d)) + parseInt(R(0x19e)) / (-0x2f8 + -0x26f0 + 0x29f2);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x424b5 + -0x42b8a + -0x2 * -0x63c3d));
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x1715 + 0xff6 + 0x45a * 0x2);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[T(0x1c3) + U(0x1b0)] || function (c) {
    const V = T;
    return c && c[V(0x1a8)] ? c : { 'default': c };
};
const q = {};
q[U(0x1af)] = !![], Object[U(0x208) + T(0x198)](exports, T(0x1a8), q);
const promises_1 = require(T(0x21c) + 's'), fluent_ffmpeg_1 = __importDefault(require(T(0x1cd) + T(0x1e2))), path_1 = require(T(0x1fa)), sequelize_1 = require(T(0x1a7)), sharp_1 = __importDefault(require(T(0x1b8))), socketEmit_1 = __importDefault(require(T(0x1b3) + U(0x1dc) + U(0x19b))), Message_1 = __importDefault(require(T(0x1e6) + U(0x20f))), Ticket_1 = __importDefault(require(U(0x1e6) + T(0x1df))), logger_1 = require(U(0x196) + U(0x1d7)), sleepRandomTime_1 = require(T(0x196) + T(0x1bd) + U(0x1e9)), SendMessagesSystemWbot = async (l, m) => {
        const W = U, X = T, n = {
                'ftLFJ': W(0x1f0),
                'Zzwxu': W(0x216),
                'xZKGv': X(0x1d6),
                'UzcCk': W(0x1c0),
                'sHwUh': W(0x1be),
                'DtAwH': X(0x1f5),
                'wblVy': W(0x20b),
                'gPKAX': X(0x19f),
                'BNQLr': X(0x1de),
                'rQVCA': X(0x1ac),
                'mCQMq': W(0x200),
                'spImK': W(0x1d5),
                'uiXSW': W(0x1a0),
                'pVYcz': X(0x1b2),
                'CRspY': function (t, u) {
                    return t === u;
                },
                'RoQGN': W(0x1fe),
                'ikuLy': X(0x1f2),
                'EbdpQ': function (t, u) {
                    return t === u;
                },
                'XtlQl': X(0x1ce),
                'Qghys': function (t, u) {
                    return t === u;
                },
                'gwjBV': W(0x201),
                'SngBM': W(0x210) + W(0x1db),
                'dRMKd': X(0x210) + X(0x19a),
                'dOlXy': X(0x1d9),
                'zPAyc': X(0x1cb),
                'cKDpU': W(0x1f6) + W(0x1f8),
                'paSle': function (t, u) {
                    return t(u);
                },
                'tHGtA': function (t, u) {
                    return t(u);
                }
            }, o = { [sequelize_1['Op']['is']]: null }, p = {
                'fromMe': !![],
                'messageId': o,
                'status': n[W(0x202)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][W(0x19c)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, r = await Message_1[X(0x1ff)][X(0x199)]({
                'where': p,
                'include': [
                    n[W(0x205)],
                    {
                        'model': Ticket_1[X(0x1ff)],
                        'as': n[X(0x218)],
                        'where': {
                            'tenantId': m,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: n[W(0x1b9)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': n[X(0x1c4)],
                            'whatsappId': l['id']
                        },
                        'include': [n[W(0x205)]]
                    },
                    {
                        'model': Message_1[X(0x1ff)],
                        'as': n[X(0x1cf)],
                        'include': [n[X(0x205)]]
                    }
                ],
                'order': [[
                        n[W(0x1e7)],
                        n[X(0x214)]
                    ]]
            });
        let s;
        for (const t of r) {
            const u = t, {ticket: v} = u, w = v[X(0x1be)][W(0x1e8) + 'K'], x = await l[X(0x1ef)][W(0x1b4) + 'ad']([w]);
            try {
                if (![
                        n[W(0x1b6)],
                        n[X(0x1b5)]
                    ][X(0x1d4)](u[W(0x20a)]) && u[W(0x1ca)]) {
                    const E = (-0x18ec + -0x9 * -0x2f1 + -0x18d, path_1[X(0x1e5)])(__dirname, '..', '..', '..', n[W(0x1a3)]), F = (0xd9c + 0x1bd7 + -0x2973, path_1[X(0x1e5)])(E, u[X(0x1ca)]), G = await (-0x1 * 0x11b + 0x1a03 + 0x31d * -0x8, promises_1[X(0x1b7)])(F);
                    console[X(0x1e3)](F);
                    if (n[W(0x1ba)](u[W(0x20a)], n[X(0x1a1)]) || n[W(0x1ba)](u[X(0x20a)], n[W(0x206)])) {
                        const H = u[X(0x1ca)][X(0x21b)]('.'), I = (-0xd * -0x2f5 + -0x1924 + -0xd4d, path_1[X(0x1e5)])(E, H[-0x2cf + -0x1a1 + 0x470] + W(0x1c2));
                        await new Promise((L, M) => {
                            const Y = X, Z = W;
                            (-0x117b + 0xb * -0x2af + 0x2f00, fluent_ffmpeg_1[Y(0x1ff)])(F)[Z(0x1eb)](n[Z(0x195)])['on'](n[Y(0x1e4)], N => M(N))['on'](n[Z(0x204)], () => L(!![]))[Z(0x1ec)](I);
                        });
                        const J = await (-0x2ff + -0x1f0e + -0x17b * -0x17, promises_1[X(0x1b7)])(I), K = {};
                        K[X(0x1e0)] = J, s = await x[W(0x1f9) + W(0x20d)](K);
                    }
                    if (n[X(0x1fc)](u[W(0x20a)], n[X(0x1bf)])) {
                        const L = await (-0xc5f + -0x67c + 0x12db, sharp_1[X(0x1ff)])(G)[W(0x1cc)]()[W(0x1d0)](), M = {};
                        M[X(0x1e0)] = L, s = await x[X(0x19d) + X(0x1a4)](M);
                    }
                    if (n[X(0x209)](u[W(0x20a)], n[W(0x1a2)])) {
                        const N = {};
                        N[W(0x201)] = G, s = await x[W(0x1f9) + W(0x1c1)](N);
                    }
                    logger_1[W(0x212)][W(0x20e)](n[X(0x1ad)]);
                }
                [
                    n[W(0x1b6)],
                    n[X(0x1b5)]
                ][X(0x1d4)](u[W(0x20a)]) && !u[X(0x1ca)] && (s = await x[X(0x1d3) + W(0x1a6)](u[W(0x1c8)]), logger_1[W(0x212)][X(0x20e)](n[X(0x1fb)]));
                const y = {
                    ...u,
                    ...s
                };
                y['id'] = u['id'], y[X(0x203)] = u[X(0x203)], y[X(0x1f7)] = s[X(0x1ab)], y[X(0x1ae)] = n[X(0x1b1)], y[X(0x1d2)] = 0x2;
                const z = y, A = { ...z }, B = {};
                B['id'] = u['id'];
                const C = {};
                C[X(0x1d1)] = B, await Message_1[X(0x1ff)][W(0x207)](A, C);
                const D = {};
                D[W(0x20c)] = v[W(0x20c)], D[W(0x1e1)] = n[X(0x1f4)], D[W(0x211)] = { ...u[W(0x217)] }, D[W(0x211)][X(0x1bb)] = u[W(0x1bb)], D[W(0x211)]['id'] = u['id'], D[W(0x211)][X(0x203)] = u[X(0x203)], D[W(0x211)][W(0x1f7)] = s[W(0x1ab)], D[W(0x211)][W(0x1ae)] = n[W(0x1b1)], D[W(0x211)][X(0x1d2)] = 0x2, (0x2f * -0x7b + 0x21b3 + -0xb1e, socketEmit_1[X(0x1ff)])(D), logger_1[W(0x212)][W(0x20e)](n[W(0x1ea)]), await (-0x1 * 0x43c + 0x1fdd + -0x1ba1, sleepRandomTime_1[X(0x1d8) + W(0x197)])({
                    'minMilliseconds': n[W(0x1da)](Number, 0x27f + -0x17a5 * 0x1 + 0x1cf6),
                    'maxMilliseconds': n[X(0x1ee)](Number, -0x50d * -0x3 + -0x10a0 + 0xd31)
                });
            } catch (O) {
                const P = u['id'], Q = u[X(0x1f5)]['id'];
                logger_1[W(0x212)][X(0x216)](X(0x1f1) + W(0x213) + W(0x1c7) + m + (W(0x1dd) + '\x20') + Q + ')'), logger_1[W(0x212)][W(0x216)](W(0x219) + X(0x1a5) + X(0x1c6) + P + W(0x1a9) + O);
            }
        }
    };
exports[T(0x1ff)] = SendMessagesSystemWbot;