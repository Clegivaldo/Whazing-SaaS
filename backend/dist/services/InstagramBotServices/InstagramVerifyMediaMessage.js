'use strict';
const _0x162cc3 = _0x2709;
(function (_0x2bb938, _0x4d67b8) {
    const _0x3478d8 = _0x2709, _0x164c25 = _0x2bb938();
    while (!![]) {
        try {
            const _0x180f60 = -parseInt(_0x3478d8(0x10e)) / (0x1d68 * 0x1 + -0xc95 * 0x2 + -0x43d * 0x1) * (-parseInt(_0x3478d8(0xd3)) / (-0x1 * -0x2645 + -0x125d + -0x13e6)) + parseInt(_0x3478d8(0xee)) / (0x2 * -0x887 + 0xdcd * 0x1 + -0xb * -0x4c) * (parseInt(_0x3478d8(0xe8)) / (0x1 * -0xf2b + -0x632 * 0x4 + 0x27f7)) + parseInt(_0x3478d8(0x10d)) / (-0x6c3 + 0xe54 * -0x1 + -0x4 * -0x547) * (parseInt(_0x3478d8(0xe3)) / (-0x23e1 * 0x1 + -0x1deb + -0x41d2 * -0x1)) + -parseInt(_0x3478d8(0x109)) / (0x1ef + 0x5e3 + -0x7cb) * (-parseInt(_0x3478d8(0xed)) / (0x26eb + -0x6d6 + -0x200d)) + -parseInt(_0x3478d8(0xd9)) / (0xe3e * 0x1 + 0x22cf + -0x2 * 0x1882) * (-parseInt(_0x3478d8(0xe2)) / (-0x18e0 * 0x1 + -0x450 + 0x1d3a)) + parseInt(_0x3478d8(0xff)) / (0xfc1 + 0x1 * -0x12a5 + 0x2ef) + -parseInt(_0x3478d8(0xe9)) / (-0xe67 + -0x3d8 + 0x29d * 0x7) * (parseInt(_0x3478d8(0xe0)) / (-0x56f + -0x1715 + -0x1 * -0x1c91));
            if (_0x180f60 === _0x4d67b8)
                break;
            else
                _0x164c25['push'](_0x164c25['shift']());
        } catch (_0xbb2d1d) {
            _0x164c25['push'](_0x164c25['shift']());
        }
    }
}(_0x21a7, -0x1a95d + -0x6d320 + 0xd636c));
var __importDefault = this && this[_0x162cc3(0xdb) + _0x162cc3(0xd8)] || function (_0x4b2dfb) {
    const _0x3dd1ca = _0x162cc3;
    return _0x4b2dfb && _0x4b2dfb[_0x3dd1ca(0xfe)] ? _0x4b2dfb : { 'default': _0x4b2dfb };
};
function _0x2709(_0x32c522, _0x30c20b) {
    const _0x302644 = _0x21a7();
    return _0x2709 = function (_0x672f9d, _0x51e1c7) {
        _0x672f9d = _0x672f9d - (-0x231b + -0x1eb6 + 0x4281);
        let _0x1d6131 = _0x302644[_0x672f9d];
        return _0x1d6131;
    }, _0x2709(_0x32c522, _0x30c20b);
}
const _0x5f323a = {};
function _0x21a7() {
    const _0x11b49f = [
        'ASyCt',
        'image',
        'Services/C',
        'axios',
        'XLdog',
        'WCzMl',
        'qJsRC',
        'item_type',
        '__esModule',
        '3362920PdCvtL',
        'cwWOS',
        'stream',
        'finish',
        'tenantId',
        'DPRkr',
        'audio_src',
        'eStream',
        'vídeo',
        'nTdwj',
        '662851TtoGhQ',
        'Daihp',
        'imagem',
        'join',
        '275CfRfKx',
        '29249jICuDg',
        'video_vers',
        'cQjjG',
        'RfWYa',
        'media',
        'arquivo',
        'messageDat',
        'caption',
        'media_type',
        'xaocq',
        'FCAmH',
        'data',
        'getTime',
        'KTqdL',
        'createWrit',
        'error',
        'GET',
        'ERROR\x20DONW',
        'path',
        'default',
        '../Message',
        'candidates',
        'received',
        'fkNue',
        'reateMessa',
        'MZrue',
        'wWvac',
        '4|3|0|1|2',
        '1|3|4|0|2',
        'toString',
        'sFprD',
        'erty',
        'update',
        'audio',
        'geService',
        'ssWJh',
        '3|2|4|0|1',
        'split',
        'kwAYD',
        'llZTz',
        'length',
        'pipe',
        '42OefQqZ',
        'value',
        'aYaxG',
        'MVNAo',
        'áudio',
        'fault',
        '39411MpXsNA',
        'ions2',
        '__importDe',
        'public',
        'text',
        'ions',
        'applicatio',
        '637QjtRaC',
        'vNUUL',
        '240jIBOlh',
        '49722bulAQf',
        'AjXVg',
        'url',
        'rsRRi',
        'item_id',
        '2438404KnJhYt',
        '502836mDnppS',
        'defineProp',
        'MWLjX',
        'video',
        '24oNOsTo',
        '3rqSLPM',
        'voice_medi',
        'mAdHJ',
        'message',
        'image_vers',
        'DRNOk',
        'sended',
        'LOAD'
    ];
    _0x21a7 = function () {
        return _0x11b49f;
    };
    return _0x21a7();
}
_0x5f323a[_0x162cc3(0xd4)] = !![], Object[_0x162cc3(0xea) + _0x162cc3(0xc8)](exports, _0x162cc3(0xfe), _0x5f323a);
const path_1 = require(_0x162cc3(0xbb)), fs_1 = require('fs'), axios_1 = __importDefault(require(_0x162cc3(0xf9))), CreateMessageService_1 = __importDefault(require(_0x162cc3(0xbd) + _0x162cc3(0xf8) + _0x162cc3(0xc1) + _0x162cc3(0xcb))), getExt = _0x3d5be2 => {
        const _0x35c6ff = _0x162cc3, _0x59c9d4 = {};
        _0x59c9d4[_0x35c6ff(0xc3)] = function (_0x23dbe7, _0x50d331) {
            return _0x23dbe7 - _0x50d331;
        };
        const _0x4e7ba1 = _0x59c9d4, _0xfc7ebd = _0x3d5be2[_0x35c6ff(0xce)]('?'), _0x3a37d5 = _0xfc7ebd[-0xfb * -0x5 + 0x2 * 0xb3e + -0x1b63][_0x35c6ff(0xce)]('/'), _0x3fccb1 = _0x3a37d5[_0x4e7ba1[_0x35c6ff(0xc3)](_0x3a37d5[_0x35c6ff(0xd1)], -0x1b4e + 0x25 * 0xc3 + -0xe0)][_0x35c6ff(0xce)]('.');
        return _0x3fccb1[-0x17f2 + -0x899 * 0x3 + 0x31be];
    }, downloadFile = async (_0x1ed522, _0x313278) => {
        const _0x2c34c5 = _0x162cc3, _0x2d5dd3 = {
                'ASyCt': _0x2c34c5(0xba) + _0x2c34c5(0xf5),
                'llZTz': function (_0x4fd348, _0x4b92be) {
                    return _0x4fd348(_0x4b92be);
                },
                'MZrue': _0x2c34c5(0x102),
                'mAdHJ': _0x2c34c5(0xb8),
                'FCAmH': _0x2c34c5(0xb9),
                'cQjjG': _0x2c34c5(0x101)
            }, _0x51072e = await (0x446 * -0x9 + -0x2 * 0x123c + 0x4aee, axios_1[_0x2c34c5(0xbc)])({
                'url': _0x1ed522[_0x2c34c5(0xc6)](),
                'method': _0x2d5dd3[_0x2c34c5(0xb3)],
                'responseType': _0x2d5dd3[_0x2c34c5(0x110)]
            });
        await new Promise((_0x4d97d6, _0x4fc373) => {
            const _0x5ebcdf = _0x2c34c5;
            _0x51072e[_0x5ebcdf(0xb4)][_0x5ebcdf(0xd2)]((-0x1 * 0x1d69 + 0x482 * 0x6 + 0x1 * 0x25d, fs_1[_0x5ebcdf(0xb7) + _0x5ebcdf(0x106)])(_0x313278))['on'](_0x2d5dd3[_0x5ebcdf(0xc2)], async () => _0x4d97d6(!![]))['on'](_0x2d5dd3[_0x5ebcdf(0xf0)], _0x128995 => {
                const _0x17ac04 = _0x5ebcdf;
                console[_0x17ac04(0xb8)](_0x2d5dd3[_0x17ac04(0xf6)], _0x128995), _0x2d5dd3[_0x17ac04(0xd0)](_0x4fc373, new Error(_0x128995));
            });
        });
    }, VerifyMediaMessage = async (_0x3977e5, _0x5f2171, _0xf797fc, _0x2a5949) => {
        const _0x13f4e7 = _0x162cc3, _0x1030cd = {
                'WCzMl': _0x13f4e7(0xdf) + 'n',
                'AjXVg': _0x13f4e7(0x113),
                'kwAYD': function (_0x532988, _0xa419cf) {
                    return _0x532988 === _0xa419cf;
                },
                'MVNAo': _0x13f4e7(0xcd),
                'Daihp': _0x13f4e7(0xf7),
                'DPRkr': _0x13f4e7(0x10b),
                'ssWJh': function (_0x52608d, _0xbacbdb) {
                    return _0x52608d(_0xbacbdb);
                },
                'sFprD': _0x13f4e7(0xc5),
                'KTqdL': _0x13f4e7(0xec),
                'vNUUL': _0x13f4e7(0x107),
                'rsRRi': function (_0xf677d, _0x532592) {
                    return _0xf677d(_0x532592);
                },
                'cwWOS': _0x13f4e7(0xef) + 'a',
                'XLdog': _0x13f4e7(0xc4),
                'xaocq': _0x13f4e7(0xca),
                'MWLjX': _0x13f4e7(0xd7),
                'nTdwj': _0x13f4e7(0xdc),
                'qJsRC': function (_0x14c18a, _0x26ea28) {
                    return _0x14c18a === _0x26ea28;
                },
                'RfWYa': function (_0x480167, _0x2c9955, _0x232db9) {
                    return _0x480167(_0x2c9955, _0x232db9);
                },
                'aYaxG': _0x13f4e7(0xf4),
                'DRNOk': _0x13f4e7(0xbf),
                'fkNue': function (_0xc62353, _0x38e952) {
                    return _0xc62353 || _0x38e952;
                }
            };
        let _0x4e91da, _0x237b7b, _0x33a403, _0x44b3d2 = _0x1030cd[_0x13f4e7(0xfb)], _0x2c871c = _0x1030cd[_0x13f4e7(0xe4)];
        if (_0x1030cd[_0x13f4e7(0xcf)](_0x3977e5[_0x13f4e7(0xf1)]?.[_0x13f4e7(0x112)]?.[_0x13f4e7(0xb1)], -0x5 * -0x3fb + 0x18 * 0x17f + -0x37ce)) {
            const _0x3f0387 = _0x1030cd[_0x13f4e7(0xd6)][_0x13f4e7(0xce)]('|');
            let _0x247c29 = 0x765 + 0x1332 + -0x3 * 0x8dd;
            while (!![]) {
                switch (_0x3f0387[_0x247c29++]) {
                case '0':
                    _0x44b3d2 = _0x1030cd[_0x13f4e7(0x10a)];
                    continue;
                case '1':
                    _0x2c871c = _0x1030cd[_0x13f4e7(0x104)];
                    continue;
                case '2':
                    [_0x4e91da] = _0x3977e5[_0x13f4e7(0xf1)][_0x13f4e7(0x112)][_0x13f4e7(0xf2) + _0x13f4e7(0xda)][_0x13f4e7(0xbe)];
                    continue;
                case '3':
                    _0x237b7b = _0x3977e5[_0x13f4e7(0xf1)][_0x13f4e7(0x112)];
                    continue;
                case '4':
                    _0x33a403 = _0x1030cd[_0x13f4e7(0xcc)](getExt, _0x4e91da[_0x13f4e7(0xe5)]);
                    continue;
                }
                break;
            }
        }
        if (_0x1030cd[_0x13f4e7(0xcf)](_0x3977e5[_0x13f4e7(0xf1)]?.[_0x13f4e7(0x112)]?.[_0x13f4e7(0xb1)], 0x31b * -0x1 + -0xc * -0x11f + -0xa57)) {
            const _0x229edf = _0x1030cd[_0x13f4e7(0xc7)][_0x13f4e7(0xce)]('|');
            let _0x3b1772 = 0x5d * -0x2f + -0xa6 * -0x5 + 0xdd5;
            while (!![]) {
                switch (_0x229edf[_0x3b1772++]) {
                case '0':
                    _0x44b3d2 = _0x1030cd[_0x13f4e7(0xb6)];
                    continue;
                case '1':
                    _0x237b7b = _0x3977e5[_0x13f4e7(0xf1)][_0x13f4e7(0x112)];
                    continue;
                case '2':
                    _0x2c871c = _0x1030cd[_0x13f4e7(0xe1)];
                    continue;
                case '3':
                    [_0x4e91da] = _0x3977e5[_0x13f4e7(0xf1)][_0x13f4e7(0x112)][_0x13f4e7(0x10f) + _0x13f4e7(0xde)];
                    continue;
                case '4':
                    _0x33a403 = _0x1030cd[_0x13f4e7(0xe6)](getExt, _0x4e91da[_0x13f4e7(0xe5)]);
                    continue;
                }
                break;
            }
        }
        if (_0x1030cd[_0x13f4e7(0xcf)](_0x3977e5[_0x13f4e7(0xf1)]?.[_0x13f4e7(0xfd)], _0x1030cd[_0x13f4e7(0x100)])) {
            const _0x526fcc = _0x1030cd[_0x13f4e7(0xfa)][_0x13f4e7(0xce)]('|');
            let _0x1a2422 = -0x2 * 0x3e3 + 0x21fd + 0x1 * -0x1a37;
            while (!![]) {
                switch (_0x526fcc[_0x1a2422++]) {
                case '0':
                    _0x33a403 = _0x1030cd[_0x13f4e7(0xcc)](getExt, _0x4e91da[_0x13f4e7(0x105)]);
                    continue;
                case '1':
                    _0x44b3d2 = _0x1030cd[_0x13f4e7(0xb2)];
                    continue;
                case '2':
                    _0x2c871c = _0x1030cd[_0x13f4e7(0xeb)];
                    continue;
                case '3':
                    _0x4e91da = _0x3977e5[_0x13f4e7(0xf1)][_0x13f4e7(0xef) + 'a'][_0x13f4e7(0x112)][_0x13f4e7(0xca)];
                    continue;
                case '4':
                    _0x237b7b = _0x3977e5[_0x13f4e7(0xf1)][_0x13f4e7(0xef) + 'a'][_0x13f4e7(0x112)];
                    continue;
                }
                break;
            }
        }
        const _0x101e62 = _0xf797fc['id'] + '_' + _0x237b7b['id'] + '_' + new Date()[_0x13f4e7(0xb5)]() + '.' + _0x33a403, _0x4ae1e7 = (0x8e1 * -0x2 + 0x878 + 0x2 * 0x4a5, path_1[_0x13f4e7(0x10c)])(__dirname, '..', '..', '..', _0x1030cd[_0x13f4e7(0x108)], _0x101e62), _0x5c74e6 = _0x1030cd[_0x13f4e7(0xfc)](_0x3977e5[_0x13f4e7(0xf1)][_0x13f4e7(0xfd)], _0x1030cd[_0x13f4e7(0x100)]) ? _0x4e91da[_0x13f4e7(0x105)] : _0x4e91da[_0x13f4e7(0xe5)];
        await _0x1030cd[_0x13f4e7(0x111)](downloadFile, _0x5c74e6, _0x4ae1e7);
        const _0x4ae7de = {
            'messageId': _0x1030cd[_0x13f4e7(0xcc)](String, _0x3977e5[_0x13f4e7(0xf1)]?.[_0x13f4e7(0xe7)]),
            'ticketId': _0xf797fc['id'],
            'contactId': _0x5f2171 ? undefined : _0x2a5949['id'],
            'body': _0x3977e5[_0x13f4e7(0xf1)]?.[_0x13f4e7(0xdd)] || _0x3977e5[_0x13f4e7(0xf1)]?.[_0x13f4e7(0xb0)] || _0x2c871c,
            'fromMe': _0x5f2171,
            'read': _0x5f2171,
            'mediaUrl': _0x101e62,
            'mediaType': _0x44b3d2,
            'quotedMsgId': '',
            'timestamp': new Date()[_0x13f4e7(0xb5)](),
            'status': _0x5f2171 ? _0x1030cd[_0x13f4e7(0xd5)] : _0x1030cd[_0x13f4e7(0xf3)]
        };
        await _0xf797fc[_0x13f4e7(0xc9)]({
            'lastMessage': _0x3977e5[_0x13f4e7(0xf1)]?.[_0x13f4e7(0xdd)] || _0x3977e5[_0x13f4e7(0xf1)]?.[_0x13f4e7(0xb0)] || _0x2c871c,
            'lastMessageAt': new Date()[_0x13f4e7(0xb5)](),
            'answered': _0x1030cd[_0x13f4e7(0xc0)](_0x5f2171, ![])
        });
        const _0x4ae228 = {};
        _0x4ae228[_0x13f4e7(0x114) + 'a'] = _0x4ae7de, _0x4ae228[_0x13f4e7(0x103)] = _0xf797fc[_0x13f4e7(0x103)];
        const _0x4efaa8 = await (-0x4 * -0xda + -0x139f + -0x251 * -0x7, CreateMessageService_1[_0x13f4e7(0xbc)])(_0x4ae228);
        return _0x4efaa8;
    };
exports[_0x162cc3(0xbc)] = VerifyMediaMessage;