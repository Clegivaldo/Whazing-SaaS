'use strict';
function a() {
    const X = [
        'video_vers',
        'mWGSS',
        'AFCss',
        'update',
        'iCtPT',
        'reateMessa',
        'stream',
        'received',
        'voice_medi',
        'VcRCE',
        'path',
        'media_type',
        'BiUnq',
        'sended',
        '8685117bPMSZw',
        'split',
        'vídeo',
        'GXbfC',
        'CxbrT',
        '8GWmMCs',
        'DFUXf',
        'ERROR\x20DONW',
        'imagem',
        'nzkxC',
        '16261905IeVIWs',
        '3|1|0|4|2',
        'Aoiju',
        'Services/C',
        'kFZXY',
        'RKCTS',
        'join',
        'kfkTn',
        'LOAD',
        'geService',
        'image',
        'hFYlO',
        'QnLuR',
        'dSkwY',
        'BQTEv',
        'WByBi',
        'AQLMD',
        'ions',
        'NpPfk',
        'VNFUG',
        'video',
        '5JnxCtt',
        '4076334ijISDQ',
        'getTime',
        'dfCsu',
        'image_vers',
        '2|0|4|1|3',
        'ApLaq',
        'tenantId',
        'finish',
        'wRjiQ',
        'PGArL',
        'url',
        'ooNUG',
        '2310236TSzyay',
        'pipe',
        'npkFI',
        'QKeGl',
        'Nfodg',
        'arquivo',
        'tSXOz',
        '189pKELOO',
        'item_id',
        '../Message',
        'eZZOH',
        'fault',
        '0|3|4|2|1',
        '4|1|3|2|0',
        'SruEX',
        'createWrit',
        'ZvvTZ',
        'item_type',
        '567939RsaZWF',
        'length',
        'gbbRJ',
        'default',
        'caption',
        'error',
        'PfRIV',
        '397410QDbauZ',
        'QtQsJ',
        'IRqzV',
        'candidates',
        'data',
        'Ftfxw',
        'messageDat',
        'SCBRZ',
        'zliTx',
        '852SPQRDo',
        'text',
        'mQcjd',
        'áudio',
        '3380agRvux',
        'MyFDK',
        'Pevdc',
        'VluNv',
        'GET',
        'audio',
        'message',
        'media',
        'toString',
        'defineProp',
        'dFkOa',
        'OgyMQ',
        'FdeTv',
        'rvkpf',
        'ions2',
        'applicatio',
        'IsEJg',
        'qAdKZ',
        'value',
        'public',
        'DBJSW',
        'MmzFq',
        'kYTZS',
        '__esModule',
        'audio_src',
        '24bJrYRg',
        'erty',
        'axios',
        '__importDe',
        'eStream'
    ];
    a = function () {
        return X;
    };
    return a();
}
const H = b, I = b;
(function (c, d) {
    const F = b, G = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(F(0x1a7)) / (0x1b * 0x1 + -0x134f + 0x1335 * 0x1) + parseInt(F(0x1bb)) / (-0x7 * -0x509 + -0x1f2b * 0x1 + -0x1 * 0x412) * (parseInt(F(0x1b7)) / (-0x1c * 0x5 + 0x1500 + -0x1471)) + -parseInt(F(0x213)) / (-0x623 * -0x5 + 0x238f + -0x7 * 0x976) + parseInt(G(0x206)) / (0x1 * 0xfe5 + -0x1dfd + -0xe1d * -0x1) * (-parseInt(F(0x207)) / (-0xad * 0x23 + -0x1c4 + 0x87b * 0x3)) + parseInt(F(0x1e7)) / (0xb6f + -0xeb * -0x1c + -0x4 * 0x947) * (-parseInt(G(0x1ec)) / (0x1 * 0x1897 + -0x1 * -0x228a + -0x1 * 0x3b19)) + parseInt(G(0x21a)) / (-0x8ea + 0xb * -0x367 + 0x70 * 0x6a) * (-parseInt(F(0x1ae)) / (-0x15 * -0x13d + 0x3d8 + -0x1dcf)) + -parseInt(F(0x1f1)) / (-0x77 * 0x45 + -0x1067 + 0x1 * 0x3085) * (-parseInt(F(0x1d4)) / (-0x315 * 0x3 + -0x2281 + 0x2 * 0x15e6));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x79db8 + 0x40a4a + 0xdd5df));
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x4e0 + -0x2457 + 0x31 * 0xad);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[H(0x1d7) + H(0x21e)] || function (c) {
    const J = H;
    return c && c[J(0x1d2)] ? c : { 'default': c };
};
const u = {};
u[I(0x1cd)] = !![], Object[I(0x1c4) + I(0x1d5)](exports, H(0x1d2), u);
const path_1 = require(I(0x1e3)), fs_1 = require('fs'), axios_1 = __importDefault(require(H(0x1d6))), CreateMessageService_1 = __importDefault(require(H(0x21c) + I(0x1f4) + I(0x1de) + I(0x1fa))), getExt = d => {
        const K = I, L = H, e = {};
        e[K(0x20f)] = function (j, k) {
            return j - k;
        };
        const f = e, g = d[L(0x1e8)]('?'), h = g[0x1f30 + 0xdcd + -0x2cfd][K(0x1e8)]('/'), i = h[f[L(0x20f)](h[K(0x1a8)], -0xbdc + 0x1e06 + -0x1229)][L(0x1e8)]('.');
        return i[0x20b6 + 0x10e7 * 0x2 + -0x4283 * 0x1];
    }, downloadFile = async (c, d) => {
        const M = H, N = I, e = {
                'Aoiju': function (g, h) {
                    return g !== h;
                },
                'QKeGl': M(0x21d),
                'SCBRZ': M(0x1fd),
                'ooNUG': M(0x1ee) + M(0x1f9),
                'DFUXf': function (g, h) {
                    return g(h);
                },
                'NpPfk': function (g, h) {
                    return g - h;
                },
                'gbbRJ': function (g, h) {
                    return g !== h;
                },
                'VNFUG': N(0x1ad),
                'ApLaq': M(0x20e),
                'Nfodg': M(0x1ac),
                'BiUnq': M(0x1bf),
                'qAdKZ': M(0x1df)
            }, f = await (-0x547 + 0x863 + -0x31c, axios_1[M(0x1aa)])({
                'url': c[N(0x1c3)](),
                'method': e[M(0x1e5)],
                'responseType': e[M(0x1cc)]
            });
        await new Promise((g, h) => {
            const P = N, Q = M, i = {
                    'npkFI': function (j, k) {
                        const O = b;
                        return e[O(0x203)](j, k);
                    }
                };
            if (e[P(0x1a9)](e[P(0x204)], e[P(0x204)])) {
                const k = d[Q(0x1e8)]('?'), l = k[0x2215 + -0x5a9 + -0x22 * 0xd6][P(0x1e8)]('/'), m = l[i[P(0x215)](l[P(0x1a8)], 0x2f * -0x7a + 0x425 * 0x5 + -0xd7 * -0x2)][P(0x1e8)]('.');
                return m[0x782 + 0x2 * -0xf6b + 0x21 * 0xb5];
            } else
                f[P(0x1b2)][Q(0x214)]((-0x224b + 0x211c + -0x3 * -0x65, fs_1[P(0x222) + P(0x1d8)])(d))['on'](e[P(0x20c)], async () => g(!![]))['on'](e[P(0x217)], k => {
                    const R = Q, S = P;
                    if (e[R(0x1f3)](e[S(0x216)], e[R(0x1b5)]))
                        console[S(0x1ac)](e[S(0x212)], k), e[S(0x1ed)](h, new Error(k));
                    else {
                        const m = {};
                        return m[R(0x1aa)] = j, g && h[S(0x1d2)] ? i : m;
                    }
                });
        });
    }, VerifyMediaMessage = async (d, e, f, g) => {
        const T = H, U = I, h = {
                'kfkTn': T(0x1ee) + T(0x1f9),
                'mQcjd': function (t, v) {
                    return t(v);
                },
                'AFCss': T(0x20e),
                'MyFDK': T(0x1ac),
                'dSkwY': U(0x21f),
                'WByBi': T(0x1e9),
                'tSXOz': U(0x205),
                'MmzFq': function (t, v) {
                    return t(v);
                },
                'rvkpf': T(0x1ca) + 'n',
                'RKCTS': T(0x218),
                'AQLMD': function (t, v) {
                    return t === v;
                },
                'PGArL': function (t, v) {
                    return t !== v;
                },
                'SruEX': U(0x1b3),
                'VluNv': T(0x20b),
                'nzkxC': U(0x1fb),
                'QtQsJ': T(0x1ef),
                'FdeTv': function (t, v) {
                    return t(v);
                },
                'BQTEv': function (t, v) {
                    return t === v;
                },
                'OgyMQ': U(0x223),
                'dFkOa': T(0x1f2),
                'VcRCE': function (t, v) {
                    return t(v);
                },
                'GXbfC': U(0x1e1) + 'a',
                'mWGSS': function (t, v) {
                    return t === v;
                },
                'kYTZS': U(0x1bd),
                'iCtPT': T(0x220),
                'zliTx': U(0x1ba),
                'DBJSW': T(0x1c0),
                'hFYlO': function (t, v) {
                    return t(v);
                },
                'CxbrT': T(0x1ce),
                'IsEJg': function (t, v, w) {
                    return t(v, w);
                },
                'kFZXY': U(0x1e6),
                'IRqzV': T(0x1e0),
                'dfCsu': function (t, v) {
                    return t || v;
                }
            };
        let i, j, k, l = h[U(0x1c8)], m = h[T(0x1f6)];
        if (h[T(0x201)](d[T(0x1c1)]?.[U(0x1c2)]?.[T(0x1e4)], 0x23e7 * 0x1 + 0x1 * 0xce0 + -0x3 * 0x1042)) {
            if (h[T(0x210)](h[T(0x221)], h[T(0x221)]))
                j[U(0x1b2)][U(0x214)]((-0x8 * -0xd2 + -0x1 * -0x545 + 0xd * -0xe9, k[T(0x222) + T(0x1d8)])(l))['on'](h[U(0x1db)], async () => q(!![]))['on'](h[T(0x1bc)], v => {
                    const V = T, W = T;
                    q[V(0x1ac)](h[W(0x1f8)], v), h[W(0x1b9)](r, new s(v));
                });
            else {
                const v = h[T(0x1be)][U(0x1e8)]('|');
                let w = -0x1 * 0x26ab + 0x1c6d * 0x1 + 0xa3e;
                while (!![]) {
                    switch (v[w++]) {
                    case '0':
                        [i] = d[U(0x1c1)][T(0x1c2)][T(0x20a) + T(0x1c9)][T(0x1b1)];
                        continue;
                    case '1':
                        l = h[U(0x1f0)];
                        continue;
                    case '2':
                        j = d[U(0x1c1)][U(0x1c2)];
                        continue;
                    case '3':
                        m = h[T(0x1af)];
                        continue;
                    case '4':
                        k = h[T(0x1c7)](getExt, i[T(0x211)]);
                        continue;
                    }
                    break;
                }
            }
        }
        if (h[T(0x1ff)](d[T(0x1c1)]?.[T(0x1c2)]?.[U(0x1e4)], -0x1 * -0x79e + 0x18fe + 0x6b * -0x4e)) {
            if (h[U(0x1ff)](h[T(0x1c6)], h[U(0x1c6)])) {
                const x = h[U(0x1c5)][T(0x1e8)]('|');
                let y = -0x6b6 * -0x1 + -0x2692 + -0x7f7 * -0x4;
                while (!![]) {
                    switch (x[y++]) {
                    case '0':
                        k = h[U(0x1e2)](getExt, i[T(0x211)]);
                        continue;
                    case '1':
                        [i] = d[T(0x1c1)][T(0x1c2)][T(0x1d9) + U(0x202)];
                        continue;
                    case '2':
                        m = h[T(0x200)];
                        continue;
                    case '3':
                        j = d[T(0x1c1)][T(0x1c2)];
                        continue;
                    case '4':
                        l = h[T(0x219)];
                        continue;
                    }
                    break;
                }
            } else
                h[U(0x1ac)](h[U(0x1f8)], i), h[T(0x1b9)](j, new k(l));
        }
        if (h[T(0x1ff)](d[U(0x1c1)]?.[T(0x1a6)], h[U(0x1ea)])) {
            if (h[U(0x1da)](h[T(0x1d1)], h[U(0x1d1)])) {
                const A = h[T(0x1dd)][U(0x1e8)]('|');
                let B = -0x10a * -0x7 + -0x6 * 0x3c1 + 0x3d * 0x40;
                while (!![]) {
                    switch (A[B++]) {
                    case '0':
                        m = h[U(0x1b6)];
                        continue;
                    case '1':
                        i = d[T(0x1c1)][T(0x1e1) + 'a'][U(0x1c2)][T(0x1c0)];
                        continue;
                    case '2':
                        l = h[T(0x1cf)];
                        continue;
                    case '3':
                        k = h[U(0x1fc)](getExt, i[U(0x1d3)]);
                        continue;
                    case '4':
                        j = d[U(0x1c1)][T(0x1e1) + 'a'][U(0x1c2)];
                        continue;
                    }
                    break;
                }
            } else {
                const D = h[T(0x1fe)][T(0x1e8)]('|');
                let E = -0x2 * 0xb7d + 0x207d + -0x983 * 0x1;
                while (!![]) {
                    switch (D[E++]) {
                    case '0':
                        l = m[U(0x1c1)][T(0x1c2)];
                        continue;
                    case '1':
                        t = h[T(0x200)];
                        continue;
                    case '2':
                        s = h[T(0x219)];
                        continue;
                    case '3':
                        [n] = o[U(0x1c1)][U(0x1c2)][T(0x1d9) + U(0x202)];
                        continue;
                    case '4':
                        p = h[T(0x1d0)](q, r[T(0x211)]);
                        continue;
                    }
                    break;
                }
            }
        }
        const n = f['id'] + '_' + j['id'] + '_' + new Date()[U(0x208)]() + '.' + k, o = (0x1 * 0x21dd + 0xb58 + 0x47 * -0xa3, path_1[T(0x1f7)])(__dirname, '..', '..', '..', h[U(0x1eb)], n), p = h[U(0x1ff)](d[T(0x1c1)][T(0x1a6)], h[T(0x1ea)]) ? i[U(0x1d3)] : i[U(0x211)];
        await h[T(0x1cb)](downloadFile, p, o);
        const q = {
            'messageId': h[U(0x1b9)](String, d[U(0x1c1)]?.[T(0x21b)]),
            'ticketId': f['id'],
            'contactId': e ? undefined : g['id'],
            'body': d[T(0x1c1)]?.[T(0x1b8)] || d[U(0x1c1)]?.[T(0x1ab)] || m,
            'fromMe': e,
            'read': e,
            'mediaUrl': n,
            'mediaType': l,
            'quotedMsgId': '',
            'timestamp': new Date()[T(0x208)](),
            'status': e ? h[T(0x1f5)] : h[T(0x1b0)]
        };
        await f[U(0x1dc)]({
            'lastMessage': d[T(0x1c1)]?.[T(0x1b8)] || d[U(0x1c1)]?.[U(0x1ab)] || m,
            'lastMessageAt': new Date()[T(0x208)](),
            'answered': h[T(0x209)](e, ![])
        });
        const r = {};
        r[U(0x1b4) + 'a'] = q, r[U(0x20d)] = f[U(0x20d)];
        const s = await (0x502 + 0xbb9 + -0x10bb, CreateMessageService_1[T(0x1aa)])(r);
        return s;
    };
exports[I(0x1aa)] = VerifyMediaMessage;