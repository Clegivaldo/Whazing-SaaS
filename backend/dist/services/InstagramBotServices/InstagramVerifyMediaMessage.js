'use strict';
function a() {
    const S = [
        'rzyZo',
        'sfpZg',
        'IfUnQ',
        'caption',
        'MLdho',
        'received',
        'YzqNE',
        'ejppD',
        'audio_src',
        'candidates',
        'QGFEd',
        'xWwOV',
        'update',
        '3168027FfzTuJ',
        'EgTeu',
        'mOPrx',
        'tenantId',
        'voice_medi',
        'SGFjn',
        'dSuXm',
        'DmNmQ',
        'vídeo',
        'reateMessa',
        'áudio',
        '0|1|3|4|2',
        'noFoI',
        'image',
        'item_type',
        'item_id',
        'erty',
        'tvszI',
        'HUOWL',
        'createWrit',
        'yTFyn',
        'GET',
        'defineProp',
        'EcemJ',
        '2JIhouh',
        'ions',
        'bzucC',
        'TbGgy',
        'axios',
        '3|0|4|2|1',
        'DmEIL',
        'default',
        'url',
        'video_vers',
        'data',
        'fdYYl',
        'imagem',
        'oVavg',
        'NPtVC',
        'WUrTU',
        'gElWQ',
        'audio',
        '4|3|2|0|1',
        'getTime',
        'media',
        'okSwh',
        'pmMbr',
        'EaOEz',
        'oAxJD',
        'eStream',
        'media_type',
        '12720900LiyYEM',
        'JOIBw',
        'ions2',
        'error',
        'hdosy',
        'NdVrR',
        'value',
        'sended',
        'gajxm',
        'uoGTz',
        'finish',
        'ITnwM',
        'text',
        'geService',
        '579819QxsCis',
        'FToAF',
        'Services/C',
        'AZtaU',
        '4296512TnvMOw',
        'mCZgM',
        'path',
        'join',
        'sRWmZ',
        'ZvyRa',
        'fault',
        '../Message',
        'xZzsz',
        '__importDe',
        '12088nuMDqo',
        'KbZSS',
        '130CkRjfC',
        'oajxz',
        'WjJVM',
        'ERROR\x20DONW',
        '117096zupoXm',
        'LctlJ',
        '1848eQUpuY',
        'image_vers',
        '15258nGQUqK',
        'xwRmB',
        'video',
        '__esModule',
        'zWFHu',
        '3|2|1|4|0',
        'public',
        'toString',
        'message',
        'messageDat',
        'applicatio',
        'split',
        'qqIcg',
        'length',
        'rIuuC',
        'mpDND',
        'arquivo',
        'LOAD',
        '1|2|3|0|4',
        'stream',
        'pipe',
        'WGitb'
    ];
    a = function () {
        return S;
    };
    return a();
}
const E = b, F = b;
(function (c, d) {
    const C = b, D = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(C(0x22a)) / (0x2023 + -0x131c + -0xd06) * (parseInt(D(0x1ed)) / (0xa * 0x23e + 0x1d3 + -0x5 * 0x4d9)) + -parseInt(D(0x216)) / (0x7b + 0x1802 + -0x1e2 * 0xd) + -parseInt(C(0x21a)) / (0xc * -0x263 + 0x21b0 + 0x4 * -0x142) + -parseInt(D(0x226)) / (-0x8d6 + 0x1829 * 0x1 + -0xf4e) * (-parseInt(D(0x22e)) / (0x13d * 0x1f + -0x5 * -0x59e + 0x1 * -0x4273)) + parseInt(D(0x22c)) / (-0x2 * -0x1061 + -0x19ef + 0x1 * -0x6cc) * (parseInt(D(0x224)) / (0x1b15 + -0x1c9c + 0x1 * 0x18f)) + parseInt(C(0x1d5)) / (0xb6c + 0x1 * -0xfdf + 0x11f * 0x4) + parseInt(D(0x208)) / (0x5 * 0x2b9 + 0x511 * -0x4 + -0x6b1 * -0x1);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x82d95 + -0x989 * -0x201 + -0x2d8a));
var __importDefault = this && this[E(0x223) + F(0x220)] || function (c) {
    const G = F;
    return c && c[G(0x231)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x15b * 0x6 + -0x1f * 0x25 + 0x19 * -0x13);
        let h = e[f];
        return h;
    }, b(c, d);
}
const u = {};
u[F(0x20e)] = !![], Object[E(0x1eb) + F(0x1e5)](exports, F(0x231), u);
const path_1 = require(F(0x21c)), fs_1 = require('fs'), axios_1 = __importDefault(require(F(0x1f1))), CreateMessageService_1 = __importDefault(require(F(0x221) + F(0x218) + F(0x1de) + F(0x215))), getExt = d => {
        const H = F, I = E, e = {};
        e[H(0x23d)] = function (j, k) {
            return j - k;
        };
        const f = e, g = d[H(0x239)]('?'), h = g[0xc18 * -0x1 + 0xf65 + -0x1 * 0x34d][H(0x239)]('/'), i = h[f[I(0x23d)](h[H(0x23b)], 0x1219 * 0x1 + -0xc * 0x85 + -0xc * 0xfd)][I(0x239)]('.');
        return i[-0xca * 0x2f + -0x3b * 0x55 + 0x38ae];
    }, downloadFile = async (c, d) => {
        const J = E, K = F, e = {
                'EgTeu': J(0x229) + J(0x23f),
                'oAxJD': function (g, h) {
                    return g(h);
                },
                'IfUnQ': K(0x1ff),
                'hdosy': K(0x1fe),
                'KbZSS': J(0x1df),
                'NdVrR': function (g, h) {
                    return g(h);
                },
                'NPtVC': function (g, h) {
                    return g !== h;
                },
                'gElWQ': K(0x1da),
                'WjJVM': J(0x212),
                'oajxz': J(0x20b),
                'fdYYl': K(0x1ea),
                'zWFHu': J(0x241)
            }, f = await (-0x6c * -0x1a + -0x13b5 + -0x1 * -0x8bd, axios_1[J(0x1f4)])({
                'url': c[K(0x235)](),
                'method': e[J(0x1f8)],
                'responseType': e[K(0x232)]
            });
        await new Promise((g, h) => {
            const L = J, M = J, i = {
                    'xZzsz': e[L(0x246)],
                    'HUOWL': e[L(0x20c)],
                    'xWwOV': e[M(0x225)],
                    'TbGgy': function (j, k) {
                        const N = L;
                        return e[N(0x20d)](j, k);
                    }
                };
            if (e[M(0x1fb)](e[L(0x1fd)], e[M(0x1fd)])) {
                const k = i[L(0x222)][L(0x239)]('|');
                let l = -0x2f * -0x4 + -0x27 + -0x95;
                while (!![]) {
                    switch (k[l++]) {
                    case '0':
                        s = i[M(0x1e7)];
                        continue;
                    case '1':
                        t = i[L(0x1d3)];
                        continue;
                    case '2':
                        p = i[M(0x1f0)](q, r[M(0x1d0)]);
                        continue;
                    case '3':
                        n = o[M(0x236)][M(0x1d9) + 'a'][M(0x201)][M(0x1fe)];
                        continue;
                    case '4':
                        l = m[L(0x236)][M(0x1d9) + 'a'][M(0x201)];
                        continue;
                    }
                    break;
                }
            } else
                f[L(0x1f7)][L(0x242)]((0x1b * -0x8b + -0xe8d + 0x1d36, fs_1[L(0x1e8) + L(0x206)])(d))['on'](e[M(0x228)], async () => g(!![]))['on'](e[L(0x227)], k => {
                    const O = L, P = L;
                    console[O(0x20b)](e[O(0x1d6)], k), e[O(0x205)](h, new Error(k));
                });
        });
    }, VerifyMediaMessage = async (d, e, f, g) => {
        const Q = F, R = F, h = {
                'bzucC': Q(0x233),
                'gajxm': R(0x1dd),
                'JOIBw': function (t, v) {
                    return t(v);
                },
                'sfpZg': Q(0x230),
                'mCZgM': Q(0x229) + R(0x23f),
                'xwRmB': function (t, v) {
                    return t(v);
                },
                'WGitb': R(0x238) + 'n',
                'ZvyRa': Q(0x23e),
                'rzyZo': function (t, v) {
                    return t === v;
                },
                'EcemJ': R(0x1e0),
                'noFoI': Q(0x1f9),
                'uoGTz': function (t, v) {
                    return t(v);
                },
                'mOPrx': R(0x1e2),
                'MLdho': function (t, v) {
                    return t !== v;
                },
                'rIuuC': Q(0x1fa),
                'EaOEz': R(0x217),
                'dSuXm': R(0x240),
                'WUrTU': Q(0x1d9) + 'a',
                'tvszI': function (t, v) {
                    return t === v;
                },
                'QGFEd': R(0x203),
                'YzqNE': Q(0x1f2),
                'okSwh': R(0x1df),
                'yTFyn': Q(0x1fe),
                'AZtaU': function (t, v) {
                    return t(v);
                },
                'DmNmQ': R(0x234),
                'qqIcg': function (t, v) {
                    return t === v;
                },
                'ITnwM': function (t, v, w) {
                    return t(v, w);
                },
                'sRWmZ': function (t, v) {
                    return t(v);
                },
                'ejppD': Q(0x20f),
                'DmEIL': Q(0x1cd),
                'LctlJ': function (t, v) {
                    return t || v;
                }
            };
        let i, j, k, l = h[Q(0x243)], m = h[R(0x21f)];
        if (h[Q(0x244)](d[Q(0x236)]?.[Q(0x201)]?.[Q(0x207)], -0xfd3 + 0x406 + 0xbce)) {
            const t = h[Q(0x1ec)][R(0x239)]('|');
            let v = 0x26e4 + -0x2221 + -0x4c3;
            while (!![]) {
                switch (t[v++]) {
                case '0':
                    j = d[Q(0x236)][R(0x201)];
                    continue;
                case '1':
                    [i] = d[R(0x236)][R(0x201)][Q(0x22d) + Q(0x20a)][Q(0x1d1)];
                    continue;
                case '2':
                    m = h[Q(0x1e1)];
                    continue;
                case '3':
                    k = h[R(0x211)](getExt, i[Q(0x1f5)]);
                    continue;
                case '4':
                    l = h[Q(0x1d7)];
                    continue;
                }
                break;
            }
        }
        if (h[R(0x244)](d[R(0x236)]?.[R(0x201)]?.[Q(0x207)], -0x10d5 + 0xd66 + 0x371 * 0x1)) {
            if (h[R(0x1cc)](h[R(0x23c)], h[R(0x204)])) {
                const w = h[Q(0x1db)][R(0x239)]('|');
                let x = -0x2123 + -0x192e + 0x3a51;
                while (!![]) {
                    switch (w[x++]) {
                    case '0':
                        l = h[Q(0x245)];
                        continue;
                    case '1':
                        j = d[R(0x236)][Q(0x201)];
                        continue;
                    case '2':
                        [i] = d[Q(0x236)][R(0x201)][Q(0x1f6) + R(0x1ee)];
                        continue;
                    case '3':
                        k = h[R(0x209)](getExt, i[R(0x1f5)]);
                        continue;
                    case '4':
                        m = h[R(0x210)];
                        continue;
                    }
                    break;
                }
            } else {
                const z = h[Q(0x1ef)][R(0x239)]('|');
                let A = -0xf7b + 0x1e62 + -0x1 * 0xee7;
                while (!![]) {
                    switch (z[A++]) {
                    case '0':
                        t = h[R(0x210)];
                        continue;
                    case '1':
                        p = h[Q(0x209)](q, r[Q(0x1f5)]);
                        continue;
                    case '2':
                        [n] = o[Q(0x236)][R(0x201)][Q(0x1f6) + Q(0x1ee)];
                        continue;
                    case '3':
                        l = m[R(0x236)][Q(0x201)];
                        continue;
                    case '4':
                        s = h[Q(0x245)];
                        continue;
                    }
                    break;
                }
            }
        }
        if (h[Q(0x244)](d[Q(0x236)]?.[R(0x1e3)], h[R(0x1fc)])) {
            if (h[Q(0x1e6)](h[R(0x1d2)], h[Q(0x1d2)])) {
                const z = h[R(0x1ce)][Q(0x239)]('|');
                let A = 0x24f8 + 0x6a5 + 0x7 * -0x63b;
                while (!![]) {
                    switch (z[A++]) {
                    case '0':
                        i = d[R(0x236)][R(0x1d9) + 'a'][Q(0x201)][Q(0x1fe)];
                        continue;
                    case '1':
                        m = h[R(0x202)];
                        continue;
                    case '2':
                        l = h[Q(0x1e9)];
                        continue;
                    case '3':
                        j = d[Q(0x236)][R(0x1d9) + 'a'][Q(0x201)];
                        continue;
                    case '4':
                        k = h[Q(0x219)](getExt, i[R(0x1d0)]);
                        continue;
                    }
                    break;
                }
            } else
                h[R(0x20b)](h[Q(0x21b)], i), h[R(0x22f)](j, new k(l));
        }
        const n = f['id'] + '_' + j['id'] + '_' + new Date()[Q(0x200)]() + '.' + k, o = (-0x1 * 0x4fa + -0x245b * -0x1 + -0x1f61, path_1[R(0x21d)])(__dirname, '..', '..', '..', h[Q(0x1dc)], n), p = h[Q(0x23a)](d[Q(0x236)][R(0x1e3)], h[Q(0x1fc)]) ? i[R(0x1d0)] : i[Q(0x1f5)];
        await h[Q(0x213)](downloadFile, p, o);
        const q = {
            'messageId': h[Q(0x21e)](String, d[Q(0x236)]?.[Q(0x1e4)]),
            'ticketId': f['id'],
            'contactId': e ? undefined : g['id'],
            'body': d[R(0x236)]?.[Q(0x214)] || d[Q(0x236)]?.[R(0x247)] || m,
            'fromMe': e,
            'read': e,
            'mediaUrl': n,
            'mediaType': l,
            'quotedMsgId': '',
            'timestamp': new Date()[R(0x200)](),
            'status': e ? h[R(0x1cf)] : h[Q(0x1f3)]
        };
        await f[R(0x1d4)]({
            'lastMessage': d[Q(0x236)]?.[R(0x214)] || d[R(0x236)]?.[R(0x247)] || m,
            'lastMessageAt': new Date()[R(0x200)](),
            'answered': h[R(0x22b)](e, ![])
        });
        const r = {};
        r[R(0x237) + 'a'] = q, r[Q(0x1d8)] = f[Q(0x1d8)];
        const s = await (-0x2614 + -0x1 * -0x260c + 0x8 * 0x1, CreateMessageService_1[Q(0x1f4)])(r);
        return s;
    };
exports[F(0x1f4)] = VerifyMediaMessage;