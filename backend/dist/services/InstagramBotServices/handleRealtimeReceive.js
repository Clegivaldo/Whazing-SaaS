'use strict';const o=b,p=b;(function(c,d){const l=b,m=b,e=c();while(!![]){try{const f=parseInt(l(0x75))/0x1*(parseInt(l(0x81))/0x2)+-parseInt(m(0x6d))/0x3*(-parseInt(l(0x85))/0x4)+-parseInt(m(0x7b))/0x5*(-parseInt(m(0x68))/0x6)+-parseInt(m(0x6a))/0x7+parseInt(l(0x66))/0x8+parseInt(m(0x7f))/0x9*(parseInt(l(0x77))/0xa)+-parseInt(l(0x67))/0xb;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x5ee51));var __importDefault=this&&this['__importDefault']||function(c){const n=b;return c&&c[n(0x80)]?c:{'default':c};};Object[o(0x7a)](exports,p(0x80),{'value':!![]});const VerifyStepsChatFlowTicket_1=__importDefault(require(p(0x69))),FindOrCreateTicketService_1=__importDefault(require('../TicketServices/FindOrCreateTicketService')),VerifyBusinessHours_1=__importDefault(require(o(0x70))),ShowWhatsAppService_1=__importDefault(require(p(0x78))),InstagramVerifyContact_1=__importDefault(require(p(0x83))),InstagramVerifyMediaMessage_1=__importDefault(require(p(0x7d))),InstagramVerifyMessage_1=__importDefault(require(o(0x79))),handleRealtimeReceive=async(c,d)=>{const q=o,r=o,e=await(0x0,ShowWhatsAppService_1[q(0x84)])({'id':d['id']}),f=await d['feed'][q(0x82)]({'thread_id':c[q(0x6c)][r(0x6f)],'oldest_cursor':''})[q(0x73)](),g=await(0x0,InstagramVerifyContact_1[r(0x84)])(f,d,e['tenantId']),h=d?.['accountLogin'],i=h?.['pk']===c[q(0x6c)][q(0x7e)],j=await(0x0,FindOrCreateTicketService_1[r(0x84)])({'contact':g,'whatsappId':d['id'],'unreadMessages':i?0x0:0x1,'tenantId':e[q(0x6e)],'msg':{...c['message'],'fromMe':i},'channel':q(0x72)});if(j?.['isFarewellMessage'])return;c['message'][r(0x76)]!==r(0x74)?await(0x0,InstagramVerifyMediaMessage_1['default'])(c,i,j,g):await(0x0,InstagramVerifyMessage_1[r(0x84)])(c,i,j,g);const k=await d['entity'][r(0x82)](c['message'][r(0x6f)]);k[r(0x7c)](c['message'][r(0x6b)]),await(0x0,VerifyStepsChatFlowTicket_1[r(0x84)])({'fromMe':i,'body':c[q(0x6c)]?.[q(0x74)]||''},j),await(0x0,VerifyBusinessHours_1[r(0x84)])({'fromMe':i,'timestamp':c[r(0x6c)][r(0x71)]/0x3e8},j);};function b(c,d){const e=a();return b=function(f,g){f=f-0x66;let h=e[f];return h;},b(c,d);}function a(){const s=['default','8zXZCAg','2997152wSjFpV','18531348gakZcZ','12WXPOXE','../ChatFlowServices/VerifyStepsChatFlowTicket','2653301GUCjIX','item_id','message','78378xSChPW','tenantId','thread_id','../WbotServices/helpers/VerifyBusinessHours','timestamp','instagram','request','text','12dCIEUR','item_type','20kANHfR','../WhatsappService/ShowWhatsAppService','./InstagramVerifyMessage','defineProperty','1307685VNFbei','markItemSeen','./InstagramVerifyMediaMessage','user_id','3430107eozZpL','__esModule','123364hoDpNZ','directThread','./InstagramVerifyContact'];a=function(){return s;};return a();}exports[p(0x84)]=handleRealtimeReceive;