'use strict';
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x9 * 0x17c + 0x1401 + -0x209a);
        let h = e[f];
        return h;
    }, b(c, d);
}
const E = b, F = b;
(function (c, d) {
    const C = b, D = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(C(0x112)) / (0x1952 * -0x1 + -0x1354 + 0x2ca7) + -parseInt(D(0xea)) / (-0xa87 + 0xeec + -0x463) * (-parseInt(D(0xe4)) / (0x154d + 0x1997 * -0x1 + 0x44d)) + parseInt(D(0x11d)) / (-0x18d2 + -0x1 * 0x1093 + -0x1 * -0x2969) * (-parseInt(C(0x127)) / (-0x1b0a + 0x22b3 * 0x1 + -0x7a4)) + parseInt(D(0x104)) / (0x1d4 + 0x1ff1 * 0x1 + -0x21bf) * (parseInt(C(0xe7)) / (0x71 * 0x56 + -0xb91 + 0x1b * -0xfa)) + -parseInt(C(0x10f)) / (-0x49 * -0x4 + 0x15bf + -0x16db * 0x1) * (-parseInt(C(0x11c)) / (0x13f * 0x1d + -0xfba + -0x1460)) + -parseInt(D(0x12a)) / (-0x1a * -0x1d + 0x26fa + -0x29e2) * (-parseInt(D(0x110)) / (0x192c + -0x2cc * -0xa + -0x17 * 0x24f)) + -parseInt(C(0x108)) / (-0x2278 + -0x15ff + 0x3883 * 0x1);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x1 * 0x3d2ab + 0x63da5 * 0x1 + 0x22042));
function a() {
    const L = [
        'qrcode',
        'gDKPe',
        'owenToken',
        'data',
        'ettingsGen',
        'DRDwd',
        'qrcodeId',
        '10ZVATuF',
        'ls/Invoice',
        'split',
        '181730MnwXKw',
        'dinamico',
        '__importDe',
        'Problema\x20e',
        '-mainchann',
        'axios',
        'owenCreate',
        'CONCLUIDA',
        '../../help',
        'yznoC',
        '../../util',
        'erty',
        'ls/Tenant',
        'IFVEG',
        'findByPk',
        'APPROVED',
        'model',
        'm\x20o\x20suport',
        't\x20found',
        'on\x20error:\x20',
        'super',
        'default',
        '#Fatura:',
        'tenant-',
        'akaEF',
        '../../libs',
        'eral',
        'owenCnpj',
        'json',
        'dueDate',
        'il.com.br',
        'kvZap',
        'tenant',
        '-payment',
        'error',
        'open',
        's/logger',
        'getIO',
        '1149sSNBnW',
        'yisEi',
        'OiKXy',
        '21jbfMNf',
        'toISOStrin',
        'contato\x20co',
        '1210KYiNNS',
        'drdrk',
        'mOOBi',
        '../../mode',
        'owenSecret',
        'https://pi',
        'tenantId',
        'fault',
        'emit',
        'status',
        'ncontrado,',
        'iBdkn',
        'rs/AppErro',
        '\x20entre\x20em\x20',
        'HKTQm',
        '/socket',
        'setDate',
        'toFixed',
        'findOne',
        'Invoice\x20no',
        'alpdC',
        'Subscripti',
        'stringify',
        'original',
        'include',
        'get',
        '274662bhNEic',
        'owenWebhoo',
        'value',
        'x.owenbras',
        '3475416LegptM',
        'logger',
        'update',
        '../../erro',
        'ers/CheckS',
        'VvpUV',
        'body',
        '176utzXMH',
        '44EEqCiP',
        'valor',
        '380472RLmpvv',
        'reload',
        '/api/v1/qr',
        'defineProp',
        'txId',
        'paid',
        'Key',
        'getDate',
        'ONOwH',
        'owen',
        '20565eZgSXn',
        '570148FKfUJA',
        'where',
        '__esModule'
    ];
    a = function () {
        return L;
    };
    return a();
}
var __importDefault = this && this[E(0x12c) + E(0xf1)] || function (c) {
    const G = E;
    return c && c[G(0x11f)] ? c : { 'default': c };
};
const k = {};
k[F(0x106)] = !![], Object[F(0x115) + E(0xc9)](exports, F(0x11f), k), exports[E(0xc4) + F(0xff) + 'on'] = exports[E(0x105) + 'k'] = void (-0x13d * 0x8 + -0x20d + 0xbf5);
const axios_1 = __importDefault(require(E(0xc3))), CheckSettingsGeneral_1 = __importDefault(require(F(0xc6) + E(0x10c) + E(0x124) + E(0xd8))), logger_1 = require(E(0xc8) + E(0xe2)), socket_1 = require(F(0xd7) + F(0xf9)), Invoices_1 = __importDefault(require(F(0xed) + E(0x128) + 's')), Tenant_1 = __importDefault(require(F(0xed) + E(0xca))), AppError_1 = __importDefault(require(E(0x10b) + F(0xf6) + 'r')), owenBaseURL = F(0xef) + E(0x107) + E(0xdc), owenWebhook = async (l, m) => {
        const H = F, I = E, n = {};
        n[H(0x11a)] = function (r, s) {
            return r === s;
        }, n[H(0x121)] = I(0xcd), n[H(0xfe)] = I(0xe1), n[H(0xc7)] = H(0xde), n[H(0xe6)] = function (r, s) {
            return r < s;
        }, n[I(0xcb)] = function (r, s) {
            return r + s;
        }, n[I(0xdd)] = H(0x117), n[H(0x125)] = H(0xd2), n[I(0xf8)] = I(0xc5);
        const o = n, {data: p} = l[I(0x10e)];
        if (o[I(0x11a)](p[I(0xf3)], o[I(0x121)])) {
            const {qrcodeId: r} = p, s = {};
            s[H(0x116)] = r, s[H(0xf3)] = o[I(0xfe)];
            const t = {};
            t[I(0xce)] = Tenant_1[H(0xd3)], t['as'] = o[H(0xc7)];
            const u = {};
            u[I(0x11e)] = s, u[H(0x102)] = [t];
            const v = await Invoices_1[H(0xd3)][I(0xfc)](u);
            if (!v || o[I(0xe6)](p[I(0x111)], v[H(0x106)])) {
                const B = {};
                return B['ok'] = !![], m[H(0xda)](B);
            }
            const w = new Date(v[H(0xde)][H(0xdb)]);
            w[H(0xfa)](o[H(0xcb)](w[I(0x119)](), -0x19e0 + -0x1513 + 0x2f11));
            const x = w[H(0xe8) + 'g']()[H(0x129)]('T')[-0x2624 + -0x5 * -0xe9 + 0x2197], y = {};
            y[I(0xdb)] = x, await v[I(0xde)][I(0x10a)](y);
            const z = {};
            z[H(0xf3)] = o[I(0xdd)], await v[H(0x10a)](z), await v[H(0xde)][H(0x113)]();
            const A = (0x476 * -0x5 + 0x1200 + -0x3a * -0x13, socket_1[H(0xe3)])();
            A['to'](H(0xd5) + v[H(0xf0)] + (I(0x12e) + 'el'))['to'](o[I(0x125)])[I(0xf2)](I(0xd5) + v[H(0xf0)] + H(0xdf), {
                'action': o[I(0xf8)],
                'tenant': v[H(0xde)],
                'invoiceId': v['id']
            });
        }
        const q = {};
        return q['ok'] = !![], m[H(0xda)](q);
    };
exports[E(0x105) + 'k'] = owenWebhook;
const owenCreateSubscription = async (g, h) => {
    const J = F, K = E, i = {};
    i[J(0xd6)] = K(0xd9), i[J(0xe5)] = K(0x122), i[J(0xeb)] = J(0xee) + K(0x118), i[J(0xf5)] = J(0xfd) + J(0xd0), i[K(0x10d)] = J(0x11b), i[J(0xec)] = K(0x12d) + K(0xf4) + K(0xf7) + K(0xe9) + J(0xcf) + 'e!';
    const j = i, {
            price: l,
            invoiceId: m
        } = g[K(0x10e)], n = {
            'params': {
                'valor': l[K(0xfb)]([-0xa4c + -0x985 * -0x3 + 0x1 * -0x1241]),
                'minutos': 0x5,
                'mensagem': K(0xd4) + m,
                'user': await (-0x176e * -0x1 + -0x12c9 + -0x4a5, CheckSettingsGeneral_1[K(0xd3)])(j[K(0xd6)]),
                'password': await (0xa * 0x73 + 0x5 * 0x239 + -0xf9b, CheckSettingsGeneral_1[K(0xd3)])(j[J(0xe5)]),
                'secretkey': await (0x2147 + -0x5 * 0x44d + -0xbc6, CheckSettingsGeneral_1[J(0xd3)])(j[J(0xeb)])
            }
        };
    try {
        const o = await Invoices_1[K(0xd3)][K(0xcc)](m);
        if (!o)
            throw new Error(j[K(0xf5)]);
        const p = await axios_1[J(0xd3)][J(0x103)](owenBaseURL + (J(0x114) + K(0x12b)), n);
        o[J(0x10a)]({
            'txId': p[J(0x123)][K(0x123)][K(0x126)],
            'payGw': j[K(0x10d)],
            'payGwData': JSON[J(0x100)](p[J(0x123)][J(0x123)])
        });
        const q = {};
        q[K(0x120)] = p[K(0x123)][K(0x123)][K(0x120)];
        const r = {};
        r[J(0x101)] = l;
        const s = {};
        return s[K(0x120)] = q, s[K(0x111)] = r, h[K(0xda)](s);
    } catch (t) {
        logger_1[J(0x109)][K(0xe0)](K(0xc4) + K(0xff) + J(0xd1) + t);
        throw new AppError_1[(K(0xd3))](j[K(0xec)], -0x1a7d + 0x9e * -0x28 + 0x1 * 0x34bd);
    }
};
exports[F(0xc4) + F(0xff) + 'on'] = owenCreateSubscription;