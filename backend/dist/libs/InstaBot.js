'use strict';const K=b,M=b;(function(c,d){const I=b,J=b,e=c();while(!![]){try{const f=parseInt(I(0x15b))/0x1+-parseInt(J(0x179))/0x2+-parseInt(J(0x184))/0x3+-parseInt(J(0x182))/0x4+parseInt(J(0x187))/0x5+parseInt(I(0x183))/0x6+parseInt(I(0x186))/0x7;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x81c94));var __importDefault=this&&this[K(0x188)]||function(c){const L=K;return c&&c[L(0x162)]?c:{'default':c};};Object['defineProperty'](exports,M(0x162),{'value':!![]}),exports[M(0x175)]=exports[K(0x172)]=exports['initInstaBot']=void 0x0;const instagram_private_api_1=require('instagram-private-api'),instagram_mqtt_1=require(M(0x161)),AppError_1=__importDefault(require('../errors/AppError')),logger_1=require(M(0x15f)),sessions=[],initInstaBot=async(c,d=0x5)=>{const N=M,O=K;let e=0x0;while(e<d){try{let f,g;const h='@'+c[N(0x16e)],i=c['instagramKey'];if(!h||!i){if(O(0x177)===N(0x171))e[O(0x168)]['error'](O(0x167)+f);else throw new Error(N(0x17b));}c&&c[N(0x15c)]&&(f=JSON[N(0x17a)](c[N(0x15c)]));const j=(0x0,instagram_mqtt_1[N(0x15a)])(new instagram_private_api_1[(O(0x16c))]());j['id']=c['id'],j[O(0x189)][N(0x16f)](h),g=await j[N(0x17f)]['login'](h,i),j[N(0x180)]=g,process[N(0x170)](async()=>{const P=O,Q=O;P(0x169)===Q(0x17c)?f=g[Q(0x17a)](h['session']):await j['simulate']['postLoginFlow']();}),f=await j[N(0x163)](),await c[N(0x15e)]({'session':f}),await j['realtime'][O(0x173)]({'irisData':await j[O(0x164)]['directInbox']()[N(0x160)]()}),await j[O(0x166)]['connect']({'autoReconnect':!![]});const k=sessions[N(0x178)](m=>m['id']===c['id']);if(k===-0x1)j['id']=c['id'],!j[N(0x180)]&&(j['accountLogin']=await j[O(0x17f)][N(0x17e)]()),sessions[O(0x185)](j);else{if(O(0x176)===O(0x176))j['id']=c['id'],!j['accountLogin']&&(j['accountLogin']=await j['account'][N(0x17e)]()),sessions[k]=j;else try{const n=s[N(0x178)](H=>H['id']===z['id']);n!==-0x1&&(z[n]['account'][O(0x15d)](),A[n][N(0x16a)]['disconnect'](),B[n][N(0x166)][N(0x174)](),C[O(0x16b)](n,0x1)),y[O(0x15e)]({'session':''});}catch(o){E['logger'][O(0x16d)]('removeWbot\x20|\x20Error:\x20'+o);}}return j;}catch(n){logger_1['logger'][O(0x16d)]('initWbot\x20error\x20|\x20Error:\x20'+n),e++,await new Promise(o=>setTimeout(o,0x3e8));}}throw new AppError_1[(O(0x17d))](O(0x165),0x194);};exports[M(0x159)]=initInstaBot;function a(){const U=['STHoY','realtime','splice','IgApiClient','error','instagramUser','generateDevice','nextTick','TyBcz','getInstaBot','connect','disconnect','removeInstaBot','wWvMF','xRaLU','findIndex','331734DlCwQq','parse','Not\x20credentials','EGAQL','default','currentUser','account','accountLogin','rWXNh','1010596aYHdyZ','1196100LxGMrf','1756773alWrpe','push','2713802zGDEMS','3250880PFwZUP','__importDefault','state','initInstaBot','withFbnsAndRealtime','298499DVLACp','session','logout','update','../utils/logger','request','instagram_mqtt','__esModule','exportState','feed','Max\x20retries\x20reached.\x20Unable\x20to\x20initialize\x20InstaBot.','fbns','removeWbot\x20|\x20Error:\x20','logger'];a=function(){return U;};return a();}const getInstaBot=c=>{const R=M,d=sessions[R(0x178)](e=>e['id']===c);return sessions[d];};function b(c,d){const e=a();return b=function(f,g){f=f-0x159;let h=e[f];return h;},b(c,d);}exports[M(0x172)]=getInstaBot;const removeInstaBot=c=>{const S=M,T=M;try{if(S(0x181)===S(0x181)){const d=sessions[S(0x178)](e=>e['id']===c['id']);d!==-0x1&&(sessions[d][S(0x17f)][S(0x15d)](),sessions[d]['realtime'][S(0x174)](),sessions[d][T(0x166)][T(0x174)](),sessions[T(0x16b)](d,0x1)),c[S(0x15e)]({'session':''});}else{const f=j[T(0x178)](w=>w['id']===q['id']);f!==-0x1&&(q[f][T(0x17f)][T(0x15d)](),r[f]['realtime'][S(0x174)](),s[f]['fbns'][T(0x174)](),t['splice'](f,0x1)),p[T(0x15e)]({'session':''});}}catch(f){logger_1[T(0x168)][T(0x16d)](S(0x167)+f);}};exports[M(0x175)]=removeInstaBot;