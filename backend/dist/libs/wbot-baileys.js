'use strict';const I=b,J=b;(function(c,d){const G=b,H=b,e=c();while(!![]){try{const f=parseInt(G(0x1a7))/0x1*(parseInt(G(0x1c5))/0x2)+parseInt(H(0x18f))/0x3*(-parseInt(G(0x1dc))/0x4)+parseInt(H(0x19d))/0x5+-parseInt(H(0x1dd))/0x6*(parseInt(G(0x1a5))/0x7)+parseInt(H(0x1b1))/0x8+parseInt(G(0x1d3))/0x9+-parseInt(H(0x196))/0xa*(parseInt(H(0x193))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x8a889));var __createBinding=this&&this[I(0x1bc)]||(Object[J(0x1d6)]?function(c,d,e,f){const K=J,L=I;if(f===undefined)f=e;var g=Object[K(0x1b5)](d,e);(!g||(L(0x1d4)in g?!d['__esModule']:g[K(0x1c1)]||g['configurable']))&&(g={'enumerable':!![],'get':function(){return d[e];}}),Object[K(0x1d8)](c,f,g);}:function(c,d,e,f){if(f===undefined)f=e;c[f]=d[e];}),__setModuleDefault=this&&this[J(0x1a9)]||(Object['create']?function(c,d){const M=I,N=J;Object[M(0x1d8)](c,N(0x1e5),{'enumerable':!![],'value':d});}:function(c,d){const O=J;c[O(0x1e5)]=d;}),__importStar=this&&this[J(0x1e4)]||function(c){const P=I,Q=I;if(c&&c[P(0x1d1)])return c;var d={};if(c!=null){for(var e in c)if(e!==Q(0x1e5)&&Object[Q(0x1bb)][Q(0x1d9)][Q(0x1e0)](c,e))__createBinding(d,c,e);}return __setModuleDefault(d,c),d;},__importDefault=this&&this[I(0x19f)]||function(c){const R=I;return c&&c[R(0x1d1)]?c:{'default':c};};Object[J(0x1d8)](exports,J(0x1d1),{'value':!![]}),exports[I(0x1af)]=exports[I(0x1cd)]=exports[I(0x1e9)]=void 0x0;const Sentry=__importStar(require(I(0x1bf))),baileys_1=__importStar(require(I(0x1a8))),Whatsapp_1=__importDefault(require(J(0x1ed))),logger_1=__importDefault(require(I(0x1ea))),useMultiFileAuthState_1=require('../helpers/useMultiFileAuthState'),AppError_1=__importDefault(require(I(0x1b4))),node_cache_1=__importDefault(require(I(0x1cf))),socket_1=require(I(0x1b0)),StartWhatsAppSession_1=require(J(0x1ac)),cache_1=require(I(0x1b6)),loggerBaileys=logger_1[J(0x1e5)][I(0x1e1)]({}),logger=logger_1[I(0x1e5)][J(0x1e1)]({});loggerBaileys[J(0x1c6)]=J(0x1c3);const sessions=[],retriesQrCodeMap=new Map(),getWbot=c=>{const S=I,T=I,d=sessions['findIndex'](e=>e['id']===c);if(d===-0x1){if(S(0x1a0)!=='rSwig')throw new AppError_1[(S(0x1e5))]('ERR_WAPP_NOT_INITIALIZED');else g['id']=h['id'],i[T(0x1d2)](j);}return sessions[d];};function b(c,d){const e=a();return b=function(f,g){f=f-0x18e;let h=e[f];return h;},b(c,d);}exports['getWbot']=getWbot;const removeWbot=async(c,d=!![])=>{const U=I,V=I;try{const e=sessions[U(0x1be)](f=>f['id']===c);e!==-0x1&&(d&&(V(0x1eb)!=='gogSa'?(sessions[e][U(0x19a)](),sessions[e]['ws'][U(0x1a3)]()):(g[h]['logout'](),i[j]['ws'][U(0x1a3)]())),sessions[V(0x1b8)](e,0x1));}catch(g){if(U(0x1d7)===U(0x198)){const i=i[U(0x1be)](w=>w['id']===o);i!==-0x1&&(o&&(s[i][V(0x19a)](),t[i]['ws'][U(0x1a3)]()),r[V(0x1b8)](i,0x1));}else logger[U(0x1c3)](g);}};exports[J(0x1cd)]=removeWbot;const initWASocket=async c=>{return new Promise(async(d,e)=>{const W=b,X=b;if(W(0x190)===W(0x190))try{((async()=>{const Y=X,Z=W,f=(0x0,socket_1[Y(0x19e)])(),g=await Whatsapp_1[Y(0x1e5)][Z(0x1a6)]({'where':{'id':c['id']}});if(!g)return;const {id:h,name:i}=g,{version:j,isLatest:k}=await(0x0,baileys_1['fetchLatestBaileysVersion'])();logger[Y(0x1bd)](Z(0x1de)+j['join']('.')+Y(0x18e)+k),logger[Y(0x1bd)](Z(0x1e2)+i);let l=0x0,m=null;const {state:n,saveCreds:o}=await(0x0,useMultiFileAuthState_1[Y(0x1ad)])(c),p=new node_cache_1[(Y(0x1e5))](),q=new node_cache_1['default']();m=(0x0,baileys_1[Z(0x1e5)])({'logger':loggerBaileys,'printQRInTerminal':![],'browser':baileys_1[Z(0x191)][Z(0x1e8)](Y(0x1b7)),'auth':{'creds':n[Y(0x1ce)],'keys':(0x0,baileys_1[Z(0x1e3)])(n[Z(0x1cc)],loggerBaileys)},'version':j,'defaultQueryTimeoutMs':0xea60,'msgRetryCounterCache':p,'generateHighQualityLinkPreview':!![],'userDevicesCache':q,'shouldIgnoreJid':r=>(0x0,baileys_1[Z(0x1b9)])(r)||r?.['endsWith']('@newsletter'),'transactionOpts':{'maxCommitRetries':0x1,'delayBetweenTriesMs':0xa}}),m['ev']['on'](Z(0x1ae),async({connection:r,lastDisconnect:s,qr:t})=>{const a0=Z,a1=Y;logger[a0(0x1bd)]('Socket\x20\x20'+i+a1(0x1d5)+(r||'')+'\x20'+(s||''));if(r===a1(0x1a3)){s?.[a0(0x1c3)]?.['output']?.[a0(0x195)]===0x193&&('IaeWn'==='TfpOM'?((0x0,h[a0(0x1cd)])(i,![]),j(()=>(0x0,m[a1(0x1b3)])(n),0x7d0)):(await c[a1(0x1c7)]({'status':a1(0x19c),'session':''}),await cache_1[a0(0x1cb)][a1(0x1c9)](a0(0x1a4)+c['id']+':*'),f[a1(0x1c2)](c[a0(0x194)]+a0(0x1e7),{'action':a0(0x1c7),'session':c}),(0x0,exports[a1(0x1cd)])(h,![])));if(s?.[a1(0x1c3)]?.[a0(0x1da)]?.['statusCode']!==baileys_1[a1(0x1a2)][a1(0x1c8)]){if('barbw'!==a1(0x199))return e[f];else(0x0,exports[a0(0x1cd)])(h,![]),setTimeout(()=>(0x0,StartWhatsAppSession_1[a0(0x1b3)])(c),0x7d0);}else await c[a0(0x1c7)]({'status':a1(0x19c),'session':''}),await cache_1[a1(0x1cb)][a1(0x1c9)](a1(0x1a4)+c['id']+':*'),f[a1(0x1c2)](c['tenantId']+a0(0x1e7),{'action':a0(0x1c7),'session':c}),(0x0,exports[a0(0x1cd)])(h,![]),setTimeout(()=>(0x0,StartWhatsAppSession_1[a0(0x1b3)])(c),0x7d0);}if(r===a1(0x1c4)){const w=m[a1(0x1b2)];let x=w['id']['split']('@')[0x0];x=x[a0(0x1ba)](':')[0x0],await c[a1(0x1c7)]({'status':a0(0x192),'qrcode':'','number':x,'retries':0x0}),f[a1(0x1c2)](c[a1(0x194)]+':whatsappSession',{'action':a0(0x1c7),'session':c}),f[a0(0x1c2)](c[a1(0x194)]+a0(0x1e7),{'action':a0(0x1ca),'session':c});const y=sessions['findIndex'](z=>z['id']===c['id']);y===-0x1&&(m['id']=c['id'],sessions[a0(0x1d2)](m)),d(m);}if(t!==undefined){if(retriesQrCodeMap[a1(0x1d4)](h)&&retriesQrCodeMap[a1(0x1d4)](h)>=0x3)await g[a1(0x1c7)]({'status':a0(0x1df),'qrcode':''}),await cache_1[a0(0x1cb)][a1(0x1c9)](a1(0x1a4)+c['id']+':*'),f[a1(0x1c2)](c['tenantId']+a0(0x1e7),{'action':a0(0x1c7),'session':g}),m['ev'][a0(0x1aa)](a1(0x1ae)),m['ws']['close'](),m=null,retriesQrCodeMap[a1(0x1ec)](h);else{if(a0(0x1e6)===a1(0x19b))i[a0(0x1db)](j),k[a0(0x1ab)](l),m(n);else{logger[a1(0x1bd)](a0(0x1d0)+i),retriesQrCodeMap[a1(0x1c0)](h,l+=0x1),await c[a0(0x1c7)]({'qrcode':t,'status':'qrcode','retries':0x0});const A=sessions['findIndex'](B=>B['id']===c['id']);A===-0x1&&(a0(0x197)!=='MKphQ'?f[a0(0x1d8)](g,a1(0x1e5),{'enumerable':!![],'value':h}):(m['id']=c['id'],sessions[a0(0x1d2)](m))),f[a1(0x1c2)](c['tenantId']+a1(0x1e7),{'action':a0(0x1c7),'session':c});}}}}),m['ev']['on'](Y(0x1a1),o);})());}catch(f){Sentry[W(0x1db)](f),console[W(0x1ab)](f),e(f);}else e[W(0x1e5)]=f;});};function a(){const a2=['sessions:','6629aSrfEi','findOne','383sKrZUs','@whiskeysockets/baileys','__setModuleDefault','removeAllListeners','log','../services/WbotServices/StartWhatsAppSession','useMultiFileAuthState','connection.update','initWASocket','./socket','6118672ErKXrV','user','StartWhatsAppSession','../errors/AppError','getOwnPropertyDescriptor','./cache','Desktop','splice','isJidBroadcast','split','prototype','__createBinding','info','findIndex','@sentry/node','set','writable','emit','error','open','4666WOQnJB','level','update','loggedOut','delFromPattern','readySession','cacheLayer','keys','removeWbot','creds','node-cache','Session\x20QRCode\x20Generate\x20','__esModule','push','8700246XeggdU','get','\x20Connection\x20Update\x20','create','BjzwT','defineProperty','hasOwnProperty','output','captureException','4cIwkUu','6246PVEHCl','using\x20WA\x20v','DISCONNECTED','call','child','Starting\x20session\x20','makeCacheableSignalKeyStore','__importStar','default','Qnzyu',':whatsappSession','appropriate','getWbot','@whiskeysockets/baileys/lib/Utils/logger','UUkcl','delete','../models/Whatsapp',',\x20isLatest:\x20','2655981CLGnhO','Utlgc','Browsers','CONNECTED','3896013BSWHrg','tenantId','statusCode','10brXzOU','MKphQ','OCGAh','barbw','logout','tEuMJ','PENDING','838515StpYUa','getIO','__importDefault','WUVQF','creds.update','DisconnectReason','close'];a=function(){return a2;};return a();}exports[I(0x1af)]=initWASocket;