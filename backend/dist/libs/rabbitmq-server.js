'use strict';const s=b,t=b;(function(c,d){const q=b,r=b,e=c();while(!![]){try{const f=parseInt(q(0x174))/0x1*(-parseInt(r(0x158))/0x2)+-parseInt(q(0x160))/0x3+-parseInt(r(0x173))/0x4*(parseInt(r(0x170))/0x5)+parseInt(r(0x16d))/0x6*(parseInt(q(0x154))/0x7)+parseInt(r(0x16f))/0x8*(-parseInt(r(0x163))/0x9)+-parseInt(q(0x162))/0xa+-parseInt(q(0x151))/0xb*(-parseInt(r(0x150))/0xc);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xb2876));Object[s(0x176)](exports,t(0x164),{'value':!![]});const amqplib_1=require(s(0x152)),logger_1=require(t(0x165)),sleepRandomTime_1=require('../utils/sleepRandomTime');function a(){const I=['sendToQueue','publishInExchange','sleepRandomTime','4106730RzDLZO','start','16hVOuoi','10oDVKrc','createChannel','MAX_SLEEP_INTERVAL','292412ZLyJIq','1236907PIMwZB','error','defineProperty','env','assertQueue','WqAmb','messenger','4357356DYNYXo','121dUzETS','amqplib','uri','7KMgwuy','mfzin','consume','MIN_SLEEP_INTERVAL','2dTmuAI','consumeWhatsapp','channel','ack','default','connect','nack','from','875976mvgAGU','conn','10225430KOEdud','5624082yYAouY','__esModule','../utils/logger','logger','waba360','publish','publishInQueue'];a=function(){return I;};return a();}class RabbitmqServer{constructor(c){const u=s;this[u(0x153)]=c;}async[s(0x16e)](){const v=t,w=t;this['conn']=await(0x0,amqplib_1[v(0x15d)])(this[v(0x153)]),this[w(0x15a)]=await this[v(0x161)][v(0x171)](),await this[v(0x15a)][w(0x178)](v(0x167),{'durable':!![]}),await this['channel']['assertQueue'](w(0x17a),{'durable':!![]});}async[t(0x169)](c,d){const x=t,y=t;return await this[x(0x15a)][y(0x178)](c,{'durable':!![]}),this[x(0x15a)][x(0x16a)](c,Buffer[x(0x15f)](d),{'persistent':!![]});}async[s(0x16b)](c,d,e){const z=t,A=t;return this[z(0x15a)][A(0x168)](c,d,Buffer[A(0x15f)](e),{'persistent':!![]});}async[t(0x159)](c,d){const B=s,C=t;this[B(0x15a)]['prefetch'](0xa,![]),await this[B(0x15a)][B(0x178)](c,{'durable':!![]}),this[B(0x15a)]['consume'](c,async e=>{const D=C,E=C;try{await d(e),await(0x0,sleepRandomTime_1[D(0x16c)])({'minMilliseconds':Number(process[E(0x177)][D(0x157)]||0x1f4),'maxMilliseconds':Number(process[D(0x177)][D(0x172)]||0x7d0)}),this['channel'][D(0x15b)](e);return;}catch(f){if(D(0x155)!==E(0x179))this[D(0x15a)][D(0x15e)](e),logger_1[D(0x166)][D(0x175)]('consumeWhatsapp',f);else return this['channel']['publish'](g,h,i[D(0x15f)](j),{'persistent':!![]});}});}async['consume'](c,d){const F=s,G=s;return this[F(0x15a)][G(0x156)](c,e=>{const H=G;try{d(e),this[H(0x15a)]['ack'](e);return;}catch(f){logger_1['logger']['error'](f);}});}}function b(c,d){const e=a();return b=function(f,g){f=f-0x150;let h=e[f];return h;},b(c,d);}exports[t(0x15c)]=RabbitmqServer;