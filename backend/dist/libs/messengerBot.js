'use strict';function b(c,d){const e=a();return b=function(f,g){f=f-0xc1;let h=e[f];return h;},b(c,d);}const L=b,N=b;(function(c,d){const J=b,K=b,e=c();while(!![]){try{const f=parseInt(J(0xcf))/0x1*(-parseInt(J(0xdd))/0x2)+parseInt(K(0xde))/0x3*(-parseInt(J(0xd5))/0x4)+-parseInt(K(0xd8))/0x5*(-parseInt(J(0xca))/0x6)+-parseInt(J(0xd7))/0x7*(-parseInt(J(0xc2))/0x8)+parseInt(K(0xd1))/0x9+-parseInt(K(0xdf))/0xa*(parseInt(J(0xd0))/0xb)+-parseInt(K(0xc8))/0xc*(-parseInt(K(0xd9))/0xd);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x5bf02));function a(){const Q=['initMessengerBot\x20error\x20|\x20Error:\x20','defineProperty','initMessengerBot','getMessengerBot','../errors/AppError','3495288FfAFth','error','346158QRMfYn','Not\x20token\x20configured','tokenAPI','wBcoC','messaging-api-messenger','7195RGFOkK','3487Otnpji','1686222kEKWnF','default','push','MessengerClient','1484yyLjhW','__importDefault','1547sNpCeQ','15sRHmvk','26DVwkVY','env','zsFCy','findIndex','138BQhtcf','2979WUETEK','3880kXpRdG','mIifS','process','__esModule','15256ixJcqI'];a=function(){return Q;};return a();}var __importDefault=this&&this[L(0xd6)]||function(c){const M=L;return c&&c[M(0xc1)]?c:{'default':c};};Object[N(0xc4)](exports,L(0xc1),{'value':!![]}),exports[L(0xc6)]=exports['initMessengerBot']=void 0x0;const messaging_api_messenger_1=require(L(0xce)),process_1=__importDefault(require(N(0xe1))),AppError_1=__importDefault(require(N(0xc7))),logger_1=require('../utils/logger'),sessionsMessenger=[],initMessengerBot=async c=>{const O=L,P=N;try{if(O(0xcd)!==O(0xdb)){const d=c[O(0xcc)],e=process_1['default'][O(0xda)]['FACEBOOK_APP_ID'];if(!d){if(O(0xe0)!=='mIifS'){const i=n['tokenAPI'],j=o[O(0xd2)][P(0xda)]['FACEBOOK_APP_ID'];if(!i)throw new y(O(0xcb));const k=new q['MessengerClient']({'accessToken':i,'appId':j});k['id']=r['id'];const l=s[O(0xdc)](I=>I['id']===z['id']);return l===-0x1?(k['id']=z['id'],A[P(0xd3)](k)):(k['id']=B['id'],C[l]=k),k;}else throw new Error(O(0xcb));}const f=new messaging_api_messenger_1[(O(0xd4))]({'accessToken':d,'appId':e});f['id']=c['id'];const g=sessionsMessenger[P(0xdc)](i=>i['id']===c['id']);return g===-0x1?(f['id']=c['id'],sessionsMessenger[O(0xd3)](f)):(f['id']=c['id'],sessionsMessenger[g]=f),f;}else g['id']=h['id'],i[O(0xd3)](j);}catch(j){logger_1['logger'][O(0xc9)](P(0xc3)+j);throw new AppError_1['default'](''+j,0x194);}};exports[N(0xc5)]=initMessengerBot;const getMessengerBot=c=>{const d=sessionsMessenger['findIndex'](e=>e['id']==c);return sessionsMessenger[d];};exports[N(0xc6)]=getMessengerBot;