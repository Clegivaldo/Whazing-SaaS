'use strict';
const _0x5aabae = _0x2007;
(function (_0x47b61c, _0x376e42) {
    const _0x789d4a = _0x2007, _0x50c76f = _0x47b61c();
    while (!![]) {
        try {
            const _0x2d6539 = parseInt(_0x789d4a(0xfc)) / (0x3fa * -0x8 + 0x18b2 + 0x71f) * (-parseInt(_0x789d4a(0x12a)) / (-0x2 * 0xc2 + 0x1bbe * 0x1 + -0x8 * 0x347)) + parseInt(_0x789d4a(0x139)) / (0x2 * -0xc9 + -0x51 * -0x43 + -0x139e) + -parseInt(_0x789d4a(0xfe)) / (0x84f + 0x17e9 + -0x394 * 0x9) * (parseInt(_0x789d4a(0x108)) / (-0x1 * 0x767 + 0x70d * 0x3 + -0x1 * 0xdbb)) + parseInt(_0x789d4a(0xf2)) / (-0x1da5 + 0x1a5e + 0xa9 * 0x5) * (-parseInt(_0x789d4a(0x13f)) / (-0x1ea2 + -0x25c1 * -0x1 + -0x718)) + -parseInt(_0x789d4a(0xd2)) / (0x2 * 0x121d + 0x1b82 + 0xfed * -0x4) + parseInt(_0x789d4a(0xef)) / (0x783 + -0x1 * -0x42c + 0x2a * -0x47) * (-parseInt(_0x789d4a(0xeb)) / (0x29 * -0xee + -0x1 * 0x76d + 0x2d95)) + parseInt(_0x789d4a(0xf3)) / (-0x11ed + 0x1be9 + -0x1fd * 0x5);
            if (_0x2d6539 === _0x376e42)
                break;
            else
                _0x50c76f['push'](_0x50c76f['shift']());
        } catch (_0x38f17c) {
            _0x50c76f['push'](_0x50c76f['shift']());
        }
    }
}(_0x44d1, -0x13 * 0x12fd + 0x23f2 + -0x468b * -0x13));
function _0x2007(_0x2ab7db, _0x4a27da) {
    const _0x329f4a = _0x44d1();
    return _0x2007 = function (_0x3cb2d3, _0x58ec08) {
        _0x3cb2d3 = _0x3cb2d3 - (-0x11 * -0x24b + -0x38b * -0x5 + -0x37ed);
        let _0x41bcba = _0x329f4a[_0x3cb2d3];
        return _0x41bcba;
    }, _0x2007(_0x2ab7db, _0x4a27da);
}
var __importDefault = this && this[_0x5aabae(0x105) + _0x5aabae(0x135)] || function (_0x2be7ca) {
    const _0x1d1a38 = _0x5aabae;
    return _0x2be7ca && _0x2be7ca[_0x1d1a38(0xfb)] ? _0x2be7ca : { 'default': _0x2be7ca };
};
function _0x44d1() {
    const _0x326557 = [
        'value',
        'adapter',
        'nected\x20,\x20',
        'fCwjn',
        'GcGif',
        'et\x20channel',
        'hannel.',
        'connection',
        'ASSWORD',
        'ERVER',
        'defineProp',
        ':notificat',
        'shKni',
        'emit',
        'ClAev',
        '../errors/',
        'ied',
        'email',
        '3063664zOERvI',
        'attributes',
        'IO_REDIS_U',
        'SERNAME',
        'profile',
        ':joinTicke',
        'tion\x20error',
        'A\x20client\x20j',
        'not\x20initia',
        'Socket\x20IO\x20',
        'isValid',
        'SOCKET\x20Cli',
        'token',
        'authentica',
        'GeDFe',
        ':userVerif',
        'join',
        'disconnect',
        'ogger',
        'pingInterv',
        '../utils/l',
        'data',
        ':updateSta',
        'status',
        'heBBE',
        '10ddriXp',
        'getIO',
        '../models/',
        'IO_REDIS_S',
        '600453idHMkM',
        'handshake',
        'tokenInval',
        '72Qpivuf',
        '17349596HgbvTL',
        'lastLogin',
        'Server',
        'logger',
        'pMmyV',
        './decodeTo',
        'lized',
        'Client\x20con',
        '__esModule',
        '57773tstaHM',
        'ication',
        '276qEMwcE',
        ':joinNotif',
        'ent\x20discon',
        '\x20tickets\x20c',
        'tusUser',
        'ORT',
        'toString',
        '__importDe',
        'register',
        'nJjCh',
        '20885VPlnfH',
        'info',
        'CgBPA',
        'nected\x20in\x20',
        'DeDZe',
        'pingTimeou',
        'DaoPg',
        'Client\x20joi',
        'AppError',
        ':joinChatB',
        'redis',
        'bWKeT',
        'cors',
        'hannel\x20',
        'User',
        'auth',
        'lastOnline',
        'Beqsd',
        'origin',
        'rBIBW',
        'ion',
        'socket.io-',
        'message',
        'tenant',
        'warn',
        'isOnline',
        'oined\x20noti',
        'id:\x20',
        'ned\x20a\x20tick',
        'iSwMN',
        'env',
        'oaWJh',
        'update',
        'fication\x20c',
        '14zrmshd',
        'at/Chat',
        'default',
        'kenSocket',
        'oined\x20to\x20',
        'socket.io',
        './socketCh',
        'id:',
        'tenantId',
        'IO_REDIS_P',
        'use',
        'fault',
        'name',
        'user',
        'erty',
        '931929LAJbaR',
        'VGdhb',
        'findByPk',
        'initIO',
        'nujKq',
        'userId',
        '283276knCgGB'
    ];
    _0x44d1 = function () {
        return _0x326557;
    };
    return _0x44d1();
}
const _0x43a6ef = {};
_0x43a6ef[_0x5aabae(0x140)] = !![], Object[_0x5aabae(0xca) + _0x5aabae(0x138)](exports, _0x5aabae(0xfb), _0x43a6ef), exports[_0x5aabae(0xec)] = exports[_0x5aabae(0x13c)] = void (-0x252 + 0x11a + 0x138);
const socket_io_1 = require(_0x5aabae(0x12f)), socket_io_redis_1 = __importDefault(require(_0x5aabae(0x11d) + _0x5aabae(0x112))), AppError_1 = __importDefault(require(_0x5aabae(0xcf) + _0x5aabae(0x110))), decodeTokenSocket_1 = __importDefault(require(_0x5aabae(0xf8) + _0x5aabae(0x12d))), logger_1 = require(_0x5aabae(0xe6) + _0x5aabae(0xe4)), User_1 = __importDefault(require(_0x5aabae(0xed) + _0x5aabae(0x116))), Chat_1 = __importDefault(require(_0x5aabae(0x130) + _0x5aabae(0x12b)));
let io;
const initIO = _0x4936df => {
    const _0x2891ae = _0x5aabae, _0x1f887c = {
            'nJjCh': function (_0x39cf49, _0x1948a5) {
                return _0x39cf49(_0x1948a5);
            },
            'Beqsd': function (_0x29a672, _0x2832b3) {
                return _0x29a672(_0x2832b3);
            },
            'DeDZe': _0x2891ae(0x132),
            'GeDFe': _0x2891ae(0x136),
            'GcGif': _0x2891ae(0xd1),
            'iSwMN': _0x2891ae(0xd6),
            'oaWJh': _0x2891ae(0xe9),
            'DaoPg': _0x2891ae(0xf4),
            'fCwjn': _0x2891ae(0x118),
            'rBIBW': function (_0xb93dce) {
                return _0xb93dce();
            },
            'VGdhb': function (_0x572cd4, _0x431840) {
                return _0x572cd4(_0x431840);
            },
            'ClAev': _0x2891ae(0xdf) + _0x2891ae(0xd8),
            'shKni': _0x2891ae(0xfa) + _0x2891ae(0x10b) + _0x2891ae(0x11f),
            'heBBE': _0x2891ae(0xe3),
            'CgBPA': function (_0x3ba529, _0xe43615) {
                return _0x3ba529(_0xe43615);
            },
            'nujKq': function (_0x432813, _0x17838f) {
                return _0x432813(_0x17838f);
            },
            'bWKeT': _0x2891ae(0xc7)
        }, _0x11fcaf = {};
    _0x11fcaf[_0x2891ae(0x11a)] = '*';
    const _0x5459d1 = {};
    _0x5459d1[_0x2891ae(0x114)] = _0x11fcaf, _0x5459d1[_0x2891ae(0x10d) + 't'] = 0x2bf20, _0x5459d1[_0x2891ae(0xe5) + 'al'] = 0xea60, io = new socket_io_1[(_0x2891ae(0xf5))](_0x4936df, _0x5459d1);
    const _0x289e68 = {
            'host': process[_0x2891ae(0x126)][_0x2891ae(0xee) + _0x2891ae(0xc9)],
            'port': _0x1f887c[_0x2891ae(0x10a)](Number, process[_0x2891ae(0x126)][_0x2891ae(0x133) + _0x2891ae(0x103)]),
            'username': process[_0x2891ae(0x126)][_0x2891ae(0xd4) + _0x2891ae(0xd5)],
            'password': process[_0x2891ae(0x126)][_0x2891ae(0x133) + _0x2891ae(0xc8)]
        }, _0x588eff = socket_io_redis_1[_0x2891ae(0x12c)];
    return io[_0x2891ae(0x141)](_0x1f887c[_0x2891ae(0x13d)](_0x588eff, _0x289e68)), io[_0x2891ae(0x134)](async (_0x49f752, _0x4d7deb) => {
        const _0x2ab0d4 = _0x2891ae;
        try {
            const _0x58b193 = _0x49f752?.[_0x2ab0d4(0xf0)]?.[_0x2ab0d4(0x117)]?.[_0x2ab0d4(0xde)], _0xd2ff17 = (0x10ca + -0x7 * 0x463 + -0x7 * -0x1fd, decodeTokenSocket_1[_0x2ab0d4(0x12c)])(_0x58b193);
            if (_0xd2ff17[_0x2ab0d4(0xdc)]) {
                const _0x298595 = _0x49f752?.[_0x2ab0d4(0xf0)]?.[_0x2ab0d4(0x117)];
                _0x49f752[_0x2ab0d4(0xf0)][_0x2ab0d4(0x117)] = {
                    ..._0x298595,
                    ..._0xd2ff17[_0x2ab0d4(0xe7)],
                    'id': _0x1f887c[_0x2ab0d4(0x107)](String, _0xd2ff17[_0x2ab0d4(0xe7)]['id']),
                    'tenantId': _0x1f887c[_0x2ab0d4(0x119)](String, _0xd2ff17[_0x2ab0d4(0xe7)][_0x2ab0d4(0x132)])
                };
                const _0x5a5718 = {};
                _0x5a5718[_0x2ab0d4(0xd3)] = [
                    'id',
                    _0x1f887c[_0x2ab0d4(0x10c)],
                    _0x1f887c[_0x2ab0d4(0xe0)],
                    _0x1f887c[_0x2ab0d4(0x144)],
                    _0x1f887c[_0x2ab0d4(0x125)],
                    _0x1f887c[_0x2ab0d4(0x127)],
                    _0x1f887c[_0x2ab0d4(0x10e)],
                    _0x1f887c[_0x2ab0d4(0x143)]
                ];
                const _0x3abbf9 = await User_1[_0x2ab0d4(0x12c)][_0x2ab0d4(0x13b)](_0xd2ff17[_0x2ab0d4(0xe7)]['id'], _0x5a5718);
                _0x49f752[_0x2ab0d4(0xf0)][_0x2ab0d4(0x117)][_0x2ab0d4(0x137)] = _0x3abbf9, _0x1f887c[_0x2ab0d4(0x11b)](_0x4d7deb);
            }
            _0x1f887c[_0x2ab0d4(0x13a)](_0x4d7deb, new Error(_0x1f887c[_0x2ab0d4(0xce)]));
        } catch (_0x17bfdd) {
            logger_1[_0x2ab0d4(0xf6)][_0x2ab0d4(0x120)](_0x2ab0d4(0xf1) + _0x2ab0d4(0x123) + _0x49f752), _0x49f752[_0x2ab0d4(0xcd)](_0x2ab0d4(0xf1) + _0x2ab0d4(0x131) + _0x49f752['id']), _0x1f887c[_0x2ab0d4(0x13a)](_0x4d7deb, new Error(_0x1f887c[_0x2ab0d4(0xce)]));
        }
    }), io['on'](_0x1f887c[_0x2891ae(0x113)], _0x580c1e => {
        const _0x5b2bb9 = _0x2891ae, {tenantId: _0xfc7077} = _0x580c1e[_0x5b2bb9(0xf0)][_0x5b2bb9(0x117)];
        if (_0xfc7077) {
            const _0x374726 = {};
            _0x374726[_0x5b2bb9(0x11e)] = _0x1f887c[_0x5b2bb9(0xcc)], _0x374726[_0x5b2bb9(0xe7)] = _0x580c1e[_0x5b2bb9(0xf0)][_0x5b2bb9(0x117)], logger_1[_0x5b2bb9(0xf6)][_0x5b2bb9(0x109)](_0x374726), _0x580c1e[_0x5b2bb9(0xe2)](_0xfc7077[_0x5b2bb9(0x104)]()), _0x580c1e['on'](_0xfc7077 + (_0x5b2bb9(0xe1) + _0x5b2bb9(0xd0)), async _0x102462 => {
                const _0x2b952e = _0x5b2bb9, _0x389d94 = await User_1[_0x2b952e(0x12c)][_0x2b952e(0x13b)](_0x102462[_0x2b952e(0x13e)]), _0x589641 = {};
                _0x589641[_0x2b952e(0x121)] = !![], await _0x389d94[_0x2b952e(0x128)](_0x589641), _0x580c1e[_0x2b952e(0xcd)](_0x102462[_0x2b952e(0x132)] + (_0x2b952e(0xe8) + _0x2b952e(0x102)), _0x389d94);
            }), _0x580c1e['on'](_0xfc7077 + (_0x5b2bb9(0x111) + 'ox'), _0x1a9994 => {
                const _0x349960 = _0x5b2bb9;
                logger_1[_0x349960(0xf6)][_0x349960(0x109)](_0x349960(0x10f) + _0x349960(0x124) + _0x349960(0xc5) + '\x20' + _0xfc7077 + ':' + _0x1a9994), _0x580c1e[_0x349960(0xe2)](_0xfc7077 + ':' + _0x1a9994);
            }), _0x580c1e['on'](_0xfc7077 + (_0x5b2bb9(0xff) + _0x5b2bb9(0xfd)), () => {
                const _0x13b8de = _0x5b2bb9;
                logger_1[_0x13b8de(0xf6)][_0x13b8de(0x109)](_0x13b8de(0xd9) + _0x13b8de(0x122) + _0x13b8de(0x129) + _0x13b8de(0x115) + _0xfc7077 + (_0x13b8de(0xcb) + _0x13b8de(0x11c))), _0x580c1e[_0x13b8de(0xe2)](_0xfc7077 + (_0x13b8de(0xcb) + _0x13b8de(0x11c)));
            }), _0x580c1e['on'](_0xfc7077 + (_0x5b2bb9(0xd7) + 'ts'), _0xe83258 => {
                const _0x3d2b09 = _0x5b2bb9;
                logger_1[_0x3d2b09(0xf6)][_0x3d2b09(0x109)](_0x3d2b09(0xd9) + _0x3d2b09(0x12e) + _0xfc7077 + ':' + _0xe83258 + (_0x3d2b09(0x101) + _0x3d2b09(0xc6))), _0x580c1e[_0x3d2b09(0xe2)](_0xfc7077 + ':' + _0xe83258);
            }), Chat_1[_0x5b2bb9(0x12c)][_0x5b2bb9(0x106)](_0x580c1e);
        }
        _0x580c1e['on'](_0x1f887c[_0x5b2bb9(0xea)], _0x8d4a6a => {
            const _0x301cae = _0x5b2bb9, _0x21c773 = {};
            _0x21c773[_0x301cae(0x11e)] = _0x301cae(0xdd) + _0x301cae(0x100) + _0x301cae(0x142) + _0xfc7077 + ',\x20' + _0x8d4a6a, logger_1[_0x301cae(0xf6)][_0x301cae(0x109)](_0x21c773);
        });
    }), io;
};
exports[_0x5aabae(0x13c)] = initIO;
const getIO = () => {
    const _0x156f80 = _0x5aabae, _0x355f84 = {};
    _0x355f84[_0x156f80(0xf7)] = _0x156f80(0xdb) + _0x156f80(0xda) + _0x156f80(0xf9);
    const _0x1c10e4 = _0x355f84;
    if (!io)
        throw new AppError_1[(_0x156f80(0x12c))](_0x1c10e4[_0x156f80(0xf7)]);
    return io;
};
exports[_0x5aabae(0xec)] = getIO;