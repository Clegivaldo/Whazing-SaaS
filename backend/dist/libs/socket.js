'use strict';
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x7a * 0x22 + -0x85 * 0x3a + 0x11 * 0xdb);
        let h = e[f];
        return h;
    }, b(c, d);
}
function a() {
    const U = [
        'OOHsf',
        'SOCKET\x20Cli',
        'kcjPe',
        'oined\x20to\x20',
        'QXjZw',
        ':joinNotif',
        '35046UQgAIT',
        'getIO',
        'nected\x20in\x20',
        'lastOnline',
        'FRbrQ',
        'fication\x20c',
        'isOnline',
        'rmdle',
        'isValid',
        'EdlMp',
        'AppError',
        'pingInterv',
        'niRps',
        '3007688INcSDI',
        'xRDfE',
        '3541956idOzLK',
        '__esModule',
        'erty',
        'cesoW',
        'socket.io',
        'cors',
        '288605ERawzf',
        'GcrNH',
        'wUuyV',
        'register',
        ':notificat',
        'userId',
        'status',
        '../utils/l',
        'oEFsO',
        'handshake',
        'disconnect',
        'not\x20initia',
        '335024NFsJjN',
        'message',
        'kuMdF',
        'auth',
        'TpTNi',
        'khDOp',
        'pingTimeou',
        '../models/',
        'id:',
        'ied',
        'ERVER',
        'join',
        'priVZ',
        'OENlv',
        '\x20tickets\x20c',
        '__importDe',
        'YQXkj',
        'xLpwX',
        'sYwJc',
        'use',
        'Socket\x20IO\x20',
        'gSHdg',
        'env',
        'XlvuT',
        'mewHQ',
        '1365ZcCqdX',
        'adapter',
        'ion',
        ':joinTicke',
        'IO_REDIS_S',
        'origin',
        'IO_REDIS_U',
        'value',
        'seZcF',
        'initIO',
        'Server',
        'et\x20channel',
        'profile',
        'ned\x20a\x20tick',
        'hannel\x20',
        'nected\x20,\x20',
        'update',
        'at/Chat',
        './decodeTo',
        '70ilhUoM',
        'info',
        'toString',
        'email',
        'lastLogin',
        'kenSocket',
        'mbpDs',
        './socketCh',
        'logger',
        'QYaie',
        '2870030ctifuQ',
        'A\x20client\x20j',
        'PINcN',
        '10422kQToBz',
        'AKIHR',
        'data',
        'name',
        'BRmOA',
        'ORT',
        'eJUED',
        'tokenInval',
        '20ZYnxND',
        'KMQKP',
        'User',
        'lized',
        'dCXYw',
        '9jiKzab',
        '../errors/',
        'tenantId',
        'attributes',
        'Client\x20con',
        'SERNAME',
        'yxdcC',
        'connection',
        'ogger',
        '55flJvBI',
        'tusUser',
        'ROMAy',
        'tenant',
        ':updateSta',
        'JmbOi',
        'ASSWORD',
        'redis',
        'ication',
        'findByPk',
        'BwrBF',
        'hannel.',
        ':joinChatB',
        'authentica',
        'socket.io-',
        'oined\x20noti',
        'Client\x20joi',
        'hctIb',
        'id:\x20',
        'token',
        'xaUvk',
        'defineProp',
        'fnxzf',
        'IO_REDIS_P',
        'ykcmW',
        'default',
        ':userVerif',
        'fault',
        'warn',
        'user',
        'emit',
        'adDLf',
        'tion\x20error',
        'ent\x20discon'
    ];
    a = function () {
        return U;
    };
    return a();
}
const x = b, y = b;
(function (c, d) {
    const v = b, w = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(v(0xd8)) / (-0x26b * 0x2 + -0x25 * 0xd5 + -0xa0 * -0x39) + -parseInt(v(0x104)) / (0xa58 + 0x16d7 + -0x212d) * (-parseInt(v(0xb7)) / (0x19b * 0x1 + -0x112c + 0x1 * 0xf94)) + -parseInt(w(0x119)) / (-0x16cd * 0x1 + 0x90f * 0x2 + -0x191 * -0x3) * (parseInt(w(0xcc)) / (0x1 * -0x25e1 + -0x22 * 0xe8 + 0x6df * 0xa)) + parseInt(w(0x111)) / (-0x8f9 * -0x4 + -0x8 * 0x18d + -0x1776) * (-parseInt(v(0xf1)) / (0xad9 + 0x20a0 + 0x86 * -0x53)) + -parseInt(w(0xc4)) / (0x1f53 + 0x1d76 + 0x67 * -0x97) + -parseInt(w(0x11e)) / (0x4c9 + 0x115 * 0x17 + -0x1da3) * (parseInt(v(0x10e)) / (0xc2e * -0x2 + 0x5 * -0x59c + -0x2 * -0x1a39)) + parseInt(v(0x127)) / (-0x79 * 0x13 + -0x17c8 + 0x1 * 0x20ce) * (parseInt(v(0xc6)) / (-0x71 * 0x53 + -0x17b1 + 0x3c60));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x8eab * 0xd + -0x6a27f + 0x35901));
var __importDefault = this && this[x(0xe7) + y(0xaa)] || function (c) {
    const z = x;
    return c && c[z(0xc7)] ? c : { 'default': c };
};
const o = {};
o[x(0xf8)] = !![], Object[y(0xa4) + y(0xc8)](exports, x(0xc7), o), exports[y(0xb8)] = exports[y(0xfa)] = void (-0x3fd + -0x42 * 0x3d + -0x13b7 * -0x1);
const socket_io_1 = require(x(0xca)), socket_io_redis_1 = __importDefault(require(x(0x9d) + y(0x12e))), AppError_1 = __importDefault(require(x(0x11f) + y(0xc1))), decodeTokenSocket_1 = __importDefault(require(y(0x103) + y(0x109))), logger_1 = require(y(0xd3) + x(0x126)), User_1 = __importDefault(require(y(0xdf) + x(0x11b))), Chat_1 = __importDefault(require(y(0x10b) + x(0x102)));
let io;
const initIO = e => {
    const A = x, B = y, f = {
            'xaUvk': A(0xec) + B(0xd7) + B(0x11c),
            'kuMdF': function (k, l) {
                return k === l;
            },
            'OENlv': B(0xbe),
            'khDOp': function (k, l) {
                return k(l);
            },
            'QXjZw': A(0x120),
            'YQXkj': B(0x114),
            'OOHsf': A(0x107),
            'BwrBF': B(0xfd),
            'QYaie': A(0xd2),
            'oEFsO': A(0x108),
            'gSHdg': A(0xba),
            'XlvuT': function (k) {
                return k();
            },
            'xRDfE': A(0x134) + B(0xaf),
            'ykcmW': function (k, l) {
                return k !== l;
            },
            'priVZ': A(0x124),
            'KMQKP': B(0xea),
            'AKIHR': function (k, l) {
                return k(l);
            },
            'EdlMp': function (k, l) {
                return k(l);
            },
            'PINcN': function (k, l) {
                return k !== l;
            },
            'TpTNi': A(0xcd),
            'adDLf': A(0xe9),
            'BRmOA': A(0xc3),
            'mbpDs': function (k, l) {
                return k === l;
            },
            'eJUED': B(0x11d),
            'fnxzf': B(0x122) + B(0xb9) + B(0x12a),
            'mewHQ': A(0xd6),
            'cesoW': function (k, l) {
                return k(l);
            },
            'FRbrQ': A(0x125)
        }, g = {};
    g[A(0xf6)] = '*';
    const h = {};
    h[A(0xcb)] = g, h[B(0xde) + 't'] = 0x2bf20, h[A(0xc2) + 'al'] = 0xea60, io = new socket_io_1[(B(0xfb))](e, h);
    const i = {
            'host': process[B(0xee)][A(0xf5) + B(0xe2)],
            'port': f[B(0xdd)](Number, process[A(0xee)][B(0xa6) + B(0x116)]),
            'username': process[A(0xee)][B(0xf7) + B(0x123)],
            'password': process[B(0xee)][A(0xa6) + B(0x12d)]
        }, j = socket_io_redis_1[A(0xa8)];
    return io[B(0xf2)](f[B(0xc9)](j, i)), io[A(0xeb)](async (k, l) => {
        const C = A, D = A;
        try {
            if (f[C(0xda)](f[D(0xe5)], f[D(0xe5)])) {
                const m = k?.[D(0xd5)]?.[D(0xdb)]?.[D(0xa2)], n = (0x33 + 0x50 * 0x8 + -0x1 * 0x2b3, decodeTokenSocket_1[D(0xa8)])(m);
                if (n[C(0xbf)]) {
                    const p = k?.[D(0xd5)]?.[C(0xdb)];
                    k[C(0xd5)][D(0xdb)] = {
                        ...p,
                        ...n[C(0x113)],
                        'id': f[C(0xdd)](String, n[C(0x113)]['id']),
                        'tenantId': f[C(0xdd)](String, n[D(0x113)][C(0x120)])
                    };
                    const q = {};
                    q[D(0x121)] = [
                        'id',
                        f[D(0xb5)],
                        f[C(0xe8)],
                        f[C(0xb1)],
                        f[C(0x131)],
                        f[D(0x10d)],
                        f[C(0xd4)],
                        f[C(0xed)]
                    ];
                    const r = await User_1[D(0xa8)][C(0x130)](n[D(0x113)]['id'], q);
                    k[C(0xd5)][C(0xdb)][D(0xac)] = r, f[D(0xef)](l);
                }
                f[C(0xdd)](l, new Error(f[C(0xc5)]));
            } else {
                const t = {};
                return t[D(0xa8)] = j, g && h[D(0xc7)] ? i : t;
            }
        } catch (t) {
            if (f[D(0xa7)](f[C(0xe4)], f[D(0x11a)]))
                logger_1[C(0x10c)][D(0xab)](D(0x118) + D(0xa1) + k), k[D(0xad)](D(0x118) + D(0xe0) + k['id']), f[C(0x112)](l, new Error(f[D(0xc5)]));
            else
                throw new h[(C(0xa8))](f[D(0xa3)]);
        }
    }), io['on'](f[B(0xbb)], k => {
        const F = A, G = A, l = {
                'JmbOi': function (n, p) {
                    const E = b;
                    return f[E(0x110)](n, p);
                },
                'ROMAy': f[F(0xae)],
                'seZcF': f[F(0x115)]
            }, {tenantId: m} = k[G(0xd5)][G(0xdb)];
        if (m) {
            if (f[F(0x10a)](f[G(0x117)], f[G(0x117)])) {
                const n = {};
                n[F(0xd9)] = f[F(0xa5)], n[F(0x113)] = k[G(0xd5)][G(0xdb)], logger_1[F(0x10c)][G(0x105)](n), k[F(0xe3)](m[G(0x106)]()), k['on'](m + (G(0xa9) + G(0xe1)), async p => {
                    const H = G, I = G, q = await User_1[H(0xa8)][H(0x130)](p[I(0xd1)]), r = {};
                    r[I(0xbd)] = !![], await q[H(0x101)](r), k[I(0xad)](p[I(0x120)] + (I(0x12b) + I(0x128)), q);
                }), k['on'](m + (F(0x133) + 'ox'), p => {
                    const J = F, K = G;
                    l[J(0x12c)](l[K(0x129)], l[J(0xf9)]) ? (logger_1[J(0x10c)][K(0x105)](K(0x9f) + K(0xfe) + K(0xfc) + '\x20' + m + ':' + p), k[K(0xe3)](m + ':' + p)) : (g[J(0x10c)][J(0x105)](K(0x10f) + K(0x9e) + K(0xbc) + K(0xff) + h + (J(0xd0) + K(0xf3))), i[K(0xe3)](j + (J(0xd0) + J(0xf3))));
                }), k['on'](m + (G(0xb6) + G(0x12f)), () => {
                    const M = F, N = G, p = {
                            'kcjPe': function (q, r) {
                                const L = b;
                                return f[L(0xc0)](q, r);
                            },
                            'hctIb': f[M(0xc5)]
                        };
                    f[N(0x110)](f[N(0xdc)], f[N(0xdc)]) ? (i[N(0x10c)][M(0xab)](M(0x118) + M(0xa1) + j), k[M(0xad)](N(0x118) + N(0xe0) + l['id']), p[N(0xb3)](m, new n(p[N(0xa0)]))) : (logger_1[M(0x10c)][M(0x105)](M(0x10f) + N(0x9e) + N(0xbc) + N(0xff) + m + (N(0xd0) + N(0xf3))), k[N(0xe3)](m + (N(0xd0) + M(0xf3))));
                }), k['on'](m + (F(0xf4) + 'ts'), p => {
                    const O = G, P = F;
                    logger_1[O(0x10c)][P(0x105)](O(0x10f) + O(0xb4) + m + ':' + p + (O(0xe6) + P(0x132))), k[O(0xe3)](m + ':' + p);
                }), Chat_1[G(0xa8)][G(0xcf)](k);
            } else {
                if (!f)
                    throw new i[(G(0xa8))](f[F(0xa3)]);
                return h;
            }
        }
        k['on'](f[F(0xf0)], q => {
            const Q = G, R = F, r = {};
            r[Q(0xd9)] = R(0xb2) + R(0xb0) + Q(0x100) + m + ',\x20' + q, logger_1[R(0x10c)][Q(0x105)](r);
        });
    }), io;
};
exports[y(0xfa)] = initIO;
const getIO = () => {
    const S = x, T = y, d = {};
    d[S(0xce)] = S(0xec) + S(0xd7) + S(0x11c);
    const e = d;
    if (!io)
        throw new AppError_1[(S(0xa8))](e[T(0xce)]);
    return io;
};
exports[y(0xb8)] = getIO;