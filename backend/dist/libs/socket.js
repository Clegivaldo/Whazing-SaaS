'use strict';
const x = b, y = b;
(function (c, d) {
    const v = b, w = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(v(0x272)) / (0x4e2 * 0x2 + -0x1369 + 0x9a6) * (-parseInt(w(0x236)) / (0xff4 + -0x1894 + 0xaa * 0xd)) + parseInt(w(0x20d)) / (0x31 * -0x46 + 0x1721 + -0x9b8) * (-parseInt(v(0x281)) / (0x26a + 0x2130 + -0x2396 * 0x1)) + -parseInt(w(0x260)) / (-0x97 * 0x2f + -0x47 * -0x7b + -0x65f) + parseInt(v(0x1fa)) / (-0x7ea * 0x2 + 0x1965 + 0x7 * -0x15d) + -parseInt(w(0x251)) / (-0x15ca + -0xadc + 0x20ad) * (-parseInt(w(0x240)) / (0x16c1 + 0x2377 + -0x4c * 0xc4)) + parseInt(w(0x24f)) / (0x7 * -0x243 + 0x1b * -0x4 + 0x104a) * (parseInt(v(0x27e)) / (0x1f19 + -0x9 * -0x9e + -0x249d)) + -parseInt(w(0x23e)) / (-0x83f + 0x71a + -0x4c * -0x4);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x38b9 * 0x3 + 0x32549 * 0x1 + -0x92c * 0xd));
var __importDefault = this && this[x(0x216) + x(0x204)] || function (c) {
    const z = x;
    return c && c[z(0x250)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x19 * -0x153 + 0x2d5 * 0xd + -0x43ff);
        let h = e[f];
        return h;
    }, b(c, d);
}
const o = {};
o[y(0x244)] = !![], Object[x(0x234) + y(0x1f1)](exports, y(0x250), o), exports[x(0x21d)] = exports[y(0x1ee)] = void (0x22a2 + 0x26a6 + -0x4948);
const socket_io_1 = require(y(0x1ef)), socket_io_redis_1 = __importDefault(require(y(0x22a) + x(0x252))), AppError_1 = __importDefault(require(y(0x231) + x(0x1f3))), decodeTokenSocket_1 = __importDefault(require(x(0x1f8) + x(0x241))), logger_1 = require(y(0x209) + x(0x255)), User_1 = __importDefault(require(x(0x228) + y(0x262))), Chat_1 = __importDefault(require(y(0x218) + y(0x201)));
let io;
function a() {
    const U = [
        'hHOTK',
        'tusUser',
        'PaHKQ',
        'gHhbK',
        '\x20tickets\x20c',
        'connection',
        'default',
        '591745pLbfWc',
        'ent\x20discon',
        'User',
        ':joinTicke',
        'update',
        'status',
        'id:',
        ':notificat',
        'userId',
        'DDNaQ',
        'authentica',
        'ORT',
        'CRaYI',
        'SOCKET\x20Cli',
        'logger',
        'JErDI',
        'register',
        'profile',
        '7024nqKOQE',
        'oined\x20to\x20',
        'OMhab',
        'meFzB',
        'QCfbj',
        'XgbqX',
        'ByvZN',
        'EmEqZ',
        'ion',
        'dWYpg',
        'nected\x20,\x20',
        'dRibi',
        '570220amGAOQ',
        'bAePQ',
        'emit',
        '848IvTUTF',
        'ASSWORD',
        ':updateSta',
        'initIO',
        'socket.io',
        'LnEjX',
        'erty',
        'disconnect',
        'AppError',
        'wkTop',
        'lized',
        'uqmpy',
        'tion\x20error',
        './decodeTo',
        'pingTimeou',
        '1575384OFewYx',
        'GVSbh',
        'aOVVs',
        'XEWkw',
        'et\x20channel',
        'DEccs',
        'attributes',
        'at/Chat',
        ':joinNotif',
        'tenant',
        'fault',
        'nected\x20in\x20',
        'iKCxq',
        'isValid',
        'ied',
        '../utils/l',
        'tenantId',
        'A\x20client\x20j',
        'hannel\x20',
        '2652lFPxqQ',
        'keUmY',
        'hannel.',
        'data',
        ':joinChatB',
        'origin',
        'toString',
        'cors',
        'fITGl',
        '__importDe',
        'Server',
        './socketCh',
        'SauVm',
        'info',
        'use',
        ':userVerif',
        'getIO',
        'SERNAME',
        'HkofR',
        'join',
        'tokenInval',
        'fIfPU',
        'email',
        'cCCKV',
        'bvxVR',
        'Client\x20con',
        'cmbql',
        '../models/',
        'message',
        'socket.io-',
        'GaEOS',
        'not\x20initia',
        'lastLogin',
        'fication\x20c',
        'wbMBP',
        'Socket\x20IO\x20',
        '../errors/',
        'IO_REDIS_P',
        'DYhjY',
        'defineProp',
        'user',
        '46fMsiWN',
        'env',
        'token',
        'lastOnline',
        'ucJuC',
        'lNXIq',
        'IO_REDIS_S',
        'oHVMy',
        '3329942DMDhrU',
        'id:\x20',
        '36408WpNSvX',
        'kenSocket',
        'ERVER',
        'oined\x20noti',
        'value',
        'handshake',
        'pingInterv',
        'ication',
        'adapter',
        'Client\x20joi',
        'auth',
        'name',
        'ned\x20a\x20tick',
        'nqqYI',
        'IO_REDIS_U',
        '9UaKlQA',
        '__esModule',
        '399SrEjMv',
        'redis',
        'findByPk',
        'isOnline',
        'ogger',
        'warn',
        'iSKEU',
        'vXijI'
    ];
    a = function () {
        return U;
    };
    return a();
}
const initIO = e => {
    const A = y, B = y, f = {
            'EmEqZ': function (k, l) {
                return k(l);
            },
            'HkofR': A(0x26a) + B(0x1f7),
            'LnEjX': function (k, l) {
                return k === l;
            },
            'nqqYI': B(0x277),
            'dRibi': A(0x274),
            'ucJuC': function (k, l) {
                return k(l);
            },
            'fITGl': B(0x20a),
            'bvxVR': B(0x24b),
            'iKCxq': A(0x223),
            'GaEOS': A(0x271),
            'XEWkw': A(0x265),
            'CRaYI': A(0x22d),
            'DEccs': B(0x239),
            'wkTop': function (k) {
                return k();
            },
            'oHVMy': function (k, l) {
                return k(l);
            },
            'ByvZN': function (k, l) {
                return k !== l;
            },
            'vXijI': A(0x25c),
            'hHOTK': A(0x224),
            'QCfbj': A(0x22f),
            'cmbql': function (k, l) {
                return k === l;
            },
            'DYhjY': A(0x1f6),
            'DDNaQ': B(0x20e),
            'bAePQ': B(0x226) + B(0x205) + A(0x203),
            'lNXIq': A(0x1f2),
            'dWYpg': function (k, l) {
                return k(l);
            },
            'aOVVs': A(0x25e)
        }, g = {};
    g[B(0x212)] = '*';
    const h = {};
    h[A(0x214)] = g, h[A(0x1f9) + 't'] = 0x2bf20, h[B(0x246) + 'al'] = 0xea60, io = new socket_io_1[(A(0x217))](e, h);
    const i = {
            'host': process[B(0x237)][B(0x23c) + B(0x242)],
            'port': f[B(0x23a)](Number, process[A(0x237)][A(0x232) + B(0x26b)]),
            'username': process[A(0x237)][A(0x24e) + B(0x21e)],
            'password': process[B(0x237)][A(0x232) + A(0x282)]
        }, j = socket_io_redis_1[A(0x25f)];
    return io[A(0x248)](f[B(0x27b)](j, i)), io[A(0x21b)](async (k, l) => {
        const D = A, E = A, m = {
                'JErDI': function (n, p) {
                    const C = b;
                    return f[C(0x279)](n, p);
                },
                'SauVm': f[D(0x21f)]
            };
        if (f[D(0x1f0)](f[E(0x24d)], f[D(0x27d)]))
            i[D(0x26e)][E(0x256)](D(0x221) + E(0x23f) + j), k[D(0x280)](E(0x221) + E(0x266) + l['id']), m[E(0x26f)](m, new n(m[D(0x219)]));
        else
            try {
                const p = k?.[E(0x245)]?.[E(0x24a)]?.[D(0x238)], q = (-0x2 * 0x78b + -0x1322 * -0x2 + -0x172e, decodeTokenSocket_1[D(0x25f)])(p);
                if (q[E(0x207)]) {
                    const r = k?.[D(0x245)]?.[E(0x24a)];
                    k[D(0x245)][D(0x24a)] = {
                        ...r,
                        ...q[D(0x210)],
                        'id': f[D(0x279)](String, q[D(0x210)]['id']),
                        'tenantId': f[E(0x23a)](String, q[E(0x210)][D(0x20a)])
                    };
                    const s = {};
                    s[E(0x200)] = [
                        'id',
                        f[E(0x215)],
                        f[E(0x225)],
                        f[E(0x206)],
                        f[D(0x22b)],
                        f[E(0x1fd)],
                        f[D(0x26c)],
                        f[D(0x1ff)]
                    ];
                    const t = await User_1[D(0x25f)][D(0x253)](q[D(0x210)]['id'], s);
                    k[E(0x245)][D(0x24a)][E(0x235)] = t, f[E(0x1f4)](l);
                }
                f[E(0x23a)](l, new Error(f[E(0x21f)]));
            } catch (u) {
                logger_1[E(0x26e)][D(0x256)](E(0x221) + D(0x23f) + k), k[D(0x280)](E(0x221) + D(0x266) + k['id']), f[D(0x23d)](l, new Error(f[E(0x21f)]));
            }
    }), io['on'](f[B(0x1fc)], k => {
        const G = B, H = B, l = {
                'GVSbh': function (n, p) {
                    const F = b;
                    return f[F(0x278)](n, p);
                },
                'iSKEU': f[G(0x258)],
                'meFzB': f[H(0x259)],
                'PaHKQ': f[H(0x276)]
            }, {tenantId: m} = k[G(0x245)][H(0x24a)];
        if (m) {
            if (f[H(0x227)](f[G(0x233)], f[G(0x269)]))
                i[H(0x26e)][G(0x21a)](H(0x249) + H(0x24c) + H(0x1fe) + '\x20' + j + ':' + k), l[G(0x220)](m + ':' + n);
            else {
                const p = {};
                p[G(0x229)] = f[G(0x27f)], p[H(0x210)] = k[G(0x245)][G(0x24a)], logger_1[G(0x26e)][G(0x21a)](p), k[H(0x220)](m[G(0x213)]()), k['on'](m + (H(0x21c) + G(0x208)), async q => {
                    const I = H, J = H, r = await User_1[I(0x25f)][J(0x253)](q[I(0x268)]), s = {};
                    s[I(0x254)] = !![], await r[I(0x264)](s), k[I(0x280)](q[J(0x20a)] + (I(0x1ed) + J(0x25a)), r);
                }), k['on'](m + (G(0x211) + 'ox'), q => {
                    const K = H, L = H;
                    l[K(0x1fb)](l[K(0x257)], l[L(0x257)]) ? (g[K(0x26e)][L(0x21a)](K(0x20b) + K(0x243) + K(0x22e) + L(0x20c) + h + (K(0x267) + K(0x27a))), i[K(0x220)](j + (K(0x267) + K(0x27a)))) : (logger_1[L(0x26e)][K(0x21a)](K(0x249) + K(0x24c) + L(0x1fe) + '\x20' + m + ':' + q), k[L(0x220)](m + ':' + q));
                }), k['on'](m + (H(0x202) + G(0x247)), () => {
                    const M = H, N = H;
                    logger_1[M(0x26e)][N(0x21a)](M(0x20b) + N(0x243) + M(0x22e) + N(0x20c) + m + (N(0x267) + M(0x27a))), k[N(0x220)](m + (N(0x267) + M(0x27a)));
                }), k['on'](m + (H(0x263) + 'ts'), q => {
                    const O = G, P = H;
                    logger_1[O(0x26e)][O(0x21a)](P(0x20b) + O(0x273) + m + ':' + q + (P(0x25d) + P(0x20f))), k[O(0x220)](m + ':' + q);
                }), Chat_1[H(0x25f)][H(0x270)](k);
            }
        }
        k['on'](f[G(0x23b)], q => {
            const Q = H, R = H;
            if (l[Q(0x1fb)](l[R(0x275)], l[Q(0x25b)])) {
                const r = {};
                r[Q(0x229)] = Q(0x26d) + Q(0x261) + Q(0x27c) + m + ',\x20' + q, logger_1[R(0x26e)][R(0x21a)](r);
            } else
                i[R(0x26e)][R(0x21a)](R(0x20b) + Q(0x273) + j + ':' + k + (Q(0x25d) + R(0x20f))), l[R(0x220)](m + ':' + n);
        });
    }), io;
};
exports[x(0x1ee)] = initIO;
const getIO = () => {
    const S = y, T = x, d = {};
    d[S(0x222)] = T(0x230) + T(0x22c) + S(0x1f5);
    const e = d;
    if (!io)
        throw new AppError_1[(S(0x25f))](e[S(0x222)]);
    return io;
};
exports[y(0x21d)] = getIO;