'use strict';const Y=b,Z=b;(function(c,d){const W=b,X=b,e=c();while(!![]){try{const f=-parseInt(W(0x10a))/0x1*(parseInt(W(0xe4))/0x2)+parseInt(W(0xf2))/0x3*(parseInt(X(0x10b))/0x4)+parseInt(W(0xf3))/0x5+-parseInt(X(0xf1))/0x6+-parseInt(X(0x110))/0x7*(parseInt(W(0xfb))/0x8)+parseInt(X(0xf7))/0x9+-parseInt(W(0x103))/0xa*(parseInt(W(0x109))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x77776));Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[Y(0x102)]=exports[Z(0xef)]=exports[Y(0x10e)]=void 0x0;const telegraf_1=require(Z(0x104)),socket_1=require(Z(0xe8)),logger_1=require('../utils/logger'),TelegramSessions=[],initTbot=async c=>{return new Promise((d,e)=>{const a0=b,a1=b;try{if(a0(0xea)===a1(0xf0)){i[a1(0xed)][a1(0xf9)]('whatsappId:\x20'+j+'\x20|\x20checkState:\x20'+k);const g=l[a1(0xeb)](q=>q['id']===g);return n[g];}else{const g=(0x0,socket_1[a0(0xe6)])(),h=c[a1(0xe5)],{tenantId:i}=c,j=new telegraf_1[(a1(0x105))](c[a0(0x107)],{});j['id']=c['id'];const k=TelegramSessions[a1(0xeb)](l=>l['id']===c['id']);if(k===-0x1){if(a0(0xfe)!==a1(0xf6))j['id']=c['id'],TelegramSessions[a0(0xee)](j);else{const m=(0x0,u[a0(0xe6)])(),n=v[a1(0xe5)],{tenantId:o}=w,p=new x[(a1(0x105))](y[a1(0x107)],{});p['id']=z['id'];const q=A[a1(0xeb)](V=>V['id']===M['id']);q===-0x1?(p['id']=M['id'],N['push'](p)):(p['id']=O['id'],P[q]=p),p['launch'](),G[a0(0x10c)]({'status':a0(0x100),'qrcode':'','retries':0x0}),m[a0(0xfa)](o+a0(0xff),{'action':a1(0x10c),'session':H}),I[a1(0xed)][a1(0xf9)](a0(0xe2)+n+'\x20-\x20READY\x20'),J['once'](a1(0xf5),()=>p[a0(0xe3)](a1(0xf5))),K['once'](a1(0xf4),()=>p[a0(0xe3)](a0(0xf4))),L(p);}}else j['id']=c['id'],TelegramSessions[k]=j;j[a0(0xfd)](),c['update']({'status':a1(0x100),'qrcode':'','retries':0x0}),g[a0(0xfa)](i+a1(0xff),{'action':a1(0x10c),'session':c}),logger_1['logger'][a0(0xf9)](a1(0xe2)+h+a1(0xfc)),process[a0(0x101)]('SIGINT',()=>j[a0(0xe3)](a1(0xf5))),process['once'](a1(0xf4),()=>j[a0(0xe3)]('SIGTERM')),d(j);}}catch(m){c['update']({'status':a0(0xe7),'qrcode':'','retries':0x0}),logger_1[a0(0xed)][a0(0x106)](a0(0xf8)+m),e(new Error(a0(0xe1)));}});};function a(){const a6=[':whatsappSession','CONNECTED','once','removeTbot','1410ZJUJmp','telegraf','Telegraf','error','tokenTelegram','aKHsg','36861AHYpOD','38113TuyBut','3255820pMYqfD','update','whatsappId:\x20','initTbot','removeTbot\x20|\x20Error:\x20','1141AzLivn','Error\x20starting\x20telegram\x20session.','Session\x20TELEGRAM:\x20','stop','38ymbPJT','name','getIO','DISCONNECTED','./socket','splice','VsefH','findIndex','\x20|\x20checkState:\x20','logger','push','getTbot','JuEXj','4950408lQobXU','3MXwwfC','4413600EbloCy','SIGTERM','SIGINT','jvfFN','8419266SHfcnV','initWbot\x20error\x20|\x20Error:\x20','info','emit','5944mfebTu','\x20-\x20READY\x20','launch','QhgRb'];a=function(){return a6;};return a();}function b(c,d){const e=a();return b=function(f,g){f=f-0xe1;let h=e[f];return h;},b(c,d);}exports[Y(0x10e)]=initTbot;const getTbot=(c,d=!![])=>{const a2=Y,a3=Y;logger_1[a2(0xed)][a2(0xf9)](a3(0x10d)+c+a3(0xec)+d);const e=TelegramSessions[a3(0xeb)](f=>f['id']===c);return TelegramSessions[e];};exports[Z(0xef)]=getTbot;const removeTbot=c=>{const a4=Y,a5=Y;try{if(a4(0x108)!==a5(0x108)){const e=i['findIndex'](u=>u['id']===o),f=k[e];e!==-0x1&&(o[a4(0x101)](a4(0xf5),()=>f['stop'](a4(0xf5))),p[a5(0x101)]('SIGTERM',()=>f[a5(0xe3)](a4(0xf4))),q[a4(0xe9)](e,0x1));}else{const e=TelegramSessions[a5(0xeb)](g=>g['id']===c),f=TelegramSessions[e];e!==-0x1&&(process['once'](a5(0xf5),()=>f[a5(0xe3)](a5(0xf5))),process[a5(0x101)](a4(0xf4),()=>f[a5(0xe3)](a5(0xf4))),TelegramSessions[a5(0xe9)](e,0x1));}}catch(g){logger_1['logger'][a5(0x106)](a5(0x10f)+g);}};exports[Y(0x102)]=removeTbot;