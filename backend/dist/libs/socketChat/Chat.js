'use strict';
function _0x58d7() {
    const _0x3fce34 = [
        'ping',
        'gtnVf',
        ':chat:upda',
        'default',
        '1444681sDlOiX',
        'name',
        'JkOVw',
        'isAdmin',
        'eBtUZ',
        'info',
        'nnected\x20(',
        'VWVrq',
        'tive',
        'EwOhe',
        'defineProp',
        'log',
        'mYiuw',
        'age',
        './Utils',
        'eventLoop',
        'dvloN',
        'updateOnli',
        'dEAnU',
        'dqpnQ',
        'nbJbZ',
        'teOnlineBu',
        'disconnect',
        'erty',
        'chatStopTy',
        'size',
        './Index',
        'dTOKE',
        'chatMessag',
        'FROM',
        'mOTOO',
        'isAgent',
        'user',
        'email',
        'length',
        'getOpenCha',
        'onSetUserA',
        'events',
        'logger',
        'chatTyping',
        'onSetUserI',
        'onChatTypi',
        '4320906BpRiJT',
        'handshake',
        'tWindows',
        'VVtCw',
        'xAoHU',
        'sfully',
        'dle',
        'auth',
        'split',
        '7aNLANg',
        'attributes',
        'isNull',
        'ctive',
        'toUser',
        'onDisconne',
        'username',
        'update',
        'sortedUser',
        ':setUserId',
        'role',
        'transport\x20',
        'findByPk',
        'find',
        'lodash',
        'joinChatSe',
        'without',
        'ndow',
        ':joinSucce',
        'type',
        'client\x20ter',
        '../../mode',
        'rver\x20USER\x20',
        'sendToSelf',
        'KwRnp',
        '1352436liCcph',
        'socketData',
        'bbles',
        'yIAQe',
        'shared',
        'User\x20disco',
        'sortByKeys',
        'neBubbles',
        '411633QcKaMO',
        'iIJUz',
        'gzgXY',
        '\x20-\x20',
        'offline',
        'findKey',
        'sockets',
        'sortBy',
        '__esModule',
        'PDsho',
        'AbRBN',
        'idleUsers',
        'updateUser',
        'ls/User',
        'aAoVy',
        'minated',
        '../../util',
        'sendToAllC',
        '):\x20',
        'tenantId',
        'znUbf',
        'gGXXW',
        'bckAe',
        'tfatw',
        'kvCrl',
        '3|4|2|7|11',
        'value',
        'debug',
        'narJo',
        'onnectedCl',
        'usersOnlin',
        'LSqwD',
        'register',
        'cXIHj',
        'jWerN',
        's/logger',
        'Mshqc',
        'JorUw',
        'ients',
        'ers',
        '1898906ruONXZ',
        'onChatMess',
        ':setUserAc',
        'onUpdateUs',
        'saveChatWi',
        'cGzAe',
        'spawnChatW',
        'List',
        'OkWXN',
        'WErHa',
        'fromPairs',
        'WFESB',
        'fault',
        'push',
        'muWvT',
        '3845340nZVvPF',
        '1|8|10|9',
        'BUzfU',
        '|6|0|5|12|',
        'gSFUC',
        'onChatStop',
        'indow',
        'cXDED',
        'VzAjC',
        'profile',
        'ssfully',
        'tkBVN',
        'fromUser',
        'GiEzu',
        '4|3|0|1|2',
        'toPairs',
        'forEach',
        'NThAq',
        '176Pjssfo',
        'joinSucces',
        'BWQgQ',
        'Typing',
        'sendToUser',
        'rOAFm',
        'NQKQU',
        'sortedIdle',
        '__importDe',
        '8633330nfMpoC',
        'GkASN',
        'error',
        'qjxRs',
        'emit'
    ];
    _0x58d7 = function () {
        return _0x3fce34;
    };
    return _0x58d7();
}
const _0xeaaa4c = _0x27ac;
(function (_0x47864b, _0x192b80) {
    const _0x4cf6ef = _0x27ac, _0x3249a4 = _0x47864b();
    while (!![]) {
        try {
            const _0x36248b = parseInt(_0x4cf6ef(0x137)) / (0x2 * 0xa9c + -0x432 + -0x1105) + parseInt(_0x4cf6ef(0x104)) / (0x86 * -0x2f + 0x2694 + 0x8 * -0x1bf) + -parseInt(_0x4cf6ef(0xd4)) / (0x1 * 0xc29 + -0x92b + -0x2fb) + -parseInt(_0x4cf6ef(0x113)) / (-0x35b * 0x5 + -0x32f * -0x1 + -0x6ce * -0x2) + parseInt(_0x4cf6ef(0x12e)) / (-0x166 * -0x1 + -0x6 * 0x107 + 0x23 * 0x23) + -parseInt(_0x4cf6ef(0x161)) / (-0x3 * 0x9d5 + -0xc6e + 0x29f3) * (parseInt(_0x4cf6ef(0x16a)) / (-0x1471 + -0x123a + 0x26b2)) + parseInt(_0x4cf6ef(0x125)) / (0x6d + 0x9 * 0x301 + -0x1 * 0x1b6e) * (-parseInt(_0x4cf6ef(0xdc)) / (-0x47 * 0x43 + -0x8 * -0x257 + -0x1a));
            if (_0x36248b === _0x192b80)
                break;
            else
                _0x3249a4['push'](_0x3249a4['shift']());
        } catch (_0x490715) {
            _0x3249a4['push'](_0x3249a4['shift']());
        }
    }
}(_0x58d7, 0x1 * 0x3f817 + -0x4120d + 0xf1706));
var __importDefault = this && this[_0xeaaa4c(0x12d) + _0xeaaa4c(0x110)] || function (_0x1a3ee4) {
    const _0x32095a = _0xeaaa4c;
    return _0x1a3ee4 && _0x1a3ee4[_0x32095a(0xe4)] ? _0x1a3ee4 : { 'default': _0x1a3ee4 };
};
const _0x4dd374 = {};
_0x4dd374[_0xeaaa4c(0xf6)] = !![], Object[_0xeaaa4c(0x141) + _0xeaaa4c(0x14e)](exports, _0xeaaa4c(0xe4), _0x4dd374);
function _0x27ac(_0x5f27d9, _0x230330) {
    const _0x228ba7 = _0x58d7();
    return _0x27ac = function (_0x118e7a, _0x5b05d0) {
        _0x118e7a = _0x118e7a - (-0x3 * 0x24d + -0x1657 + 0x503 * 0x6);
        let _0x51464b = _0x228ba7[_0x118e7a];
        return _0x51464b;
    }, _0x27ac(_0x5f27d9, _0x230330);
}
const lodash_1 = require(_0xeaaa4c(0x178)), Utils_1 = require(_0xeaaa4c(0x145)), Index_1 = require(_0xeaaa4c(0x151)), User_1 = __importDefault(require(_0xeaaa4c(0x17f) + _0xeaaa4c(0xe9))), logger_1 = require(_0xeaaa4c(0xec) + _0xeaaa4c(0xff)), events = {}, JoinChatServer = _0x1ef213 => {
        const _0x3c2f9c = _0xeaaa4c, _0x436029 = {};
        _0x436029[_0x3c2f9c(0x165)] = _0x3c2f9c(0x126) + _0x3c2f9c(0x166), _0x436029[_0x3c2f9c(0x124)] = _0x3c2f9c(0x121);
        const _0x54cf0f = _0x436029, {user: _0x5bb7ff} = _0x1ef213[_0x3c2f9c(0x162)][_0x3c2f9c(0x168)];
        logger_1[_0x3c2f9c(0x15d)][_0x3c2f9c(0x13c)](_0x3c2f9c(0x179) + _0x3c2f9c(0x180) + _0x5bb7ff[_0x3c2f9c(0x138)]);
        const {tenantId: _0x5a060f} = _0x5bb7ff, _0x3d1413 = _0x3c2f9c(0xd5) + '_' + _0x5a060f;
        let _0xa45d73;
        _0xa45d73 = Index_1[_0x3c2f9c(0xd8)][_0x3d1413];
        _0xa45d73 && (_0xa45d73[_0x3c2f9c(0xfa) + 'e'][_0x5bb7ff['id']] = {
            'sockets': [_0x1ef213['id']],
            'user': _0x5bb7ff
        }, _0xa45d73[_0x3c2f9c(0xe2)][_0x3c2f9c(0x111)](_0x1ef213), (-0x1e7a + 0x150b * -0x1 + 0x3385, Utils_1[_0x3c2f9c(0x181)])(_0x1ef213, _0x54cf0f[_0x3c2f9c(0x165)]));
        if (!_0xa45d73) {
            const _0x4107a6 = _0x54cf0f[_0x3c2f9c(0x124)][_0x3c2f9c(0x169)]('|');
            let _0x34d81f = 0x4 * 0x799 + 0x94d + -0x27b1;
            while (!![]) {
                switch (_0x4107a6[_0x34d81f++]) {
                case '0':
                    _0xa45d73[_0x3c2f9c(0xfa) + 'e'][_0x5bb7ff['id']] = {
                        'sockets': [_0x1ef213['id']],
                        'user': _0x5bb7ff
                    };
                    continue;
                case '1':
                    _0xa45d73[_0x3c2f9c(0xe2)][_0x3c2f9c(0x111)](_0x1ef213);
                    continue;
                case '2':
                    (-0x1b70 + -0x126f + 0x2ddf, Utils_1[_0x3c2f9c(0x181)])(_0x1ef213, _0x5bb7ff[_0x3c2f9c(0xef)] + (_0x3c2f9c(0x17c) + _0x3c2f9c(0x11d)));
                    continue;
                case '3':
                    _0xa45d73 = Index_1[_0x3c2f9c(0xd8)][_0x3d1413];
                    continue;
                case '4':
                    const _0x311a23 = {};
                    _0x311a23[_0x3c2f9c(0xe2)] = [], _0x311a23[_0x3c2f9c(0xfa) + 'e'] = {}, _0x311a23[_0x3c2f9c(0xe7)] = {}, Index_1[_0x3c2f9c(0xd8)][_0x3d1413] = _0x311a23;
                    continue;
                }
                break;
            }
        }
    }, UpdateUsers = _0x53a7d0 => {
        const _0x5b9c70 = _0xeaaa4c, _0x33f5e = {};
        _0x33f5e[_0x5b9c70(0x139)] = function (_0x590c62, _0x49ba5c) {
            return _0x590c62 === _0x49ba5c;
        }, _0x33f5e[_0x5b9c70(0xfb)] = _0x5b9c70(0xe8) + 's', _0x33f5e[_0x5b9c70(0xf1)] = function (_0x23dec6, _0x2b7837) {
            return _0x23dec6 > _0x2b7837;
        };
        const _0x18e1b3 = _0x33f5e, {user: _0x16f342} = _0x53a7d0[_0x5b9c70(0x162)][_0x5b9c70(0x168)], _0x75426e = _0x5b9c70(0xd5) + '_' + _0x16f342[_0x5b9c70(0xef)], _0x540603 = Index_1[_0x5b9c70(0xd8)][_0x75426e], _0xcc7efb = (0x1404 + -0x782 + -0xc82, Utils_1[_0x5b9c70(0xda)])(_0x540603[_0x5b9c70(0xfa) + 'e']);
        (-0x2 * -0x4a9 + 0x227a + -0x2bcc, lodash_1[_0x5b9c70(0x123)])(_0xcc7efb, _0x23f601 => {
            const _0x26495f = _0x5b9c70, _0x2497fc = {
                    'BWQgQ': function (_0x5da84a, _0x339332) {
                        const _0x2e854f = _0x27ac;
                        return _0x18e1b3[_0x2e854f(0x139)](_0x5da84a, _0x339332);
                    },
                    'narJo': _0x18e1b3[_0x26495f(0xfb)]
                }, _0x34b0b2 = _0x23f601[_0x26495f(0x157)], {sockets: _0xb29596} = _0x23f601;
            _0x34b0b2 && _0x18e1b3[_0x26495f(0xf1)](_0xb29596[_0x26495f(0x159)], 0x12f8 + 0x1 * 0x15c8 + -0x28c0) && (-0x1c * 0x72 + -0x89 * -0x6 + 0x942, lodash_1[_0x26495f(0x123)])(_0xb29596, _0x1d17fe => {
                const _0x3a431c = _0x26495f, _0x3a1593 = (0x1faa + -0x1 * 0x2335 + 0x38b, lodash_1[_0x3a431c(0x177)])(_0x540603[_0x3a431c(0xe2)], _0x40aacc => {
                        const _0x28a633 = _0x3a431c;
                        return _0x2497fc[_0x28a633(0x127)](_0x40aacc['id'], _0x1d17fe);
                    });
                _0x3a1593 && ((_0x34b0b2[_0x3a431c(0x174)][_0x3a431c(0x13a)] || _0x34b0b2[_0x3a431c(0x174)][_0x3a431c(0x156)]) && _0x3a1593[_0x3a431c(0x132)](_0x2497fc[_0x3a431c(0xf8)], _0xcc7efb));
            });
        });
    }, UpdateOnlineBubbles = _0x1dd421 => {
        const _0x52fe83 = _0xeaaa4c, {user: _0x468c06} = _0x1dd421[_0x52fe83(0x162)][_0x52fe83(0x168)], _0x31ca3c = _0x52fe83(0xd5) + '_' + _0x468c06[_0x52fe83(0xef)], _0x13c4c5 = Index_1[_0x52fe83(0xd8)][_0x31ca3c], _0x1752c7 = (-0x1286 + -0x22 * 0x7b + 0x22dc, lodash_1[_0x52fe83(0x10e)])((0x11a8 + -0x2505 + 0x135d, lodash_1[_0x52fe83(0xe3)])((0x12a * 0x1 + 0xef * -0x1 + -0x3b, lodash_1[_0x52fe83(0x122)])(_0x13c4c5[_0x52fe83(0xfa) + 'e']), _0x4cdb02 => {
                return _0x4cdb02[-0x6d * -0x2a + 0x1b90 + -0x2d72];
            })), _0x23b4fa = (0x9e + 0x223 * 0x6 + -0xd70, lodash_1[_0x52fe83(0x10e)])((0xc05 * 0x1 + 0x4a * 0x47 + -0x208b * 0x1, lodash_1[_0x52fe83(0xe3)])((0x1d83 + 0x1918 + -0x1 * 0x369b, lodash_1[_0x52fe83(0x122)])(_0x13c4c5[_0x52fe83(0xe7)]), _0xa0ed58 => {
                return _0xa0ed58[0x22 * 0xcb + 0x5 * -0x6c8 + 0x6f2];
            })), _0x1c691e = {};
        _0x1c691e[_0x52fe83(0x172) + _0x52fe83(0x10b)] = _0x1752c7, _0x1c691e[_0x52fe83(0x12c) + _0x52fe83(0x10b)] = _0x23b4fa, (-0x446 + 0x265 * 0x2 + -0x84, Utils_1[_0x52fe83(0xed) + _0x52fe83(0xf9) + _0x52fe83(0x102)])(_0x1dd421, _0x468c06[_0x52fe83(0xef)] + (_0x52fe83(0x135) + _0x52fe83(0x14c) + _0x52fe83(0xd6)), _0x1c691e);
    }, SpawnOpenChatWindows = _0x45081c => {
        const _0x223327 = _0xeaaa4c, _0x1666b8 = {};
        _0x1666b8[_0x223327(0xfe)] = _0x223327(0x10a) + _0x223327(0x119);
        const _0x32720d = _0x1666b8, {user: _0x55dbe5} = _0x45081c[_0x223327(0x162)][_0x223327(0x168)], _0x10bc57 = User_1[_0x223327(0x136)][_0x223327(0x176)](_0x55dbe5['id']);
        (-0x54f * 0x3 + 0x1e * 0x1e + -0x9 * -0x161, Utils_1[_0x223327(0x181)])(_0x45081c, _0x32720d[_0x223327(0xfe)], _0x10bc57);
    }, spawnChatWindow = _0xb0dbf6 => {
        const _0x3f314d = _0xeaaa4c, _0x3c71f1 = {};
        _0x3c71f1[_0x3f314d(0x10d)] = _0x3f314d(0x138), _0x3c71f1[_0x3f314d(0x13e)] = _0x3f314d(0x158), _0x3c71f1[_0x3f314d(0x117)] = _0x3f314d(0x11c), _0x3c71f1[_0x3f314d(0x101)] = _0x3f314d(0x10a) + _0x3f314d(0x119);
        const _0x3f5c86 = _0x3c71f1;
        _0xb0dbf6['on'](_0x3f5c86[_0x3f314d(0x101)], async _0x59c213 => {
            const _0xc622f4 = _0x3f314d, _0x3a4aa3 = {};
            _0x3a4aa3[_0xc622f4(0x16b)] = [
                'id',
                _0x3f5c86[_0xc622f4(0x10d)],
                _0x3f5c86[_0xc622f4(0x13e)],
                _0x3f5c86[_0xc622f4(0x117)]
            ];
            const _0x38af98 = await User_1[_0xc622f4(0x136)][_0xc622f4(0x176)](_0x59c213, _0x3a4aa3);
            (-0x12 * -0x131 + -0x2 * 0x32f + 0x4 * -0x3c5, Utils_1[_0xc622f4(0x181)])(_0xb0dbf6, _0x3f5c86[_0xc622f4(0x101)], _0x38af98);
        });
    }, onSetUserIdle = _0x6646ee => {
        const _0x1edf9c = _0xeaaa4c, _0x460007 = {
                'dqpnQ': function (_0x32bebe, _0x2db3f5) {
                    return _0x32bebe(_0x2db3f5);
                }
            }, {user: _0x1f1ddc} = _0x6646ee[_0x1edf9c(0x162)][_0x1edf9c(0x168)], _0x303e66 = _0x1edf9c(0xd5) + '_' + _0x1f1ddc[_0x1edf9c(0xef)];
        _0x6646ee['on'](_0x1f1ddc[_0x1edf9c(0xef)] + (_0x1edf9c(0x173) + 'le'), () => {
            const _0x1ebf12 = _0x1edf9c;
            let _0x4d7197;
            _0x4d7197 = Index_1[_0x1ebf12(0xd8)][_0x303e66];
            _0x4d7197 && (_0x4d7197[_0x1ebf12(0xe7)][_0x1f1ddc['id']] = {
                'sockets': [_0x6646ee['id']],
                'user': _0x1f1ddc
            });
            if (!_0x4d7197) {
                const _0x5eae72 = {};
                _0x5eae72[_0x1ebf12(0xe2)] = [], _0x5eae72[_0x1ebf12(0xfa) + 'e'] = {}, _0x5eae72[_0x1ebf12(0xe7)] = {}, Index_1[_0x1ebf12(0xd8)][_0x303e66] = _0x5eae72, _0x4d7197 = Index_1[_0x1ebf12(0xd8)][_0x303e66], _0x4d7197[_0x1ebf12(0xe7)][_0x1ebf12(0x111)](_0x6646ee['id']);
            }
            _0x4d7197?.[_0x1ebf12(0xfa) + 'e'][_0x1f1ddc['id']] && delete _0x4d7197?.[_0x1ebf12(0xfa) + 'e'][_0x1f1ddc['id']], _0x460007[_0x1ebf12(0x14a)](UpdateOnlineBubbles, _0x6646ee);
        });
    }, onSetUserActive = _0x5bafb2 => {
        const _0x4226e5 = _0xeaaa4c, _0x128506 = {
                'AbRBN': function (_0x38fd40, _0x59938a) {
                    return _0x38fd40(_0x59938a);
                }
            }, {user: _0x299384} = _0x5bafb2[_0x4226e5(0x162)][_0x4226e5(0x168)], _0x3d8de0 = _0x4226e5(0xd5) + '_' + _0x299384[_0x4226e5(0xef)];
        _0x5bafb2['on'](_0x299384[_0x4226e5(0xef)] + (_0x4226e5(0x106) + _0x4226e5(0x13f)), () => {
            const _0x42fa76 = _0x4226e5;
            let _0x4ef5ad = Index_1[_0x42fa76(0xd8)][_0x3d8de0];
            _0x4ef5ad?.[_0x42fa76(0xe7)][_0x299384['id']] && delete _0x4ef5ad?.[_0x42fa76(0xe7)][_0x299384['id']];
            if (!_0x4ef5ad) {
                const _0x15d949 = {};
                _0x15d949[_0x42fa76(0xe2)] = [], _0x15d949[_0x42fa76(0xfa) + 'e'] = {}, _0x15d949[_0x42fa76(0xe7)] = {}, Index_1[_0x42fa76(0xd8)][_0x3d8de0] = _0x15d949, _0x4ef5ad = Index_1[_0x42fa76(0xd8)][_0x3d8de0], _0x4ef5ad[_0x42fa76(0xfa) + 'e'][_0x42fa76(0x111)](_0x5bafb2['id']);
            }
            _0x4ef5ad?.[_0x42fa76(0xfa) + 'e'] && (_0x4ef5ad[_0x42fa76(0xfa) + 'e'][_0x299384['id']] = {
                'sockets': [_0x5bafb2['id']],
                'user': _0x299384
            }), _0x128506[_0x42fa76(0xe6)](UpdateOnlineBubbles, _0x5bafb2);
        });
    }, onUpdateUsers = _0x329d6d => {
        const _0x537e2f = _0xeaaa4c, _0x31e3ff = {};
        _0x31e3ff[_0x537e2f(0xea)] = _0x537e2f(0xe8) + 's';
        const _0x307b9c = _0x31e3ff;
        _0x329d6d['on'](_0x307b9c[_0x537e2f(0xea)], UpdateUsers);
    }, onChatMessage = _0x5ab307 => {
        const _0x54e2c8 = _0xeaaa4c, _0x2a6cae = {};
        _0x2a6cae[_0x54e2c8(0xf2)] = _0x54e2c8(0x154), _0x2a6cae[_0x54e2c8(0x155)] = function (_0x5787f2, _0xb5274e) {
            return _0x5787f2 === _0xb5274e;
        }, _0x2a6cae[_0x54e2c8(0x120)] = _0x54e2c8(0x153) + 'e';
        const _0x42962c = _0x2a6cae, {user: _0x51ac40} = _0x5ab307[_0x54e2c8(0x162)][_0x54e2c8(0x168)], {tenantId: _0x537ce0} = _0x51ac40, _0x5d9f49 = _0x54e2c8(0xd5) + '_' + _0x537ce0;
        _0x5ab307['on'](_0x42962c[_0x54e2c8(0x120)], function (_0x3292cc) {
            const _0x4e446a = _0x54e2c8, _0x1ca8bd = Index_1[_0x4e446a(0xd8)][_0x5d9f49];
            if (_0x1ca8bd) {
                const {to: _0xb44130} = _0x3292cc, {from: _0x1f12e5} = _0x3292cc;
                console[_0x4e446a(0x142)]('TO', _0xb44130), console[_0x4e446a(0x142)](_0x42962c[_0x4e446a(0xf2)], _0x1f12e5);
                const _0x94aefb = _0x3292cc[_0x4e446a(0x17d)];
                _0x42962c[_0x4e446a(0x155)](_0x3292cc[_0x4e446a(0x17d)], 's') ? _0x3292cc[_0x4e446a(0x17d)] = 'r' : _0x3292cc[_0x4e446a(0x17d)] = 's', (-0x1ede + 0x1dcb + 0x113, Utils_1[_0x4e446a(0x129)])(_0x1ca8bd[_0x4e446a(0xe2)], _0x1ca8bd[_0x4e446a(0xfa) + 'e'], _0x3292cc[_0x4e446a(0x16e)][_0x4e446a(0x170)], _0x42962c[_0x4e446a(0x120)], _0x3292cc), _0x3292cc[_0x4e446a(0x17d)] = _0x94aefb, (0x704 + 0x167 * 0x1 + -0x86b, Utils_1[_0x4e446a(0x129)])(_0x1ca8bd[_0x4e446a(0xe2)], _0x1ca8bd[_0x4e446a(0xfa) + 'e'], _0x3292cc[_0x4e446a(0x11f)][_0x4e446a(0x170)], _0x42962c[_0x4e446a(0x120)], _0x3292cc);
            }
        });
    }, onChatTyping = _0x5bd04d => {
        const _0x213b98 = _0xeaaa4c, _0x3f33ae = {
                'znUbf': function (_0x120125, _0x3dadd1) {
                    return _0x120125 === _0x3dadd1;
                },
                'gtnVf': function (_0x353569, _0x3fc766) {
                    return _0x353569(_0x3fc766);
                },
                'VzAjC': function (_0x321057, _0x28ef59) {
                    return _0x321057(_0x28ef59);
                },
                'nbJbZ': function (_0xac5504, _0x5ffac7) {
                    return _0xac5504 === _0x5ffac7;
                },
                'mYiuw': _0x213b98(0x15e)
            }, {user: _0x5b10df} = _0x5bd04d[_0x213b98(0x162)][_0x213b98(0x168)], {tenantId: _0x17ccbb} = _0x5b10df, _0x1428eb = _0x213b98(0xd5) + '_' + _0x17ccbb;
        _0x5bd04d['on'](_0x3f33ae[_0x213b98(0x143)], _0x59f862 => {
            const _0x4625fb = _0x213b98, _0x52addc = {
                    'dTOKE': function (_0x5022d4, _0x3ba2a5) {
                        const _0x5202fc = _0x27ac;
                        return _0x3f33ae[_0x5202fc(0xf0)](_0x5022d4, _0x3ba2a5);
                    },
                    'iIJUz': function (_0x4c5813, _0x562663) {
                        const _0x45895a = _0x27ac;
                        return _0x3f33ae[_0x45895a(0x134)](_0x4c5813, _0x562663);
                    },
                    'cXDED': function (_0x27270d, _0x2daeb6) {
                        const _0x29a141 = _0x27ac;
                        return _0x3f33ae[_0x29a141(0x11b)](_0x27270d, _0x2daeb6);
                    },
                    'gzgXY': function (_0x3c66b2, _0x4641aa) {
                        const _0x3b232b = _0x27ac;
                        return _0x3f33ae[_0x3b232b(0x14b)](_0x3c66b2, _0x4641aa);
                    },
                    'Mshqc': function (_0xee24e9, _0x2dc04c) {
                        const _0x11d0bc = _0x27ac;
                        return _0x3f33ae[_0x11d0bc(0x11b)](_0xee24e9, _0x2dc04c);
                    },
                    'VVtCw': function (_0x5628b9, _0x504f2e) {
                        const _0x3db9ab = _0x27ac;
                        return _0x3f33ae[_0x3db9ab(0x134)](_0x5628b9, _0x504f2e);
                    }
                }, _0x2f537b = Index_1[_0x4625fb(0xd8)][_0x1428eb];
            if (_0x2f537b) {
                const {to: _0x579b16} = _0x59f862, {from: _0x21215d} = _0x59f862;
                let _0x4bdc11 = null, _0x2c888d = null;
                (0x139 * 0xf + -0x1c47 + 0x9f0, lodash_1[_0x4625fb(0x177)])(_0x2f537b[_0x4625fb(0xfa) + 'e'], function (_0x5ef149) {
                    const _0x52df9c = _0x4625fb;
                    _0x52addc[_0x52df9c(0x152)](_0x52addc[_0x52df9c(0xdd)](String, _0x5ef149[_0x52df9c(0x157)]['id']), _0x52addc[_0x52df9c(0x11a)](String, _0x579b16)) && (_0x4bdc11 = _0x5ef149[_0x52df9c(0x157)]), _0x52addc[_0x52df9c(0xde)](_0x52addc[_0x52df9c(0x100)](String, _0x5ef149[_0x52df9c(0x157)]['id']), _0x52addc[_0x52df9c(0x164)](String, _0x21215d)) && (_0x2c888d = _0x5ef149[_0x52df9c(0x157)]);
                });
                if ((-0x43 * 0x31 + 0x1 * 0x18c3 + -0xbf0, lodash_1[_0x4625fb(0x16c)])(_0x4bdc11) || (0x446 + -0x137 * 0x13 + 0x141 * 0xf, lodash_1[_0x4625fb(0x16c)])(_0x2c888d))
                    return;
                _0x59f862[_0x4625fb(0x16e)] = _0x4bdc11, _0x59f862[_0x4625fb(0x11f)] = _0x2c888d, (0x1c * 0x80 + -0x1333 + 0xb * 0x79, Utils_1[_0x4625fb(0x129)])(_0x2f537b[_0x4625fb(0xe2)], _0x2f537b[_0x4625fb(0xfa) + 'e'], _0x4bdc11[_0x4625fb(0x138)], _0x3f33ae[_0x4625fb(0x143)], _0x59f862);
            }
        });
    }, onChatStopTyping = _0x980e1a => {
        const _0x1bc168 = _0xeaaa4c, _0x79fa4a = {
                'tkBVN': function (_0x484834, _0x17c2a0) {
                    return _0x484834 === _0x17c2a0;
                },
                'cXIHj': function (_0x1b9006, _0x240fdd) {
                    return _0x1b9006(_0x240fdd);
                },
                'EwOhe': _0x1bc168(0x14f) + _0x1bc168(0x133)
            }, {user: _0x14803d} = _0x980e1a[_0x1bc168(0x162)][_0x1bc168(0x168)], {tenantId: _0x5b041b} = _0x14803d, _0x27ff7d = _0x1bc168(0xd5) + '_' + _0x5b041b;
        _0x980e1a['on'](_0x79fa4a[_0x1bc168(0x140)], _0xec3845 => {
            const _0x367d30 = _0x1bc168, _0x10205a = {
                    'KwRnp': function (_0x598add, _0x53fa43) {
                        const _0x267b28 = _0x27ac;
                        return _0x79fa4a[_0x267b28(0x11e)](_0x598add, _0x53fa43);
                    },
                    'eBtUZ': function (_0x3b73eb, _0x588c5c) {
                        const _0x51df0d = _0x27ac;
                        return _0x79fa4a[_0x51df0d(0xfd)](_0x3b73eb, _0x588c5c);
                    }
                }, _0x4473d7 = Index_1[_0x367d30(0xd8)][_0x27ff7d];
            if (_0x4473d7) {
                const {to: _0x51c9de} = _0xec3845;
                let _0x52f713 = null;
                (-0x1 * 0x1727 + -0x1a5 * -0x1 + -0x2 * -0xac1, lodash_1[_0x367d30(0x177)])(_0x4473d7[_0x367d30(0xfa) + 'e'], _0x4c5fa5 => {
                    const _0x22d49f = _0x367d30;
                    _0x10205a[_0x22d49f(0x182)](_0x10205a[_0x22d49f(0x13b)](String, _0x4c5fa5[_0x22d49f(0x157)]['id']), _0x10205a[_0x22d49f(0x13b)](String, _0x51c9de)) && (_0x52f713 = _0x4c5fa5[_0x22d49f(0x157)]);
                });
                if ((-0x1e93 + 0xa87 + 0x2 * 0xa06, lodash_1[_0x367d30(0x16c)])(_0x52f713))
                    return;
                _0xec3845[_0x367d30(0x16e)] = _0x52f713, (0xb6 * 0x27 + -0xd1c + -0x74f * 0x2, Utils_1[_0x367d30(0x129)])(_0x4473d7[_0x367d30(0xe2)], _0x4473d7[_0x367d30(0xfa) + 'e'], _0x52f713[_0x367d30(0x138)], _0x79fa4a[_0x367d30(0x140)], _0xec3845);
            }
        });
    }, saveChatWindow = _0x3b0e8a => {
        const _0x11e597 = _0xeaaa4c, _0x11f075 = {};
        _0x11f075[_0x11e597(0xf3)] = _0x11e597(0x108) + _0x11e597(0x17b);
        const _0xe516a3 = _0x11f075;
        _0x3b0e8a['on'](_0xe516a3[_0x11e597(0xf3)], async _0x15f59e => {
            const _0x122859 = _0x11e597, {userId: _0x405d40} = _0x15f59e, {remove: _0x3f4496} = _0x15f59e, _0x90b68f = await User_1[_0x122859(0x136)][_0x122859(0x176)](_0x405d40);
            if (_0x90b68f) {
                if (_0x3f4496) {
                } else {
                }
            }
        });
    }, onDisconnect = _0x5b85ae => {
        const _0x315b97 = _0xeaaa4c, _0x5cd490 = {
                'muWvT': function (_0x4dedad, _0x5a89c5) {
                    return _0x4dedad < _0x5a89c5;
                },
                'PDsho': function (_0xd3fa74, _0x143f56) {
                    return _0xd3fa74 < _0x143f56;
                },
                'rOAFm': _0x315b97(0xe0),
                'OkWXN': function (_0x21a4ad, _0x547a6a) {
                    return _0x21a4ad(_0x547a6a);
                },
                'qjxRs': function (_0x226e46, _0x35a13b) {
                    return _0x226e46 === _0x35a13b;
                },
                'yIAQe': _0x315b97(0x175) + _0x315b97(0x130),
                'WFESB': _0x315b97(0x17e) + _0x315b97(0xeb),
                'dEAnU': _0x315b97(0x14d)
            };
        _0x5b85ae['on'](_0x5cd490[_0x315b97(0x149)], async _0x3ced45 => {
            const _0x130661 = _0x315b97, {user: _0x58a2e9} = _0x5b85ae[_0x130661(0x162)][_0x130661(0x168)], {tenantId: _0x532b9a} = _0x58a2e9, _0x550a07 = _0x130661(0xd5) + '_' + _0x532b9a, _0xf58db0 = Index_1[_0x130661(0xd8)][_0x550a07];
            if (_0xf58db0?.[_0x130661(0xfa) + 'e']) {
                if (_0xf58db0[_0x130661(0xfa) + 'e'][_0x58a2e9['id']]) {
                    const _0x2ad16b = _0xf58db0[_0x130661(0xfa) + 'e'][_0x58a2e9['id']][_0x130661(0xe2)];
                    _0x5cd490[_0x130661(0x112)]((-0x6c6 + 0x17 * -0xcb + -0x1 * -0x1903, lodash_1[_0x130661(0x150)])(_0x2ad16b), 0x1b90 + -0x6f * 0x1b + -0xfd9) ? delete _0xf58db0[_0x130661(0xfa) + 'e'][_0x58a2e9['id']] : _0xf58db0[_0x130661(0xfa) + 'e'][_0x58a2e9['id']][_0x130661(0xe2)] = (0x218c + 0x19 * 0x41 + -0x27e5, lodash_1[_0x130661(0x17a)])(_0x2ad16b, _0x5b85ae['id']);
                }
                const _0x1b95d2 = {};
                _0x1b95d2['id'] = _0x5b85ae['id'];
                const _0x581238 = (0x1a0d + -0x23e5 + -0x118 * -0x9, lodash_1[_0x130661(0xe1)])(_0xf58db0[_0x130661(0xe2)], _0x1b95d2);
                _0xf58db0[_0x130661(0xe2)] = (-0x1 * -0x85b + -0xf1 * 0x24 + -0x1 * -0x1989, lodash_1[_0x130661(0x17a)])(_0xf58db0[_0x130661(0xe2)], _0x581238);
            }
            if (_0xf58db0?.[_0x130661(0xe7)]) {
                if (_0xf58db0[_0x130661(0xe7)][_0x58a2e9['id']]) {
                    const _0x3ee0bf = _0xf58db0[_0x130661(0xe7)][_0x58a2e9['id']][_0x130661(0xe2)];
                    _0x5cd490[_0x130661(0xe5)]((0x1e5e + -0x6b * 0x45 + -0x17 * 0x11, lodash_1[_0x130661(0x150)])(_0x3ee0bf), 0x237d + -0x83f * 0x2 + -0x12fd) ? delete _0xf58db0[_0x130661(0xe7)][_0x58a2e9['id']] : _0xf58db0[_0x130661(0xe7)][_0x58a2e9['id']][_0x130661(0xe2)] = (-0x15 * -0x1d + 0x1983 + -0x1be4, lodash_1[_0x130661(0x17a)])(_0x3ee0bf, _0x5b85ae['id']);
                }
                const _0x2e6519 = {};
                _0x2e6519['id'] = _0x5b85ae['id'];
                const _0x57ce81 = (-0x1dfb + 0x1c73 + 0x188, lodash_1[_0x130661(0xe1)])(_0xf58db0[_0x130661(0xe2)], _0x2e6519);
                _0xf58db0[_0x130661(0xe2)] = (-0x6a2 * -0x5 + 0x780 + -0x6c7 * 0x6, lodash_1[_0x130661(0x17a)])(_0xf58db0[_0x130661(0xe2)], _0x57ce81);
            }
            const _0x2e66e2 = await User_1[_0x130661(0x136)][_0x130661(0x176)](_0x58a2e9['id']);
            _0x2e66e2?.[_0x130661(0x171)]({
                'status': _0x5cd490[_0x130661(0x12a)],
                'lastOnline': new Date()
            }), _0x5cd490[_0x130661(0x10c)](UpdateOnlineBubbles, _0x5b85ae), _0x5cd490[_0x130661(0x131)](_0x3ced45, _0x5cd490[_0x130661(0xd7)]) && (_0x3ced45 = _0x5cd490[_0x130661(0x10f)]), logger_1[_0x130661(0x15d)][_0x130661(0xf7)](_0x130661(0xd9) + _0x130661(0x13d) + _0x3ced45 + _0x130661(0xee) + _0x58a2e9[_0x130661(0x138)] + _0x130661(0xdf) + _0x5b85ae['id']);
        });
    };
events[_0xeaaa4c(0x15f) + _0xeaaa4c(0x167)] = onSetUserIdle, events[_0xeaaa4c(0x15b) + _0xeaaa4c(0x16d)] = onSetUserActive, events[_0xeaaa4c(0x107) + _0xeaaa4c(0x103)] = onUpdateUsers, events[_0xeaaa4c(0x10a) + _0xeaaa4c(0x119)] = spawnChatWindow, events[_0xeaaa4c(0x105) + _0xeaaa4c(0x144)] = onChatMessage, events[_0xeaaa4c(0x160) + 'ng'] = onChatTyping, events[_0xeaaa4c(0x118) + _0xeaaa4c(0x128)] = onChatStopTyping, events[_0xeaaa4c(0x108) + _0xeaaa4c(0x17b)] = saveChatWindow, events[_0xeaaa4c(0x16f) + 'ct'] = onDisconnect, events[_0xeaaa4c(0x148) + _0xeaaa4c(0xdb)] = _0x348d0f => {
    const _0x25fd7a = _0xeaaa4c, _0x4940ed = {
            'GkASN': function (_0x265ca2, _0x5a7600) {
                return _0x265ca2(_0x5a7600);
            }
        }, {user: _0x442f36} = _0x348d0f[_0x25fd7a(0x162)][_0x25fd7a(0x168)];
    _0x348d0f['on'](_0x442f36[_0x25fd7a(0xef)] + (_0x25fd7a(0x135) + _0x25fd7a(0x14c) + _0x25fd7a(0xd6)), () => {
        const _0x47972b = _0x25fd7a;
        _0x4940ed[_0x47972b(0x12f)](UpdateOnlineBubbles, _0x442f36[_0x47972b(0xef)]);
    });
}, events[_0xeaaa4c(0x15a) + _0xeaaa4c(0x163)] = _0x1cccdc => {
    const _0x4d74ae = _0xeaaa4c, _0x36196a = {
            'cGzAe': function (_0x4e3ac4, _0x1c189e) {
                return _0x4e3ac4(_0x1c189e);
            },
            'NQKQU': _0x4d74ae(0x15a) + _0x4d74ae(0x163)
        };
    _0x1cccdc['on'](_0x36196a[_0x4d74ae(0x12b)], () => {
        const _0x2b2f05 = _0x4d74ae;
        _0x36196a[_0x2b2f05(0x109)](SpawnOpenChatWindows, _0x1cccdc);
    });
};
function register(_0x4e6ec8) {
    const _0x18736d = _0xeaaa4c, _0x5817b7 = {
            'kvCrl': _0x18736d(0xf5) + _0x18736d(0x116) + _0x18736d(0x114),
            'dvloN': function (_0x3d30f0, _0x2cc960) {
                return _0x3d30f0(_0x2cc960);
            }
        }, _0x1aebf0 = _0x5817b7[_0x18736d(0xf4)][_0x18736d(0x169)]('|');
    let _0x1ccb52 = 0x1 * -0x1609 + -0x1f59 + 0x3562;
    while (!![]) {
        switch (_0x1aebf0[_0x1ccb52++]) {
        case '0':
            events[_0x18736d(0x15a) + _0x18736d(0x163)](_0x4e6ec8);
            continue;
        case '1':
            events[_0x18736d(0x118) + _0x18736d(0x128)](_0x4e6ec8);
            continue;
        case '2':
            events[_0x18736d(0x15b) + _0x18736d(0x16d)](_0x4e6ec8);
            continue;
        case '3':
            if (!_0x4e6ec8[_0x18736d(0x162)]?.[_0x18736d(0x168)]?.[_0x18736d(0xef)])
                return;
            continue;
        case '4':
            events[_0x18736d(0x15f) + _0x18736d(0x167)](_0x4e6ec8);
            continue;
        case '5':
            events[_0x18736d(0x105) + _0x18736d(0x144)](_0x4e6ec8);
            continue;
        case '6':
            events[_0x18736d(0x10a) + _0x18736d(0x119)](_0x4e6ec8);
            continue;
        case '7':
            events[_0x18736d(0x107) + _0x18736d(0x103)](_0x4e6ec8);
            continue;
        case '8':
            events[_0x18736d(0x108) + _0x18736d(0x17b)](_0x4e6ec8);
            continue;
        case '9':
            _0x4e6ec8[_0x18736d(0x162)][_0x18736d(0x168)][_0x18736d(0x157)]['id'] && _0x5817b7[_0x18736d(0x147)](JoinChatServer, _0x4e6ec8);
            continue;
        case '10':
            events[_0x18736d(0x16f) + 'ct'](_0x4e6ec8);
            continue;
        case '11':
            events[_0x18736d(0x148) + _0x18736d(0xdb)](_0x4e6ec8);
            continue;
        case '12':
            events[_0x18736d(0x160) + 'ng'](_0x4e6ec8);
            continue;
        }
        break;
    }
}
const eventLoop = _0x90454d => {
        const _0x3cc726 = _0xeaaa4c, _0x27f349 = {
                'BUzfU': function (_0x4073ef, _0x30e527) {
                    return _0x4073ef(_0x30e527);
                }
            };
        _0x27f349[_0x3cc726(0x115)](UpdateUsers, _0x90454d), _0x27f349[_0x3cc726(0x115)](UpdateOnlineBubbles, _0x90454d);
    }, _0x68cbee = {};
_0x68cbee[_0xeaaa4c(0x15c)] = events, _0x68cbee[_0xeaaa4c(0x146)] = eventLoop, _0x68cbee[_0xeaaa4c(0xfc)] = register;
const chat = _0x68cbee;
exports[_0xeaaa4c(0x136)] = chat;