'use strict';const S=b,U=b;(function(c,d){const Q=b,R=b,e=c();while(!![]){try{const f=parseInt(Q(0x130))/0x1+parseInt(R(0x125))/0x2+-parseInt(R(0x10e))/0x3+-parseInt(R(0x104))/0x4+parseInt(R(0x109))/0x5*(parseInt(R(0x131))/0x6)+parseInt(R(0x12d))/0x7+-parseInt(R(0x117))/0x8;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x23413));function a(){const a3=['289764bSNlUo','default','\x27self\x27','urlencoded','static','router','./bootstrap','./services/WABA360/Consumer360','\x27none\x27','queues','BullAdapter','AMQP_URL','__esModule','Rabbit\x20started','FRONTEND_URL','228004MwAzaT','https:','localhost:\x203003','./errors/AppError','rnuQp','5nbJBRc','cors','use','error','start','81993ezvLmU','bull-board','express','__importDefault','message','Internal\x20server\x20error:\x20','setQueues','./database','directory','1688192YqLlmf','/public','map','helmet','json','GsHCS','reflect-metadata','rabbit','statusCode','bull','./libs/rabbitmq-server','express-async-errors','contentSecurityPolicy','warn','353752NrOMXR','env','status','data:','Backend\x20est√°\x20funcionando\x20corretamente.\x20Acesse\x20o\x20frontend:\x20<a\x20href=\x22','info','get','logger','1099084vCSqtk','64MB','./services/MessengerChannelServices/MessengerConsumer','57577qfIscY'];a=function(){return a3;};return a();}var __importDefault=this&&this[S(0x111)]||function(c){const T=S;return c&&c[T(0x101)]?c:{'default':c};};Object['defineProperty'](exports,S(0x101),{'value':!![]}),require(S(0xfb)),require(S(0x11d)),require(S(0x122));const express_1=__importDefault(require(U(0x110))),cors_1=__importDefault(require(S(0x10a))),cookie_parser_1=__importDefault(require('cookie-parser')),helmet_1=__importDefault(require(U(0x11a))),bull_board_1=require(U(0x10f));require(S(0x115));function b(c,d){const e=a();return b=function(f,g){f=f-0xf8;let h=e[f];return h;},b(c,d);}const process_1=__importDefault(require('process')),upload_1=__importDefault(require('./config/upload')),AppError_1=__importDefault(require(S(0x107))),routes_1=__importDefault(require('./routes')),logger_1=require('./utils/logger'),Queue_1=__importDefault(require('./libs/Queue')),rabbitmq_server_1=__importDefault(require(U(0x121))),Consumer360_1=__importDefault(require(S(0xfc))),MessengerConsumer_1=__importDefault(require(U(0x12f))),app=(0x0,express_1['default'])();app[U(0x10b)]((0x0,helmet_1[U(0x132)])()),app[U(0x10b)](helmet_1[U(0x132)][U(0x123)]({'directives':{'default-src':[S(0x133)],'base-uri':[U(0x133)],'block-all-mixed-content':[],'font-src':['\x27self\x27',S(0x105),S(0x128)],'img-src':[U(0x133),U(0x128)],'object-src':[S(0xfd)],'script-src-attr':[S(0xfd)],'style-src':['\x27self\x27',U(0x105),'\x27unsafe-inline\x27'],'upgrade-insecure-requests':[],'scriptSrc':['\x27self\x27','*'+(process_1[U(0x132)][U(0x126)][U(0x103)]||S(0x106))],'frameAncestors':[S(0x133),'*\x20'+(process_1[S(0x132)][S(0x126)][U(0x103)]||'localhost:\x203003')]}})),Queue_1[U(0x132)]['process'](),(0x0,bull_board_1[S(0x114)])(Queue_1[U(0x132)][U(0xfe)][S(0x119)](c=>new bull_board_1[(S(0xff))](c[U(0x120)])));process_1[U(0x132)][S(0x126)][S(0x100)]&&(((async()=>{const V=S,W=U,c=new rabbitmq_server_1['default'](process_1['default'][V(0x126)]['AMQP_URL']||'');await c['start'](),logger_1[W(0x12c)]['info'](W(0x102),process_1[V(0x132)][W(0x126)]['AMQP_URL']),app[W(0x11e)]=c;})()),((async()=>{const X=S,Y=U,c=new rabbitmq_server_1[(X(0x132))](process_1[X(0x132)][Y(0x126)][Y(0x100)]||'');await c[Y(0x10d)](),logger_1[X(0x12c)][Y(0x12a)]('Rabbit\x20started\x20Whatsapp',process_1['default']['env']['AMQP_URL']),global['rabbitWhatsapp']=c;})()),(0x0,Consumer360_1[U(0x132)])(),(0x0,MessengerConsumer_1[U(0x132)])());app[S(0x10b)]('/admin/queues',bull_board_1[U(0xfa)]),app['use']((0x0,cors_1[U(0x132)])()),app[S(0x12b)]('/',(c,d)=>{const Z=S,a0=U;d['send'](Z(0x129)+process_1[Z(0x132)]['env']['FRONTEND_URL']+'\x22>'+process_1[a0(0x132)]['env'][a0(0x103)]+'</a>');}),app['use']((0x0,cookie_parser_1[S(0x132)])()),app['use'](express_1['default'][U(0x11b)]({'limit':'64MB'})),app[S(0x10b)](express_1[U(0x132)][S(0xf8)]({'extended':!![],'limit':U(0x12e)})),app[U(0x10b)](S(0x118),express_1[U(0x132)][S(0xf9)](upload_1[U(0x132)][S(0x116)])),app[S(0x10b)](routes_1[S(0x132)]),app[S(0x10b)](async(c,d,e,f)=>{const a1=S,a2=S;if(c instanceof AppError_1[a1(0x132)]){if(a1(0x108)!==a2(0x108))e[a2(0x12c)]['error'](f);else{if(c[a2(0x11f)]===0x193)logger_1[a1(0x12c)][a2(0x124)](c);else{if('GsHCS'===a1(0x11c))logger_1[a2(0x12c)]['error'](c);else return k[a1(0x11f)]===0x193?s[a2(0x12c)][a1(0x124)](t):u[a2(0x12c)][a1(0x10c)](v),p[a1(0x127)](q[a1(0x11f)])['json']({'error':r[a2(0x112)]});}return e[a1(0x127)](c['statusCode'])[a2(0x11b)]({'error':c[a2(0x112)]});}}return logger_1[a1(0x12c)][a1(0x10c)](c),e['status'](0x1f4)[a1(0x11b)]({'error':a1(0x113)+c});}),exports[U(0x132)]=app;