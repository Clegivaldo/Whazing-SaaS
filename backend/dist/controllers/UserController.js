'use strict';const s=b,u=b;(function(c,d){const q=b,r=b,e=c();while(!![]){try{const f=-parseInt(q(0xbe))/0x1+-parseInt(r(0xc3))/0x2*(-parseInt(q(0xba))/0x3)+-parseInt(q(0xad))/0x4*(-parseInt(r(0xc2))/0x5)+parseInt(r(0xb1))/0x6*(parseInt(q(0x9c))/0x7)+-parseInt(r(0xaa))/0x8*(parseInt(q(0xb5))/0x9)+-parseInt(r(0xaf))/0xa*(parseInt(q(0xae))/0xb)+parseInt(r(0x92))/0xc;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xc0284));function b(c,d){const e=a();return b=function(f,g){f=f-0x8f;let h=e[f];return h;},b(c,d);}var __importDefault=this&&this[s(0x94)]||function(c){const t=s;return c&&c[t(0xa7)]?c:{'default':c};};Object[s(0x9d)](exports,u(0xa7),{'value':!![]}),exports[s(0x95)]=exports['chatInterno']=exports[s(0xb9)]=exports['updateConfigs']=exports['update']=exports[s(0xbb)]=exports[s(0xc5)]=exports['index']=void 0x0;const socket_1=require(s(0x93)),CheckSettingstenant1_1=__importDefault(require('../helpers/CheckSettingstenant1')),CheckSettings_1=__importDefault(require(u(0xb2))),AppError_1=__importDefault(require(s(0xbf))),CreateUserService_1=__importDefault(require(s(0x97))),ListUsersService_1=__importDefault(require(u(0xa0))),UpdateUserService_1=__importDefault(require(s(0xb3))),ShowUserService_1=__importDefault(require(u(0xa4))),DeleteUserService_1=__importDefault(require(s(0xb4))),UpdateUserConfigsService_1=__importDefault(require(s(0xab))),Tenant_1=__importDefault(require(u(0xac))),ListUserChatInterno_1=__importDefault(require('../services/UserServices/ListUserChatInterno')),ListGroupsByUserId_1=__importDefault(require('../services/GroupServices/ListGroupsByUserId')),ListTotalUsersService_1=__importDefault(require(s(0xb8))),index=async(c,d)=>{const v=s,w=u,e=await(0x0,CheckSettingstenant1_1[v(0xbd)])('userCreation');if(e!==v(0x8f)){if(v(0x9a)!=='mfJUr')throw new d[(v(0xbd))]('ERR_USER_LIMIT_USER_CREATION',0x190);else{const m=await(0x0,ListTotalUsersService_1['default'])();if(m>=0xb){if('UgsoT'!==w(0xc7))throw new AppError_1[(w(0xbd))](w(0xb6),0x190);else throw new d[(v(0xbd))](w(0xa5),0x193);}}}const {tenantId:f}=c[w(0xa6)],{searchParam:g,pageNumber:h}=c['query'],{users:i,count:j,hasMore:k}=await(0x0,ListUsersService_1[v(0xbd)])({'searchParam':g,'pageNumber':h,'tenantId':f});return d[w(0x91)]({'users':i,'count':j,'hasMore':k});};exports[u(0x9f)]=index;const store=async(c,d)=>{const x=s,y=u,{tenantId:e}=c['user'],{email:f,password:g,name:h,profile:i}=c[x(0xa8)],{users:j}=await(0x0,ListUsersService_1[x(0xbd)])({'tenantId':e}),k=await Tenant_1[y(0xbd)][x(0xa1)](e),l=await(0x0,CheckSettingstenant1_1[y(0xbd)])('userCreation');if(l!=='disabled'){const o=await(0x0,ListTotalUsersService_1[x(0xbd)])();if(o>=0xa)throw new AppError_1[(x(0xbd))](y(0xb6),0x190);}if(j['length']>=k?.[x(0x96)])throw new AppError_1[(x(0xbd))](x(0xb6),0x190);else{if(c[y(0x9b)]===y(0xc4)&&await(0x0,CheckSettings_1[y(0xbd)])(x(0xa3))===x(0x8f)){if('WKYDx'!=='YLOyL')throw new AppError_1[(y(0xbd))](y(0x9e),0x193);else return g&&h['__esModule']?i:{'default':j};}else{if(c[y(0x9b)]!==y(0xc4)&&c['user'][y(0xa9)]!==y(0xc0))throw new AppError_1[(x(0xbd))](x(0xa5),0x193);}}const m=await(0x0,CreateUserService_1[x(0xbd)])({'email':f,'password':g,'name':h,'profile':i,'tenantId':e}),n=(0x0,socket_1[x(0xc6)])();return n['emit'](e+x(0x99),{'action':y(0x90),'user':m}),d[y(0xc8)](0xc8)[y(0x91)](m);};exports['store']=store;const show=async(c,d)=>{const z=u,A=s,{userId:e}=c['params'],{tenantId:f}=c[z(0xa6)],g=await(0x0,ShowUserService_1[z(0xbd)])(e,f);return d[z(0xc8)](0xc8)[z(0x91)](g);};exports[u(0xbb)]=show;const update=async(c,d)=>{const B=s,C=u,{userId:e}=c['params'],f=c[B(0xa8)],{tenantId:g}=c[C(0xa6)],h=await(0x0,UpdateUserService_1[C(0xbd)])({'userData':f,'userId':e,'tenantId':g}),i=(0x0,socket_1['getIO'])();return i['emit'](g+C(0x99),{'action':'update','user':h}),d[C(0xc8)](0xc8)[C(0x91)](h);};exports[u(0xb0)]=update;const updateConfigs=async(c,d)=>{const D=u,E=u,{userId:e}=c[D(0xa2)],f=c[E(0xa8)],{tenantId:g}=c[D(0xa6)];return await(0x0,UpdateUserConfigsService_1[D(0xbd)])({'userConfigs':f,'userId':e,'tenantId':g}),d[E(0xc8)](0xc8)[D(0x91)]();};exports[s(0x98)]=updateConfigs;const remove=async(c,d)=>{const F=u,G=s,{userId:e}=c[F(0xa2)],{tenantId:f}=c[F(0xa6)],g=c[G(0xa6)]['id'];if(c[G(0xa6)]['profile']!==G(0xc0))throw new AppError_1[(F(0xbd))](G(0xa5),0x193);await(0x0,DeleteUserService_1['default'])(e,f,g);const h=(0x0,socket_1[G(0xc6)])();return h[F(0xc1)](f+':user',{'action':'delete','userId':e}),d['status'](0xc8)['json']({'message':F(0xbc)});};exports[s(0xb9)]=remove;function a(){const L=['12bWFxwq','7758949jHWIQT','10bVtlbj','update','2137020suTrwF','../helpers/CheckSettings','../services/UserServices/UpdateUserService','../services/UserServices/DeleteUserService','7137EWMzYy','ERR_USER_LIMIT_USER_CREATION','chatInterno','../services/UserServices/ListTotalUsersService','remove','9jFRNsJ','show','User\x20deleted','default','70573OVPFnz','../errors/AppError','admin','emit','524070ZGyOdO','575430aAHegf','/signup','store','getIO','mMLit','status','disabled','create','json','4116636jwhBNc','../libs/socket','__importDefault','showGroups','maxUsers','../services/UserServices/CreateUserService','updateConfigs',':user','mfJUr','url','21OYWAqw','defineProperty','ERR_USER_CREATION_DISABLED','index','../services/UserServices/ListUsersService','findByPk','params','userCreation','../services/UserServices/ShowUserService','ERR_NO_PERMISSION','user','__esModule','body','profile','10352iFkWOO','../services/UserServices/UpdateUserConfigsService','../models/Tenant'];a=function(){return L;};return a();}const chatInterno=async(c,d)=>{const H=s,I=u,{tenantId:e,id:f}=c['user'],g=await(0x0,ListUserChatInterno_1[H(0xbd)])(Number(f),Number(e));return d[H(0x91)]({'users':g});};exports[u(0xb7)]=chatInterno;const showGroups=async(c,d)=>{const J=u,K=s,{userId:e}=c['params'],f=await(0x0,ListGroupsByUserId_1[J(0xbd)])(Number(e));return d[J(0xc8)](0xc8)[K(0x91)](f);};exports[u(0x95)]=showGroups;