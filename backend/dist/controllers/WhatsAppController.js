'use strict';const o=b,q=b;(function(c,d){const m=b,n=b,e=c();while(!![]){try{const f=-parseInt(m(0x200))/0x1*(parseInt(n(0x211))/0x2)+parseInt(m(0x20f))/0x3+-parseInt(m(0x1f3))/0x4+-parseInt(n(0x1f7))/0x5+parseInt(n(0x1f1))/0x6*(parseInt(m(0x215))/0x7)+parseInt(m(0x203))/0x8*(-parseInt(m(0x202))/0x9)+parseInt(m(0x217))/0xa;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x94660));var __importDefault=this&&this[o(0x1ff)]||function(c){const p=o;return c&&c[p(0x1f0)]?c:{'default':c};};Object[q(0x20a)](exports,q(0x1f0),{'value':!![]}),exports['remove']=exports['update']=exports[o(0x1fa)]=exports[o(0x210)]=exports[o(0x214)]=void 0x0;const socket_1=require(q(0x205)),AppError_1=__importDefault(require(q(0x20b))),DeleteWhatsAppService_1=__importDefault(require(o(0x1f8))),ListWhatsAppsService_1=__importDefault(require(q(0x1f9))),ShowWhatsAppService_1=__importDefault(require(q(0x1ee))),UpdateWhatsAppService_1=__importDefault(require(o(0x208))),CreateWhatsAppService_1=__importDefault(require(q(0x209))),Tenant_1=__importDefault(require(q(0x20c))),wbot_baileys_1=require(o(0x1ef)),CheckSettingstenant1_1=__importDefault(require(q(0x1ec))),ListTotalWhatsAppService_1=__importDefault(require('../services/WhatsappService/ListTotalWhatsAppService')),index=async(c,d)=>{const r=o,s=q,e=await(0x0,CheckSettingstenant1_1['default'])(r(0x1f6));if(e!==s(0x206)){const h=await(0x0,ListTotalWhatsAppService_1[r(0x213)])();console[s(0x1fb)](r(0x1f2),h);if(h>=0x3)throw new AppError_1[(r(0x213))]('ERR_NO_PERMISSION_CONNECTIONS_LIMIT',0x190);}const {tenantId:f}=c[s(0x207)],g=await(0x0,ListWhatsAppsService_1['default'])(f);return d[s(0x204)](0xc8)['json'](g);};exports[q(0x214)]=index;function a(){const B=['1560177aFvRyI','16aHUMpA','status','../libs/socket','disabled','user','../services/WhatsappService/UpdateWhatsAppService','../services/WhatsappService/CreateWhatsAppService','defineProperty','../errors/AppError','../models/Tenant','getIO','remove','173688uqEDjL','show','5086wWBRBU','ERR_NO_PERMISSION_CONNECTIONS_LIMIT','default','index','156317ATnmqS','update','11044110bpNzEf','../helpers/CheckSettingstenant1',':whatsapp','../services/WhatsappService/ShowWhatsAppService','../libs/wbot-baileys','__esModule','276ZzbXVl','Retrieved\x20plans:','2349396efCftg','json','body','userCreation','2004835ppgEdf','../services/WhatsappService/DeleteWhatsAppService','../services/WhatsappService/ListWhatsAppsService','store','log','maxConnections','emit','params','__importDefault','97nCjUZh','findByPk'];a=function(){return B;};return a();}const show=async(c,d)=>{const t=o,u=o,{whatsappId:e}=c[t(0x1fe)],{tenantId:f}=c['user'],g=await(0x0,ShowWhatsAppService_1[t(0x213)])({'id':e,'tenantId':f});return d[u(0x204)](0xc8)[u(0x1f4)](g);};exports[o(0x210)]=show;const store=async(c,d)=>{const v=o,w=q,e=await(0x0,CheckSettingstenant1_1[v(0x213)])(v(0x1f6));if(e!=='disabled'){const l=await(0x0,ListTotalWhatsAppService_1[w(0x213)])();console[w(0x1fb)](w(0x1f2),l);if(l>=0x2)throw new AppError_1['default']('ERR_NO_PERMISSION_CONNECTIONS_LIMIT',0x190);}const {whatsappId:f}=c[w(0x1fe)],g=c[w(0x1f5)],{tenantId:h}=c[w(0x207)],i=await(0x0,ListWhatsAppsService_1[v(0x213)])(h),j=await Tenant_1[v(0x213)][w(0x201)](h);if(i['length']>=j?.[w(0x1fc)])throw new AppError_1['default'](w(0x212),0x190);const {whatsapp:k}=await(0x0,CreateWhatsAppService_1[v(0x213)])({...g,'whatsappId':f,'tenantId':h});return d[v(0x204)](0xc8)['json'](k);};exports[q(0x1fa)]=store;const update=async(c,d)=>{const x=q,y=q,{whatsappId:e}=c[x(0x1fe)],f=c[x(0x1f5)],{tenantId:g}=c[x(0x207)],{whatsapp:h}=await(0x0,UpdateWhatsAppService_1[x(0x213)])({'whatsappData':f,'whatsappId':e,'tenantId':g});return d[y(0x204)](0xc8)['json'](h);};function b(c,d){const e=a();return b=function(f,g){f=f-0x1ec;let h=e[f];return h;},b(c,d);}exports[o(0x216)]=update;const remove=async(c,d)=>{const z=q,A=o,{whatsappId:e}=c[z(0x1fe)],{tenantId:f}=c[z(0x207)];await(0x0,DeleteWhatsAppService_1[A(0x213)])(e,f),(0x0,wbot_baileys_1['removeWbot'])(+e);const g=(0x0,socket_1[z(0x20d)])();return g[z(0x1fd)](f+z(0x1ed),{'action':'delete','whatsappId':+e}),d['status'](0xc8)[z(0x1f4)]({'message':'Whatsapp\x20deleted.'});};exports[o(0x20e)]=remove;