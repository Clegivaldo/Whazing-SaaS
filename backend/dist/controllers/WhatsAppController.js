'use strict';const o=b,q=b;(function(c,d){const m=b,n=b,e=c();while(!![]){try{const f=parseInt(m(0x19d))/0x1*(parseInt(n(0x181))/0x2)+parseInt(n(0x183))/0x3*(-parseInt(n(0x18d))/0x4)+parseInt(m(0x197))/0x5+-parseInt(n(0x18b))/0x6+-parseInt(m(0x178))/0x7*(parseInt(m(0x186))/0x8)+-parseInt(n(0x172))/0x9+parseInt(n(0x187))/0xa;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x1f914));var __importDefault=this&&this[o(0x185)]||function(c){const p=o;return c&&c[p(0x192)]?c:{'default':c};};Object[q(0x17a)](exports,q(0x192),{'value':!![]}),exports['remove']=exports[o(0x180)]=exports[o(0x175)]=exports[q(0x184)]=exports[o(0x195)]=void 0x0;const socket_1=require(o(0x198)),AppError_1=__importDefault(require('../errors/AppError')),DeleteWhatsAppService_1=__importDefault(require('../services/WhatsappService/DeleteWhatsAppService')),ListWhatsAppsService_1=__importDefault(require(q(0x19b))),ShowWhatsAppService_1=__importDefault(require(q(0x171))),UpdateWhatsAppService_1=__importDefault(require(q(0x194))),CreateWhatsAppService_1=__importDefault(require(o(0x18c))),Tenant_1=__importDefault(require(q(0x173))),wbot_baileys_1=require(o(0x199)),CheckSettingstenant1_1=__importDefault(require(q(0x18a))),ListTotalWhatsAppService_1=__importDefault(require(q(0x17e))),index=async(c,d)=>{const r=o,s=o,e=await(0x0,CheckSettingstenant1_1[r(0x189)])(r(0x19a));if(e!==r(0x17b)){const h=await(0x0,ListTotalWhatsAppService_1['default'])();console[s(0x18e)]('Retrieved\x20plans:',h);if(h>=0x3)throw new AppError_1[(s(0x189))]('ERR_NO_PERMISSION_CONNECTIONS_LIMIT',0x190);}const {tenantId:f}=c['user'],g=await(0x0,ListWhatsAppsService_1[r(0x189)])(f);return d[s(0x191)](0xc8)[s(0x17c)](g);};exports[q(0x195)]=index;const show=async(c,d)=>{const t=o,u=o,{whatsappId:e}=c[t(0x193)],{tenantId:f}=c[u(0x188)],g=await(0x0,ShowWhatsAppService_1[t(0x189)])({'id':e,'tenantId':f});return d[t(0x191)](0xc8)[u(0x17c)](g);};function b(c,d){const e=a();return b=function(f,g){f=f-0x171;let h=e[f];return h;},b(c,d);}exports['show']=show;const store=async(c,d)=>{const v=o,w=q,e=await(0x0,CheckSettingstenant1_1[v(0x189)])(w(0x19a));if(e!=='disabled'){const l=await(0x0,ListTotalWhatsAppService_1[v(0x189)])();console['log'](v(0x17f),l);if(l>=0x2)throw new AppError_1[(w(0x189))](w(0x176),0x190);}const {whatsappId:f}=c[w(0x193)],g=c[w(0x196)],{tenantId:h}=c[v(0x188)],i=await(0x0,ListWhatsAppsService_1[v(0x189)])(h),j=await Tenant_1['default'][w(0x174)](h);if(i['length']>=j?.[v(0x19c)])throw new AppError_1[(v(0x189))]('ERR_NO_PERMISSION_CONNECTIONS_LIMIT',0x190);const {whatsapp:k}=await(0x0,CreateWhatsAppService_1[v(0x189)])({...g,'whatsappId':f,'tenantId':h});return d[v(0x191)](0xc8)['json'](k);};exports[o(0x175)]=store;const update=async(c,d)=>{const x=o,y=o,{whatsappId:e}=c[x(0x193)],f=c[x(0x196)],{tenantId:g}=c[x(0x188)],{whatsapp:h}=await(0x0,UpdateWhatsAppService_1[y(0x189)])({'whatsappData':f,'whatsappId':e,'tenantId':g});return d['status'](0xc8)[x(0x17c)](h);};exports[o(0x180)]=update;const remove=async(c,d)=>{const z=q,A=q,{whatsappId:e}=c['params'],{tenantId:f}=c[z(0x188)];await(0x0,DeleteWhatsAppService_1[z(0x189)])(e,f),(0x0,wbot_baileys_1['removeWbot'])(+e);const g=(0x0,socket_1[A(0x182)])();return g[A(0x177)](f+z(0x190),{'action':A(0x179),'whatsappId':+e}),d['status'](0xc8)[A(0x17c)]({'message':z(0x17d)});};function a(){const B=['881343zkJrWf','../models/Tenant','findByPk','store','ERR_NO_PERMISSION_CONNECTIONS_LIMIT','emit','35tYvCEt','delete','defineProperty','disabled','json','Whatsapp\x20deleted.','../services/WhatsappService/ListTotalWhatsAppService','Retrieved\x20plans:','update','1322RmppTx','getIO','9DWJZVZ','show','__importDefault','47392EJpfkc','2449210cwIOhz','user','default','../helpers/CheckSettingstenant1','755760HvcXzr','../services/WhatsappService/CreateWhatsAppService','211980jFHqiw','log','remove',':whatsapp','status','__esModule','params','../services/WhatsappService/UpdateWhatsAppService','index','body','330910vPeDiu','../libs/socket','../libs/wbot-baileys','userCreation','../services/WhatsappService/ListWhatsAppsService','maxConnections','349rAMcpp','../services/WhatsappService/ShowWhatsAppService'];a=function(){return B;};return a();}exports[o(0x18f)]=remove;