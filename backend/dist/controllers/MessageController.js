'use strict';
const A = b, B = b;
(function (c, d) {
    const y = b, z = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(y(0x10e)) / (-0x1d60 + 0x6 * 0x2ef + 0xbc7) * (-parseInt(z(0xfa)) / (0x86 * -0x22 + -0x1b8b + 0xf7 * 0x2f)) + -parseInt(z(0xee)) / (0xa2 + 0x2106 * -0x1 + 0x2067) + parseInt(z(0x137)) / (0x793 + -0x1685 + 0xef6) * (-parseInt(z(0xe5)) / (-0x1221 + -0x93 * 0x40 + 0x1b73 * 0x2)) + parseInt(z(0x152)) / (0xaa9 + 0xcd * 0xf + -0x16a6) * (-parseInt(y(0x10a)) / (-0x338 * -0x1 + 0x3c1 * -0x4 + -0x1 * -0xbd3)) + -parseInt(z(0xff)) / (0x19d8 + -0x4b7 + -0x1519 * 0x1) * (parseInt(y(0x13a)) / (-0x185 * -0x8 + -0x7f0 + -0x11 * 0x3f)) + -parseInt(y(0x13f)) / (0x2182 * -0x1 + -0xb61 + 0x2ced) * (-parseInt(y(0xd1)) / (-0x2f * 0x11 + -0x5d * -0x4b + 0x89 * -0x2d)) + parseInt(z(0x153)) / (-0x1b24 * -0x1 + -0x640 + -0x14d8);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x4448a + 0x23f69 + 0x67 * 0xb43));
function a() {
    const R = [
        'vice',
        'ticketIdOr',
        'remove',
        'YdfTS',
        'query',
        's/MessageS',
        'dBTsf',
        '../service',
        'ontar\x20as\x20m',
        'ERR_DELETE',
        '../errors/',
        'HkfZC',
        '../utils/l',
        'status',
        'rvice',
        'QWCXj',
        'ticketId',
        'Read',
        'oEznW',
        'fromMe',
        's/WbotServ',
        'temService',
        'pageNumber',
        'ices/EditW',
        'ensagens',
        'jgzhk',
        'BpUro',
        'send',
        'pending',
        'defineProp',
        'ervices/Li',
        '../models/',
        'forward',
        'fLine',
        '105996sSUVpm',
        'Message',
        '__esModule',
        '63LGtNmm',
        'contact',
        'essagesAsR',
        'store',
        'rtwUR',
        '60630PPCFFe',
        'medias',
        'SetTicketM',
        'msg',
        's/TicketSe',
        'cgKFB',
        'isArray',
        'idFront',
        'TcXuO',
        'files',
        'default',
        '_SYSTEM_MS',
        'QyLlN',
        'uTSHI',
        'bFQAh',
        'user',
        '../helpers',
        'FRBLK',
        'fault',
        '12HKBFaf',
        '11893584yzuZCr',
        '\x20erro\x20ao\x20c',
        'wTicketSer',
        'ZPQAR',
        'messagesOf',
        'index',
        'stMessages',
        'rJhoH',
        '33rCeBHJ',
        'Service',
        'hatsAppMes',
        'sage',
        'params',
        'MessageSys',
        'forEach',
        'eateForwar',
        'json',
        'GvWQH',
        'npkWM',
        '/DeleteMes',
        'HpfVi',
        'ERR_EDITIN',
        'log',
        'edit',
        'AppError',
        'sageSystem',
        '__importDe',
        'MessagesAs',
        '5vFvamV',
        'ogger',
        'tenantId',
        'userId',
        'try\x20Create',
        'messageId',
        'ensagens.',
        'ervices/Cr',
        'FOuBO',
        '689637phRbdM',
        'logger',
        'rvices/Sho',
        'qPBwL',
        'hasMore',
        'PJCJK',
        'messages',
        'value',
        'ticket',
        'Ocorreu\x20um',
        'BcCaP',
        'YgSPp',
        '2kFxWPV',
        'igin',
        'eateMessag',
        'eSystemSer',
        'sendType',
        '42736fVFKvj',
        'cqWCh',
        'error',
        'chat',
        'YsCqX',
        'ead',
        'JxjMF',
        'G_WAPP_MSG',
        '/SetTicket',
        'G:\x20',
        'scheduleDa',
        '1121358gaVnuU',
        'FxAuL',
        'dMessageSe',
        'ListCountM',
        '230597GrIuFj',
        'body',
        'count',
        'EFwmy',
        'Vtses',
        'message',
        'erty'
    ];
    a = function () {
        return R;
    };
    return a();
}
var __importDefault = this && this[A(0xe3) + A(0x151)] || function (c) {
    const C = B;
    return c && c[C(0x139)] ? c : { 'default': c };
};
const q = {};
q[A(0xf5)] = !![], Object[B(0x132) + B(0x114)](exports, B(0x139), q), exports[A(0x135)] = exports[A(0x117)] = exports[A(0xe0)] = exports[B(0x13d)] = exports[A(0x10d) + A(0x12d)] = exports[A(0xce)] = void (0x12b5 * 0x1 + 0x117f * -0x2 + 0x1049);
const AppError_1 = __importDefault(require(B(0x11f) + A(0xe1))), DeleteMessageSystem_1 = __importDefault(require(B(0x14f) + B(0xdc) + B(0xe2))), SetTicketMessagesAsRead_1 = __importDefault(require(A(0x14f) + A(0x107) + B(0xe4) + B(0x126))), Message_1 = __importDefault(require(A(0x134) + A(0x138))), CreateForwardMessageService_1 = __importDefault(require(B(0x11c) + B(0x11a) + B(0xec) + B(0xd8) + B(0x10c) + A(0x123))), CreateMessageSystemService_1 = __importDefault(require(A(0x11c) + B(0x11a) + A(0xec) + B(0xfc) + A(0xfd) + B(0x115))), ListMessagesService_1 = __importDefault(require(A(0x11c) + A(0x11a) + A(0x133) + A(0xcf) + B(0xd2))), ShowTicketService_1 = __importDefault(require(A(0x11c) + B(0x143) + B(0xf0) + A(0xcb) + A(0x115))), logger_1 = require(A(0x121) + B(0xe6)), EditWhatsAppMessage_1 = __importDefault(require(A(0x11c) + A(0x129) + B(0x12c) + B(0xd3) + A(0xd4))), index = async (e, f) => {
        const D = B, E = B, {ticketId: g} = e[D(0xd5)], {pageNumber: h} = e[E(0x119)], {tenantId: i} = e[E(0x14e)], j = {};
        j[D(0x12b)] = h, j[E(0x125)] = g, j[E(0xe7)] = i;
        const {
            count: k,
            messages: l,
            messagesOffLine: m,
            ticket: n,
            hasMore: o
        } = await (0xdf * -0x7 + -0x5b3 * 0x2 + 0x5d5 * 0x3, ListMessagesService_1[D(0x149)])(j);
        (0x2d0 + -0x11b5 + 0xee5, SetTicketMessagesAsRead_1[D(0x149)])(n);
        const p = {};
        return p[D(0x110)] = k, p[E(0xf4)] = l, p[E(0xcd) + D(0x136)] = m, p[E(0xf6)] = n, p[E(0xf2)] = o, f[D(0xd9)](p);
    };
exports[B(0xce)] = index;
const ListCountMensagens = async (f, g) => {
    const F = A, G = B, h = {};
    h[F(0x10b)] = F(0xf7) + G(0x154) + G(0x11d) + G(0xeb);
    const i = h;
    try {
        const j = await Message_1[G(0x149)][G(0x110)](), k = {};
        return k[F(0x110)] = j, g[G(0xd9)](k);
    } catch (l) {
        const m = {};
        return m[G(0x101)] = i[G(0x10b)], g[F(0x122)](-0x12ce * -0x1 + -0x1f49 * 0x1 + 0xe6f)[G(0xd9)](m);
    }
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x13cd + -0x327 + -0x17bf * -0x1);
        let h = e[f];
        return h;
    }, b(c, d);
}
exports[A(0x10d) + B(0x12d)] = ListCountMensagens;
const store = async (f, g) => {
    const H = B, I = A, h = {};
    h[H(0xed)] = H(0x102), h[H(0x144)] = H(0x131), h[H(0xdd)] = I(0x141) + I(0x13c) + H(0x104), h[H(0x14b)] = function (r, s) {
        return r instanceof s;
    }, h[H(0x14d)] = function (r, s) {
        return r === s;
    }, h[I(0x11b)] = H(0xde) + I(0x106), h[I(0x118)] = function (r, s) {
        return r !== s;
    }, h[H(0xda)] = H(0xcc), h[H(0x120)] = I(0x111), h[I(0x12e)] = I(0x12f), h[H(0xf1)] = function (r, s) {
        return r !== s;
    }, h[I(0x13e)] = H(0xd0), h[H(0x112)] = H(0xe9) + I(0xd6) + H(0x12a);
    const i = h, {ticketId: j} = f[H(0xd5)], {
            tenantId: k,
            id: l
        } = f[H(0x14e)], m = f[I(0x10f)], n = f[I(0x148)], o = {};
    o['id'] = j, o[I(0xe7)] = k;
    const p = await (-0xc07 * -0x2 + -0x9b6 + -0x8 * 0x1cb, ShowTicketService_1[H(0x149)])(o);
    try {
        await (-0x2621 + 0x1 * -0xdfb + 0x341c, SetTicketMessagesAsRead_1[H(0x149)])(p);
    } catch (r) {
        console[I(0xdf)](i[I(0xdd)], r);
    }
    try {
        if (n)
            i[I(0x118)](i[I(0xda)], i[I(0x120)]) ? n[H(0xd7)](async (s, t) => {
                const J = H, K = H, u = {
                        'fromMe': m[J(0x128)],
                        'body': Array[J(0x145)](m[J(0x10f)]) ? m[J(0x10f)][t] : m[K(0x10f)],
                        'idFront': Array[K(0x145)](m[J(0x146)]) ? m[J(0x146)][t] : m[J(0x146)],
                        'read': ![]
                    };
                await (0x2213 + -0x1 * 0x2462 + 0x24f, CreateMessageSystemService_1[J(0x149)])({
                    'msg': u,
                    'tenantId': k,
                    'medias': [s],
                    'ticket': p,
                    'userId': l,
                    'scheduleDate': m[J(0x109) + 'te'] ? new Date(Array[J(0x145)](m[J(0x109) + 'te']) ? m[J(0x109) + 'te'][t] : m[K(0x109) + 'te']) : undefined,
                    'sendType': m[J(0xfe)] || i[J(0xed)],
                    'status': i[J(0x144)],
                    'idFront': Array[K(0x145)](m[J(0x146)]) ? m[J(0x146)][t] : m[J(0x146)]
                });
            }) : e[H(0xdf)](i[H(0xdd)], f);
        else {
            if (i[I(0x14d)](i[I(0x12e)], i[H(0x12e)])) {
                const t = {};
                t[H(0x142)] = m, t[H(0xe7)] = k, t[I(0x140)] = n, t[I(0xf6)] = p, t[I(0xe8)] = l, t[H(0x109) + 'te'] = m[I(0x109) + 'te'], t[H(0xfe)] = m[H(0xfe)] || i[H(0xed)], t[H(0x122)] = i[H(0x144)], t[H(0x146)] = m[H(0x146)], await (0x472 + -0x2188 + 0xdb * 0x22, CreateMessageSystemService_1[I(0x149)])(t);
            } else {
                if (i[I(0x14b)](i, j[I(0x149)]) && i[H(0x14d)](k[I(0x113)], i[H(0x11b)])) {
                    const v = {};
                    return v[H(0x101)] = p[I(0x113)], o[H(0x122)](-0x1 * 0x5ba + -0x4f9 * -0x1 + 0x251)[H(0xd9)](v);
                }
                throw n;
            }
        }
    } catch (v) {
        if (i[H(0xf1)](i[H(0x13e)], i[I(0x13e)])) {
            const x = {};
            return x[H(0x101)] = x[H(0x113)], e[H(0x122)](0x2097 + -0xf3f * -0x2 + -0x1 * 0x3d85)[I(0xd9)](x);
        } else
            console[I(0xdf)](i[I(0x112)], v);
    }
    return g[H(0x130)]();
};
exports[B(0x13d)] = store;
const edit = async (f, g) => {
    const L = A, M = B, h = {};
    h[L(0x124)] = L(0xe9) + L(0xd6) + M(0x12a), h[L(0x105)] = function (n, o) {
        return n instanceof o;
    }, h[L(0xdb)] = function (n, o) {
        return n === o;
    }, h[L(0xf8)] = L(0xde) + M(0x106), h[L(0x14c)] = function (n, o) {
        return n !== o;
    }, h[L(0x100)] = M(0x103);
    const i = h, {messageId: j} = f[L(0xd5)], {tenantId: k} = f[M(0x14e)], l = +k, {body: m} = f[M(0x10f)];
    try {
        const n = {};
        n[L(0xea)] = j, n[M(0xe7)] = l, n[M(0x10f)] = m;
        const {
            ticketId: o,
            message: p
        } = await (0x23e4 + 0x873 * -0x3 + -0x1 * 0xa8b, EditWhatsAppMessage_1[M(0x149)])(n);
    } catch (r) {
        if (i[L(0x105)](r, AppError_1[L(0x149)]) && i[M(0xdb)](r[M(0x113)], i[L(0xf8)])) {
            if (i[L(0x14c)](i[L(0x100)], i[L(0x100)]))
                e[M(0xdf)](i[M(0x124)], f);
            else {
                const t = {};
                return t[L(0x101)] = r[L(0x113)], g[M(0x122)](-0x2374 * 0x1 + 0x18 * -0x116 + -0x2c * -0x16f)[L(0xd9)](t);
            }
        }
        throw r;
    }
    return g[L(0x130)]();
};
exports[B(0xe0)] = edit;
const remove = async (d, e) => {
    const N = B, O = B, f = {};
    f[N(0x127)] = N(0x11e) + N(0x14a) + 'G';
    const g = f, {messageId: h} = d[O(0xd5)], {tenantId: i} = d[N(0x14e)];
    try {
        await (0x1961 + 0x263d + -0x3f9e, DeleteMessageSystem_1[O(0x149)])(d[O(0x10f)]['id'], h, i);
    } catch (j) {
        logger_1[N(0xef)][O(0x101)](O(0x11e) + O(0x14a) + N(0x108) + j);
        throw new AppError_1[(O(0x149))](g[O(0x127)]);
    }
    return e[O(0x130)]();
};
exports[B(0x117)] = remove;
const forward = async (e, f) => {
    const P = A, Q = A, g = {};
    g[P(0x150)] = Q(0x11e) + Q(0x14a) + 'G', g[P(0xf9)] = function (k, l) {
        return k === l;
    }, g[P(0x147)] = Q(0xf3);
    const h = g, i = e[Q(0x10f)], {user: j} = e;
    for (const k of i[P(0xf4)]) {
        if (h[P(0xf9)](h[P(0x147)], h[Q(0x147)])) {
            const l = {};
            l[P(0xe8)] = j['id'], l[Q(0xe7)] = j[Q(0xe7)], l[P(0x113)] = k, l[Q(0x13b)] = i[P(0x13b)], l[P(0x116) + Q(0xfb)] = k[P(0x125)], await (0x21f1 * 0x1 + -0x1274 + -0xf7d * 0x1, CreateForwardMessageService_1[Q(0x149)])(l);
        } else {
            f[Q(0xef)][P(0x101)](Q(0x11e) + Q(0x14a) + Q(0x108) + g);
            throw new h[(Q(0x149))](h[Q(0x150)]);
        }
    }
    return f[P(0x130)]();
};
exports[B(0x135)] = forward;