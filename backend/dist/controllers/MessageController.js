'use strict';
const _0x610e8f = _0x3ad5;
(function (_0x2fc7f9, _0x1dc937) {
    const _0x4ca841 = _0x3ad5, _0x1d2152 = _0x2fc7f9();
    while (!![]) {
        try {
            const _0xbb69eb = -parseInt(_0x4ca841(0x161)) / (0x2c0 + 0xcfb * -0x2 + -0x11b * -0x15) + -parseInt(_0x4ca841(0x17e)) / (0x1b42 + 0x6 * -0x50b + 0x302) * (parseInt(_0x4ca841(0x14b)) / (-0x7bd * 0x4 + 0x7b1 * -0x5 + 0x456c)) + -parseInt(_0x4ca841(0x156)) / (-0x21ca + 0x2b * -0x40 + 0x2 * 0x1647) + -parseInt(_0x4ca841(0x120)) / (-0x22a5 + 0x2a9 * 0xb + -0x1 * -0x567) * (-parseInt(_0x4ca841(0x182)) / (0x24df * 0x1 + 0x1a44 + -0x3f1d * 0x1)) + parseInt(_0x4ca841(0x122)) / (-0x4 * -0x922 + 0x1232 * -0x1 + -0x124f) + -parseInt(_0x4ca841(0x177)) / (-0xdd0 + -0x3 * 0x15b + 0x11e9) + parseInt(_0x4ca841(0x13b)) / (0x11d * 0x7 + -0x8 * -0x431 + -0x12e * 0x23);
            if (_0xbb69eb === _0x1dc937)
                break;
            else
                _0x1d2152['push'](_0x1d2152['shift']());
        } catch (_0x9a394a) {
            _0x1d2152['push'](_0x1d2152['shift']());
        }
    }
}(_0x4731, 0x1f45 * 0x2b + -0x7a6a9 + 0xbab60));
var __importDefault = this && this[_0x610e8f(0x136) + _0x610e8f(0x135)] || function (_0x4033d1) {
    const _0x3681f7 = _0x610e8f;
    return _0x4033d1 && _0x4033d1[_0x3681f7(0x157)] ? _0x4033d1 : { 'default': _0x4033d1 };
};
const _0x425cd3 = {};
_0x425cd3[_0x610e8f(0x16c)] = !![], Object[_0x610e8f(0x153) + _0x610e8f(0x15e)](exports, _0x610e8f(0x157), _0x425cd3), exports[_0x610e8f(0x154)] = exports[_0x610e8f(0x130)] = exports[_0x610e8f(0x13c)] = exports[_0x610e8f(0x13f) + _0x610e8f(0x14f)] = exports[_0x610e8f(0x167)] = void (-0x2 * 0x9a5 + 0x2 * 0x989 + 0x38 * 0x1);
function _0x3ad5(_0xa8fbe1, _0x2c0bf1) {
    const _0x15afcc = _0x4731();
    return _0x3ad5 = function (_0x3f31fc, _0x3a36d6) {
        _0x3f31fc = _0x3f31fc - (0x8 * -0x2dc + -0x33 + 0x1833);
        let _0x16f3e9 = _0x15afcc[_0x3f31fc];
        return _0x16f3e9;
    }, _0x3ad5(_0xa8fbe1, _0x2c0bf1);
}
const AppError_1 = __importDefault(require(_0x610e8f(0x139) + _0x610e8f(0x186))), DeleteMessageSystem_1 = __importDefault(require(_0x610e8f(0x164) + _0x610e8f(0x155) + _0x610e8f(0x143))), SetTicketMessagesAsRead_1 = __importDefault(require(_0x610e8f(0x164) + _0x610e8f(0x134) + _0x610e8f(0x126) + _0x610e8f(0x174))), Message_1 = __importDefault(require(_0x610e8f(0x125) + _0x610e8f(0x169))), CreateForwardMessageService_1 = __importDefault(require(_0x610e8f(0x17a) + _0x610e8f(0x140) + _0x610e8f(0x160) + _0x610e8f(0x163) + _0x610e8f(0x129) + _0x610e8f(0x15b))), CreateMessageSystemService_1 = __importDefault(require(_0x610e8f(0x17a) + _0x610e8f(0x140) + _0x610e8f(0x160) + _0x610e8f(0x131) + _0x610e8f(0x12c) + _0x610e8f(0x123))), ListMessagesService_1 = __importDefault(require(_0x610e8f(0x17a) + _0x610e8f(0x140) + _0x610e8f(0x183) + _0x610e8f(0x16b) + _0x610e8f(0x138))), ShowTicketService_1 = __importDefault(require(_0x610e8f(0x17a) + _0x610e8f(0x13d) + _0x610e8f(0x152) + _0x610e8f(0x17d) + _0x610e8f(0x123))), logger_1 = require(_0x610e8f(0x179) + _0x610e8f(0x14a)), index = async (_0x1fea03, _0x36f10d) => {
        const _0x51d603 = _0x610e8f, {ticketId: _0x129b33} = _0x1fea03[_0x51d603(0x144)], {pageNumber: _0x4b6182} = _0x1fea03[_0x51d603(0x168)], {tenantId: _0x2cd04b} = _0x1fea03[_0x51d603(0x148)], _0x5870fd = {};
        _0x5870fd[_0x51d603(0x175)] = _0x4b6182, _0x5870fd[_0x51d603(0x16f)] = _0x129b33, _0x5870fd[_0x51d603(0x145)] = _0x2cd04b;
        const {
            count: _0x349a09,
            messages: _0x1bd09c,
            messagesOffLine: _0x583288,
            ticket: _0x5c9436,
            hasMore: _0x317b56
        } = await (-0xea6 + 0x1a93 + 0x47 * -0x2b, ListMessagesService_1[_0x51d603(0x16a)])(_0x5870fd);
        (0x97 * 0x37 + 0xc96 + -0x2d07, SetTicketMessagesAsRead_1[_0x51d603(0x16a)])(_0x5c9436);
        const _0x53a3d3 = {};
        return _0x53a3d3[_0x51d603(0x12e)] = _0x349a09, _0x53a3d3[_0x51d603(0x15f)] = _0x1bd09c, _0x53a3d3[_0x51d603(0x166) + _0x51d603(0x132)] = _0x583288, _0x53a3d3[_0x51d603(0x158)] = _0x5c9436, _0x53a3d3[_0x51d603(0x170)] = _0x317b56, _0x36f10d[_0x51d603(0x165)](_0x53a3d3);
    };
exports[_0x610e8f(0x167)] = index;
const ListCountMensagens = async (_0x30df6e, _0x143d50) => {
    const _0x42c27d = _0x610e8f, _0x42a95a = {};
    _0x42a95a[_0x42c27d(0x13a)] = _0x42c27d(0x133) + _0x42c27d(0x142) + _0x42c27d(0x13e) + _0x42c27d(0x14d);
    const _0x476dbf = _0x42a95a;
    try {
        const _0x54a6d1 = await Message_1[_0x42c27d(0x16a)][_0x42c27d(0x12e)](), _0x3744b0 = {};
        return _0x3744b0[_0x42c27d(0x12e)] = _0x54a6d1, _0x143d50[_0x42c27d(0x165)](_0x3744b0);
    } catch (_0x83662d) {
        const _0x40671c = {};
        return _0x40671c[_0x42c27d(0x12f)] = _0x476dbf[_0x42c27d(0x13a)], _0x143d50[_0x42c27d(0x124)](0x15c + -0x18 * 0x14b + 0x160 * 0x17)[_0x42c27d(0x165)](_0x40671c);
    }
};
exports[_0x610e8f(0x13f) + _0x610e8f(0x14f)] = ListCountMensagens;
const store = async (_0x5c1fdc, _0x5da1fb) => {
    const _0x48d1ec = _0x610e8f, _0x229b50 = {};
    _0x229b50[_0x48d1ec(0x17f)] = _0x48d1ec(0x16e), _0x229b50[_0x48d1ec(0x180)] = _0x48d1ec(0x147), _0x229b50[_0x48d1ec(0x181)] = _0x48d1ec(0x162) + _0x48d1ec(0x173) + _0x48d1ec(0x15a), _0x229b50[_0x48d1ec(0x151)] = _0x48d1ec(0x141) + _0x48d1ec(0x127) + _0x48d1ec(0x12b);
    const _0x192c1c = _0x229b50, {ticketId: _0x3445f2} = _0x5c1fdc[_0x48d1ec(0x144)], {
            tenantId: _0x26b129,
            id: _0xb679e4
        } = _0x5c1fdc[_0x48d1ec(0x148)], _0x2a2b04 = _0x5c1fdc[_0x48d1ec(0x12a)], _0x5397bc = _0x5c1fdc[_0x48d1ec(0x137)], _0x4e82f0 = {};
    _0x4e82f0['id'] = _0x3445f2, _0x4e82f0[_0x48d1ec(0x145)] = _0x26b129;
    const _0x15b5ea = await (0xe63 + -0x74b * 0x4 + 0x2f5 * 0x5, ShowTicketService_1[_0x48d1ec(0x16a)])(_0x4e82f0);
    try {
        await (-0xa7c + -0x496 + 0x2 * 0x789, SetTicketMessagesAsRead_1[_0x48d1ec(0x16a)])(_0x15b5ea);
    } catch (_0xb75b65) {
        console[_0x48d1ec(0x159)](_0x192c1c[_0x48d1ec(0x181)], _0xb75b65);
    }
    try {
        if (_0x5397bc)
            _0x5397bc[_0x48d1ec(0x14c)](async (_0x103651, _0x3daf2b) => {
                const _0x3abf63 = _0x48d1ec, _0x4fa2a8 = {
                        'fromMe': _0x2a2b04[_0x3abf63(0x150)],
                        'body': Array[_0x3abf63(0x17c)](_0x2a2b04[_0x3abf63(0x12a)]) ? _0x2a2b04[_0x3abf63(0x12a)][_0x3daf2b] : _0x2a2b04[_0x3abf63(0x12a)],
                        'idFront': Array[_0x3abf63(0x17c)](_0x2a2b04[_0x3abf63(0x176)]) ? _0x2a2b04[_0x3abf63(0x176)][_0x3daf2b] : _0x2a2b04[_0x3abf63(0x176)],
                        'read': ![]
                    };
                await (-0x2cc + -0x1340 + 0x160c, CreateMessageSystemService_1[_0x3abf63(0x16a)])({
                    'msg': _0x4fa2a8,
                    'tenantId': _0x26b129,
                    'medias': [_0x103651],
                    'ticket': _0x15b5ea,
                    'userId': _0xb679e4,
                    'scheduleDate': _0x2a2b04[_0x3abf63(0x184) + 'te'] ? new Date(Array[_0x3abf63(0x17c)](_0x2a2b04[_0x3abf63(0x184) + 'te']) ? _0x2a2b04[_0x3abf63(0x184) + 'te'][_0x3daf2b] : _0x2a2b04[_0x3abf63(0x184) + 'te']) : undefined,
                    'sendType': _0x2a2b04[_0x3abf63(0x121)] || _0x192c1c[_0x3abf63(0x17f)],
                    'status': _0x192c1c[_0x3abf63(0x180)],
                    'idFront': Array[_0x3abf63(0x17c)](_0x2a2b04[_0x3abf63(0x176)]) ? _0x2a2b04[_0x3abf63(0x176)][_0x3daf2b] : _0x2a2b04[_0x3abf63(0x176)]
                });
            });
        else {
            const _0x30bfb9 = {};
            _0x30bfb9[_0x48d1ec(0x14e)] = _0x2a2b04, _0x30bfb9[_0x48d1ec(0x145)] = _0x26b129, _0x30bfb9[_0x48d1ec(0x178)] = _0x5397bc, _0x30bfb9[_0x48d1ec(0x158)] = _0x15b5ea, _0x30bfb9[_0x48d1ec(0x172)] = _0xb679e4, _0x30bfb9[_0x48d1ec(0x184) + 'te'] = _0x2a2b04[_0x48d1ec(0x184) + 'te'], _0x30bfb9[_0x48d1ec(0x121)] = _0x2a2b04[_0x48d1ec(0x121)] || _0x192c1c[_0x48d1ec(0x17f)], _0x30bfb9[_0x48d1ec(0x124)] = _0x192c1c[_0x48d1ec(0x180)], _0x30bfb9[_0x48d1ec(0x176)] = _0x2a2b04[_0x48d1ec(0x176)], await (-0x4 * 0xf0 + 0x74f * -0x4 + 0x20fc, CreateMessageSystemService_1[_0x48d1ec(0x16a)])(_0x30bfb9);
        }
    } catch (_0x49f135) {
        console[_0x48d1ec(0x159)](_0x192c1c[_0x48d1ec(0x151)], _0x49f135);
    }
    return _0x5da1fb[_0x48d1ec(0x185)]();
};
exports[_0x610e8f(0x13c)] = store;
const remove = async (_0x1d0831, _0x751ee0) => {
    const _0x5532b2 = _0x610e8f, _0xf40984 = {};
    _0xf40984[_0x5532b2(0x16d)] = _0x5532b2(0x15c) + _0x5532b2(0x146) + 'G';
    const _0x35aac4 = _0xf40984, {messageId: _0x329912} = _0x1d0831[_0x5532b2(0x144)], {tenantId: _0x2c01fd} = _0x1d0831[_0x5532b2(0x148)];
    try {
        await (0x2e * -0x1e + 0x4aa + 0xba, DeleteMessageSystem_1[_0x5532b2(0x16a)])(_0x1d0831[_0x5532b2(0x12a)]['id'], _0x329912, _0x2c01fd);
    } catch (_0xbe9121) {
        logger_1[_0x5532b2(0x149)][_0x5532b2(0x12f)](_0x5532b2(0x15c) + _0x5532b2(0x146) + _0x5532b2(0x15d) + _0xbe9121);
        throw new AppError_1[(_0x5532b2(0x16a))](_0x35aac4[_0x5532b2(0x16d)]);
    }
    return _0x751ee0[_0x5532b2(0x185)]();
};
exports[_0x610e8f(0x130)] = remove;
const forward = async (_0x4d86a2, _0x34571c) => {
    const _0x428955 = _0x610e8f, _0x5d9df8 = _0x4d86a2[_0x428955(0x12a)], {user: _0x1f33ec} = _0x4d86a2;
    for (const _0x1921d0 of _0x5d9df8[_0x428955(0x15f)]) {
        const _0x234b90 = {};
        _0x234b90[_0x428955(0x172)] = _0x1f33ec['id'], _0x234b90[_0x428955(0x145)] = _0x1f33ec[_0x428955(0x145)], _0x234b90[_0x428955(0x17b)] = _0x1921d0, _0x234b90[_0x428955(0x12d)] = _0x5d9df8[_0x428955(0x12d)], _0x234b90[_0x428955(0x171) + _0x428955(0x128)] = _0x1921d0[_0x428955(0x16f)], await (-0xad2 * 0x2 + -0x106d + 0x2611, CreateForwardMessageService_1[_0x428955(0x16a)])(_0x234b90);
    }
    return _0x34571c[_0x428955(0x185)]();
};
function _0x4731() {
    const _0x1bdbe1 = [
        'sendType',
        '4535881aWIOYm',
        'vice',
        'status',
        '../models/',
        'MessagesAs',
        'MessageSys',
        'igin',
        'dMessageSe',
        'body',
        'temService',
        'eSystemSer',
        'contact',
        'count',
        'error',
        'remove',
        'eateMessag',
        'fLine',
        'Ocorreu\x20um',
        '/SetTicket',
        'fault',
        '__importDe',
        'files',
        'Service',
        '../errors/',
        'JbcjO',
        '19273887ixnKSS',
        'store',
        's/TicketSe',
        'ontar\x20as\x20m',
        'ListCountM',
        's/MessageS',
        'try\x20Create',
        '\x20erro\x20ao\x20c',
        'sageSystem',
        'params',
        'tenantId',
        '_SYSTEM_MS',
        'pending',
        'user',
        'logger',
        'ogger',
        '852VwUxmr',
        'forEach',
        'ensagens.',
        'msg',
        'ensagens',
        'fromMe',
        'EErjb',
        'rvices/Sho',
        'defineProp',
        'forward',
        '/DeleteMes',
        '2717856fsDKsg',
        '__esModule',
        'ticket',
        'log',
        'ead',
        'rvice',
        'ERR_DELETE',
        'G:\x20',
        'erty',
        'messages',
        'ervices/Cr',
        '210613sOcQkg',
        'SetTicketM',
        'eateForwar',
        '../helpers',
        'json',
        'messagesOf',
        'index',
        'query',
        'Message',
        'default',
        'stMessages',
        'value',
        'dIkal',
        'chat',
        'ticketId',
        'hasMore',
        'ticketIdOr',
        'userId',
        'essagesAsR',
        'Read',
        'pageNumber',
        'idFront',
        '7664688MYwCgw',
        'medias',
        '../utils/l',
        '../service',
        'message',
        'isArray',
        'wTicketSer',
        '7352eYMCNZ',
        'PZbMv',
        'zVtDO',
        'khRlJ',
        '4261122yZCGhr',
        'ervices/Li',
        'scheduleDa',
        'send',
        'AppError',
        '5rNXLsX'
    ];
    _0x4731 = function () {
        return _0x1bdbe1;
    };
    return _0x4731();
}
exports[_0x610e8f(0x154)] = forward;