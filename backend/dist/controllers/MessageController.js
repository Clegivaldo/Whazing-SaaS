'use strict';
const E = b, F = b;
(function (c, d) {
    const C = b, D = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(C(0x174)) / (0x16f * -0x2 + 0x18ef + -0x1610) * (parseInt(D(0x18f)) / (-0x1 * 0x1a0b + 0x49b + -0x3d * -0x5a)) + -parseInt(C(0x17d)) / (-0x3b4 * -0x9 + -0x465 + 0x9a4 * -0x3) + parseInt(D(0x1a3)) / (-0x1 * -0x18f7 + -0x3ae + 0x1545 * -0x1) + -parseInt(C(0x198)) / (0x15e5 + -0xf17 * -0x1 + -0x1 * 0x24f7) * (-parseInt(C(0x19f)) / (0x3f * 0x22 + 0x1 * 0x27a + -0x1 * 0xad2)) + parseInt(D(0x1aa)) / (-0x2 * 0x1c3 + 0x94d * -0x3 + 0xa7c * 0x3) + -parseInt(C(0x17c)) / (0x26e0 + 0x10e2 + 0x7 * -0x7f6) + parseInt(D(0x181)) / (0x305 * -0x4 + -0xd8e + -0x19ab * -0x1) * (-parseInt(C(0x1e8)) / (0x87b * 0x1 + 0x1f3f + -0x27b0));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x36b * 0xf1 + -0x18955 + 0x1bb85 * 0x1));
function a() {
    const X = [
        'ListCountM',
        'Read',
        '80pAGZHK',
        'erty',
        'PjLLU',
        'dMessageSe',
        's/MessageS',
        'pageNumber',
        'logger',
        'index',
        'edit',
        'default',
        'send',
        'sage',
        'Service',
        'contact',
        'wqNLR',
        'DzwWX',
        'ensagens',
        'hPgFh',
        'uwWvq',
        'userId',
        '../service',
        'tHaGI',
        'remove',
        'try\x20Create',
        'fFzUp',
        'NQTkQ',
        'fault',
        'MessagesAs',
        'xdOQn',
        'VMyni',
        'store',
        '_SYSTEM_MS',
        'tSzcr',
        'eIgJh',
        'isArray',
        'messageId',
        'user',
        'ERR_EDITIN',
        '5FgvERu',
        '__esModule',
        'vvSVJ',
        'tYysm',
        '../helpers',
        'xHYpK',
        'hatsAppMes',
        'fromMe',
        '508496GmHrDi',
        '309939ZXpxsS',
        'aaTpo',
        'defineProp',
        'MessageSys',
        '81234OENxZR',
        'json',
        'temService',
        'srvPL',
        'ERR_DELETE',
        'ctJyW',
        'G:\x20',
        '../models/',
        'GBBxb',
        'eSystemSer',
        'ogger',
        'fLWnE',
        'OMrxI',
        'EsjdJ',
        '80722bhNIut',
        'XVKVX',
        'msg',
        'forEach',
        'ontar\x20as\x20m',
        'hUtsO',
        'YlUTd',
        'value',
        'Ocorreu\x20um',
        '15dTgWbL',
        'fLine',
        'ensagens.',
        'eateMessag',
        'oBqDd',
        'essagesAsR',
        '__importDe',
        '398568aEqHsX',
        'query',
        'ARTUB',
        'peXwC',
        '1271764HfdBXw',
        'count',
        'sendType',
        'rJZIt',
        'ArwGN',
        'message',
        'nNxmt',
        '1031702VnQatr',
        'ticket',
        'rvice',
        '/SetTicket',
        'ticketIdOr',
        'messagesOf',
        'status',
        'IpnNZ',
        'length',
        'tenantId',
        'wiAoK',
        'wTicketSer',
        'NFbIA',
        'hasMore',
        'ead',
        'params',
        'BfqaS',
        'yXfQJ',
        'pending',
        'vice',
        's/TicketSe',
        'NqRGN',
        'igin',
        'yHFAW',
        'ticketId',
        'WItsv',
        '\x20erro\x20ao\x20c',
        'eateForwar',
        's/WbotServ',
        '/DeleteMes',
        'AppError',
        'aanzT',
        'sageSystem',
        'ices/EditW',
        'rvices/Sho',
        'medias',
        'forward',
        'OsaXV',
        '../errors/',
        'ervices/Li',
        'ervices/Cr',
        'HrXAo',
        'SetTicketM',
        'qCxGA',
        'scheduleDa',
        'log',
        'idFront',
        'G_WAPP_MSG',
        'mediaUrl',
        'cygMX',
        'chat',
        'Message',
        'stMessages',
        'bKTDx',
        '../utils/l',
        'KpnND',
        'body',
        'files',
        'messages',
        'error'
    ];
    a = function () {
        return X;
    };
    return a();
}
var __importDefault = this && this[E(0x19e) + E(0x168)] || function (c) {
    const G = F;
    return c && c[G(0x175)] ? c : { 'default': c };
};
const q = {};
q[F(0x196)] = !![], Object[F(0x17f) + E(0x1e9)](exports, E(0x175), q), exports[F(0x1ce)] = exports[E(0x164)] = exports[F(0x1f0)] = exports[E(0x16c)] = exports[E(0x1e6) + F(0x15e)] = exports[E(0x1ef)] = void (0xcc9 + -0x1e4e + -0xc3 * -0x17);
const AppError_1 = __importDefault(require(E(0x1d0) + E(0x1c8))), DeleteMessageSystem_1 = __importDefault(require(F(0x178) + E(0x1c7) + F(0x1ca))), SetTicketMessagesAsRead_1 = __importDefault(require(F(0x178) + E(0x1ad) + F(0x169) + E(0x1e7))), Message_1 = __importDefault(require(F(0x188) + F(0x1dd))), CreateForwardMessageService_1 = __importDefault(require(E(0x162) + E(0x1ec) + E(0x1d2) + F(0x1c5) + F(0x1eb) + F(0x1ac))), CreateMessageSystemService_1 = __importDefault(require(F(0x162) + F(0x1ec) + F(0x1d2) + F(0x19b) + E(0x18a) + E(0x1bd))), ListMessagesService_1 = __importDefault(require(F(0x162) + E(0x1ec) + E(0x1d1) + F(0x1de) + E(0x1f4))), ShowTicketService_1 = __importDefault(require(E(0x162) + E(0x1be) + E(0x1cc) + E(0x1b5) + F(0x1bd))), logger_1 = require(F(0x1e0) + E(0x18b)), EditWhatsAppMessage_1 = __importDefault(require(F(0x162) + F(0x1c6) + E(0x1cb) + E(0x17a) + E(0x1f3))), index = async (e, f) => {
        const H = F, I = E, {ticketId: g} = e[H(0x1b9)], {pageNumber: h} = e[H(0x1a0)], {tenantId: i} = e[H(0x172)], j = {};
        j[H(0x1ed)] = h, j[I(0x1c2)] = g, j[H(0x1b3)] = i;
        const {
            count: k,
            messages: l,
            messagesOffLine: m,
            ticket: n,
            hasMore: o
        } = await (0x19b9 + 0x17f6 * -0x1 + 0x1 * -0x1c3, ListMessagesService_1[H(0x1f1)])(j);
        (-0x39 + -0xd4c + 0xd85, SetTicketMessagesAsRead_1[H(0x1f1)])(n);
        const p = {};
        return p[H(0x1a4)] = k, p[I(0x1e4)] = l, p[I(0x1af) + I(0x199)] = m, p[I(0x1ab)] = n, p[I(0x1b7)] = o, f[I(0x182)](p);
    };
exports[E(0x1ef)] = index;
const ListCountMensagens = async (f, g) => {
    const J = E, K = E, h = {};
    h[J(0x18d)] = J(0x165) + K(0x180) + J(0x183), h[J(0x1db)] = function (j, k) {
        return j !== k;
    }, h[K(0x15c)] = K(0x15f), h[K(0x1b1)] = K(0x1c9), h[K(0x1b4)] = K(0x163), h[J(0x190)] = J(0x197) + K(0x1c4) + K(0x193) + J(0x19a);
    const i = h;
    try {
        if (i[K(0x1db)](i[J(0x15c)], i[K(0x15c)])) {
            const k = {};
            return k[K(0x1f1)] = j, g && h[J(0x175)] ? i : k;
        } else {
            const k = await Message_1[K(0x1f1)][J(0x1a4)](), l = {};
            return l[J(0x1a4)] = k, g[J(0x182)](l);
        }
    } catch (m) {
        if (i[J(0x1db)](i[K(0x1b1)], i[J(0x1b4)])) {
            const n = {};
            return n[J(0x1e5)] = i[J(0x190)], g[K(0x1b0)](-0x1590 + 0xd * 0x2dc + -0xda8)[K(0x182)](n);
        } else
            e[J(0x1d7)](i[J(0x18d)], f);
    }
};
exports[E(0x1e6) + E(0x15e)] = ListCountMensagens;
const store = async (g, h) => {
    const L = E, M = F, i = {};
    i[L(0x166)] = L(0x197) + L(0x1c4) + L(0x193) + L(0x19a), i[L(0x1ba)] = L(0x1d4) + L(0x19d) + M(0x1b8), i[M(0x1a1)] = M(0x185) + M(0x16d) + 'G', i[L(0x179)] = function (s, t) {
        return s instanceof t;
    }, i[L(0x15d)] = function (s, t) {
        return s === t;
    }, i[M(0x1e1)] = M(0x173) + M(0x1d9), i[L(0x18c)] = function (s, t) {
        return s === t;
    }, i[M(0x16b)] = L(0x176), i[M(0x1b6)] = L(0x16e), i[M(0x1a6)] = M(0x1dc), i[M(0x17e)] = M(0x1bc), i[L(0x184)] = M(0x167), i[M(0x186)] = L(0x195), i[L(0x189)] = function (s, t) {
        return s === t;
    }, i[L(0x1c3)] = L(0x19c), i[L(0x16a)] = L(0x1bf), i[L(0x1df)] = function (s, t) {
        return s === t;
    }, i[L(0x1d3)] = M(0x1d5), i[M(0x1c1)] = function (s, t) {
        return s > t;
    }, i[L(0x16f)] = function (s, t) {
        return s === t;
    }, i[L(0x1bb)] = L(0x1ea), i[L(0x1a2)] = L(0x165) + L(0x180) + L(0x183);
    const j = i, {ticketId: k} = g[L(0x1b9)], {
            tenantId: l,
            id: m
        } = g[L(0x172)], n = g[L(0x1e2)], o = g[L(0x1e3)], p = {};
    p['id'] = k, p[M(0x1b3)] = l;
    const r = await (-0x1 * 0x172f + 0xcc2 + 0xa6d, ShowTicketService_1[M(0x1f1)])(p);
    try {
        if (j[M(0x18c)](j[L(0x184)], j[L(0x186)])) {
            const t = {};
            return t[M(0x1e5)] = j[L(0x166)], p[M(0x1b0)](-0xd43 + 0x695 + 0x8a2)[L(0x182)](t);
        } else
            await (-0xed7 + 0x102c + -0x1 * 0x155, SetTicketMessagesAsRead_1[L(0x1f1)])(r);
    } catch (t) {
        j[M(0x189)](j[M(0x1c3)], j[L(0x16a)]) ? e[M(0x1d7)](j[L(0x1ba)], f) : console[M(0x1d7)](j[M(0x1ba)], t);
    }
    try {
        if (n[M(0x1da)]) {
            if (j[L(0x1df)](j[M(0x1d3)], j[M(0x1d3)])) {
                const v = {};
                v[L(0x191)] = n, v[M(0x1b3)] = l, v[M(0x1cd)] = o, v[M(0x1ab)] = r, v[M(0x161)] = m, v[L(0x1d6) + 'te'] = n[L(0x1d6) + 'te'], v[L(0x1a5)] = n[M(0x1a5)] || j[L(0x1a6)], v[M(0x1b0)] = j[L(0x17e)], v[M(0x1d8)] = n[M(0x1d8)], await (0x1 * -0x1da7 + 0x1640 + -0x17b * -0x5, CreateMessageSystemService_1[M(0x1f1)])(v);
            } else {
                f[L(0x1ee)][M(0x1e5)](L(0x185) + L(0x16d) + M(0x187) + g);
                throw new h[(L(0x1f1))](j[M(0x1a1)]);
            }
        } else {
            if (o && j[M(0x1c1)](o[L(0x1b2)], -0x1d51 + -0x1c1e + 0x57 * 0xa9)) {
                if (j[M(0x16f)](j[M(0x1bb)], j[M(0x1bb)]))
                    o[L(0x192)](async (x, y) => {
                        const P = M, Q = M, z = {
                                'tYysm': function (A, B) {
                                    const N = b;
                                    return j[N(0x179)](A, B);
                                },
                                'uwWvq': function (A, B) {
                                    const O = b;
                                    return j[O(0x15d)](A, B);
                                },
                                'OsaXV': j[P(0x1e1)]
                            };
                        if (j[P(0x18c)](j[P(0x16b)], j[P(0x1b6)])) {
                            if (z[Q(0x177)](i, j[Q(0x1f1)]) && z[Q(0x160)](k[P(0x1a8)], z[Q(0x1cf)])) {
                                const B = {};
                                return B[P(0x1e5)] = p[Q(0x1a8)], o[P(0x1b0)](-0xb2c + 0xb7f + -0x13d * -0x1)[Q(0x182)](B);
                            }
                            throw n;
                        } else {
                            const B = {
                                'fromMe': n[Q(0x17b)],
                                'body': Array[Q(0x170)](n[P(0x1e2)]) ? n[Q(0x1e2)][y] : n[Q(0x1e2)],
                                'idFront': Array[Q(0x170)](n[P(0x1d8)]) ? n[Q(0x1d8)][y] : n[P(0x1d8)],
                                'read': ![]
                            };
                            await (-0x1f6a + -0x2 * 0xac7 + 0x34f8, CreateMessageSystemService_1[P(0x1f1)])({
                                'msg': B,
                                'tenantId': l,
                                'medias': [x],
                                'ticket': r,
                                'userId': m,
                                'scheduleDate': n[Q(0x1d6) + 'te'] ? new Date(Array[P(0x170)](n[P(0x1d6) + 'te']) ? n[P(0x1d6) + 'te'][y] : n[Q(0x1d6) + 'te']) : undefined,
                                'sendType': n[Q(0x1a5)] || j[P(0x1a6)],
                                'status': j[Q(0x17e)],
                                'idFront': Array[P(0x170)](n[Q(0x1d8)]) ? n[Q(0x1d8)][y] : n[Q(0x1d8)]
                            });
                        }
                    });
                else {
                    const y = {};
                    return y[L(0x1e5)] = y[L(0x1a8)], e[M(0x1b0)](0x1 * 0x1c13 + 0x1a82 + 0x793 * -0x7)[L(0x182)](y);
                }
            } else {
                const y = {};
                y[M(0x191)] = n, y[M(0x1b3)] = l, y[L(0x1cd)] = o, y[M(0x1ab)] = r, y[L(0x161)] = m, y[M(0x1d6) + 'te'] = n[L(0x1d6) + 'te'], y[M(0x1a5)] = n[M(0x1a5)] || j[L(0x1a6)], y[L(0x1b0)] = j[M(0x17e)], y[L(0x1d8)] = n[L(0x1d8)], await (-0x1 * -0x26e + -0x3a * 0x49 + 0x1 * 0xe1c, CreateMessageSystemService_1[M(0x1f1)])(y);
            }
        }
    } catch (z) {
        console[L(0x1d7)](j[L(0x1a2)], z);
    }
    return h[L(0x1f2)]();
};
exports[E(0x16c)] = store;
const edit = async (f, g) => {
    const R = E, S = E, h = {};
    h[R(0x1a7)] = function (n, o) {
        return n instanceof o;
    }, h[S(0x1a9)] = function (n, o) {
        return n === o;
    }, h[S(0x194)] = S(0x173) + R(0x1d9);
    const i = h, {messageId: j} = f[S(0x1b9)], {tenantId: k} = f[R(0x172)], l = +k, {body: m} = f[R(0x1e2)];
    try {
        const n = {};
        n[R(0x171)] = j, n[S(0x1b3)] = l, n[S(0x1e2)] = m;
        const {
            ticketId: o,
            message: p
        } = await (-0x485 + 0x173f + -0x12ba, EditWhatsAppMessage_1[R(0x1f1)])(n);
    } catch (r) {
        if (i[S(0x1a7)](r, AppError_1[R(0x1f1)]) && i[R(0x1a9)](r[S(0x1a8)], i[S(0x194)])) {
            const s = {};
            return s[R(0x1e5)] = r[S(0x1a8)], g[R(0x1b0)](-0x700 * 0x4 + -0x17 * 0x62 + 0x1 * 0x265e)[R(0x182)](s);
        }
        throw r;
    }
    return g[S(0x1f2)]();
};
exports[E(0x1f0)] = edit;
const remove = async (d, e) => {
    const T = F, U = E, f = {};
    f[T(0x18e)] = T(0x185) + T(0x16d) + 'G';
    const g = f, {messageId: h} = d[T(0x1b9)], {tenantId: i} = d[U(0x172)];
    try {
        await (0x2 * -0xc55 + 0x142b + 0x1 * 0x47f, DeleteMessageSystem_1[U(0x1f1)])(d[T(0x1e2)]['id'], h, i);
    } catch (j) {
        logger_1[T(0x1ee)][T(0x1e5)](T(0x185) + U(0x16d) + T(0x187) + j);
        throw new AppError_1[(T(0x1f1))](g[U(0x18e)]);
    }
    return e[T(0x1f2)]();
};
exports[F(0x164)] = remove;
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x140 + 0x1f * 0x5c + -0xb09);
        let h = e[f];
        return h;
    }, b(c, d);
}
const forward = async (d, e) => {
    const V = E, W = F, f = d[V(0x1e2)], {user: g} = d;
    for (const h of f[V(0x1e4)]) {
        const i = {};
        i[V(0x161)] = g['id'], i[W(0x1b3)] = g[W(0x1b3)], i[V(0x1a8)] = h, i[W(0x15b)] = f[W(0x15b)], i[W(0x1ae) + V(0x1c0)] = h[W(0x1c2)], await (-0x25 * 0xb5 + -0x1a6b + 0xa * 0x542, CreateForwardMessageService_1[W(0x1f1)])(i);
    }
    return e[V(0x1f2)]();
};
exports[F(0x1ce)] = forward;