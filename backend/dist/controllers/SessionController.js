'use strict';const o=b,p=b;(function(c,d){const m=b,n=b,e=c();while(!![]){try{const f=-parseInt(m(0x10f))/0x1+parseInt(m(0x118))/0x2*(parseInt(n(0x114))/0x3)+parseInt(m(0x10a))/0x4+parseInt(m(0x124))/0x5*(-parseInt(m(0x108))/0x6)+-parseInt(m(0x112))/0x7*(parseInt(n(0x10e))/0x8)+-parseInt(n(0x11d))/0x9+parseInt(m(0x10c))/0xa;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x3682d));var __importDefault=this&&this['__importDefault']||function(c){return c&&c['__esModule']?c:{'default':c};};Object[o(0x113)](exports,p(0x117),{'value':!![]}),exports['logout']=exports[o(0x102)]=exports[p(0xfe)]=void 0x0;const AppError_1=__importDefault(require(o(0x106))),AuthUserSerice_1=__importDefault(require(p(0x116))),SendRefreshToken_1=require(p(0x115)),RefreshTokenService_1=require(p(0x109)),socket_1=require(o(0x103)),User_1=__importDefault(require(p(0x105))),store=async(c,d)=>{const q=p,r=p,e=(0x0,socket_1['getIO'])(),{email:f,password:g}=c[q(0x101)],{token:h,user:i,refreshToken:j,usuariosOnline:k}=await(0x0,AuthUserSerice_1[r(0x104)])({'email':f,'password':g});(0x0,SendRefreshToken_1[r(0x107)])(d,j);const l={'token':h,'username':i[q(0x119)],'email':i[r(0x11c)],'profile':i[r(0x110)],'status':i['status'],'userId':i['id'],'tenantId':i[q(0x11b)],'queues':i[r(0x11a)],'usuariosOnline':k,'configs':i[q(0xff)]};return e[r(0x120)](l[r(0x11b)]+q(0x10d),{'action':'update','data':{'username':l[q(0x121)],'email':l[q(0x11c)],'isOnline':!![],'lastLogin':new Date()}}),d[q(0x100)](0xc8)[q(0x11f)](l);};exports['store']=store;const update=async(c,d)=>{const s=o,t=p,e=c[s(0x122)]['jrt'];if(!e)throw new AppError_1[(t(0x104))](s(0x125),0x191);const {newToken:f,refreshToken:g}=await(0x0,RefreshTokenService_1[t(0x10b)])(e);return(0x0,SendRefreshToken_1['SendRefreshToken'])(d,g),d[s(0x11f)]({'token':f});};function b(c,d){const e=a();return b=function(f,g){f=f-0xfe;let h=e[f];return h;},b(c,d);}exports[p(0x102)]=update;const logout=async(c,d)=>{const u=p,v=o,{userId:e}=c[u(0x101)];if(!e)throw new AppError_1['default']('ERR_USER_NOT_FOUND',0x194);const f=(0x0,socket_1[u(0x111)])(),g=await User_1[v(0x104)][v(0x123)](e);return g&&g[v(0x102)]({'isOnline':![],'lastLogout':new Date()}),f['emit'](g?.[u(0x11b)]+u(0x10d),{'action':u(0x102),'data':{'username':g?.[u(0x119)],'email':g?.['email'],'isOnline':![],'lastLogout':new Date()}}),d[u(0x11f)]({'message':u(0x11e)});};function a(){const w=['1125TdwIvl','ERR_SESSION_EXPIRED','store','configs','status','body','update','../libs/socket','default','../models/User','../errors/AppError','SendRefreshToken','888PonLLI','../services/AuthServices/RefreshTokenService','961684CbvziE','RefreshTokenService','2679190zWWDiy',':users','1072WRrPvN','281107YlQMHj','profile','getIO','4473SbLrnC','defineProperty','189129rXHbAm','../helpers/SendRefreshToken','../services/UserServices/AuthUserSerice','__esModule','4cbOKZN','name','queues','tenantId','email','100044FRQQPU','USER_LOGOUT','json','emit','username','cookies','findByPk'];a=function(){return w;};return a();}exports['logout']=logout;