'use strict';function b(c,d){const e=a();return b=function(f,g){f=f-0x1e5;let h=e[f];return h;},b(c,d);}const I=b,J=b;function a(){const a2=['create','20TBDgdK','store','call','default','vEMHS','shape','yup','number','../services/QueueServices/CreateQueueService','index','../services/QueueServices/DeleteQueueService','819005qZxqcb','required','defineProperty','status','1315gZsKfT','__esModule','__importStar','object','../services/QueueServices/UpdateQueueService','176rPfMgA','194254BoLjvN','configurable','309365lnfuoV','update','listUserQueues','32428KhHOGy','ciyUL','3446316JPHAyh','json','168FFYzGv','validate','../errors/AppError','34962qDoXZM','sApND','user','prototype','../services/QueueServices/ListQueueService','kALKh','xkkzN','2152oFgElV','string','profile','hamoH','get','__importDefault','admin','body','810AlTlfn','ERR_NO_PERMISSION','__createBinding','message','hasOwnProperty','writable','remove','../services/QueueServices/ListUserQueueService','params'];a=function(){return a2;};return a();}(function(c,d){const G=b,H=b,e=c();while(!![]){try{const f=-parseInt(G(0x217))/0x1+-parseInt(G(0x21c))/0x2+parseInt(H(0x1f8))/0x3*(parseInt(G(0x1f0))/0x4)+parseInt(G(0x211))/0x5*(parseInt(G(0x1e9))/0x6)+parseInt(H(0x219))/0x7*(-parseInt(G(0x216))/0x8)+-parseInt(H(0x21e))/0x9*(parseInt(G(0x202))/0xa)+-parseInt(G(0x20d))/0xb*(-parseInt(G(0x1e6))/0xc);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xbc5c5));var __createBinding=this&&this[I(0x1fa)]||(Object[J(0x201)]?function(c,d,e,f){const K=J,L=J;if(f===undefined)f=e;var g=Object['getOwnPropertyDescriptor'](d,e);(!g||(K(0x1f4)in g?!d[L(0x212)]:g[L(0x1fd)]||g[L(0x218)]))&&(g={'enumerable':!![],'get':function(){return d[e];}}),Object[K(0x20f)](c,f,g);}:function(c,d,e,f){if(f===undefined)f=e;c[f]=d[e];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[J(0x201)]?function(c,d){const M=I,N=J;Object[M(0x20f)](c,M(0x205),{'enumerable':!![],'value':d});}:function(c,d){const O=J;c[O(0x205)]=d;}),__importStar=this&&this[J(0x213)]||function(c){const P=J,Q=I;if(c&&c[P(0x212)])return c;var d={};if(c!=null){for(var e in c)if(e!=='default'&&Object[P(0x1ec)][P(0x1fc)][Q(0x204)](c,e))__createBinding(d,c,e);}return __setModuleDefault(d,c),d;},__importDefault=this&&this[J(0x1f5)]||function(c){const R=I;return c&&c[R(0x212)]?c:{'default':c};};Object['defineProperty'](exports,I(0x212),{'value':!![]}),exports[I(0x21b)]=exports[I(0x1fe)]=exports[J(0x21a)]=exports[J(0x20b)]=exports[I(0x203)]=void 0x0;const Yup=__importStar(require(I(0x208))),AppError_1=__importDefault(require(J(0x1e8))),CreateQueueService_1=__importDefault(require(I(0x20a))),ListQueueService_1=__importDefault(require(J(0x1ed))),DeleteQueueService_1=__importDefault(require(I(0x20c))),UpdateQueueService_1=__importDefault(require(J(0x215))),ListUserQueueService_1=__importDefault(require(I(0x1ff))),store=async(c,d)=>{const S=I,T=J,{tenantId:e}=c[S(0x1eb)];if(c['user'][S(0x1f2)]!=='admin')throw new AppError_1['default'](S(0x1f9),0x193);const f={...c[T(0x1f7)],'userId':c['user']['id'],'tenantId':e},g=Yup[S(0x214)]()['shape']({'queue':Yup['string']()[S(0x20e)](),'userId':Yup[T(0x209)]()[S(0x20e)](),'tenantId':Yup[T(0x209)]()[S(0x20e)]()});try{await g[T(0x1e7)](f);}catch(i){throw new AppError_1[(S(0x205))](i[S(0x1fb)]);}const h=await(0x0,CreateQueueService_1['default'])(f);return d['status'](0xc8)['json'](h);};exports[J(0x203)]=store;const index=async(c,d)=>{const U=I,V=J,{tenantId:e}=c[U(0x1eb)],f=await(0x0,ListQueueService_1['default'])({'tenantId':e});return d[V(0x210)](0xc8)[V(0x1e5)](f);};exports[I(0x20b)]=index;const update=async(c,d)=>{const W=J,X=J,{tenantId:e}=c['user'];if(c['user'][W(0x1f2)]!==W(0x1f6)){if(X(0x1ee)!==W(0x1ee))return g&&h[W(0x212)]?i:{'default':j};else throw new AppError_1[(X(0x205))](X(0x1f9),0x193);}const f={...c['body'],'userId':c[W(0x1eb)]['id'],'tenantId':e},g=Yup[W(0x214)]()[X(0x207)]({'queue':Yup[W(0x1f1)]()['required'](),'isActive':Yup['boolean']()[X(0x20e)](),'userId':Yup[X(0x209)]()['required']()});try{if(X(0x1f3)!==W(0x1f3))throw new d[(X(0x205))](X(0x1f9),0x193);else await g[W(0x1e7)](f);}catch(l){if(X(0x1ef)!==X(0x21d))throw new AppError_1['default'](l[W(0x1fb)]);else throw new d[(X(0x205))](W(0x1f9),0x193);}const {queueId:h}=c[W(0x200)],i=await(0x0,UpdateQueueService_1[X(0x205)])({'queueData':f,'queueId':h});return d[X(0x210)](0xc8)[W(0x1e5)](i);};exports[J(0x21a)]=update;const remove=async(c,d)=>{const Y=I,Z=J,{tenantId:e}=c[Y(0x1eb)];if(c[Y(0x1eb)][Y(0x1f2)]!==Z(0x1f6)){if(Y(0x1ea)!==Z(0x206))throw new AppError_1[(Z(0x205))]('ERR_NO_PERMISSION',0x193);else return e[f];}const {queueId:f}=c['params'];return await(0x0,DeleteQueueService_1[Z(0x205)])({'id':f,'tenantId':e}),d[Y(0x210)](0xc8)[Z(0x1e5)]({'message':'Queue\x20deleted'});};exports[I(0x1fe)]=remove;const listUserQueues=async(c,d)=>{const a0=I,a1=I,{tenantId:e,id:f}=c[a0(0x1eb)],g=await(0x0,ListUserQueueService_1['default'])({'tenantId':e,'userId':f});return d['status'](0xc8)[a0(0x1e5)](g);};exports[J(0x21b)]=listUserQueues;