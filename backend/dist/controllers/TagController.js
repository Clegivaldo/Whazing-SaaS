'use strict';const I=b,L=b;function a(){const a0=['status','2353362CpoNGI','update','../services/TagServices/CreateTagService','../services/TagServices/DeleteTagService','required','38596RAJvvT','get','defineProperty','string','default','create','../services/TagServices/ListTagService','boolean','QDQin','admin','../errors/AppError','__esModule','query','10OBQCZD','json','number','704830VhfKuZ','body','call','__importStar','../services/TagServices/UpdateTagService','11295504UmXYIn','user','4780tvhJNo','73iXjFWw','56YdWBrz','ERR_NO_PERMISSION','4935560DyEeaG','getOwnPropertyDescriptor','profile','prototype','store','writable','__importDefault','__setModuleDefault','shape','28864nXZjWu','remove','2704752TTWgBg','message','params','object','configurable','Tag\x20deleted','index'];a=function(){return a0;};return a();}(function(c,d){const G=b,H=b,e=c();while(!![]){try{const f=-parseInt(G(0x1ce))/0x1*(-parseInt(H(0x1e9))/0x2)+-parseInt(H(0x1dc))/0x3+parseInt(H(0x1d1))/0x4+-parseInt(H(0x1f6))/0x5*(-parseInt(G(0x1e4))/0x6)+-parseInt(G(0x1f9))/0x7*(-parseInt(G(0x1cf))/0x8)+-parseInt(G(0x1fe))/0x9+-parseInt(G(0x1cd))/0xa*(parseInt(G(0x1da))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xb0078));function b(c,d){const e=a();return b=function(f,g){f=f-0x1cc;let h=e[f];return h;},b(c,d);}var __createBinding=this&&this['__createBinding']||(Object[I(0x1ee)]?function(c,d,e,f){const J=I,K=I;if(f===undefined)f=e;var g=Object[J(0x1d2)](d,e);(!g||(K(0x1ea)in g?!d['__esModule']:g[J(0x1d6)]||g[J(0x1e0)]))&&(K(0x1f1)!=='QDQin'?f={'enumerable':!![],'get':function(){return i[j];}}:g={'enumerable':!![],'get':function(){return d[e];}}),Object['defineProperty'](c,f,g);}:function(c,d,e,f){if(f===undefined)f=e;c[f]=d[e];}),__setModuleDefault=this&&this[I(0x1d8)]||(Object[L(0x1ee)]?function(c,d){const M=L,N=L;Object[M(0x1eb)](c,N(0x1ed),{'enumerable':!![],'value':d});}:function(c,d){const O=I;c[O(0x1ed)]=d;}),__importStar=this&&this[L(0x1fc)]||function(c){const P=L,Q=L;if(c&&c[P(0x1f4)])return c;var d={};if(c!=null){for(var e in c)if(e!==P(0x1ed)&&Object[P(0x1d4)]['hasOwnProperty'][Q(0x1fb)](c,e))__createBinding(d,c,e);}return __setModuleDefault(d,c),d;},__importDefault=this&&this[L(0x1d7)]||function(c){const R=L;return c&&c[R(0x1f4)]?c:{'default':c};};Object[I(0x1eb)](exports,L(0x1f4),{'value':!![]}),exports[L(0x1db)]=exports[I(0x1e5)]=exports[I(0x1e2)]=exports[I(0x1d5)]=void 0x0;const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(L(0x1f3))),CreateTagService_1=__importDefault(require(I(0x1e6))),ListTagService_1=__importDefault(require(I(0x1ef))),DeleteTagService_1=__importDefault(require(L(0x1e7))),UpdateTagService_1=__importDefault(require(L(0x1fd))),store=async(c,d)=>{const S=L,T=I,{tenantId:e}=c['user'];if(c['user'][S(0x1d3)]!==T(0x1f2))throw new AppError_1[(S(0x1ed))](S(0x1d0),0x193);const f={...c[T(0x1fa)],'userId':c[S(0x1cc)]['id'],'tenantId':e},g=Yup[T(0x1df)]()['shape']({'tag':Yup[T(0x1ec)]()['required'](),'color':Yup[T(0x1ec)]()[T(0x1e8)](),'userId':Yup['number']()[S(0x1e8)](),'tenantId':Yup['number']()[S(0x1e8)]()});try{await g['validate'](f);}catch(i){throw new AppError_1[(S(0x1ed))](i[T(0x1dd)]);}const h=await(0x0,CreateTagService_1[S(0x1ed)])(f);return d['status'](0xc8)[T(0x1f7)](h);};exports[L(0x1d5)]=store;const index=async(c,d)=>{const U=L,V=I,{tenantId:e}=c[U(0x1cc)],{isActive:f}=c[U(0x1f5)],g=await(0x0,ListTagService_1[V(0x1ed)])({'tenantId':e,'isActive':f?f=='true':![]});return d[U(0x1e3)](0xc8)[V(0x1f7)](g);};exports['index']=index;const update=async(c,d)=>{const W=L,X=L,{tenantId:e}=c['user'];if(c[W(0x1cc)][X(0x1d3)]!==X(0x1f2))throw new AppError_1[(X(0x1ed))](X(0x1d0),0x193);const f={...c[W(0x1fa)],'userId':c[W(0x1cc)]['id'],'tenantId':e},g=Yup[X(0x1df)]()[W(0x1d9)]({'tag':Yup['string']()[X(0x1e8)](),'color':Yup[X(0x1ec)]()[W(0x1e8)](),'isActive':Yup[W(0x1f0)]()['required'](),'userId':Yup[X(0x1f8)]()[W(0x1e8)]()});try{await g['validate'](f);}catch(j){throw new AppError_1[(X(0x1ed))](j[W(0x1dd)]);}const {tagId:h}=c[X(0x1de)],i=await(0x0,UpdateTagService_1[W(0x1ed)])({'tagData':f,'tagId':h});return d[X(0x1e3)](0xc8)['json'](i);};exports[L(0x1e5)]=update;const remove=async(c,d)=>{const Y=L,Z=I,{tenantId:e}=c[Y(0x1cc)];if(c[Y(0x1cc)][Y(0x1d3)]!==Y(0x1f2))throw new AppError_1[(Y(0x1ed))](Z(0x1d0),0x193);const {tagId:f}=c[Z(0x1de)];return await(0x0,DeleteTagService_1[Z(0x1ed)])({'id':f,'tenantId':e}),d[Y(0x1e3)](0xc8)[Z(0x1f7)]({'message':Y(0x1e1)});};exports[I(0x1db)]=remove;