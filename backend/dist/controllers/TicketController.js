'use strict';
const K = b, L = b;
(function (c, d) {
    const I = b, J = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(I(0xae)) / (0x171e + -0xe3b * -0x1 + -0x2558) * (-parseInt(I(0x87)) / (-0x1 * -0x589 + -0xdd5 + 0x84e * 0x1)) + parseInt(I(0x115)) / (-0xa * 0x266 + -0x7e0 + -0x1 * -0x1fdf) * (parseInt(J(0x119)) / (-0x20ce + -0x124c + 0x12 * 0x2d7)) + -parseInt(I(0xa3)) / (-0x1f5e + 0x2d7 * -0x9 + 0x38f2) + parseInt(J(0x95)) / (0x12 * -0x56 + -0x1 * -0x108d + 0x1 * -0xa7b) + parseInt(J(0xec)) / (-0x6 * -0x112 + -0x1ebb + 0x1856) + parseInt(I(0xcb)) / (0x48d * 0x5 + -0x31 * -0x67 + -0x2a70) + -parseInt(I(0xdd)) / (0x14ff + -0x1 * -0x18d + -0x781 * 0x3) * (parseInt(I(0x76)) / (0x764 * 0x2 + 0xfe6 + 0x6a * -0x4a));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0xaf906 + -0x1951 * -0x1f + -0xe2753 * -0x1));
function a() {
    const a1 = [
        'message',
        'ignedTicke',
        'wTicketSer',
        'index',
        'user',
        'contactId',
        'count',
        'scheduleDa',
        'isTransfer',
        'query',
        'mWcRp',
        '../service',
        'eteTicketS',
        'ticketData',
        'remove',
        'nolZb',
        'ssage',
        'erty',
        'pending',
        'showAll',
        'sequelize',
        'Ticket\x20já\x20',
        'Whatsapp',
        'open',
        's/MessageS',
        'ateTicketS',
        'yQJnV',
        'isNotAssig',
        'note',
        'jixSJ',
        ':ticket',
        '15063GkRoiF',
        'enabled',
        'etService',
        'rvices/Del',
        '40rHETqc',
        'name',
        'farewellMe',
        'contact',
        'ervices/Cr',
        'read',
        'jhdNF',
        'searchPara',
        'upa',
        's/TicketSe',
        'mjptO',
        'action',
        'bot',
        'Uvazq',
        '640LpqILm',
        'ticketId',
        'Service',
        'atribuido\x20',
        'ticket',
        'body',
        ':notificat',
        'NotViewAss',
        'ntsfT',
        '../errors/',
        'wgSGE',
        'lcxJK',
        'asIBq',
        'LywYa',
        'fault',
        'rvices/Lis',
        'qBTOq',
        '16TrtUEN',
        'vice',
        'ence',
        'wLogTicket',
        'pupa',
        'date',
        'userIdRequ',
        'pageNumber',
        'delete',
        'para\x20outro',
        'xDUfv',
        'isFarewell',
        'QeWKh',
        'tKTCa',
        '2197134QZHXPL',
        'JkyZx',
        'nXazA',
        'channelId',
        'rvices/Cre',
        'queuesIds',
        'ticket\x20del',
        'ZnpmS',
        'eted',
        '../utils/p',
        'jITUb',
        'fromMe',
        'ezNkq',
        'access',
        '2736235sePwBL',
        'essages',
        'store',
        'whatsappId',
        'rvice',
        'includeNot',
        'stSettings',
        'find',
        'ion',
        'eateMessag',
        'default',
        '80677WLZVxW',
        'emit',
        'setDataVal',
        'getIO',
        'uMjaf',
        '../models/',
        'tickets',
        's/SettingS',
        'utKcX',
        'findOne',
        'bfRrp',
        'tenantId',
        '__esModule',
        'jfcWB',
        'json',
        'withUnread',
        'showLogsTi',
        '../libs/so',
        'Messages',
        'igYVG',
        'channel',
        'rvices/Sho',
        'closed',
        'whUqZ',
        'params',
        'scheduledM',
        'create',
        'eYhCF',
        'defineProp',
        '5923920yLeXQV',
        'SowXp',
        'ervice',
        'est',
        'jRLad',
        'type',
        'WmWUN',
        'QueueDefin',
        'XHkNf',
        'SaoiD',
        'userId',
        'msg',
        'nedUser',
        'zLVpI',
        'eSystemSer',
        'value',
        'Ticket',
        'cket',
        '224739ygUFEQ',
        'protocol',
        'tTicketsSe',
        'status',
        'rvices/Upd',
        'Message',
        'lcOHX',
        'OHCdq',
        '\x20usuário',
        'profile',
        '__importDe',
        'show',
        'findAll',
        'key',
        'sendType',
        '5267206DUSBOH',
        'hasMore',
        'ateLogTick',
        'where',
        'not',
        'rmHdx',
        'update',
        'AppError',
        'xNSsJ',
        'ervices/Li'
    ];
    a = function () {
        return a1;
    };
    return a();
}
var __importDefault = this && this[K(0xe7) + K(0x84)] || function (c) {
    const M = L;
    return c && c[M(0xba)] ? c : { 'default': c };
};
const n = {};
n[L(0xda)] = !![], Object[K(0xca) + K(0x107)](exports, L(0xba), n), exports[K(0xbe) + L(0xdc)] = exports[K(0x104)] = exports[L(0xf2)] = exports[L(0xe8)] = exports[K(0xa5)] = exports[K(0xf9)] = void (0x147 * 0x5 + 0x1e34 + -0x1 * 0x2497);
const sequelize_1 = require(L(0x10a)), socket_1 = require(L(0xbf) + K(0xdc)), Message_1 = __importDefault(require(L(0xb3) + L(0xe2))), CreateLogTicketService_1 = __importDefault(require(K(0x101) + K(0x71) + K(0x99) + K(0xee) + L(0x117))), CreateTicketService_1 = __importDefault(require(K(0x101) + L(0x71) + K(0x99) + K(0x10f) + K(0xcd))), DeleteTicketService_1 = __importDefault(require(K(0x101) + L(0x71) + L(0x118) + L(0x102) + K(0xcd))), ListTicketsService_1 = __importDefault(require(K(0x101) + L(0x71) + K(0x85) + L(0xdf) + K(0xa7))), ShowLogTicketService_1 = __importDefault(require(K(0x101) + K(0x71) + K(0xc3) + K(0x8a) + L(0x78))), ShowTicketService_1 = __importDefault(require(L(0x101) + K(0x71) + L(0xc3) + K(0xf8) + L(0x88))), UpdateTicketService_1 = __importDefault(require(K(0x101) + K(0x71) + K(0xe1) + L(0x10f) + L(0xcd))), Whatsapp_1 = __importDefault(require(K(0xb3) + K(0x10c))), AppError_1 = __importDefault(require(L(0x7f) + K(0xf3))), CreateMessageSystemService_1 = __importDefault(require(K(0x101) + L(0x10e) + K(0x11d) + K(0xac) + K(0xd9) + L(0x88))), pupa_1 = require(L(0x9e) + L(0x70)), Ticket_1 = __importDefault(require(K(0xb3) + K(0xdb))), ListSettingsService_1 = __importDefault(require(K(0x101) + L(0xb5) + L(0xf5) + K(0xa9) + L(0x78))), index = async (e, f) => {
        const N = L, O = K, {
                tenantId: g,
                profile: h
            } = e[N(0xfa)], {
                searchParam: i,
                pageNumber: j,
                status: k,
                date: l,
                showAll: m,
                withUnreadMessages: o,
                queuesIds: p,
                isNotAssignedUser: q,
                includeNotQueueDefined: r
            } = e[O(0xff)], s = e[N(0xfa)]['id'], t = {};
        t[N(0x6f) + 'm'] = i, t[N(0x8e)] = j, t[O(0xe0)] = k, t[N(0x8c)] = l, t[N(0x109)] = m, t[O(0xd5)] = s, t[O(0xbd) + O(0xc0)] = o, t[N(0x9a)] = p, t[O(0x111) + N(0xd7)] = q, t[O(0xa8) + O(0xd2) + 'ed'] = r, t[O(0xb9)] = g, t[O(0xe6)] = h;
        const {
                tickets: u,
                count: v,
                hasMore: w
            } = await (-0x5d4 * -0x2 + 0x5e * 0x13 + -0x12a2, ListTicketsService_1[N(0xad)])(t), x = {};
        return x[O(0xb4)] = u, x[O(0xfc)] = v, x[N(0xed)] = w, f[O(0xe0)](-0x4e * -0x9 + -0x23e7 + 0x21f1)[O(0xbc)](x);
    };
exports[K(0xf9)] = index;
const store = async (i, j) => {
    const P = L, Q = K, k = {};
    k[P(0xb8)] = function (C, D) {
        return C === D;
    }, k[Q(0x97)] = Q(0x83), k[P(0x11f)] = P(0xcc), k[Q(0xf4)] = Q(0x7d) + P(0xf7) + 'ts', k[P(0xf1)] = P(0xc8), k[P(0x113)] = Q(0x10b) + P(0x79) + P(0x90) + Q(0xe5), k[P(0x94)] = Q(0x10d), k[P(0x72)] = Q(0x108), k[P(0xd8)] = function (C, D) {
        return C === D;
    }, k[Q(0xc5)] = Q(0x116), k[Q(0xbb)] = function (C, D) {
        return C != D;
    }, k[Q(0xc9)] = function (C, D) {
        return C == D;
    }, k[Q(0x93)] = function (C, D) {
        return C !== D;
    }, k[Q(0x82)] = P(0x81), k[P(0xa1)] = function (C, D) {
        return C !== D;
    }, k[P(0xb6)] = Q(0xe3), k[Q(0xd4)] = P(0x9c), k[Q(0x105)] = P(0xe4);
    const l = k, {tenantId: m} = i[Q(0xfa)], {
            contactId: o,
            status: p,
            userId: q,
            channel: r,
            channelId: s
        } = i[Q(0x7b)], t = {};
    t[P(0xe0)] = l[Q(0x94)];
    const u = {};
    u[P(0xe0)] = l[P(0x72)];
    const v = {
        [sequelize_1['Op']['or']]: [
            t,
            u
        ]
    };
    v[P(0xfb)] = o, v[P(0xb9)] = m, v[Q(0xc2)] = r;
    const w = {};
    w[Q(0xef)] = v;
    const x = await Ticket_1[P(0xad)][P(0xb7)](w), y = await (0xab2 * 0x2 + -0x1 * 0x1a8f + -0x31 * -0x1b, ListSettingsService_1[Q(0xad)])(m), z = l[Q(0xd8)](y?.[Q(0xaa)](C => {
            const R = Q, S = Q;
            if (l[R(0xb8)](l[R(0x97)], l[S(0x11f)])) {
                const E = {};
                return E[R(0xad)] = j, w && E[R(0xba)] ? i : E;
            } else
                return l[R(0xb8)](C[S(0xea)], l[R(0xf4)]);
        })?.[P(0xda)], l[Q(0xc5)]) ? 'S' : 'N';
    if (x && !!x[P(0xd5)] && l[P(0xbb)](x[Q(0xd5)], q) && l[P(0xc9)](z, 'S')) {
        if (l[Q(0x93)](l[P(0x82)], l[Q(0x82)]))
            return u[P(0xe0)](0x408 + 0x187e + 0x43 * -0x6a)[P(0xbc)](v);
        else
            throw new AppError_1[(P(0xad))](l[Q(0x113)]);
    }
    if (x) {
        if (l[Q(0xa1)](l[P(0xb6)], l[P(0xb6)])) {
            const E = (-0x17f5 + 0x4d9 + 0x131c, F[Q(0xb1)])(), F = {};
            F[P(0x73)] = l[Q(0xf1)], F[Q(0x7a)] = l, E['to'](i + ':' + j[P(0xe0)])[P(0xaf)](k + P(0x114), F);
        } else
            return j[Q(0xe0)](0x5 * 0x351 + 0x131 * 0xb + -0x2 * 0xe74)[P(0xbc)](x);
    }
    const A = {};
    A[Q(0xfb)] = o, A[Q(0xe0)] = p, A[Q(0xd5)] = q, A[P(0xb9)] = m, A[Q(0xc2)] = r, A[Q(0x98)] = s;
    const B = await (0x19b8 + 0x1e70 + -0x4 * 0xe0a, CreateTicketService_1[Q(0xad)])(A);
    if (!q) {
        if (l[P(0xa1)](l[Q(0xd4)], l[P(0x105)])) {
            const E = (0x1b12 + -0x51 * -0x39 + -0x2d1b, socket_1[Q(0xb1)])();
            E['to'](m + ':' + B[Q(0xe0)])[Q(0xaf)](m + Q(0x114), {
                'action': l[Q(0xf1)],
                'ticket': B
            });
        } else
            throw new t[(Q(0xad))](l[P(0x113)]);
    }
    return j[P(0xe0)](-0x75c + -0x19c5 + -0x1 * -0x21e9)[Q(0xbc)](B);
};
exports[K(0xa5)] = store;
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x5f9 + 0x2024 + -0x25ae);
        let h = e[f];
        return h;
    }, b(c, d);
}
const show = async (i, j) => {
    const T = L, U = K, k = {};
    k[T(0xcf)] = T(0x108), k[T(0xd3)] = T(0xc7) + U(0xa4), k[T(0xc1)] = T(0xa2);
    const l = k, {ticketId: m} = i[T(0xc6)], {tenantId: o} = i[T(0xfa)], p = i[T(0xfa)]['id'], q = {};
    q['id'] = m, q[T(0xb9)] = o;
    const r = await (-0x2272 + 0x1 * 0xde + 0x2194, ShowTicketService_1[T(0xad)])(q), s = { [sequelize_1['Op'][T(0xf0)]]: null }, t = {};
    t[U(0xfb)] = r[U(0xfb)], t[U(0xfd) + 'te'] = s, t[T(0xe0)] = l[T(0xcf)];
    const u = t, v = {};
    v[T(0xef)] = u;
    const w = await Message_1[U(0xad)][U(0xe9)](v);
    r[T(0xb0) + 'ue'](l[U(0xd3)], w);
    const x = {};
    return x[U(0xd5)] = p, x[U(0x77)] = m, x[U(0xd0)] = l[U(0xc1)], await (-0x1d8e + -0x9 * -0x25e + 0x840, CreateLogTicketService_1[U(0xad)])(x), j[T(0xe0)](0x23d * 0x3 + 0x623 * -0x1 + -0xd * -0x4)[T(0xbc)](r);
};
exports[K(0xe8)] = show;
const update = async (l, m) => {
    const V = K, W = L, o = {};
    o[V(0xb2)] = function (z, A) {
        return z === A;
    }, o[W(0x100)] = V(0x7d) + V(0xf7) + 'ts', o[V(0x75)] = function (z, A) {
        return z === A;
    }, o[V(0x86)] = V(0xc4), o[W(0x91)] = function (z, A) {
        return z !== A;
    }, o[W(0x9f)] = V(0xd1), o[W(0x80)] = V(0x74), o[W(0x110)] = V(0x108);
    const p = o, {ticketId: q} = l[W(0xc6)], {tenantId: r} = l[W(0xfa)], s = l[W(0xfa)]['id'], {isTransference: t} = l[V(0x7b)], u = { ...l[W(0x7b)] };
    u[V(0xb9)] = r;
    const v = u, w = {};
    w[V(0x103)] = v, w[W(0x77)] = q, w[V(0xfe) + V(0x89)] = t, w[V(0x8d) + W(0xce)] = s;
    const {ticket: x} = await (-0x18b3 * 0x1 + -0xa82 + 0x2335, UpdateTicketService_1[V(0xad)])(w);
    if (p[V(0x75)](v[W(0xe0)], p[V(0x86)])) {
        const y = {};
        y['id'] = x[W(0xa6)], y[V(0xb9)] = r;
        const z = {};
        z[W(0xef)] = y;
        const A = await Whatsapp_1[W(0xad)][V(0xb7)](z);
        if (A?.[V(0x11b) + V(0x106)]) {
            if (p[V(0x91)](p[W(0x9f)], p[W(0x9f)]))
                return p[V(0xb2)](u[W(0xea)], p[V(0x100)]);
            else {
                const C = {};
                C[V(0xde)] = x[V(0xde)], C[W(0x11a)] = x[V(0x11c)][W(0x11a)];
                const D = (0xed7 + -0x9ae + -0x529, pupa_1[V(0x8b)])(A[W(0x11b) + V(0x106)] || '', C), E = {};
                E[W(0x7b)] = D, E[W(0xa0)] = !![], E[V(0x11e)] = !![];
                const F = {};
                F[W(0xd6)] = E, F[V(0xb9)] = r, F[W(0x7a)] = x, F[W(0xd5)] = l[W(0xfa)]['id'], F[V(0xeb)] = p[V(0x80)], F[V(0xe0)] = p[V(0x110)], F[V(0xfe)] = ![], F[V(0x112)] = ![];
                const G = F;
                await (-0x1744 + -0x653 * -0x4 + -0x208, CreateMessageSystemService_1[V(0xad)])(G);
                const H = {};
                H[W(0x92) + V(0xe2)] = !![], await x[W(0xf2)](H);
            }
        }
    }
    return m[W(0xe0)](-0x3b6 * -0x1 + 0x24bc + -0x2 * 0x13d5)[V(0xbc)](x);
};
exports[K(0xf2)] = update;
const remove = async (f, g) => {
    const X = L, Y = L, h = {};
    h[X(0x96)] = X(0x8f), h[Y(0x7e)] = X(0x9b) + Y(0x9d);
    const i = h, {ticketId: j} = f[Y(0xc6)], {tenantId: k} = f[Y(0xfa)], l = f[X(0xfa)]['id'], m = {};
    m['id'] = j, m[X(0xb9)] = k, m[X(0xd5)] = l;
    const o = await (0x1 * -0x229d + -0x23bf + 0x465c, DeleteTicketService_1[X(0xad)])(m), p = (0x478 + -0x13e7 + 0xf6f, socket_1[Y(0xb1)])();
    p['to'](k + ':' + o[X(0xe0)])['to'](k + ':' + j)['to'](k + (Y(0x7c) + X(0xab)))[Y(0xaf)](k + Y(0x114), {
        'action': i[X(0x96)],
        'ticketId': +j
    });
    const q = {};
    return q[X(0xf6)] = i[X(0x7e)], g[X(0xe0)](0x925 * 0x1 + -0x4 * 0x99b + 0x1e0f)[Y(0xbc)](q);
};
exports[K(0x104)] = remove;
const showLogsTicket = async (d, e) => {
    const Z = K, a0 = L, {ticketId: f} = d[Z(0xc6)], g = {};
    g[a0(0x77)] = f;
    const h = await (0x1d * -0x5f + 0x1c * 0x41 + -0x1 * -0x3a7, ShowLogTicketService_1[Z(0xad)])(g);
    return e[Z(0xe0)](-0x2281 + -0x5bb + 0x2904)[Z(0xbc)](h);
};
exports[L(0xbe) + K(0xdc)] = showLogsTicket;