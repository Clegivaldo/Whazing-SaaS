'use strict';
const K = b, L = b;
function a() {
    const a1 = [
        'kJQRJ',
        'OSQgE',
        'protocol',
        'BvvsR',
        'Zhovt',
        's/TicketSe',
        'update',
        'rvices/Del',
        'GnhNj',
        'date',
        'rvices/Lis',
        'dZrGy',
        'userId',
        'VscOY',
        'eSystemSer',
        'ervice',
        'EAKLq',
        'index',
        'create',
        'remove',
        'ticket',
        'tickets',
        'NotViewAss',
        'eteTicketS',
        'userIdRequ',
        'whatsappId',
        'findAll',
        'params',
        '15025008kyqfmQ',
        'count',
        'ticket\x20del',
        'essages',
        'sendType',
        'enabled',
        '7jyCMqP',
        'ervices/Li',
        'AppError',
        's/SettingS',
        'undPZ',
        'QueueDefin',
        'eateMessag',
        'Ihlqt',
        'rvices/Upd',
        'rvice',
        'WhDnD',
        '../libs/so',
        'MIrWz',
        '../models/',
        'searchPara',
        '1672IlVSox',
        'upa',
        'lkoHj',
        '../utils/p',
        'fromMe',
        'bot',
        '__esModule',
        'default',
        'scheduleDa',
        'stSettings',
        'pageNumber',
        'ticketId',
        'fault',
        'JnimD',
        'Whatsapp',
        'getIO',
        'farewellMe',
        'includeNot',
        'msg',
        'tenantId',
        '152oRCxVf',
        'etService',
        'RNMSl',
        'wTicketSer',
        'Ticket\x20já\x20',
        'store',
        'UBUqG',
        'nedUser',
        'status',
        '1781382QyMPCj',
        'rvices/Sho',
        'query',
        's/MessageS',
        'findOne',
        '15315YROqdp',
        'isNotAssig',
        'closed',
        'QSAsA',
        'erty',
        'not',
        'Messages',
        '1698270iSgStt',
        'find',
        'channelId',
        'isFarewell',
        'queuesIds',
        'channel',
        'open',
        'ence',
        'WtwXV',
        'isTransfer',
        'message',
        'emit',
        'show',
        'value',
        'ZAqEg',
        '30717pTTiWz',
        'para\x20outro',
        'defineProp',
        'tTicketsSe',
        'rhGJc',
        'setDataVal',
        'delete',
        'sequelize',
        'contact',
        'action',
        '2933457KpvASc',
        'ignedTicke',
        'ervices/Cr',
        'UUFYR',
        '../errors/',
        ':ticket',
        'abvZm',
        '482SYQwep',
        'ion',
        'body',
        'mpNln',
        'profile',
        'HLhpc',
        '\x20usuário',
        'showLogsTi',
        '__importDe',
        'pupa',
        'dSthq',
        'pending',
        'Message',
        'key',
        'ZRNAm',
        'sMHmg',
        'ssage',
        'Ticket',
        'wLogTicket',
        'ZULlc',
        'cket',
        'vice',
        'rvices/Cre',
        'ticketData',
        'access',
        'yNeAV',
        'note',
        'eted',
        'withUnread',
        'shhmA',
        'ateLogTick',
        '1868NIqaTQ',
        'where',
        'ateTicketS',
        'est',
        'hasMore',
        'DABYT',
        '66rtawdW',
        'scheduledM',
        'contactId',
        'read',
        ':notificat',
        'name',
        'showAll',
        'type',
        '../service',
        'json',
        'atribuido\x20',
        'vcFBA',
        'Service',
        'BdfGY',
        'user',
        'GvaMm'
    ];
    a = function () {
        return a1;
    };
    return a();
}
(function (c, d) {
    const I = b, J = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(I(0x10c)) / (-0x120 * -0xb + -0x469 * -0x2 + -0x1531) * (-parseInt(J(0x12b)) / (0xdcc * -0x1 + -0xcf4 + 0xa * 0x2ad)) + parseInt(J(0x105)) / (0x1 * 0x2502 + -0x57c + 0x1 * -0x1f83) + -parseInt(J(0xd7)) / (0x2601 * -0x1 + -0x57 * -0x11 + 0x203e) * (-parseInt(I(0xe5)) / (0x23ef + -0x2bc + -0x212e)) + -parseInt(I(0xe0)) / (-0x8db * 0x1 + -0x80 * 0x11 + 0x5cb * 0x3) * (-parseInt(I(0x163)) / (-0x2 * -0x1237 + 0x2 * -0x1241 + 0x1b)) + parseInt(I(0xc3)) / (0x1c94 * 0x1 + 0x9 * 0x153 + -0x2877 * 0x1) * (-parseInt(I(0xfb)) / (0x86f * -0x4 + -0xc4 * 0x1 + 0x2289)) + -parseInt(I(0xec)) / (0x875 * -0x1 + 0xee1 + 0x331 * -0x2) * (-parseInt(J(0x131)) / (0x5dd + -0x11 * -0x22d + -0x119 * 0x27)) + -parseInt(J(0x15d)) / (-0x22f5 + 0x26c6 + -0x3c5);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x1 * 0x195c58 + 0x5 * 0x1f8a3 + 0x1 * -0x158ffc));
var __importDefault = this && this[K(0x114) + K(0xcf)] || function (c) {
    const M = K;
    return c && c[M(0xc9)] ? c : { 'default': c };
};
const n = {};
n[L(0xf9)] = !![], Object[K(0xfd) + K(0xe9)](exports, K(0xc9), n), exports[K(0x113) + L(0x120)] = exports[K(0x154)] = exports[L(0x147)] = exports[K(0xf8)] = exports[L(0xdc)] = exports[L(0x152)] = void (-0x2130 + -0x57c * 0x6 + 0x4218);
const sequelize_1 = require(L(0x102)), socket_1 = require(K(0xbf) + K(0x120)), Message_1 = __importDefault(require(K(0xc1) + K(0x118))), CreateLogTicketService_1 = __importDefault(require(K(0x139) + K(0x146) + L(0x122) + L(0x12a) + K(0xd8))), CreateTicketService_1 = __importDefault(require(K(0x139) + K(0x146) + K(0x122) + L(0x12d) + K(0x150))), DeleteTicketService_1 = __importDefault(require(L(0x139) + L(0x146) + K(0x148) + L(0x158) + K(0x150))), ListTicketsService_1 = __importDefault(require(K(0x139) + K(0x146) + L(0x14b) + K(0xfe) + L(0xbd))), ShowLogTicketService_1 = __importDefault(require(L(0x139) + K(0x146) + L(0xe1) + L(0x11e) + K(0x13d))), ShowTicketService_1 = __importDefault(require(L(0x139) + L(0x146) + K(0xe1) + L(0xda) + K(0x121))), UpdateTicketService_1 = __importDefault(require(L(0x139) + L(0x146) + K(0xbc) + L(0x12d) + K(0x150))), Whatsapp_1 = __importDefault(require(K(0xc1) + K(0xd1))), AppError_1 = __importDefault(require(K(0x109) + K(0x165))), CreateMessageSystemService_1 = __importDefault(require(L(0x139) + K(0xe3) + L(0x107) + K(0xba) + L(0x14f) + L(0x121))), pupa_1 = require(K(0xc6) + K(0xc4)), Ticket_1 = __importDefault(require(L(0xc1) + L(0x11d))), ListSettingsService_1 = __importDefault(require(K(0x139) + L(0xb7) + K(0x164) + K(0xcc) + K(0x13d))), index = async (e, f) => {
        const N = K, O = L, {
                tenantId: g,
                profile: h
            } = e[N(0x13f)], {
                searchParam: i,
                pageNumber: j,
                status: k,
                date: l,
                showAll: m,
                withUnreadMessages: o,
                queuesIds: p,
                isNotAssignedUser: q,
                includeNotQueueDefined: r
            } = e[N(0xe2)], s = e[O(0x13f)]['id'], t = {};
        t[O(0xc2) + 'm'] = i, t[O(0xcd)] = j, t[O(0xdf)] = k, t[O(0x14a)] = l, t[O(0x137)] = m, t[O(0x14d)] = s, t[N(0x128) + N(0xeb)] = o, t[N(0xf0)] = p, t[O(0xe6) + O(0xde)] = q, t[O(0xd4) + N(0xb9) + 'ed'] = r, t[O(0xd6)] = g, t[N(0x110)] = h;
        const {
                tickets: u,
                count: v,
                hasMore: w
            } = await (-0xc8 * -0x2 + -0xbdb * 0x2 + 0x1626, ListTicketsService_1[O(0xca)])(t), x = {};
        return x[N(0x156)] = u, x[O(0x15e)] = v, x[N(0x12f)] = w, f[O(0xdf)](-0x204f + 0x1ed + 0x1f2a * 0x1)[O(0x13a)](x);
    };
exports[L(0x152)] = index;
const store = async (i, j) => {
    const P = K, Q = K, k = {};
    k[P(0x11f)] = P(0x153), k[Q(0xdd)] = function (C, D) {
        return C === D;
    }, k[Q(0x13e)] = P(0x11a), k[Q(0xf4)] = Q(0x141), k[Q(0x14c)] = function (C, D) {
        return C === D;
    }, k[Q(0x140)] = Q(0x157) + Q(0x106) + 'ts', k[Q(0x129)] = P(0xf2), k[P(0x116)] = Q(0x117), k[Q(0x14e)] = function (C, D) {
        return C === D;
    }, k[Q(0x144)] = P(0x162), k[P(0x13c)] = function (C, D) {
        return C != D;
    }, k[P(0x111)] = function (C, D) {
        return C == D;
    }, k[P(0x11b)] = Q(0xdb) + P(0x13b) + P(0xfc) + Q(0x112), k[Q(0xb8)] = function (C, D) {
        return C === D;
    }, k[P(0xff)] = P(0x108), k[Q(0x130)] = P(0xbe);
    const l = k, {tenantId: m} = i[P(0x13f)], {
            contactId: o,
            status: p,
            userId: q,
            channel: r,
            channelId: s
        } = i[Q(0x10e)], t = {};
    t[Q(0xdf)] = l[P(0x129)];
    const u = {};
    u[P(0xdf)] = l[Q(0x116)];
    const v = {
        [sequelize_1['Op']['or']]: [
            t,
            u
        ]
    };
    v[Q(0x133)] = o, v[Q(0xd6)] = m, v[Q(0xf1)] = r;
    const w = {};
    w[P(0x12c)] = v;
    const x = await Ticket_1[P(0xca)][P(0xe4)](w), y = await (-0x5 * 0x416 + 0x1d35 * 0x1 + -0x8c7, ListSettingsService_1[Q(0xca)])(m), z = l[Q(0x14e)](y?.[Q(0xed)](C => {
            const R = Q, S = P;
            if (l[R(0xdd)](l[S(0x13e)], l[S(0xf4)])) {
                const E = (0x1 * 0xd09 + 0x1 * -0x148d + -0x1 * -0x784, F[S(0xd2)])(), F = {};
                F[S(0x104)] = l[R(0x11f)], F[R(0x155)] = l, E['to'](i + ':' + j[S(0xdf)])[R(0xf7)](k + R(0x10a), F);
            } else
                return l[S(0x14c)](C[R(0x119)], l[S(0x140)]);
        })?.[P(0xf9)], l[P(0x144)]) ? 'S' : 'N';
    if (x && !!x[Q(0x14d)] && l[P(0x13c)](x[P(0x14d)], q) && l[Q(0x111)](z, 'S'))
        throw new AppError_1[(P(0xca))](l[P(0x11b)]);
    if (x)
        return j[P(0xdf)](0x7f * -0xb + 0x6 * 0x3a4 + -0xf9b)[P(0x13a)](x);
    const A = {};
    A[P(0x133)] = o, A[Q(0xdf)] = p, A[P(0x14d)] = q, A[Q(0xd6)] = m, A[P(0xf1)] = r, A[Q(0xee)] = s;
    const B = await (-0x1 * -0x10ff + -0xaf8 + -0x607, CreateTicketService_1[Q(0xca)])(A);
    if (!q) {
        if (l[Q(0xb8)](l[P(0xff)], l[Q(0x130)]))
            return u[Q(0xdf)](-0x6 * 0x2aa + -0xabd * 0x1 + 0x1b81)[P(0x13a)](v);
        else {
            const D = (-0x1 * 0x12cd + -0x1b1a * 0x1 + 0x2de7, socket_1[P(0xd2)])();
            D['to'](m + ':' + B[Q(0xdf)])[P(0xf7)](m + P(0x10a), {
                'action': l[Q(0x11f)],
                'ticket': B
            });
        }
    }
    return j[P(0xdf)](0x7e7 + -0x1 * -0xfe9 + -0x1708)[Q(0x13a)](B);
};
exports[L(0xdc)] = store;
const show = async (i, j) => {
    const T = L, U = K, k = {};
    k[T(0xc0)] = U(0x117), k[U(0x10f)] = U(0x132) + T(0x160), k[U(0x10b)] = U(0x124);
    const l = k, {ticketId: m} = i[U(0x15c)], {tenantId: o} = i[T(0x13f)], p = i[U(0x13f)]['id'], q = {};
    q['id'] = m, q[T(0xd6)] = o;
    const r = await (-0x1 * -0x20ab + 0x26e * 0xb + 0x1 * -0x3b65, ShowTicketService_1[T(0xca)])(q), s = { [sequelize_1['Op'][U(0xea)]]: null }, t = {};
    t[T(0x133)] = r[U(0x133)], t[U(0xcb) + 'te'] = s, t[T(0xdf)] = l[T(0xc0)];
    const u = t, v = {};
    v[U(0x12c)] = u;
    const w = await Message_1[U(0xca)][T(0x15b)](v);
    r[T(0x100) + 'ue'](l[U(0x10f)], w);
    const x = {};
    return x[T(0x14d)] = p, x[U(0xce)] = m, x[U(0x138)] = l[T(0x10b)], await (-0x1215 + 0x1e6f + -0x41e * 0x3, CreateLogTicketService_1[U(0xca)])(x), j[U(0xdf)](-0x1 * -0x1341 + 0x18d4 + -0x2b4d)[T(0x13a)](r);
};
exports[L(0xf8)] = show;
const update = async (l, m) => {
    const V = L, W = L, o = {};
    o[V(0xd9)] = function (z, A) {
        return z === A;
    }, o[V(0xc5)] = V(0x157) + V(0x106) + 'ts', o[V(0x145)] = function (z, A) {
        return z === A;
    }, o[W(0xfa)] = V(0xe7), o[W(0x125)] = function (z, A) {
        return z !== A;
    }, o[W(0xe8)] = V(0xd0), o[W(0x151)] = V(0xc8), o[W(0xbb)] = V(0x117);
    const p = o, {ticketId: q} = l[W(0x15c)], {tenantId: r} = l[V(0x13f)], s = l[W(0x13f)]['id'], {isTransference: t} = l[V(0x10e)], u = { ...l[V(0x10e)] };
    u[V(0xd6)] = r;
    const v = u, w = {};
    w[W(0x123)] = v, w[V(0xce)] = q, w[W(0xf5) + V(0xf3)] = t, w[W(0x159) + W(0x12e)] = s;
    const {ticket: x} = await (0x74d * 0x5 + -0x4 * 0x833 + -0xd * 0x49, UpdateTicketService_1[W(0xca)])(w);
    if (p[V(0x145)](v[W(0xdf)], p[V(0xfa)])) {
        const y = {};
        y['id'] = x[V(0x15a)], y[V(0xd6)] = r;
        const z = {};
        z[V(0x12c)] = y;
        const A = await Whatsapp_1[V(0xca)][W(0xe4)](z);
        if (A?.[W(0xd3) + W(0x11c)]) {
            if (p[W(0x125)](p[W(0xe8)], p[V(0xe8)]))
                return p[W(0xd9)](u[V(0x119)], p[V(0xc5)]);
            else {
                const C = {};
                C[V(0x143)] = x[W(0x143)], C[W(0x136)] = x[W(0x103)][V(0x136)];
                const D = (-0x143c + -0x1da1 + 0x17 * 0x22b, pupa_1[W(0x115)])(A[W(0xd3) + W(0x11c)] || '', C), E = {};
                E[V(0x10e)] = D, E[W(0xc7)] = !![], E[W(0x134)] = !![];
                const F = {};
                F[W(0xd5)] = E, F[W(0xd6)] = r, F[V(0x155)] = x, F[V(0x14d)] = l[V(0x13f)]['id'], F[W(0x161)] = p[V(0x151)], F[W(0xdf)] = p[W(0xbb)], F[W(0xf5)] = ![], F[V(0x126)] = ![];
                const G = F;
                await (-0xc * -0x16f + 0x10 * -0x265 + 0x151c, CreateMessageSystemService_1[V(0xca)])(G);
                const H = {};
                H[W(0xef) + W(0x118)] = !![], await x[W(0x147)](H);
            }
        }
    }
    return m[V(0xdf)](0x225 * 0x1 + -0x305 + -0x35 * -0x8)[V(0x13a)](x);
};
exports[L(0x147)] = update;
const remove = async (f, g) => {
    const X = K, Y = L, h = {};
    h[X(0x149)] = X(0x101), h[X(0x142)] = X(0x15f) + X(0x127);
    const i = h, {ticketId: j} = f[Y(0x15c)], {tenantId: k} = f[Y(0x13f)], l = f[Y(0x13f)]['id'], m = {};
    m['id'] = j, m[X(0xd6)] = k, m[Y(0x14d)] = l;
    const o = await (0x3 * -0x2f2 + 0x168d + -0xdb7 * 0x1, DeleteTicketService_1[Y(0xca)])(m), p = (-0x2371 + -0x1ae * 0x10 + 0x3e51, socket_1[X(0xd2)])();
    p['to'](k + ':' + o[Y(0xdf)])['to'](k + ':' + j)['to'](k + (Y(0x135) + Y(0x10d)))[X(0xf7)](k + Y(0x10a), {
        'action': i[X(0x149)],
        'ticketId': +j
    });
    const q = {};
    return q[Y(0xf6)] = i[Y(0x142)], g[Y(0xdf)](0x4a7 + 0x1477 * 0x1 + -0x1856)[Y(0x13a)](q);
};
exports[L(0x154)] = remove;
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x9e * -0x5 + -0xc8c + -0xa2d * -0x1);
        let h = e[f];
        return h;
    }, b(c, d);
}
const showLogsTicket = async (d, e) => {
    const Z = K, a0 = K, {ticketId: f} = d[Z(0x15c)], g = {};
    g[Z(0xce)] = f;
    const h = await (-0x10 * -0x15b + -0x4a6 + 0x2 * -0x885, ShowLogTicketService_1[Z(0xca)])(g);
    return e[a0(0xdf)](0x181 + -0x5c * 0x2f + -0x102b * -0x1)[a0(0x13a)](h);
};
exports[L(0x113) + L(0x120)] = showLogsTicket;