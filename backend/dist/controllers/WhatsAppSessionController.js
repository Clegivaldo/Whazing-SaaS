'use strict';const o=b,q=b;(function(c,d){const m=b,n=b,e=c();while(!![]){try{const f=-parseInt(m(0xae))/0x1*(-parseInt(n(0x89))/0x2)+parseInt(m(0xa0))/0x3+parseInt(m(0xaa))/0x4+-parseInt(m(0xa2))/0x5+parseInt(m(0x97))/0x6+-parseInt(m(0x93))/0x7+-parseInt(n(0xa4))/0x8;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x2865f));var __importDefault=this&&this[o(0x94)]||function(c){const p=o;return c&&c[p(0xa7)]?c:{'default':c};};Object['defineProperty'](exports,'__esModule',{'value':!![]});function a(){const x=['logger','instagram','1311625ZpTdfr','__importDefault','whatsapp','Starting\x20session.','1644126ocQCBO','user','removeWbot','type','../libs/tbot','error','../services/WhatsappService/UpdateWhatsAppService','json','update','979176MtVTLQ','setValue','1606645pHgUGq','../services/WhatsappService/ShowWhatsAppService','2836472JYTNcI','getInstaBot','telegram','__esModule','emit','Erro\x20ao\x20fazer\x20logout\x20da\x20conexÃ£o','391940LtbWSf','tenantId','removeInstaBot','removeTbot','93datnwK','DISCONNECTED','StartWhatsAppSession','default','../libs/InstaBot','params','catch','-retryQrCode','7104orIDHN','destroy','logout','Session\x20disconnected.','../utils/logger','ERR_NO_WAPP_FOUND','../libs/wbot-baileys','getIO'];a=function(){return x;};return a();}const ShowWhatsAppService_1=__importDefault(require(q(0xa3))),StartWhatsAppSession_1=require('../services/WbotServices/StartWhatsAppSession'),UpdateWhatsAppService_1=__importDefault(require(o(0x9d))),redisClient_1=require('../libs/redisClient'),logger_1=require(o(0x8d)),tbot_1=require(o(0x9b)),InstaBot_1=require(o(0x85)),AppError_1=__importDefault(require('../errors/AppError')),socket_1=require('../libs/socket'),wbot_baileys_1=require(o(0x8f)),store=async(c,d)=>{const r=q,s=o,{whatsappId:e}=c[r(0x86)],{tenantId:f}=c[r(0x98)],g=await(0x0,ShowWhatsAppService_1['default'])({'id':e,'tenantId':f,'isInternal':!![]});return(0x0,StartWhatsAppSession_1['StartWhatsAppSession'])(g),d['status'](0xc8)[r(0x9e)]({'message':s(0x96)});},update=async(c,d)=>{const t=q,u=o,{whatsappId:e}=c['params'],{tenantId:f}=c[t(0x98)],{whatsapp:g}=await(0x0,UpdateWhatsAppService_1['default'])({'whatsappId':e,'whatsappData':{'session':''},'tenantId':f});return(0x0,StartWhatsAppSession_1[u(0x83)])(g),d['status'](0xc8)[u(0x9e)]({'message':'Starting\x20session.'});},remove=async(c,d)=>{const v=q,w=q,{whatsappId:e}=c[v(0x86)],{tenantId:f}=c[w(0x98)],g=await(0x0,ShowWhatsAppService_1[w(0x84)])({'id':e,'tenantId':f}),h=(0x0,socket_1[w(0x90)])();try{if(g['type']===w(0x95)){const i=(0x0,wbot_baileys_1['getWbot'])(g['id']);await(0x0,redisClient_1[v(0xa1)])(g['id']+w(0x88),0x0),await i[w(0x8b)](),i['ws']['close'](),(0x0,wbot_baileys_1[v(0x99)])(g['id']);}if(g[v(0x9a)]==='telegram'){const j=(0x0,tbot_1['getTbot'])(g['id']);await j[w(0xa6)]['logOut']()[v(0x87)](k=>logger_1[v(0x91)][w(0x9c)](w(0xa9),k)),(0x0,tbot_1[v(0xad)])(g['id']);}if(g[v(0x9a)]===w(0x92)){const k=(0x0,InstaBot_1[v(0xa5)])(g['id']);await k[v(0x8a)](),(0x0,InstaBot_1[v(0xac)])(g);}await g[v(0x9f)]({'status':v(0x82),'session':'','qrcode':null,'retries':0x0});}catch(l){logger_1[w(0x91)][v(0x9c)](l),await g['update']({'status':w(0x82),'session':'','qrcode':null,'retries':0x0}),h[v(0xa8)](g[v(0xab)]+':whatsappSession',{'action':v(0x9f),'session':g});throw new AppError_1[(v(0x84))](v(0x8e),0x194);}return d['status'](0xc8)[v(0x9e)]({'message':w(0x8c)});};function b(c,d){const e=a();return b=function(f,g){f=f-0x82;let h=e[f];return h;},b(c,d);}exports[q(0x84)]={'store':store,'remove':remove,'update':update};