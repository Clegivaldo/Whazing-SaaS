'use strict';const I=b,N=b;(function(c,d){const G=b,H=b,e=c();while(!![]){try{const f=-parseInt(G(0x14d))/0x1*(-parseInt(G(0x136))/0x2)+-parseInt(H(0x12f))/0x3*(-parseInt(G(0x14b))/0x4)+-parseInt(G(0x13a))/0x5+parseInt(G(0x118))/0x6+-parseInt(G(0x11e))/0x7+-parseInt(G(0x117))/0x8*(-parseInt(G(0x12b))/0x9)+parseInt(G(0x14a))/0xa*(parseInt(H(0x124))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x7e8f1));function b(c,d){const e=a();return b=function(f,g){f=f-0x114;let h=e[f];return h;},b(c,d);}function a(){const aa=['../services/GroupServices/DeleteGroupService','yup','../services/GroupServices/ListGroupService','object','findOne','22IphvqR','uNyZW','message','params','removeUser','__esModule','string','36PzYNzj','../errors/AppError','user','USER_GRPUP_ALREADY_EXIST','367515TnuLjm','call','SmwQE','store','__importDefault','number','USER_GROUP_NOT_FOUND','117398lMNOAI','shape','required','body','3426350GqNqmf','default','status','ZpcMB','validate','../services/GroupServices/CreateGroupService','json','remove','boolean','profile','defineProperty','__setModuleDefault','update','admin','storeUser','listUserGroups','108860bYvArX','8vDZckg','create','5RQhjxI','yrgbl','ERR_NO_PERMISSION','prototype','listUserbyGroup','hasOwnProperty','__createBinding','1068568AZBzBJ','4825008HaqvHQ','__importStar','Group\x20deleted','getOwnPropertyDescriptor','get','index','4865518IDvMlK'];a=function(){return aa;};return a();}var __createBinding=this&&this[I(0x116)]||(Object['create']?function(c,d,e,f){const J=I,K=I;if(f===undefined)f=e;var g=Object[J(0x11b)](d,e);(!g||(J(0x11c)in g?!d[K(0x129)]:g['writable']||g['configurable']))&&('EiQpi'!=='LYbNt'?g={'enumerable':!![],'get':function(){const L=K,M=K;if(L(0x14e)===L(0x14e))return d[e];else throw new d[(L(0x13b))]('USER_GRPUP_ALREADY_EXIST',0x190);}}:f={'enumerable':!![],'get':function(){return i[j];}}),Object[J(0x144)](c,f,g);}:function(c,d,e,f){if(f===undefined)f=e;c[f]=d[e];}),__setModuleDefault=this&&this[N(0x145)]||(Object[I(0x14c)]?function(c,d){const O=I,P=N;Object[O(0x144)](c,P(0x13b),{'enumerable':!![],'value':d});}:function(c,d){const Q=N;c[Q(0x13b)]=d;}),__importStar=this&&this[N(0x119)]||function(c){const R=N,S=I;if(c&&c[R(0x129)])return c;var d={};if(c!=null){for(var e in c)if(e!=='default'&&Object[R(0x150)][R(0x115)]['call'](c,e))__createBinding(d,c,e);}return __setModuleDefault(d,c),d;},__importDefault=this&&this[I(0x133)]||function(c){const T=I;return c&&c[T(0x129)]?c:{'default':c};};Object[N(0x144)](exports,I(0x129),{'value':!![]}),exports[I(0x128)]=exports[I(0x148)]=exports[N(0x114)]=exports[N(0x149)]=exports[N(0x141)]=exports[I(0x146)]=exports[I(0x11d)]=exports[N(0x132)]=void 0x0;const Yup=__importStar(require(N(0x120))),AppError_1=__importDefault(require(N(0x12c))),CreateGroupService_1=__importDefault(require(I(0x13f))),ListGroupService_1=__importDefault(require(N(0x121))),UpdateGroupService_1=__importDefault(require('../services/GroupServices/UpdateGroupService')),DeleteGroupService_1=__importDefault(require(I(0x11f))),ListUserGroupService_1=__importDefault(require('../services/GroupServices/ListUserGroupService')),FindUserByGroupService_1=__importDefault(require('../services/UserGroupService/FindUserByGroupService')),UsersGroups_1=__importDefault(require('../models/UsersGroups')),store=async(c,d)=>{const U=N,V=I,{tenantId:e}=c[U(0x12d)];if(c[U(0x12d)][U(0x143)]!==U(0x147)){if('uNyZW'!==V(0x125))throw new d[(V(0x13b))](U(0x135),0x194);else throw new AppError_1[(V(0x13b))](V(0x14f),0x193);}const f={...c[V(0x139)],'userId':c['user']['id'],'tenantId':e},g=Yup[U(0x122)]()[V(0x137)]({'group':Yup['string']()[V(0x138)](),'userId':Yup['number']()[U(0x138)](),'tenantId':Yup[U(0x134)]()[U(0x138)]()});try{if(U(0x131)===U(0x131))await g[U(0x13e)](f);else{if(n&&o[U(0x129)])return p;var k={};if(q!=null){for(var l in r)if(l!==V(0x13b)&&s['prototype'][V(0x115)][V(0x130)](t,l))u(k,v,l);}return w(k,x),k;}}catch(k){throw new AppError_1[(U(0x13b))](k[V(0x126)]);}const h=await(0x0,CreateGroupService_1['default'])(f);return d[U(0x13c)](0xc8)[U(0x140)](h);};exports['store']=store;const index=async(c,d)=>{const W=N,X=N,{tenantId:e}=c[W(0x12d)],f=await(0x0,ListGroupService_1['default'])({'tenantId':e});return d[X(0x13c)](0xc8)[X(0x140)](f);};exports[I(0x11d)]=index;const update=async(c,d)=>{const Y=N,Z=N,{tenantId:e}=c[Y(0x12d)];if(c[Y(0x12d)][Z(0x143)]!=='admin')throw new AppError_1['default'](Y(0x14f),0x193);const f={...c[Y(0x139)],'userId':c['user']['id'],'tenantId':e},g=Yup[Y(0x122)]()[Z(0x137)]({'group':Yup[Z(0x12a)]()[Z(0x138)](),'isActive':Yup[Y(0x142)]()['required'](),'userId':Yup['number']()['required']()});try{'ZpcMB'!==Z(0x13d)?e[Z(0x13b)]=f:await g['validate'](f);}catch(k){throw new AppError_1[(Z(0x13b))](k[Y(0x126)]);}const {groupId:h}=c['params'],i=await(0x0,UpdateGroupService_1[Z(0x13b)])({'groupData':f,'groupId':h});return d[Z(0x13c)](0xc8)['json'](i);};exports[N(0x146)]=update;const remove=async(c,d)=>{const a0=I,a1=N,{tenantId:e}=c['user'];if(c[a0(0x12d)][a0(0x143)]!==a1(0x147))throw new AppError_1[(a0(0x13b))](a1(0x14f),0x193);const {groupId:f}=c[a1(0x127)];return await(0x0,DeleteGroupService_1[a0(0x13b)])({'id':f,'tenantId':e}),d[a0(0x13c)](0xc8)['json']({'message':a0(0x11a)});};exports['remove']=remove;const listUserGroups=async(c,d)=>{const a2=N,a3=I,{tenantId:e,id:f}=c['user'],g=await(0x0,ListUserGroupService_1['default'])({'tenantId':e,'userId':f});return d[a2(0x13c)](0xc8)[a2(0x140)](g);};exports[N(0x149)]=listUserGroups;const listUserbyGroup=async(c,d)=>{const a4=I,a5=I,{groupId:e}=c['params'],f=await(0x0,FindUserByGroupService_1[a4(0x13b)])(Number(e));return d[a4(0x13c)](0xc8)['json'](f);};exports[I(0x114)]=listUserbyGroup;const storeUser=async(c,d)=>{const a6=I,a7=N,{groupId:e,userId:f}=c[a6(0x139)];let g=await UsersGroups_1['default'][a6(0x123)]({'where':{'userId':f,'groupId':e}});if(g)throw new AppError_1['default'](a7(0x12e),0x190);return g=await UsersGroups_1[a7(0x13b)][a6(0x14c)]({'userId':f,'groupId':e}),d[a7(0x13c)](0xc8)[a6(0x140)](g);};exports[I(0x148)]=storeUser;const removeUser=async(c,d)=>{const a8=N,a9=N,{groupId:e,userId:f}=c[a8(0x127)],g=await UsersGroups_1[a9(0x13b)]['findOne']({'where':{'userId':f,'groupId':e}});if(!g)throw new AppError_1[(a8(0x13b))](a8(0x135),0x194);return await g['destroy'](),d[a9(0x13c)](0xc8)[a8(0x140)](g);};exports[N(0x128)]=removeUser;